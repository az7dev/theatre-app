var uOe=Object.defineProperty;var cOe=(t,e,n)=>e in t?uOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ki=(t,e,n)=>(cOe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y0e={exports:{}},q3={},Z0e={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP=Symbol.for("react.element"),dOe=Symbol.for("react.portal"),hOe=Symbol.for("react.fragment"),pOe=Symbol.for("react.strict_mode"),fOe=Symbol.for("react.profiler"),mOe=Symbol.for("react.provider"),vOe=Symbol.for("react.context"),gOe=Symbol.for("react.forward_ref"),yOe=Symbol.for("react.suspense"),bOe=Symbol.for("react.memo"),_Oe=Symbol.for("react.lazy"),hfe=Symbol.iterator;function wOe(t){return t===null||typeof t!="object"?null:(t=hfe&&t[hfe]||t["@@iterator"],typeof t=="function"?t:null)}var Q0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J0e=Object.assign,eye={};function Y_(t,e,n){this.props=t,this.context=e,this.refs=eye,this.updater=n||Q0e}Y_.prototype.isReactComponent={};Y_.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Y_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tye(){}tye.prototype=Y_.prototype;function g9(t,e,n){this.props=t,this.context=e,this.refs=eye,this.updater=n||Q0e}var y9=g9.prototype=new tye;y9.constructor=g9;J0e(y9,Y_.prototype);y9.isPureReactComponent=!0;var pfe=Array.isArray,nye=Object.prototype.hasOwnProperty,b9={current:null},rye={key:!0,ref:!0,__self:!0,__source:!0};function iye(t,e,n){var r,o={},u=null,p=null;if(e!=null)for(r in e.ref!==void 0&&(p=e.ref),e.key!==void 0&&(u=""+e.key),e)nye.call(e,r)&&!rye.hasOwnProperty(r)&&(o[r]=e[r]);var m=arguments.length-2;if(m===1)o.children=n;else if(1<m){for(var _=Array(m),x=0;x<m;x++)_[x]=arguments[x+2];o.children=_}if(t&&t.defaultProps)for(r in m=t.defaultProps,m)o[r]===void 0&&(o[r]=m[r]);return{$$typeof:mP,type:t,key:u,ref:p,props:o,_owner:b9.current}}function xOe(t,e){return{$$typeof:mP,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _9(t){return typeof t=="object"&&t!==null&&t.$$typeof===mP}function SOe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ffe=/\/+/g;function i6(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SOe(""+t.key):e.toString(36)}function ND(t,e,n,r,o){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var p=!1;if(t===null)p=!0;else switch(u){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case mP:case dOe:p=!0}}if(p)return p=t,o=o(p),t=r===""?"."+i6(p,0):r,pfe(o)?(n="",t!=null&&(n=t.replace(ffe,"$&/")+"/"),ND(o,e,n,"",function(x){return x})):o!=null&&(_9(o)&&(o=xOe(o,n+(!o.key||p&&p.key===o.key?"":(""+o.key).replace(ffe,"$&/")+"/")+t)),e.push(o)),1;if(p=0,r=r===""?".":r+":",pfe(t))for(var m=0;m<t.length;m++){u=t[m];var _=r+i6(u,m);p+=ND(u,e,n,_,o)}else if(_=wOe(t),typeof _=="function")for(t=_.call(t),m=0;!(u=t.next()).done;)u=u.value,_=r+i6(u,m++),p+=ND(u,e,n,_,o);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return p}function GO(t,e,n){if(t==null)return t;var r=[],o=0;return ND(t,r,"","",function(u){return e.call(n,u,o++)}),r}function EOe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ws={current:null},FD={transition:null},COe={ReactCurrentDispatcher:Ws,ReactCurrentBatchConfig:FD,ReactCurrentOwner:b9};ar.Children={map:GO,forEach:function(t,e,n){GO(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return GO(t,function(){e++}),e},toArray:function(t){return GO(t,function(e){return e})||[]},only:function(t){if(!_9(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ar.Component=Y_;ar.Fragment=hOe;ar.Profiler=fOe;ar.PureComponent=g9;ar.StrictMode=pOe;ar.Suspense=yOe;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=COe;ar.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J0e({},t.props),o=t.key,u=t.ref,p=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,p=b9.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(_ in e)nye.call(e,_)&&!rye.hasOwnProperty(_)&&(r[_]=e[_]===void 0&&m!==void 0?m[_]:e[_])}var _=arguments.length-2;if(_===1)r.children=n;else if(1<_){m=Array(_);for(var x=0;x<_;x++)m[x]=arguments[x+2];r.children=m}return{$$typeof:mP,type:t.type,key:o,ref:u,props:r,_owner:p}};ar.createContext=function(t){return t={$$typeof:vOe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mOe,_context:t},t.Consumer=t};ar.createElement=iye;ar.createFactory=function(t){var e=iye.bind(null,t);return e.type=t,e};ar.createRef=function(){return{current:null}};ar.forwardRef=function(t){return{$$typeof:gOe,render:t}};ar.isValidElement=_9;ar.lazy=function(t){return{$$typeof:_Oe,_payload:{_status:-1,_result:t},_init:EOe}};ar.memo=function(t,e){return{$$typeof:bOe,type:t,compare:e===void 0?null:e}};ar.startTransition=function(t){var e=FD.transition;FD.transition={};try{t()}finally{FD.transition=e}};ar.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ar.useCallback=function(t,e){return Ws.current.useCallback(t,e)};ar.useContext=function(t){return Ws.current.useContext(t)};ar.useDebugValue=function(){};ar.useDeferredValue=function(t){return Ws.current.useDeferredValue(t)};ar.useEffect=function(t,e){return Ws.current.useEffect(t,e)};ar.useId=function(){return Ws.current.useId()};ar.useImperativeHandle=function(t,e,n){return Ws.current.useImperativeHandle(t,e,n)};ar.useInsertionEffect=function(t,e){return Ws.current.useInsertionEffect(t,e)};ar.useLayoutEffect=function(t,e){return Ws.current.useLayoutEffect(t,e)};ar.useMemo=function(t,e){return Ws.current.useMemo(t,e)};ar.useReducer=function(t,e,n){return Ws.current.useReducer(t,e,n)};ar.useRef=function(t){return Ws.current.useRef(t)};ar.useState=function(t){return Ws.current.useState(t)};ar.useSyncExternalStore=function(t,e,n){return Ws.current.useSyncExternalStore(t,e,n)};ar.useTransition=function(){return Ws.current.useTransition()};ar.version="18.2.0";Z0e.exports=ar;var nn=Z0e.exports;const oye=X0e(nn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var POe=nn,kOe=Symbol.for("react.element"),TOe=Symbol.for("react.fragment"),MOe=Object.prototype.hasOwnProperty,AOe=POe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IOe={key:!0,ref:!0,__self:!0,__source:!0};function sye(t,e,n){var r,o={},u=null,p=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(p=e.ref);for(r in e)MOe.call(e,r)&&!IOe.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:kOe,type:t,key:u,ref:p,props:o,_owner:AOe.current}}q3.Fragment=TOe;q3.jsx=sye;q3.jsxs=sye;Y0e.exports=q3;var Zt=Y0e.exports,F8={},aye={exports:{}},za={},lye={exports:{}},uye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ge,mt){var Je=Ge.length;Ge.push(mt);e:for(;0<Je;){var Be=Je-1>>>1,nt=Ge[Be];if(0<o(nt,mt))Ge[Be]=mt,Ge[Je]=nt,Je=Be;else break e}}function n(Ge){return Ge.length===0?null:Ge[0]}function r(Ge){if(Ge.length===0)return null;var mt=Ge[0],Je=Ge.pop();if(Je!==mt){Ge[0]=Je;e:for(var Be=0,nt=Ge.length,Gt=nt>>>1;Be<Gt;){var Bt=2*(Be+1)-1,Dt=Ge[Bt],Jt=Bt+1,on=Ge[Jt];if(0>o(Dt,Je))Jt<nt&&0>o(on,Dt)?(Ge[Be]=on,Ge[Jt]=Je,Be=Jt):(Ge[Be]=Dt,Ge[Bt]=Je,Be=Bt);else if(Jt<nt&&0>o(on,Je))Ge[Be]=on,Ge[Jt]=Je,Be=Jt;else break e}}return mt}function o(Ge,mt){var Je=Ge.sortIndex-mt.sortIndex;return Je!==0?Je:Ge.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var p=Date,m=p.now();t.unstable_now=function(){return p.now()-m}}var _=[],x=[],M=1,R=null,N=3,G=!1,Z=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Ge){for(var mt=n(x);mt!==null;){if(mt.callback===null)r(x);else if(mt.startTime<=Ge)r(x),mt.sortIndex=mt.expirationTime,e(_,mt);else break;mt=n(x)}}function te(Ge){if(j=!1,K(Ge),!Z)if(n(_)!==null)Z=!0,Fe(pe);else{var mt=n(x);mt!==null&&vt(te,mt.startTime-Ge)}}function pe(Ge,mt){Z=!1,j&&(j=!1,U(Pe),Pe=-1),G=!0;var Je=N;try{for(K(mt),R=n(_);R!==null&&(!(R.expirationTime>mt)||Ge&&!St());){var Be=R.callback;if(typeof Be=="function"){R.callback=null,N=R.priorityLevel;var nt=Be(R.expirationTime<=mt);mt=t.unstable_now(),typeof nt=="function"?R.callback=nt:R===n(_)&&r(_),K(mt)}else r(_);R=n(_)}if(R!==null)var Gt=!0;else{var Bt=n(x);Bt!==null&&vt(te,Bt.startTime-mt),Gt=!1}return Gt}finally{R=null,N=Je,G=!1}}var Q=!1,Se=null,Pe=-1,H=5,ye=-1;function St(){return!(t.unstable_now()-ye<H)}function kt(){if(Se!==null){var Ge=t.unstable_now();ye=Ge;var mt=!0;try{mt=Se(!0,Ge)}finally{mt?it():(Q=!1,Se=null)}}else Q=!1}var it;if(typeof C=="function")it=function(){C(kt)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,lt=me.port2;me.port1.onmessage=kt,it=function(){lt.postMessage(null)}}else it=function(){z(kt,0)};function Fe(Ge){Se=Ge,Q||(Q=!0,it())}function vt(Ge,mt){Pe=z(function(){Ge(t.unstable_now())},mt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ge){Ge.callback=null},t.unstable_continueExecution=function(){Z||G||(Z=!0,Fe(pe))},t.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Ge?Math.floor(1e3/Ge):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(_)},t.unstable_next=function(Ge){switch(N){case 1:case 2:case 3:var mt=3;break;default:mt=N}var Je=N;N=mt;try{return Ge()}finally{N=Je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ge,mt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Je=N;N=Ge;try{return mt()}finally{N=Je}},t.unstable_scheduleCallback=function(Ge,mt,Je){var Be=t.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?Be+Je:Be):Je=Be,Ge){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Je+nt,Ge={id:M++,callback:mt,priorityLevel:Ge,startTime:Je,expirationTime:nt,sortIndex:-1},Je>Be?(Ge.sortIndex=Je,e(x,Ge),n(_)===null&&Ge===n(x)&&(j?(U(Pe),Pe=-1):j=!0,vt(te,Je-Be))):(Ge.sortIndex=nt,e(_,Ge),Z||G||(Z=!0,Fe(pe))),Ge},t.unstable_shouldYield=St,t.unstable_wrapCallback=function(Ge){var mt=N;return function(){var Je=N;N=mt;try{return Ge.apply(this,arguments)}finally{N=Je}}}})(uye);lye.exports=uye;var ROe=lye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cye=nn,Va=ROe;function Nt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dye=new Set,FC={};function zg(t,e){L_(t,e),L_(t+"Capture",e)}function L_(t,e){for(FC[t]=e,t=0;t<e.length;t++)dye.add(e[t])}var Ch=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B8=Object.prototype.hasOwnProperty,OOe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mfe={},vfe={};function DOe(t){return B8.call(vfe,t)?!0:B8.call(mfe,t)?!1:OOe.test(t)?vfe[t]=!0:(mfe[t]=!0,!1)}function LOe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NOe(t,e,n,r){if(e===null||typeof e>"u"||LOe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ks(t,e,n,r,o,u,p){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=p}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zo[t]=new Ks(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zo[e]=new Ks(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zo[t]=new Ks(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zo[t]=new Ks(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zo[t]=new Ks(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zo[t]=new Ks(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zo[t]=new Ks(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zo[t]=new Ks(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zo[t]=new Ks(t,5,!1,t.toLowerCase(),null,!1,!1)});var w9=/[\-:]([a-z])/g;function x9(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(w9,x9);Zo[e]=new Ks(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(w9,x9);Zo[e]=new Ks(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(w9,x9);Zo[e]=new Ks(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zo[t]=new Ks(t,1,!1,t.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new Ks("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zo[t]=new Ks(t,1,!1,t.toLowerCase(),null,!0,!0)});function S9(t,e,n,r){var o=Zo.hasOwnProperty(e)?Zo[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NOe(e,n,o,r)&&(n=null),r||o===null?DOe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rh=cye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$O=Symbol.for("react.element"),s_=Symbol.for("react.portal"),a_=Symbol.for("react.fragment"),E9=Symbol.for("react.strict_mode"),U8=Symbol.for("react.profiler"),hye=Symbol.for("react.provider"),pye=Symbol.for("react.context"),C9=Symbol.for("react.forward_ref"),V8=Symbol.for("react.suspense"),j8=Symbol.for("react.suspense_list"),P9=Symbol.for("react.memo"),Cf=Symbol.for("react.lazy"),fye=Symbol.for("react.offscreen"),gfe=Symbol.iterator;function $E(t){return t===null||typeof t!="object"?null:(t=gfe&&t[gfe]||t["@@iterator"],typeof t=="function"?t:null)}var Di=Object.assign,o6;function vC(t){if(o6===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);o6=e&&e[1]||""}return`
`+o6+t}var s6=!1;function a6(t,e){if(!t||s6)return"";s6=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var r=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){r=x}t.call(e.prototype)}else{try{throw Error()}catch(x){r=x}t()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),u=r.stack.split(`
`),p=o.length-1,m=u.length-1;1<=p&&0<=m&&o[p]!==u[m];)m--;for(;1<=p&&0<=m;p--,m--)if(o[p]!==u[m]){if(p!==1||m!==1)do if(p--,m--,0>m||o[p]!==u[m]){var _=`
`+o[p].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=p&&0<=m);break}}}finally{s6=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vC(t):""}function FOe(t){switch(t.tag){case 5:return vC(t.type);case 16:return vC("Lazy");case 13:return vC("Suspense");case 19:return vC("SuspenseList");case 0:case 2:case 15:return t=a6(t.type,!1),t;case 11:return t=a6(t.type.render,!1),t;case 1:return t=a6(t.type,!0),t;default:return""}}function z8(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case a_:return"Fragment";case s_:return"Portal";case U8:return"Profiler";case E9:return"StrictMode";case V8:return"Suspense";case j8:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pye:return(t.displayName||"Context")+".Consumer";case hye:return(t._context.displayName||"Context")+".Provider";case C9:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P9:return e=t.displayName||null,e!==null?e:z8(t.type)||"Memo";case Cf:e=t._payload,t=t._init;try{return z8(t(e))}catch{}}return null}function BOe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z8(e);case 8:return e===E9?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mye(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UOe(t){var e=mye(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(p){r=""+p,u.call(this,p)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function WO(t){t._valueTracker||(t._valueTracker=UOe(t))}function vye(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mye(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function n3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function H8(t,e){var n=e.checked;return Di({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yfe(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gye(t,e){e=e.checked,e!=null&&S9(t,"checked",e,!1)}function G8(t,e){gye(t,e);var n=Zf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$8(t,e.type,n):e.hasOwnProperty("defaultValue")&&$8(t,e.type,Zf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bfe(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $8(t,e,n){(e!=="number"||n3(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gC=Array.isArray;function S_(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zf(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function W8(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return Di({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _fe(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Nt(92));if(gC(n)){if(1<n.length)throw Error(Nt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zf(n)}}function yye(t,e){var n=Zf(e.value),r=Zf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wfe(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bye(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K8(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bye(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var KO,_ye=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(KO=KO||document.createElement("div"),KO.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=KO.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function BC(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VOe=["Webkit","ms","Moz","O"];Object.keys(xC).forEach(function(t){VOe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xC[e]=xC[t]})});function wye(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xC.hasOwnProperty(t)&&xC[t]?(""+e).trim():e+"px"}function xye(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=wye(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var jOe=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q8(t,e){if(e){if(jOe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Nt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Nt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Nt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Nt(62))}}function X8(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y8=null;function k9(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Z8=null,E_=null,C_=null;function xfe(t){if(t=yP(t)){if(typeof Z8!="function")throw Error(Nt(280));var e=t.stateNode;e&&(e=J3(e),Z8(t.stateNode,t.type,e))}}function Sye(t){E_?C_?C_.push(t):C_=[t]:E_=t}function Eye(){if(E_){var t=E_,e=C_;if(C_=E_=null,xfe(t),e)for(t=0;t<e.length;t++)xfe(e[t])}}function Cye(t,e){return t(e)}function Pye(){}var l6=!1;function kye(t,e,n){if(l6)return t(e,n);l6=!0;try{return Cye(t,e,n)}finally{l6=!1,(E_!==null||C_!==null)&&(Pye(),Eye())}}function UC(t,e){var n=t.stateNode;if(n===null)return null;var r=J3(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Nt(231,e,typeof n));return n}var Q8=!1;if(Ch)try{var WE={};Object.defineProperty(WE,"passive",{get:function(){Q8=!0}}),window.addEventListener("test",WE,WE),window.removeEventListener("test",WE,WE)}catch{Q8=!1}function zOe(t,e,n,r,o,u,p,m,_){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(M){this.onError(M)}}var SC=!1,r3=null,i3=!1,J8=null,HOe={onError:function(t){SC=!0,r3=t}};function GOe(t,e,n,r,o,u,p,m,_){SC=!1,r3=null,zOe.apply(HOe,arguments)}function $Oe(t,e,n,r,o,u,p,m,_){if(GOe.apply(this,arguments),SC){if(SC){var x=r3;SC=!1,r3=null}else throw Error(Nt(198));i3||(i3=!0,J8=x)}}function Hg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tye(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sfe(t){if(Hg(t)!==t)throw Error(Nt(188))}function WOe(t){var e=t.alternate;if(!e){if(e=Hg(t),e===null)throw Error(Nt(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return Sfe(o),t;if(u===r)return Sfe(o),e;u=u.sibling}throw Error(Nt(188))}if(n.return!==r.return)n=o,r=u;else{for(var p=!1,m=o.child;m;){if(m===n){p=!0,n=o,r=u;break}if(m===r){p=!0,r=o,n=u;break}m=m.sibling}if(!p){for(m=u.child;m;){if(m===n){p=!0,n=u,r=o;break}if(m===r){p=!0,r=u,n=o;break}m=m.sibling}if(!p)throw Error(Nt(189))}}if(n.alternate!==r)throw Error(Nt(190))}if(n.tag!==3)throw Error(Nt(188));return n.stateNode.current===n?t:e}function Mye(t){return t=WOe(t),t!==null?Aye(t):null}function Aye(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Aye(t);if(e!==null)return e;t=t.sibling}return null}var Iye=Va.unstable_scheduleCallback,Efe=Va.unstable_cancelCallback,KOe=Va.unstable_shouldYield,qOe=Va.unstable_requestPaint,Qi=Va.unstable_now,XOe=Va.unstable_getCurrentPriorityLevel,T9=Va.unstable_ImmediatePriority,Rye=Va.unstable_UserBlockingPriority,o3=Va.unstable_NormalPriority,YOe=Va.unstable_LowPriority,Oye=Va.unstable_IdlePriority,X3=null,Uc=null;function ZOe(t){if(Uc&&typeof Uc.onCommitFiberRoot=="function")try{Uc.onCommitFiberRoot(X3,t,void 0,(t.current.flags&128)===128)}catch{}}var Fu=Math.clz32?Math.clz32:eDe,QOe=Math.log,JOe=Math.LN2;function eDe(t){return t>>>=0,t===0?32:31-(QOe(t)/JOe|0)|0}var qO=64,XO=4194304;function yC(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function s3(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,u=t.pingedLanes,p=n&268435455;if(p!==0){var m=p&~o;m!==0?r=yC(m):(u&=p,u!==0&&(r=yC(u)))}else p=n&~o,p!==0?r=yC(p):u!==0&&(r=yC(u));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,u=e&-e,o>=u||o===16&&(u&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fu(e),o=1<<n,r|=t[n],e&=~o;return r}function tDe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nDe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,u=t.pendingLanes;0<u;){var p=31-Fu(u),m=1<<p,_=o[p];_===-1?(!(m&n)||m&r)&&(o[p]=tDe(m,e)):_<=e&&(t.expiredLanes|=m),u&=~m}}function eH(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dye(){var t=qO;return qO<<=1,!(qO&4194240)&&(qO=64),t}function u6(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vP(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fu(e),t[e]=n}function rDe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Fu(n),u=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~u}}function M9(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fu(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Ur=0;function Lye(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nye,A9,Fye,Bye,Uye,tH=!1,YO=[],Nf=null,Ff=null,Bf=null,VC=new Map,jC=new Map,Tf=[],iDe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cfe(t,e){switch(t){case"focusin":case"focusout":Nf=null;break;case"dragenter":case"dragleave":Ff=null;break;case"mouseover":case"mouseout":Bf=null;break;case"pointerover":case"pointerout":VC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jC.delete(e.pointerId)}}function KE(t,e,n,r,o,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},e!==null&&(e=yP(e),e!==null&&A9(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function oDe(t,e,n,r,o){switch(e){case"focusin":return Nf=KE(Nf,t,e,n,r,o),!0;case"dragenter":return Ff=KE(Ff,t,e,n,r,o),!0;case"mouseover":return Bf=KE(Bf,t,e,n,r,o),!0;case"pointerover":var u=o.pointerId;return VC.set(u,KE(VC.get(u)||null,t,e,n,r,o)),!0;case"gotpointercapture":return u=o.pointerId,jC.set(u,KE(jC.get(u)||null,t,e,n,r,o)),!0}return!1}function Vye(t){var e=gg(t.target);if(e!==null){var n=Hg(e);if(n!==null){if(e=n.tag,e===13){if(e=Tye(n),e!==null){t.blockedOn=e,Uye(t.priority,function(){Fye(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function BD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nH(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Y8=r,n.target.dispatchEvent(r),Y8=null}else return e=yP(n),e!==null&&A9(e),t.blockedOn=n,!1;e.shift()}return!0}function Pfe(t,e,n){BD(t)&&n.delete(e)}function sDe(){tH=!1,Nf!==null&&BD(Nf)&&(Nf=null),Ff!==null&&BD(Ff)&&(Ff=null),Bf!==null&&BD(Bf)&&(Bf=null),VC.forEach(Pfe),jC.forEach(Pfe)}function qE(t,e){t.blockedOn===e&&(t.blockedOn=null,tH||(tH=!0,Va.unstable_scheduleCallback(Va.unstable_NormalPriority,sDe)))}function zC(t){function e(o){return qE(o,t)}if(0<YO.length){qE(YO[0],t);for(var n=1;n<YO.length;n++){var r=YO[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nf!==null&&qE(Nf,t),Ff!==null&&qE(Ff,t),Bf!==null&&qE(Bf,t),VC.forEach(e),jC.forEach(e),n=0;n<Tf.length;n++)r=Tf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tf.length&&(n=Tf[0],n.blockedOn===null);)Vye(n),n.blockedOn===null&&Tf.shift()}var P_=Rh.ReactCurrentBatchConfig,a3=!0;function aDe(t,e,n,r){var o=Ur,u=P_.transition;P_.transition=null;try{Ur=1,I9(t,e,n,r)}finally{Ur=o,P_.transition=u}}function lDe(t,e,n,r){var o=Ur,u=P_.transition;P_.transition=null;try{Ur=4,I9(t,e,n,r)}finally{Ur=o,P_.transition=u}}function I9(t,e,n,r){if(a3){var o=nH(t,e,n,r);if(o===null)b6(t,e,r,l3,n),Cfe(t,r);else if(oDe(o,t,e,n,r))r.stopPropagation();else if(Cfe(t,r),e&4&&-1<iDe.indexOf(t)){for(;o!==null;){var u=yP(o);if(u!==null&&Nye(u),u=nH(t,e,n,r),u===null&&b6(t,e,r,l3,n),u===o)break;o=u}o!==null&&r.stopPropagation()}else b6(t,e,r,null,n)}}var l3=null;function nH(t,e,n,r){if(l3=null,t=k9(r),t=gg(t),t!==null)if(e=Hg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tye(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return l3=t,null}function jye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XOe()){case T9:return 1;case Rye:return 4;case o3:case YOe:return 16;case Oye:return 536870912;default:return 16}default:return 16}}var Af=null,R9=null,UD=null;function zye(){if(UD)return UD;var t,e=R9,n=e.length,r,o="value"in Af?Af.value:Af.textContent,u=o.length;for(t=0;t<n&&e[t]===o[t];t++);var p=n-t;for(r=1;r<=p&&e[n-r]===o[u-r];r++);return UD=o.slice(t,1<r?1-r:void 0)}function VD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ZO(){return!0}function kfe(){return!1}function Ha(t){function e(n,r,o,u,p){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ZO:kfe,this.isPropagationStopped=kfe,this}return Di(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ZO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ZO)},persist:function(){},isPersistent:ZO}),e}var Z_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O9=Ha(Z_),gP=Di({},Z_,{view:0,detail:0}),uDe=Ha(gP),c6,d6,XE,Y3=Di({},gP,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D9,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==XE&&(XE&&t.type==="mousemove"?(c6=t.screenX-XE.screenX,d6=t.screenY-XE.screenY):d6=c6=0,XE=t),c6)},movementY:function(t){return"movementY"in t?t.movementY:d6}}),Tfe=Ha(Y3),cDe=Di({},Y3,{dataTransfer:0}),dDe=Ha(cDe),hDe=Di({},gP,{relatedTarget:0}),h6=Ha(hDe),pDe=Di({},Z_,{animationName:0,elapsedTime:0,pseudoElement:0}),fDe=Ha(pDe),mDe=Di({},Z_,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vDe=Ha(mDe),gDe=Di({},Z_,{data:0}),Mfe=Ha(gDe),yDe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bDe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_De={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wDe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_De[t])?!!e[t]:!1}function D9(){return wDe}var xDe=Di({},gP,{key:function(t){if(t.key){var e=yDe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=VD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bDe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D9,charCode:function(t){return t.type==="keypress"?VD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?VD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SDe=Ha(xDe),EDe=Di({},Y3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Afe=Ha(EDe),CDe=Di({},gP,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D9}),PDe=Ha(CDe),kDe=Di({},Z_,{propertyName:0,elapsedTime:0,pseudoElement:0}),TDe=Ha(kDe),MDe=Di({},Y3,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ADe=Ha(MDe),IDe=[9,13,27,32],L9=Ch&&"CompositionEvent"in window,EC=null;Ch&&"documentMode"in document&&(EC=document.documentMode);var RDe=Ch&&"TextEvent"in window&&!EC,Hye=Ch&&(!L9||EC&&8<EC&&11>=EC),Ife=String.fromCharCode(32),Rfe=!1;function Gye(t,e){switch(t){case"keyup":return IDe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $ye(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var l_=!1;function ODe(t,e){switch(t){case"compositionend":return $ye(e);case"keypress":return e.which!==32?null:(Rfe=!0,Ife);case"textInput":return t=e.data,t===Ife&&Rfe?null:t;default:return null}}function DDe(t,e){if(l_)return t==="compositionend"||!L9&&Gye(t,e)?(t=zye(),UD=R9=Af=null,l_=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hye&&e.locale!=="ko"?null:e.data;default:return null}}var LDe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ofe(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LDe[t.type]:e==="textarea"}function Wye(t,e,n,r){Sye(r),e=u3(e,"onChange"),0<e.length&&(n=new O9("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var CC=null,HC=null;function NDe(t){rbe(t,0)}function Z3(t){var e=d_(t);if(vye(e))return t}function FDe(t,e){if(t==="change")return e}var Kye=!1;if(Ch){var p6;if(Ch){var f6="oninput"in document;if(!f6){var Dfe=document.createElement("div");Dfe.setAttribute("oninput","return;"),f6=typeof Dfe.oninput=="function"}p6=f6}else p6=!1;Kye=p6&&(!document.documentMode||9<document.documentMode)}function Lfe(){CC&&(CC.detachEvent("onpropertychange",qye),HC=CC=null)}function qye(t){if(t.propertyName==="value"&&Z3(HC)){var e=[];Wye(e,HC,t,k9(t)),kye(NDe,e)}}function BDe(t,e,n){t==="focusin"?(Lfe(),CC=e,HC=n,CC.attachEvent("onpropertychange",qye)):t==="focusout"&&Lfe()}function UDe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Z3(HC)}function VDe(t,e){if(t==="click")return Z3(e)}function jDe(t,e){if(t==="input"||t==="change")return Z3(e)}function zDe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Uu=typeof Object.is=="function"?Object.is:zDe;function GC(t,e){if(Uu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!B8.call(e,o)||!Uu(t[o],e[o]))return!1}return!0}function Nfe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ffe(t,e){var n=Nfe(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nfe(n)}}function Xye(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xye(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yye(){for(var t=window,e=n3();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=n3(t.document)}return e}function N9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HDe(t){var e=Yye(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xye(n.ownerDocument.documentElement,n)){if(r!==null&&N9(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,u=Math.min(r.start,o);r=r.end===void 0?u:Math.min(r.end,o),!t.extend&&u>r&&(o=r,r=u,u=o),o=Ffe(n,u);var p=Ffe(n,r);o&&p&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),u>r?(t.addRange(e),t.extend(p.node,p.offset)):(e.setEnd(p.node,p.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GDe=Ch&&"documentMode"in document&&11>=document.documentMode,u_=null,rH=null,PC=null,iH=!1;function Bfe(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iH||u_==null||u_!==n3(r)||(r=u_,"selectionStart"in r&&N9(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),PC&&GC(PC,r)||(PC=r,r=u3(rH,"onSelect"),0<r.length&&(e=new O9("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=u_)))}function QO(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var c_={animationend:QO("Animation","AnimationEnd"),animationiteration:QO("Animation","AnimationIteration"),animationstart:QO("Animation","AnimationStart"),transitionend:QO("Transition","TransitionEnd")},m6={},Zye={};Ch&&(Zye=document.createElement("div").style,"AnimationEvent"in window||(delete c_.animationend.animation,delete c_.animationiteration.animation,delete c_.animationstart.animation),"TransitionEvent"in window||delete c_.transitionend.transition);function Q3(t){if(m6[t])return m6[t];if(!c_[t])return t;var e=c_[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zye)return m6[t]=e[n];return t}var Qye=Q3("animationend"),Jye=Q3("animationiteration"),ebe=Q3("animationstart"),tbe=Q3("transitionend"),nbe=new Map,Ufe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function im(t,e){nbe.set(t,e),zg(e,[t])}for(var v6=0;v6<Ufe.length;v6++){var g6=Ufe[v6],$De=g6.toLowerCase(),WDe=g6[0].toUpperCase()+g6.slice(1);im($De,"on"+WDe)}im(Qye,"onAnimationEnd");im(Jye,"onAnimationIteration");im(ebe,"onAnimationStart");im("dblclick","onDoubleClick");im("focusin","onFocus");im("focusout","onBlur");im(tbe,"onTransitionEnd");L_("onMouseEnter",["mouseout","mouseover"]);L_("onMouseLeave",["mouseout","mouseover"]);L_("onPointerEnter",["pointerout","pointerover"]);L_("onPointerLeave",["pointerout","pointerover"]);zg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zg("onBeforeInput",["compositionend","keypress","textInput","paste"]);zg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KDe=new Set("cancel close invalid load scroll toggle".split(" ").concat(bC));function Vfe(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$Oe(r,e,void 0,t),t.currentTarget=null}function rbe(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var u=void 0;if(e)for(var p=r.length-1;0<=p;p--){var m=r[p],_=m.instance,x=m.currentTarget;if(m=m.listener,_!==u&&o.isPropagationStopped())break e;Vfe(o,m,x),u=_}else for(p=0;p<r.length;p++){if(m=r[p],_=m.instance,x=m.currentTarget,m=m.listener,_!==u&&o.isPropagationStopped())break e;Vfe(o,m,x),u=_}}}if(i3)throw t=J8,i3=!1,J8=null,t}function pi(t,e){var n=e[uH];n===void 0&&(n=e[uH]=new Set);var r=t+"__bubble";n.has(r)||(ibe(e,t,2,!1),n.add(r))}function y6(t,e,n){var r=0;e&&(r|=4),ibe(n,t,r,e)}var JO="_reactListening"+Math.random().toString(36).slice(2);function $C(t){if(!t[JO]){t[JO]=!0,dye.forEach(function(n){n!=="selectionchange"&&(KDe.has(n)||y6(n,!1,t),y6(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[JO]||(e[JO]=!0,y6("selectionchange",!1,e))}}function ibe(t,e,n,r){switch(jye(e)){case 1:var o=aDe;break;case 4:o=lDe;break;default:o=I9}n=o.bind(null,e,n,t),o=void 0,!Q8||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function b6(t,e,n,r,o){var u=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var m=r.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(p===4)for(p=r.return;p!==null;){var _=p.tag;if((_===3||_===4)&&(_=p.stateNode.containerInfo,_===o||_.nodeType===8&&_.parentNode===o))return;p=p.return}for(;m!==null;){if(p=gg(m),p===null)return;if(_=p.tag,_===5||_===6){r=u=p;continue e}m=m.parentNode}}r=r.return}kye(function(){var x=u,M=k9(n),R=[];e:{var N=nbe.get(t);if(N!==void 0){var G=O9,Z=t;switch(t){case"keypress":if(VD(n)===0)break e;case"keydown":case"keyup":G=SDe;break;case"focusin":Z="focus",G=h6;break;case"focusout":Z="blur",G=h6;break;case"beforeblur":case"afterblur":G=h6;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Tfe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=dDe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=PDe;break;case Qye:case Jye:case ebe:G=fDe;break;case tbe:G=TDe;break;case"scroll":G=uDe;break;case"wheel":G=ADe;break;case"copy":case"cut":case"paste":G=vDe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Afe}var j=(e&4)!==0,z=!j&&t==="scroll",U=j?N!==null?N+"Capture":null:N;j=[];for(var C=x,K;C!==null;){K=C;var te=K.stateNode;if(K.tag===5&&te!==null&&(K=te,U!==null&&(te=UC(C,U),te!=null&&j.push(WC(C,te,K)))),z)break;C=C.return}0<j.length&&(N=new G(N,Z,null,n,M),R.push({event:N,listeners:j}))}}if(!(e&7)){e:{if(N=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",N&&n!==Y8&&(Z=n.relatedTarget||n.fromElement)&&(gg(Z)||Z[Ph]))break e;if((G||N)&&(N=M.window===M?M:(N=M.ownerDocument)?N.defaultView||N.parentWindow:window,G?(Z=n.relatedTarget||n.toElement,G=x,Z=Z?gg(Z):null,Z!==null&&(z=Hg(Z),Z!==z||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(G=null,Z=x),G!==Z)){if(j=Tfe,te="onMouseLeave",U="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(j=Afe,te="onPointerLeave",U="onPointerEnter",C="pointer"),z=G==null?N:d_(G),K=Z==null?N:d_(Z),N=new j(te,C+"leave",G,n,M),N.target=z,N.relatedTarget=K,te=null,gg(M)===x&&(j=new j(U,C+"enter",Z,n,M),j.target=K,j.relatedTarget=z,te=j),z=te,G&&Z)t:{for(j=G,U=Z,C=0,K=j;K;K=Lb(K))C++;for(K=0,te=U;te;te=Lb(te))K++;for(;0<C-K;)j=Lb(j),C--;for(;0<K-C;)U=Lb(U),K--;for(;C--;){if(j===U||U!==null&&j===U.alternate)break t;j=Lb(j),U=Lb(U)}j=null}else j=null;G!==null&&jfe(R,N,G,j,!1),Z!==null&&z!==null&&jfe(R,z,Z,j,!0)}}e:{if(N=x?d_(x):window,G=N.nodeName&&N.nodeName.toLowerCase(),G==="select"||G==="input"&&N.type==="file")var pe=FDe;else if(Ofe(N))if(Kye)pe=jDe;else{pe=UDe;var Q=BDe}else(G=N.nodeName)&&G.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(pe=VDe);if(pe&&(pe=pe(t,x))){Wye(R,pe,n,M);break e}Q&&Q(t,N,x),t==="focusout"&&(Q=N._wrapperState)&&Q.controlled&&N.type==="number"&&$8(N,"number",N.value)}switch(Q=x?d_(x):window,t){case"focusin":(Ofe(Q)||Q.contentEditable==="true")&&(u_=Q,rH=x,PC=null);break;case"focusout":PC=rH=u_=null;break;case"mousedown":iH=!0;break;case"contextmenu":case"mouseup":case"dragend":iH=!1,Bfe(R,n,M);break;case"selectionchange":if(GDe)break;case"keydown":case"keyup":Bfe(R,n,M)}var Se;if(L9)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else l_?Gye(t,n)&&(Pe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Pe="onCompositionStart");Pe&&(Hye&&n.locale!=="ko"&&(l_||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&l_&&(Se=zye()):(Af=M,R9="value"in Af?Af.value:Af.textContent,l_=!0)),Q=u3(x,Pe),0<Q.length&&(Pe=new Mfe(Pe,t,null,n,M),R.push({event:Pe,listeners:Q}),Se?Pe.data=Se:(Se=$ye(n),Se!==null&&(Pe.data=Se)))),(Se=RDe?ODe(t,n):DDe(t,n))&&(x=u3(x,"onBeforeInput"),0<x.length&&(M=new Mfe("onBeforeInput","beforeinput",null,n,M),R.push({event:M,listeners:x}),M.data=Se))}rbe(R,e)})}function WC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function u3(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,u=o.stateNode;o.tag===5&&u!==null&&(o=u,u=UC(t,n),u!=null&&r.unshift(WC(t,u,o)),u=UC(t,e),u!=null&&r.push(WC(t,u,o))),t=t.return}return r}function Lb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jfe(t,e,n,r,o){for(var u=e._reactName,p=[];n!==null&&n!==r;){var m=n,_=m.alternate,x=m.stateNode;if(_!==null&&_===r)break;m.tag===5&&x!==null&&(m=x,o?(_=UC(n,u),_!=null&&p.unshift(WC(n,_,m))):o||(_=UC(n,u),_!=null&&p.push(WC(n,_,m)))),n=n.return}p.length!==0&&t.push({event:e,listeners:p})}var qDe=/\r\n?/g,XDe=/\u0000|\uFFFD/g;function zfe(t){return(typeof t=="string"?t:""+t).replace(qDe,`
`).replace(XDe,"")}function eD(t,e,n){if(e=zfe(e),zfe(t)!==e&&n)throw Error(Nt(425))}function c3(){}var oH=null,sH=null;function aH(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lH=typeof setTimeout=="function"?setTimeout:void 0,YDe=typeof clearTimeout=="function"?clearTimeout:void 0,Hfe=typeof Promise=="function"?Promise:void 0,ZDe=typeof queueMicrotask=="function"?queueMicrotask:typeof Hfe<"u"?function(t){return Hfe.resolve(null).then(t).catch(QDe)}:lH;function QDe(t){setTimeout(function(){throw t})}function _6(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),zC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);zC(e)}function Uf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gfe(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Q_=Math.random().toString(36).slice(2),Fc="__reactFiber$"+Q_,KC="__reactProps$"+Q_,Ph="__reactContainer$"+Q_,uH="__reactEvents$"+Q_,JDe="__reactListeners$"+Q_,e3e="__reactHandles$"+Q_;function gg(t){var e=t[Fc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ph]||n[Fc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gfe(t);t!==null;){if(n=t[Fc])return n;t=Gfe(t)}return e}t=n,n=t.parentNode}return null}function yP(t){return t=t[Fc]||t[Ph],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function d_(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Nt(33))}function J3(t){return t[KC]||null}var cH=[],h_=-1;function om(t){return{current:t}}function mi(t){0>h_||(t.current=cH[h_],cH[h_]=null,h_--)}function ri(t,e){h_++,cH[h_]=t.current,t.current=e}var Qf={},_s=om(Qf),fa=om(!1),Tg=Qf;function N_(t,e){var n=t.type.contextTypes;if(!n)return Qf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ma(t){return t=t.childContextTypes,t!=null}function d3(){mi(fa),mi(_s)}function $fe(t,e,n){if(_s.current!==Qf)throw Error(Nt(168));ri(_s,e),ri(fa,n)}function obe(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(Nt(108,BOe(t)||"Unknown",o));return Di({},n,r)}function h3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qf,Tg=_s.current,ri(_s,t),ri(fa,fa.current),!0}function Wfe(t,e,n){var r=t.stateNode;if(!r)throw Error(Nt(169));n?(t=obe(t,e,Tg),r.__reactInternalMemoizedMergedChildContext=t,mi(fa),mi(_s),ri(_s,t)):mi(fa),ri(fa,n)}var hh=null,eL=!1,w6=!1;function sbe(t){hh===null?hh=[t]:hh.push(t)}function t3e(t){eL=!0,sbe(t)}function sm(){if(!w6&&hh!==null){w6=!0;var t=0,e=Ur;try{var n=hh;for(Ur=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hh=null,eL=!1}catch(o){throw hh!==null&&(hh=hh.slice(t+1)),Iye(T9,sm),o}finally{Ur=e,w6=!1}}return null}var p_=[],f_=0,p3=null,f3=0,Ml=[],Al=0,Mg=null,fh=1,mh="";function cg(t,e){p_[f_++]=f3,p_[f_++]=p3,p3=t,f3=e}function abe(t,e,n){Ml[Al++]=fh,Ml[Al++]=mh,Ml[Al++]=Mg,Mg=t;var r=fh;t=mh;var o=32-Fu(r)-1;r&=~(1<<o),n+=1;var u=32-Fu(e)+o;if(30<u){var p=o-o%5;u=(r&(1<<p)-1).toString(32),r>>=p,o-=p,fh=1<<32-Fu(e)+o|n<<o|r,mh=u+t}else fh=1<<u|n<<o|r,mh=t}function F9(t){t.return!==null&&(cg(t,1),abe(t,1,0))}function B9(t){for(;t===p3;)p3=p_[--f_],p_[f_]=null,f3=p_[--f_],p_[f_]=null;for(;t===Mg;)Mg=Ml[--Al],Ml[Al]=null,mh=Ml[--Al],Ml[Al]=null,fh=Ml[--Al],Ml[Al]=null}var Fa=null,Na=null,gi=!1,Ou=null;function lbe(t,e){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kfe(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fa=t,Na=Uf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fa=t,Na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mg!==null?{id:fh,overflow:mh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ol(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fa=t,Na=null,!0):!1;default:return!1}}function dH(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hH(t){if(gi){var e=Na;if(e){var n=e;if(!Kfe(t,e)){if(dH(t))throw Error(Nt(418));e=Uf(n.nextSibling);var r=Fa;e&&Kfe(t,e)?lbe(r,n):(t.flags=t.flags&-4097|2,gi=!1,Fa=t)}}else{if(dH(t))throw Error(Nt(418));t.flags=t.flags&-4097|2,gi=!1,Fa=t}}}function qfe(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fa=t}function tD(t){if(t!==Fa)return!1;if(!gi)return qfe(t),gi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aH(t.type,t.memoizedProps)),e&&(e=Na)){if(dH(t))throw ube(),Error(Nt(418));for(;e;)lbe(t,e),e=Uf(e.nextSibling)}if(qfe(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Nt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Na=Uf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Na=null}}else Na=Fa?Uf(t.stateNode.nextSibling):null;return!0}function ube(){for(var t=Na;t;)t=Uf(t.nextSibling)}function F_(){Na=Fa=null,gi=!1}function U9(t){Ou===null?Ou=[t]:Ou.push(t)}var n3e=Rh.ReactCurrentBatchConfig;function Iu(t,e){if(t&&t.defaultProps){e=Di({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var m3=om(null),v3=null,m_=null,V9=null;function j9(){V9=m_=v3=null}function z9(t){var e=m3.current;mi(m3),t._currentValue=e}function pH(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function k_(t,e){v3=t,V9=m_=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ha=!0),t.firstContext=null)}function Bl(t){var e=t._currentValue;if(V9!==t)if(t={context:t,memoizedValue:e,next:null},m_===null){if(v3===null)throw Error(Nt(308));m_=t,v3.dependencies={lanes:0,firstContext:t}}else m_=m_.next=t;return e}var yg=null;function H9(t){yg===null?yg=[t]:yg.push(t)}function cbe(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,H9(e)):(n.next=o.next,o.next=n),e.interleaved=n,kh(t,r)}function kh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pf=!1;function G9(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dbe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,br&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,kh(t,n)}return o=r.interleaved,o===null?(e.next=e,H9(r)):(e.next=o.next,o.next=e),r.interleaved=e,kh(t,n)}function jD(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M9(t,n)}}function Xfe(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=p:u=u.next=p,n=n.next}while(n!==null);u===null?o=u=e:u=u.next=e}else o=u=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function g3(t,e,n,r){var o=t.updateQueue;Pf=!1;var u=o.firstBaseUpdate,p=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var _=m,x=_.next;_.next=null,p===null?u=x:p.next=x,p=_;var M=t.alternate;M!==null&&(M=M.updateQueue,m=M.lastBaseUpdate,m!==p&&(m===null?M.firstBaseUpdate=x:m.next=x,M.lastBaseUpdate=_))}if(u!==null){var R=o.baseState;p=0,M=x=_=null,m=u;do{var N=m.lane,G=m.eventTime;if((r&N)===N){M!==null&&(M=M.next={eventTime:G,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var Z=t,j=m;switch(N=e,G=n,j.tag){case 1:if(Z=j.payload,typeof Z=="function"){R=Z.call(G,R,N);break e}R=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=j.payload,N=typeof Z=="function"?Z.call(G,R,N):Z,N==null)break e;R=Di({},R,N);break e;case 2:Pf=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,N=o.effects,N===null?o.effects=[m]:N.push(m))}else G={eventTime:G,lane:N,tag:m.tag,payload:m.payload,callback:m.callback,next:null},M===null?(x=M=G,_=R):M=M.next=G,p|=N;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;N=m,m=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(1);if(M===null&&(_=R),o.baseState=_,o.firstBaseUpdate=x,o.lastBaseUpdate=M,e=o.shared.interleaved,e!==null){o=e;do p|=o.lane,o=o.next;while(o!==e)}else u===null&&(o.shared.lanes=0);Ig|=p,t.lanes=p,t.memoizedState=R}}function Yfe(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Nt(191,o));o.call(r)}}}var hbe=new cye.Component().refs;function fH(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Di({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tL={isMounted:function(t){return(t=t._reactInternals)?Hg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zs(),o=zf(t),u=wh(r,o);u.payload=e,n!=null&&(u.callback=n),e=Vf(t,u,o),e!==null&&(Bu(e,t,o,r),jD(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zs(),o=zf(t),u=wh(r,o);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Vf(t,u,o),e!==null&&(Bu(e,t,o,r),jD(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zs(),r=zf(t),o=wh(n,r);o.tag=2,e!=null&&(o.callback=e),e=Vf(t,o,r),e!==null&&(Bu(e,t,r,n),jD(e,t,r))}};function Zfe(t,e,n,r,o,u,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,p):e.prototype&&e.prototype.isPureReactComponent?!GC(n,r)||!GC(o,u):!0}function pbe(t,e,n){var r=!1,o=Qf,u=e.contextType;return typeof u=="object"&&u!==null?u=Bl(u):(o=ma(e)?Tg:_s.current,r=e.contextTypes,u=(r=r!=null)?N_(t,o):Qf),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tL,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=u),e}function Qfe(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tL.enqueueReplaceState(e,e.state,null)}function mH(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=hbe,G9(t);var u=e.contextType;typeof u=="object"&&u!==null?o.context=Bl(u):(u=ma(e)?Tg:_s.current,o.context=N_(t,u)),o.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(fH(t,e,u,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&tL.enqueueReplaceState(o,o.state,null),g3(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function YE(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Nt(309));var r=n.stateNode}if(!r)throw Error(Nt(147,t));var o=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(p){var m=o.refs;m===hbe&&(m=o.refs={}),p===null?delete m[u]:m[u]=p},e._stringRef=u,e)}if(typeof t!="string")throw Error(Nt(284));if(!n._owner)throw Error(Nt(290,t))}return t}function nD(t,e){throw t=Object.prototype.toString.call(e),Error(Nt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jfe(t){var e=t._init;return e(t._payload)}function fbe(t){function e(U,C){if(t){var K=U.deletions;K===null?(U.deletions=[C],U.flags|=16):K.push(C)}}function n(U,C){if(!t)return null;for(;C!==null;)e(U,C),C=C.sibling;return null}function r(U,C){for(U=new Map;C!==null;)C.key!==null?U.set(C.key,C):U.set(C.index,C),C=C.sibling;return U}function o(U,C){return U=Hf(U,C),U.index=0,U.sibling=null,U}function u(U,C,K){return U.index=K,t?(K=U.alternate,K!==null?(K=K.index,K<C?(U.flags|=2,C):K):(U.flags|=2,C)):(U.flags|=1048576,C)}function p(U){return t&&U.alternate===null&&(U.flags|=2),U}function m(U,C,K,te){return C===null||C.tag!==6?(C=T6(K,U.mode,te),C.return=U,C):(C=o(C,K),C.return=U,C)}function _(U,C,K,te){var pe=K.type;return pe===a_?M(U,C,K.props.children,te,K.key):C!==null&&(C.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Cf&&Jfe(pe)===C.type)?(te=o(C,K.props),te.ref=YE(U,C,K),te.return=U,te):(te=KD(K.type,K.key,K.props,null,U.mode,te),te.ref=YE(U,C,K),te.return=U,te)}function x(U,C,K,te){return C===null||C.tag!==4||C.stateNode.containerInfo!==K.containerInfo||C.stateNode.implementation!==K.implementation?(C=M6(K,U.mode,te),C.return=U,C):(C=o(C,K.children||[]),C.return=U,C)}function M(U,C,K,te,pe){return C===null||C.tag!==7?(C=xg(K,U.mode,te,pe),C.return=U,C):(C=o(C,K),C.return=U,C)}function R(U,C,K){if(typeof C=="string"&&C!==""||typeof C=="number")return C=T6(""+C,U.mode,K),C.return=U,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $O:return K=KD(C.type,C.key,C.props,null,U.mode,K),K.ref=YE(U,null,C),K.return=U,K;case s_:return C=M6(C,U.mode,K),C.return=U,C;case Cf:var te=C._init;return R(U,te(C._payload),K)}if(gC(C)||$E(C))return C=xg(C,U.mode,K,null),C.return=U,C;nD(U,C)}return null}function N(U,C,K,te){var pe=C!==null?C.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return pe!==null?null:m(U,C,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case $O:return K.key===pe?_(U,C,K,te):null;case s_:return K.key===pe?x(U,C,K,te):null;case Cf:return pe=K._init,N(U,C,pe(K._payload),te)}if(gC(K)||$E(K))return pe!==null?null:M(U,C,K,te,null);nD(U,K)}return null}function G(U,C,K,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(K)||null,m(C,U,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case $O:return U=U.get(te.key===null?K:te.key)||null,_(C,U,te,pe);case s_:return U=U.get(te.key===null?K:te.key)||null,x(C,U,te,pe);case Cf:var Q=te._init;return G(U,C,K,Q(te._payload),pe)}if(gC(te)||$E(te))return U=U.get(K)||null,M(C,U,te,pe,null);nD(C,te)}return null}function Z(U,C,K,te){for(var pe=null,Q=null,Se=C,Pe=C=0,H=null;Se!==null&&Pe<K.length;Pe++){Se.index>Pe?(H=Se,Se=null):H=Se.sibling;var ye=N(U,Se,K[Pe],te);if(ye===null){Se===null&&(Se=H);break}t&&Se&&ye.alternate===null&&e(U,Se),C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye,Se=H}if(Pe===K.length)return n(U,Se),gi&&cg(U,Pe),pe;if(Se===null){for(;Pe<K.length;Pe++)Se=R(U,K[Pe],te),Se!==null&&(C=u(Se,C,Pe),Q===null?pe=Se:Q.sibling=Se,Q=Se);return gi&&cg(U,Pe),pe}for(Se=r(U,Se);Pe<K.length;Pe++)H=G(Se,U,Pe,K[Pe],te),H!==null&&(t&&H.alternate!==null&&Se.delete(H.key===null?Pe:H.key),C=u(H,C,Pe),Q===null?pe=H:Q.sibling=H,Q=H);return t&&Se.forEach(function(St){return e(U,St)}),gi&&cg(U,Pe),pe}function j(U,C,K,te){var pe=$E(K);if(typeof pe!="function")throw Error(Nt(150));if(K=pe.call(K),K==null)throw Error(Nt(151));for(var Q=pe=null,Se=C,Pe=C=0,H=null,ye=K.next();Se!==null&&!ye.done;Pe++,ye=K.next()){Se.index>Pe?(H=Se,Se=null):H=Se.sibling;var St=N(U,Se,ye.value,te);if(St===null){Se===null&&(Se=H);break}t&&Se&&St.alternate===null&&e(U,Se),C=u(St,C,Pe),Q===null?pe=St:Q.sibling=St,Q=St,Se=H}if(ye.done)return n(U,Se),gi&&cg(U,Pe),pe;if(Se===null){for(;!ye.done;Pe++,ye=K.next())ye=R(U,ye.value,te),ye!==null&&(C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye);return gi&&cg(U,Pe),pe}for(Se=r(U,Se);!ye.done;Pe++,ye=K.next())ye=G(Se,U,Pe,ye.value,te),ye!==null&&(t&&ye.alternate!==null&&Se.delete(ye.key===null?Pe:ye.key),C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye);return t&&Se.forEach(function(kt){return e(U,kt)}),gi&&cg(U,Pe),pe}function z(U,C,K,te){if(typeof K=="object"&&K!==null&&K.type===a_&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case $O:e:{for(var pe=K.key,Q=C;Q!==null;){if(Q.key===pe){if(pe=K.type,pe===a_){if(Q.tag===7){n(U,Q.sibling),C=o(Q,K.props.children),C.return=U,U=C;break e}}else if(Q.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Cf&&Jfe(pe)===Q.type){n(U,Q.sibling),C=o(Q,K.props),C.ref=YE(U,Q,K),C.return=U,U=C;break e}n(U,Q);break}else e(U,Q);Q=Q.sibling}K.type===a_?(C=xg(K.props.children,U.mode,te,K.key),C.return=U,U=C):(te=KD(K.type,K.key,K.props,null,U.mode,te),te.ref=YE(U,C,K),te.return=U,U=te)}return p(U);case s_:e:{for(Q=K.key;C!==null;){if(C.key===Q)if(C.tag===4&&C.stateNode.containerInfo===K.containerInfo&&C.stateNode.implementation===K.implementation){n(U,C.sibling),C=o(C,K.children||[]),C.return=U,U=C;break e}else{n(U,C);break}else e(U,C);C=C.sibling}C=M6(K,U.mode,te),C.return=U,U=C}return p(U);case Cf:return Q=K._init,z(U,C,Q(K._payload),te)}if(gC(K))return Z(U,C,K,te);if($E(K))return j(U,C,K,te);nD(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,C!==null&&C.tag===6?(n(U,C.sibling),C=o(C,K),C.return=U,U=C):(n(U,C),C=T6(K,U.mode,te),C.return=U,U=C),p(U)):n(U,C)}return z}var B_=fbe(!0),mbe=fbe(!1),bP={},Vc=om(bP),qC=om(bP),XC=om(bP);function bg(t){if(t===bP)throw Error(Nt(174));return t}function $9(t,e){switch(ri(XC,e),ri(qC,t),ri(Vc,bP),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:K8(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=K8(e,t)}mi(Vc),ri(Vc,e)}function U_(){mi(Vc),mi(qC),mi(XC)}function vbe(t){bg(XC.current);var e=bg(Vc.current),n=K8(e,t.type);e!==n&&(ri(qC,t),ri(Vc,n))}function W9(t){qC.current===t&&(mi(Vc),mi(qC))}var Ii=om(0);function y3(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var x6=[];function K9(){for(var t=0;t<x6.length;t++)x6[t]._workInProgressVersionPrimary=null;x6.length=0}var zD=Rh.ReactCurrentDispatcher,S6=Rh.ReactCurrentBatchConfig,Ag=0,Oi=null,fo=null,To=null,b3=!1,kC=!1,YC=0,r3e=0;function hs(){throw Error(Nt(321))}function q9(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Uu(t[n],e[n]))return!1;return!0}function X9(t,e,n,r,o,u){if(Ag=u,Oi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zD.current=t===null||t.memoizedState===null?a3e:l3e,t=n(r,o),kC){u=0;do{if(kC=!1,YC=0,25<=u)throw Error(Nt(301));u+=1,To=fo=null,e.updateQueue=null,zD.current=u3e,t=n(r,o)}while(kC)}if(zD.current=_3,e=fo!==null&&fo.next!==null,Ag=0,To=fo=Oi=null,b3=!1,e)throw Error(Nt(300));return t}function Y9(){var t=YC!==0;return YC=0,t}function Dc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return To===null?Oi.memoizedState=To=t:To=To.next=t,To}function Ul(){if(fo===null){var t=Oi.alternate;t=t!==null?t.memoizedState:null}else t=fo.next;var e=To===null?Oi.memoizedState:To.next;if(e!==null)To=e,fo=t;else{if(t===null)throw Error(Nt(310));fo=t,t={memoizedState:fo.memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},To===null?Oi.memoizedState=To=t:To=To.next=t}return To}function ZC(t,e){return typeof e=="function"?e(t):e}function E6(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=t;var r=fo,o=r.baseQueue,u=n.pending;if(u!==null){if(o!==null){var p=o.next;o.next=u.next,u.next=p}r.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,r=r.baseState;var m=p=null,_=null,x=u;do{var M=x.lane;if((Ag&M)===M)_!==null&&(_=_.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:t(r,x.action);else{var R={lane:M,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};_===null?(m=_=R,p=r):_=_.next=R,Oi.lanes|=M,Ig|=M}x=x.next}while(x!==null&&x!==u);_===null?p=r:_.next=m,Uu(r,e.memoizedState)||(ha=!0),e.memoizedState=r,e.baseState=p,e.baseQueue=_,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do u=o.lane,Oi.lanes|=u,Ig|=u,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function C6(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,u=e.memoizedState;if(o!==null){n.pending=null;var p=o=o.next;do u=t(u,p.action),p=p.next;while(p!==o);Uu(u,e.memoizedState)||(ha=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function gbe(){}function ybe(t,e){var n=Oi,r=Ul(),o=e(),u=!Uu(r.memoizedState,o);if(u&&(r.memoizedState=o,ha=!0),r=r.queue,Z9(wbe.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||To!==null&&To.memoizedState.tag&1){if(n.flags|=2048,QC(9,_be.bind(null,n,r,o,e),void 0,null),Io===null)throw Error(Nt(349));Ag&30||bbe(n,e,o)}return o}function bbe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oi.updateQueue,e===null?(e={lastEffect:null,stores:null},Oi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _be(t,e,n,r){e.value=n,e.getSnapshot=r,xbe(e)&&Sbe(t)}function wbe(t,e,n){return n(function(){xbe(e)&&Sbe(t)})}function xbe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Uu(t,n)}catch{return!0}}function Sbe(t){var e=kh(t,1);e!==null&&Bu(e,t,1,-1)}function eme(t){var e=Dc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ZC,lastRenderedState:t},e.queue=t,t=t.dispatch=s3e.bind(null,Oi,t),[e.memoizedState,t]}function QC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oi.updateQueue,e===null?(e={lastEffect:null,stores:null},Oi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ebe(){return Ul().memoizedState}function HD(t,e,n,r){var o=Dc();Oi.flags|=t,o.memoizedState=QC(1|e,n,void 0,r===void 0?null:r)}function nL(t,e,n,r){var o=Ul();r=r===void 0?null:r;var u=void 0;if(fo!==null){var p=fo.memoizedState;if(u=p.destroy,r!==null&&q9(r,p.deps)){o.memoizedState=QC(e,n,u,r);return}}Oi.flags|=t,o.memoizedState=QC(1|e,n,u,r)}function tme(t,e){return HD(8390656,8,t,e)}function Z9(t,e){return nL(2048,8,t,e)}function Cbe(t,e){return nL(4,2,t,e)}function Pbe(t,e){return nL(4,4,t,e)}function kbe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tbe(t,e,n){return n=n!=null?n.concat([t]):null,nL(4,4,kbe.bind(null,e,t),n)}function Q9(){}function Mbe(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&q9(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Abe(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&q9(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ibe(t,e,n){return Ag&21?(Uu(n,e)||(n=Dye(),Oi.lanes|=n,Ig|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ha=!0),t.memoizedState=n)}function i3e(t,e){var n=Ur;Ur=n!==0&&4>n?n:4,t(!0);var r=S6.transition;S6.transition={};try{t(!1),e()}finally{Ur=n,S6.transition=r}}function Rbe(){return Ul().memoizedState}function o3e(t,e,n){var r=zf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Obe(t))Dbe(e,n);else if(n=cbe(t,e,n,r),n!==null){var o=zs();Bu(n,t,r,o),Lbe(n,e,r)}}function s3e(t,e,n){var r=zf(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Obe(t))Dbe(e,o);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var p=e.lastRenderedState,m=u(p,n);if(o.hasEagerState=!0,o.eagerState=m,Uu(m,p)){var _=e.interleaved;_===null?(o.next=o,H9(e)):(o.next=_.next,_.next=o),e.interleaved=o;return}}catch{}finally{}n=cbe(t,e,o,r),n!==null&&(o=zs(),Bu(n,t,r,o),Lbe(n,e,r))}}function Obe(t){var e=t.alternate;return t===Oi||e!==null&&e===Oi}function Dbe(t,e){kC=b3=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lbe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M9(t,n)}}var _3={readContext:Bl,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},a3e={readContext:Bl,useCallback:function(t,e){return Dc().memoizedState=[t,e===void 0?null:e],t},useContext:Bl,useEffect:tme,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,HD(4194308,4,kbe.bind(null,e,t),n)},useLayoutEffect:function(t,e){return HD(4194308,4,t,e)},useInsertionEffect:function(t,e){return HD(4,2,t,e)},useMemo:function(t,e){var n=Dc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=o3e.bind(null,Oi,t),[r.memoizedState,t]},useRef:function(t){var e=Dc();return t={current:t},e.memoizedState=t},useState:eme,useDebugValue:Q9,useDeferredValue:function(t){return Dc().memoizedState=t},useTransition:function(){var t=eme(!1),e=t[0];return t=i3e.bind(null,t[1]),Dc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oi,o=Dc();if(gi){if(n===void 0)throw Error(Nt(407));n=n()}else{if(n=e(),Io===null)throw Error(Nt(349));Ag&30||bbe(r,e,n)}o.memoizedState=n;var u={value:n,getSnapshot:e};return o.queue=u,tme(wbe.bind(null,r,u,t),[t]),r.flags|=2048,QC(9,_be.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=Dc(),e=Io.identifierPrefix;if(gi){var n=mh,r=fh;n=(r&~(1<<32-Fu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=YC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r3e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l3e={readContext:Bl,useCallback:Mbe,useContext:Bl,useEffect:Z9,useImperativeHandle:Tbe,useInsertionEffect:Cbe,useLayoutEffect:Pbe,useMemo:Abe,useReducer:E6,useRef:Ebe,useState:function(){return E6(ZC)},useDebugValue:Q9,useDeferredValue:function(t){var e=Ul();return Ibe(e,fo.memoizedState,t)},useTransition:function(){var t=E6(ZC)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:gbe,useSyncExternalStore:ybe,useId:Rbe,unstable_isNewReconciler:!1},u3e={readContext:Bl,useCallback:Mbe,useContext:Bl,useEffect:Z9,useImperativeHandle:Tbe,useInsertionEffect:Cbe,useLayoutEffect:Pbe,useMemo:Abe,useReducer:C6,useRef:Ebe,useState:function(){return C6(ZC)},useDebugValue:Q9,useDeferredValue:function(t){var e=Ul();return fo===null?e.memoizedState=t:Ibe(e,fo.memoizedState,t)},useTransition:function(){var t=C6(ZC)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:gbe,useSyncExternalStore:ybe,useId:Rbe,unstable_isNewReconciler:!1};function V_(t,e){try{var n="",r=e;do n+=FOe(r),r=r.return;while(r);var o=n}catch(u){o=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:o,digest:null}}function P6(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vH(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c3e=typeof WeakMap=="function"?WeakMap:Map;function Nbe(t,e,n){n=wh(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){x3||(x3=!0,PH=r),vH(t,e)},n}function Fbe(t,e,n){n=wh(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){vH(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){vH(t,e),typeof r!="function"&&(jf===null?jf=new Set([this]):jf.add(this));var p=e.stack;this.componentDidCatch(e.value,{componentStack:p!==null?p:""})}),n}function nme(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c3e;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=E3e.bind(null,t,e,n),e.then(t,t))}function rme(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ime(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wh(-1,1),e.tag=2,Vf(n,e,1))),n.lanes|=1),t)}var d3e=Rh.ReactCurrentOwner,ha=!1;function Us(t,e,n,r){e.child=t===null?mbe(e,null,n,r):B_(e,t.child,n,r)}function ome(t,e,n,r,o){n=n.render;var u=e.ref;return k_(e,o),r=X9(t,e,n,r,u,o),n=Y9(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(gi&&n&&F9(e),e.flags|=1,Us(t,e,r,o),e.child)}function sme(t,e,n,r,o){if(t===null){var u=n.type;return typeof u=="function"&&!sG(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,Bbe(t,e,u,r,o)):(t=KD(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&o)){var p=u.memoizedProps;if(n=n.compare,n=n!==null?n:GC,n(p,r)&&t.ref===e.ref)return Th(t,e,o)}return e.flags|=1,t=Hf(u,r),t.ref=e.ref,t.return=e,e.child=t}function Bbe(t,e,n,r,o){if(t!==null){var u=t.memoizedProps;if(GC(u,r)&&t.ref===e.ref)if(ha=!1,e.pendingProps=r=u,(t.lanes&o)!==0)t.flags&131072&&(ha=!0);else return e.lanes=t.lanes,Th(t,e,o)}return gH(t,e,n,r,o)}function Ube(t,e,n){var r=e.pendingProps,o=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ri(g_,La),La|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ri(g_,La),La|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,ri(g_,La),La|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,ri(g_,La),La|=r;return Us(t,e,o,n),e.child}function Vbe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gH(t,e,n,r,o){var u=ma(n)?Tg:_s.current;return u=N_(e,u),k_(e,o),n=X9(t,e,n,r,u,o),r=Y9(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(gi&&r&&F9(e),e.flags|=1,Us(t,e,n,o),e.child)}function ame(t,e,n,r,o){if(ma(n)){var u=!0;h3(e)}else u=!1;if(k_(e,o),e.stateNode===null)GD(t,e),pbe(e,n,r),mH(e,n,r,o),r=!0;else if(t===null){var p=e.stateNode,m=e.memoizedProps;p.props=m;var _=p.context,x=n.contextType;typeof x=="object"&&x!==null?x=Bl(x):(x=ma(n)?Tg:_s.current,x=N_(e,x));var M=n.getDerivedStateFromProps,R=typeof M=="function"||typeof p.getSnapshotBeforeUpdate=="function";R||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(m!==r||_!==x)&&Qfe(e,p,r,x),Pf=!1;var N=e.memoizedState;p.state=N,g3(e,r,p,o),_=e.memoizedState,m!==r||N!==_||fa.current||Pf?(typeof M=="function"&&(fH(e,n,M,r),_=e.memoizedState),(m=Pf||Zfe(e,n,m,r,N,_,x))?(R||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(e.flags|=4194308)):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=_),p.props=r,p.state=_,p.context=x,r=m):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{p=e.stateNode,dbe(t,e),m=e.memoizedProps,x=e.type===e.elementType?m:Iu(e.type,m),p.props=x,R=e.pendingProps,N=p.context,_=n.contextType,typeof _=="object"&&_!==null?_=Bl(_):(_=ma(n)?Tg:_s.current,_=N_(e,_));var G=n.getDerivedStateFromProps;(M=typeof G=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(m!==R||N!==_)&&Qfe(e,p,r,_),Pf=!1,N=e.memoizedState,p.state=N,g3(e,r,p,o);var Z=e.memoizedState;m!==R||N!==Z||fa.current||Pf?(typeof G=="function"&&(fH(e,n,G,r),Z=e.memoizedState),(x=Pf||Zfe(e,n,x,r,N,Z,_)||!1)?(M||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,Z,_),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,Z,_)),typeof p.componentDidUpdate=="function"&&(e.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof p.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Z),p.props=r,p.state=Z,p.context=_,r=x):(typeof p.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),r=!1)}return yH(t,e,n,r,u,o)}function yH(t,e,n,r,o,u){Vbe(t,e);var p=(e.flags&128)!==0;if(!r&&!p)return o&&Wfe(e,n,!1),Th(t,e,u);r=e.stateNode,d3e.current=e;var m=p&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&p?(e.child=B_(e,t.child,null,u),e.child=B_(e,null,m,u)):Us(t,e,m,u),e.memoizedState=r.state,o&&Wfe(e,n,!0),e.child}function jbe(t){var e=t.stateNode;e.pendingContext?$fe(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$fe(t,e.context,!1),$9(t,e.containerInfo)}function lme(t,e,n,r,o){return F_(),U9(o),e.flags|=256,Us(t,e,n,r),e.child}var bH={dehydrated:null,treeContext:null,retryLane:0};function _H(t){return{baseLanes:t,cachePool:null,transitions:null}}function zbe(t,e,n){var r=e.pendingProps,o=Ii.current,u=!1,p=(e.flags&128)!==0,m;if((m=p)||(m=t!==null&&t.memoizedState===null?!1:(o&2)!==0),m?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ri(Ii,o&1),t===null)return hH(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(p=r.children,t=r.fallback,u?(r=e.mode,u=e.child,p={mode:"hidden",children:p},!(r&1)&&u!==null?(u.childLanes=0,u.pendingProps=p):u=oL(p,r,0,null),t=xg(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=_H(n),e.memoizedState=bH,t):J9(e,p));if(o=t.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return h3e(t,e,p,r,m,o,n);if(u){u=r.fallback,p=e.mode,o=t.child,m=o.sibling;var _={mode:"hidden",children:r.children};return!(p&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=_,e.deletions=null):(r=Hf(o,_),r.subtreeFlags=o.subtreeFlags&14680064),m!==null?u=Hf(m,u):(u=xg(u,p,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,p=t.child.memoizedState,p=p===null?_H(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=t.childLanes&~n,e.memoizedState=bH,r}return u=t.child,t=u.sibling,r=Hf(u,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function J9(t,e){return e=oL({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rD(t,e,n,r){return r!==null&&U9(r),B_(e,t.child,null,n),t=J9(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h3e(t,e,n,r,o,u,p){if(n)return e.flags&256?(e.flags&=-257,r=P6(Error(Nt(422))),rD(t,e,p,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,o=e.mode,r=oL({mode:"visible",children:r.children},o,0,null),u=xg(u,o,p,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,e.mode&1&&B_(e,t.child,null,p),e.child.memoizedState=_H(p),e.memoizedState=bH,u);if(!(e.mode&1))return rD(t,e,p,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var m=r.dgst;return r=m,u=Error(Nt(419)),r=P6(u,r,void 0),rD(t,e,p,r)}if(m=(p&t.childLanes)!==0,ha||m){if(r=Io,r!==null){switch(p&-p){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|p)?0:o,o!==0&&o!==u.retryLane&&(u.retryLane=o,kh(t,o),Bu(r,t,o,-1))}return oG(),r=P6(Error(Nt(421))),rD(t,e,p,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=C3e.bind(null,t),o._reactRetry=e,null):(t=u.treeContext,Na=Uf(o.nextSibling),Fa=e,gi=!0,Ou=null,t!==null&&(Ml[Al++]=fh,Ml[Al++]=mh,Ml[Al++]=Mg,fh=t.id,mh=t.overflow,Mg=e),e=J9(e,r.children),e.flags|=4096,e)}function ume(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pH(t.return,e,n)}function k6(t,e,n,r,o){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=o)}function Hbe(t,e,n){var r=e.pendingProps,o=r.revealOrder,u=r.tail;if(Us(t,e,r.children,n),r=Ii.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ume(t,n,e);else if(t.tag===19)ume(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ri(Ii,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&y3(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),k6(e,!1,o,n,u);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&y3(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}k6(e,!0,n,null,u);break;case"together":k6(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function GD(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Th(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ig|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Nt(153));if(e.child!==null){for(t=e.child,n=Hf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function p3e(t,e,n){switch(e.tag){case 3:jbe(e),F_();break;case 5:vbe(e);break;case 1:ma(e.type)&&h3(e);break;case 4:$9(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;ri(m3,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ri(Ii,Ii.current&1),e.flags|=128,null):n&e.child.childLanes?zbe(t,e,n):(ri(Ii,Ii.current&1),t=Th(t,e,n),t!==null?t.sibling:null);ri(Ii,Ii.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hbe(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ri(Ii,Ii.current),r)break;return null;case 22:case 23:return e.lanes=0,Ube(t,e,n)}return Th(t,e,n)}var Gbe,wH,$be,Wbe;Gbe=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wH=function(){};$be=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,bg(Vc.current);var u=null;switch(n){case"input":o=H8(t,o),r=H8(t,r),u=[];break;case"select":o=Di({},o,{value:void 0}),r=Di({},r,{value:void 0}),u=[];break;case"textarea":o=W8(t,o),r=W8(t,r),u=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=c3)}q8(n,r);var p;n=null;for(x in o)if(!r.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var m=o[x];for(p in m)m.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(FC.hasOwnProperty(x)?u||(u=[]):(u=u||[]).push(x,null));for(x in r){var _=r[x];if(m=o!=null?o[x]:void 0,r.hasOwnProperty(x)&&_!==m&&(_!=null||m!=null))if(x==="style")if(m){for(p in m)!m.hasOwnProperty(p)||_&&_.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in _)_.hasOwnProperty(p)&&m[p]!==_[p]&&(n||(n={}),n[p]=_[p])}else n||(u||(u=[]),u.push(x,n)),n=_;else x==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,m=m?m.__html:void 0,_!=null&&m!==_&&(u=u||[]).push(x,_)):x==="children"?typeof _!="string"&&typeof _!="number"||(u=u||[]).push(x,""+_):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(FC.hasOwnProperty(x)?(_!=null&&x==="onScroll"&&pi("scroll",t),u||m===_||(u=[])):(u=u||[]).push(x,_))}n&&(u=u||[]).push("style",n);var x=u;(e.updateQueue=x)&&(e.flags|=4)}};Wbe=function(t,e,n,r){n!==r&&(e.flags|=4)};function ZE(t,e){if(!gi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ps(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f3e(t,e,n){var r=e.pendingProps;switch(B9(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(e),null;case 1:return ma(e.type)&&d3(),ps(e),null;case 3:return r=e.stateNode,U_(),mi(fa),mi(_s),K9(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tD(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ou!==null&&(MH(Ou),Ou=null))),wH(t,e),ps(e),null;case 5:W9(e);var o=bg(XC.current);if(n=e.type,t!==null&&e.stateNode!=null)$be(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Nt(166));return ps(e),null}if(t=bg(Vc.current),tD(e)){r=e.stateNode,n=e.type;var u=e.memoizedProps;switch(r[Fc]=e,r[KC]=u,t=(e.mode&1)!==0,n){case"dialog":pi("cancel",r),pi("close",r);break;case"iframe":case"object":case"embed":pi("load",r);break;case"video":case"audio":for(o=0;o<bC.length;o++)pi(bC[o],r);break;case"source":pi("error",r);break;case"img":case"image":case"link":pi("error",r),pi("load",r);break;case"details":pi("toggle",r);break;case"input":yfe(r,u),pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},pi("invalid",r);break;case"textarea":_fe(r,u),pi("invalid",r)}q8(n,u),o=null;for(var p in u)if(u.hasOwnProperty(p)){var m=u[p];p==="children"?typeof m=="string"?r.textContent!==m&&(u.suppressHydrationWarning!==!0&&eD(r.textContent,m,t),o=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&eD(r.textContent,m,t),o=["children",""+m]):FC.hasOwnProperty(p)&&m!=null&&p==="onScroll"&&pi("scroll",r)}switch(n){case"input":WO(r),bfe(r,u,!0);break;case"textarea":WO(r),wfe(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=c3)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{p=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bye(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=p.createElement(n,{is:r.is}):(t=p.createElement(n),n==="select"&&(p=t,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):t=p.createElementNS(t,n),t[Fc]=e,t[KC]=r,Gbe(t,e,!1,!1),e.stateNode=t;e:{switch(p=X8(n,r),n){case"dialog":pi("cancel",t),pi("close",t),o=r;break;case"iframe":case"object":case"embed":pi("load",t),o=r;break;case"video":case"audio":for(o=0;o<bC.length;o++)pi(bC[o],t);o=r;break;case"source":pi("error",t),o=r;break;case"img":case"image":case"link":pi("error",t),pi("load",t),o=r;break;case"details":pi("toggle",t),o=r;break;case"input":yfe(t,r),o=H8(t,r),pi("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Di({},r,{value:void 0}),pi("invalid",t);break;case"textarea":_fe(t,r),o=W8(t,r),pi("invalid",t);break;default:o=r}q8(n,o),m=o;for(u in m)if(m.hasOwnProperty(u)){var _=m[u];u==="style"?xye(t,_):u==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&_ye(t,_)):u==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&BC(t,_):typeof _=="number"&&BC(t,""+_):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(FC.hasOwnProperty(u)?_!=null&&u==="onScroll"&&pi("scroll",t):_!=null&&S9(t,u,_,p))}switch(n){case"input":WO(t),bfe(t,r,!1);break;case"textarea":WO(t),wfe(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zf(r.value));break;case"select":t.multiple=!!r.multiple,u=r.value,u!=null?S_(t,!!r.multiple,u,!1):r.defaultValue!=null&&S_(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=c3)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ps(e),null;case 6:if(t&&e.stateNode!=null)Wbe(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Nt(166));if(n=bg(XC.current),bg(Vc.current),tD(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fc]=e,(u=r.nodeValue!==n)&&(t=Fa,t!==null))switch(t.tag){case 3:eD(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eD(r.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fc]=e,e.stateNode=r}return ps(e),null;case 13:if(mi(Ii),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gi&&Na!==null&&e.mode&1&&!(e.flags&128))ube(),F_(),e.flags|=98560,u=!1;else if(u=tD(e),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(Nt(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Nt(317));u[Fc]=e}else F_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ps(e),u=!1}else Ou!==null&&(MH(Ou),Ou=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ii.current&1?mo===0&&(mo=3):oG())),e.updateQueue!==null&&(e.flags|=4),ps(e),null);case 4:return U_(),wH(t,e),t===null&&$C(e.stateNode.containerInfo),ps(e),null;case 10:return z9(e.type._context),ps(e),null;case 17:return ma(e.type)&&d3(),ps(e),null;case 19:if(mi(Ii),u=e.memoizedState,u===null)return ps(e),null;if(r=(e.flags&128)!==0,p=u.rendering,p===null)if(r)ZE(u,!1);else{if(mo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(p=y3(t),p!==null){for(e.flags|=128,ZE(u,!1),r=p.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)u=n,t=r,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,t=p.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ri(Ii,Ii.current&1|2),e.child}t=t.sibling}u.tail!==null&&Qi()>j_&&(e.flags|=128,r=!0,ZE(u,!1),e.lanes=4194304)}else{if(!r)if(t=y3(p),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ZE(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!gi)return ps(e),null}else 2*Qi()-u.renderingStartTime>j_&&n!==1073741824&&(e.flags|=128,r=!0,ZE(u,!1),e.lanes=4194304);u.isBackwards?(p.sibling=e.child,e.child=p):(n=u.last,n!==null?n.sibling=p:e.child=p,u.last=p)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Qi(),e.sibling=null,n=Ii.current,ri(Ii,r?n&1|2:n&1),e):(ps(e),null);case 22:case 23:return iG(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?La&1073741824&&(ps(e),e.subtreeFlags&6&&(e.flags|=8192)):ps(e),null;case 24:return null;case 25:return null}throw Error(Nt(156,e.tag))}function m3e(t,e){switch(B9(e),e.tag){case 1:return ma(e.type)&&d3(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return U_(),mi(fa),mi(_s),K9(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return W9(e),null;case 13:if(mi(Ii),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Nt(340));F_()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mi(Ii),null;case 4:return U_(),null;case 10:return z9(e.type._context),null;case 22:case 23:return iG(),null;case 24:return null;default:return null}}var iD=!1,gs=!1,v3e=typeof WeakSet=="function"?WeakSet:Set,ln=null;function v_(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bi(t,e,r)}else n.current=null}function xH(t,e,n){try{n()}catch(r){Bi(t,e,r)}}var cme=!1;function g3e(t,e){if(oH=a3,t=Yye(),N9(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var p=0,m=-1,_=-1,x=0,M=0,R=t,N=null;t:for(;;){for(var G;R!==n||o!==0&&R.nodeType!==3||(m=p+o),R!==u||r!==0&&R.nodeType!==3||(_=p+r),R.nodeType===3&&(p+=R.nodeValue.length),(G=R.firstChild)!==null;)N=R,R=G;for(;;){if(R===t)break t;if(N===n&&++x===o&&(m=p),N===u&&++M===r&&(_=p),(G=R.nextSibling)!==null)break;R=N,N=R.parentNode}R=G}n=m===-1||_===-1?null:{start:m,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(sH={focusedElem:t,selectionRange:n},a3=!1,ln=e;ln!==null;)if(e=ln,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ln=t;else for(;ln!==null;){e=ln;try{var Z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var j=Z.memoizedProps,z=Z.memoizedState,U=e.stateNode,C=U.getSnapshotBeforeUpdate(e.elementType===e.type?j:Iu(e.type,j),z);U.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(te){Bi(e,e.return,te)}if(t=e.sibling,t!==null){t.return=e.return,ln=t;break}ln=e.return}return Z=cme,cme=!1,Z}function TC(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.destroy;o.destroy=void 0,u!==void 0&&xH(e,n,u)}o=o.next}while(o!==r)}}function rL(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function SH(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kbe(t){var e=t.alternate;e!==null&&(t.alternate=null,Kbe(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fc],delete e[KC],delete e[uH],delete e[JDe],delete e[e3e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qbe(t){return t.tag===5||t.tag===3||t.tag===4}function dme(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qbe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function EH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=c3));else if(r!==4&&(t=t.child,t!==null))for(EH(t,e,n),t=t.sibling;t!==null;)EH(t,e,n),t=t.sibling}function CH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(CH(t,e,n),t=t.sibling;t!==null;)CH(t,e,n),t=t.sibling}var qo=null,Ru=!1;function hf(t,e,n){for(n=n.child;n!==null;)Xbe(t,e,n),n=n.sibling}function Xbe(t,e,n){if(Uc&&typeof Uc.onCommitFiberUnmount=="function")try{Uc.onCommitFiberUnmount(X3,n)}catch{}switch(n.tag){case 5:gs||v_(n,e);case 6:var r=qo,o=Ru;qo=null,hf(t,e,n),qo=r,Ru=o,qo!==null&&(Ru?(t=qo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qo.removeChild(n.stateNode));break;case 18:qo!==null&&(Ru?(t=qo,n=n.stateNode,t.nodeType===8?_6(t.parentNode,n):t.nodeType===1&&_6(t,n),zC(t)):_6(qo,n.stateNode));break;case 4:r=qo,o=Ru,qo=n.stateNode.containerInfo,Ru=!0,hf(t,e,n),qo=r,Ru=o;break;case 0:case 11:case 14:case 15:if(!gs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var u=o,p=u.destroy;u=u.tag,p!==void 0&&(u&2||u&4)&&xH(n,e,p),o=o.next}while(o!==r)}hf(t,e,n);break;case 1:if(!gs&&(v_(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(m){Bi(n,e,m)}hf(t,e,n);break;case 21:hf(t,e,n);break;case 22:n.mode&1?(gs=(r=gs)||n.memoizedState!==null,hf(t,e,n),gs=r):hf(t,e,n);break;default:hf(t,e,n)}}function hme(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v3e),e.forEach(function(r){var o=P3e.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Pu(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var u=t,p=e,m=p;e:for(;m!==null;){switch(m.tag){case 5:qo=m.stateNode,Ru=!1;break e;case 3:qo=m.stateNode.containerInfo,Ru=!0;break e;case 4:qo=m.stateNode.containerInfo,Ru=!0;break e}m=m.return}if(qo===null)throw Error(Nt(160));Xbe(u,p,o),qo=null,Ru=!1;var _=o.alternate;_!==null&&(_.return=null),o.return=null}catch(x){Bi(o,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ybe(e,t),e=e.sibling}function Ybe(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pu(e,t),Oc(t),r&4){try{TC(3,t,t.return),rL(3,t)}catch(j){Bi(t,t.return,j)}try{TC(5,t,t.return)}catch(j){Bi(t,t.return,j)}}break;case 1:Pu(e,t),Oc(t),r&512&&n!==null&&v_(n,n.return);break;case 5:if(Pu(e,t),Oc(t),r&512&&n!==null&&v_(n,n.return),t.flags&32){var o=t.stateNode;try{BC(o,"")}catch(j){Bi(t,t.return,j)}}if(r&4&&(o=t.stateNode,o!=null)){var u=t.memoizedProps,p=n!==null?n.memoizedProps:u,m=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&gye(o,u),X8(m,p);var x=X8(m,u);for(p=0;p<_.length;p+=2){var M=_[p],R=_[p+1];M==="style"?xye(o,R):M==="dangerouslySetInnerHTML"?_ye(o,R):M==="children"?BC(o,R):S9(o,M,R,x)}switch(m){case"input":G8(o,u);break;case"textarea":yye(o,u);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!u.multiple;var G=u.value;G!=null?S_(o,!!u.multiple,G,!1):N!==!!u.multiple&&(u.defaultValue!=null?S_(o,!!u.multiple,u.defaultValue,!0):S_(o,!!u.multiple,u.multiple?[]:"",!1))}o[KC]=u}catch(j){Bi(t,t.return,j)}}break;case 6:if(Pu(e,t),Oc(t),r&4){if(t.stateNode===null)throw Error(Nt(162));o=t.stateNode,u=t.memoizedProps;try{o.nodeValue=u}catch(j){Bi(t,t.return,j)}}break;case 3:if(Pu(e,t),Oc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zC(e.containerInfo)}catch(j){Bi(t,t.return,j)}break;case 4:Pu(e,t),Oc(t);break;case 13:Pu(e,t),Oc(t),o=t.child,o.flags&8192&&(u=o.memoizedState!==null,o.stateNode.isHidden=u,!u||o.alternate!==null&&o.alternate.memoizedState!==null||(nG=Qi())),r&4&&hme(t);break;case 22:if(M=n!==null&&n.memoizedState!==null,t.mode&1?(gs=(x=gs)||M,Pu(e,t),gs=x):Pu(e,t),Oc(t),r&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!M&&t.mode&1)for(ln=t,M=t.child;M!==null;){for(R=ln=M;ln!==null;){switch(N=ln,G=N.child,N.tag){case 0:case 11:case 14:case 15:TC(4,N,N.return);break;case 1:v_(N,N.return);var Z=N.stateNode;if(typeof Z.componentWillUnmount=="function"){r=N,n=N.return;try{e=r,Z.props=e.memoizedProps,Z.state=e.memoizedState,Z.componentWillUnmount()}catch(j){Bi(r,n,j)}}break;case 5:v_(N,N.return);break;case 22:if(N.memoizedState!==null){fme(R);continue}}G!==null?(G.return=N,ln=G):fme(R)}M=M.sibling}e:for(M=null,R=t;;){if(R.tag===5){if(M===null){M=R;try{o=R.stateNode,x?(u=o.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=R.stateNode,_=R.memoizedProps.style,p=_!=null&&_.hasOwnProperty("display")?_.display:null,m.style.display=wye("display",p))}catch(j){Bi(t,t.return,j)}}}else if(R.tag===6){if(M===null)try{R.stateNode.nodeValue=x?"":R.memoizedProps}catch(j){Bi(t,t.return,j)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===t)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===t)break e;for(;R.sibling===null;){if(R.return===null||R.return===t)break e;M===R&&(M=null),R=R.return}M===R&&(M=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:Pu(e,t),Oc(t),r&4&&hme(t);break;case 21:break;default:Pu(e,t),Oc(t)}}function Oc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qbe(n)){var r=n;break e}n=n.return}throw Error(Nt(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(BC(o,""),r.flags&=-33);var u=dme(t);CH(t,u,o);break;case 3:case 4:var p=r.stateNode.containerInfo,m=dme(t);EH(t,m,p);break;default:throw Error(Nt(161))}}catch(_){Bi(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y3e(t,e,n){ln=t,Zbe(t)}function Zbe(t,e,n){for(var r=(t.mode&1)!==0;ln!==null;){var o=ln,u=o.child;if(o.tag===22&&r){var p=o.memoizedState!==null||iD;if(!p){var m=o.alternate,_=m!==null&&m.memoizedState!==null||gs;m=iD;var x=gs;if(iD=p,(gs=_)&&!x)for(ln=o;ln!==null;)p=ln,_=p.child,p.tag===22&&p.memoizedState!==null?mme(o):_!==null?(_.return=p,ln=_):mme(o);for(;u!==null;)ln=u,Zbe(u),u=u.sibling;ln=o,iD=m,gs=x}pme(t)}else o.subtreeFlags&8772&&u!==null?(u.return=o,ln=u):pme(t)}}function pme(t){for(;ln!==null;){var e=ln;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gs||rL(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gs)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Iu(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&Yfe(e,u,r);break;case 3:var p=e.updateQueue;if(p!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yfe(e,p,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var M=x.memoizedState;if(M!==null){var R=M.dehydrated;R!==null&&zC(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}gs||e.flags&512&&SH(e)}catch(N){Bi(e,e.return,N)}}if(e===t){ln=null;break}if(n=e.sibling,n!==null){n.return=e.return,ln=n;break}ln=e.return}}function fme(t){for(;ln!==null;){var e=ln;if(e===t){ln=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ln=n;break}ln=e.return}}function mme(t){for(;ln!==null;){var e=ln;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rL(4,e)}catch(_){Bi(e,n,_)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(_){Bi(e,o,_)}}var u=e.return;try{SH(e)}catch(_){Bi(e,u,_)}break;case 5:var p=e.return;try{SH(e)}catch(_){Bi(e,p,_)}}}catch(_){Bi(e,e.return,_)}if(e===t){ln=null;break}var m=e.sibling;if(m!==null){m.return=e.return,ln=m;break}ln=e.return}}var b3e=Math.ceil,w3=Rh.ReactCurrentDispatcher,eG=Rh.ReactCurrentOwner,Nl=Rh.ReactCurrentBatchConfig,br=0,Io=null,lo=null,Yo=0,La=0,g_=om(0),mo=0,JC=null,Ig=0,iL=0,tG=0,MC=null,ca=null,nG=0,j_=1/0,dh=null,x3=!1,PH=null,jf=null,oD=!1,If=null,S3=0,AC=0,kH=null,$D=-1,WD=0;function zs(){return br&6?Qi():$D!==-1?$D:$D=Qi()}function zf(t){return t.mode&1?br&2&&Yo!==0?Yo&-Yo:n3e.transition!==null?(WD===0&&(WD=Dye()),WD):(t=Ur,t!==0||(t=window.event,t=t===void 0?16:jye(t.type)),t):1}function Bu(t,e,n,r){if(50<AC)throw AC=0,kH=null,Error(Nt(185));vP(t,n,r),(!(br&2)||t!==Io)&&(t===Io&&(!(br&2)&&(iL|=n),mo===4&&Mf(t,Yo)),va(t,r),n===1&&br===0&&!(e.mode&1)&&(j_=Qi()+500,eL&&sm()))}function va(t,e){var n=t.callbackNode;nDe(t,e);var r=s3(t,t===Io?Yo:0);if(r===0)n!==null&&Efe(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Efe(n),e===1)t.tag===0?t3e(vme.bind(null,t)):sbe(vme.bind(null,t)),ZDe(function(){!(br&6)&&sm()}),n=null;else{switch(Lye(r)){case 1:n=T9;break;case 4:n=Rye;break;case 16:n=o3;break;case 536870912:n=Oye;break;default:n=o3}n=o_e(n,Qbe.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qbe(t,e){if($D=-1,WD=0,br&6)throw Error(Nt(327));var n=t.callbackNode;if(T_()&&t.callbackNode!==n)return null;var r=s3(t,t===Io?Yo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=E3(t,r);else{e=r;var o=br;br|=2;var u=e_e();(Io!==t||Yo!==e)&&(dh=null,j_=Qi()+500,wg(t,e));do try{x3e();break}catch(m){Jbe(t,m)}while(1);j9(),w3.current=u,br=o,lo!==null?e=0:(Io=null,Yo=0,e=mo)}if(e!==0){if(e===2&&(o=eH(t),o!==0&&(r=o,e=TH(t,o))),e===1)throw n=JC,wg(t,0),Mf(t,r),va(t,Qi()),n;if(e===6)Mf(t,r);else{if(o=t.current.alternate,!(r&30)&&!_3e(o)&&(e=E3(t,r),e===2&&(u=eH(t),u!==0&&(r=u,e=TH(t,u))),e===1))throw n=JC,wg(t,0),Mf(t,r),va(t,Qi()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(Nt(345));case 2:dg(t,ca,dh);break;case 3:if(Mf(t,r),(r&130023424)===r&&(e=nG+500-Qi(),10<e)){if(s3(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){zs(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=lH(dg.bind(null,t,ca,dh),e);break}dg(t,ca,dh);break;case 4:if(Mf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var p=31-Fu(r);u=1<<p,p=e[p],p>o&&(o=p),r&=~u}if(r=o,r=Qi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*b3e(r/1960))-r,10<r){t.timeoutHandle=lH(dg.bind(null,t,ca,dh),r);break}dg(t,ca,dh);break;case 5:dg(t,ca,dh);break;default:throw Error(Nt(329))}}}return va(t,Qi()),t.callbackNode===n?Qbe.bind(null,t):null}function TH(t,e){var n=MC;return t.current.memoizedState.isDehydrated&&(wg(t,e).flags|=256),t=E3(t,e),t!==2&&(e=ca,ca=n,e!==null&&MH(e)),t}function MH(t){ca===null?ca=t:ca.push.apply(ca,t)}function _3e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],u=o.getSnapshot;o=o.value;try{if(!Uu(u(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mf(t,e){for(e&=~tG,e&=~iL,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fu(e),r=1<<n;t[n]=-1,e&=~r}}function vme(t){if(br&6)throw Error(Nt(327));T_();var e=s3(t,0);if(!(e&1))return va(t,Qi()),null;var n=E3(t,e);if(t.tag!==0&&n===2){var r=eH(t);r!==0&&(e=r,n=TH(t,r))}if(n===1)throw n=JC,wg(t,0),Mf(t,e),va(t,Qi()),n;if(n===6)throw Error(Nt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dg(t,ca,dh),va(t,Qi()),null}function rG(t,e){var n=br;br|=1;try{return t(e)}finally{br=n,br===0&&(j_=Qi()+500,eL&&sm())}}function Rg(t){If!==null&&If.tag===0&&!(br&6)&&T_();var e=br;br|=1;var n=Nl.transition,r=Ur;try{if(Nl.transition=null,Ur=1,t)return t()}finally{Ur=r,Nl.transition=n,br=e,!(br&6)&&sm()}}function iG(){La=g_.current,mi(g_)}function wg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YDe(n)),lo!==null)for(n=lo.return;n!==null;){var r=n;switch(B9(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&d3();break;case 3:U_(),mi(fa),mi(_s),K9();break;case 5:W9(r);break;case 4:U_();break;case 13:mi(Ii);break;case 19:mi(Ii);break;case 10:z9(r.type._context);break;case 22:case 23:iG()}n=n.return}if(Io=t,lo=t=Hf(t.current,null),Yo=La=e,mo=0,JC=null,tG=iL=Ig=0,ca=MC=null,yg!==null){for(e=0;e<yg.length;e++)if(n=yg[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,u=n.pending;if(u!==null){var p=u.next;u.next=o,r.next=p}n.pending=r}yg=null}return t}function Jbe(t,e){do{var n=lo;try{if(j9(),zD.current=_3,b3){for(var r=Oi.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}b3=!1}if(Ag=0,To=fo=Oi=null,kC=!1,YC=0,eG.current=null,n===null||n.return===null){mo=1,JC=e,lo=null;break}e:{var u=t,p=n.return,m=n,_=e;if(e=Yo,m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var x=_,M=m,R=M.tag;if(!(M.mode&1)&&(R===0||R===11||R===15)){var N=M.alternate;N?(M.updateQueue=N.updateQueue,M.memoizedState=N.memoizedState,M.lanes=N.lanes):(M.updateQueue=null,M.memoizedState=null)}var G=rme(p);if(G!==null){G.flags&=-257,ime(G,p,m,u,e),G.mode&1&&nme(u,x,e),e=G,_=x;var Z=e.updateQueue;if(Z===null){var j=new Set;j.add(_),e.updateQueue=j}else Z.add(_);break e}else{if(!(e&1)){nme(u,x,e),oG();break e}_=Error(Nt(426))}}else if(gi&&m.mode&1){var z=rme(p);if(z!==null){!(z.flags&65536)&&(z.flags|=256),ime(z,p,m,u,e),U9(V_(_,m));break e}}u=_=V_(_,m),mo!==4&&(mo=2),MC===null?MC=[u]:MC.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var U=Nbe(u,_,e);Xfe(u,U);break e;case 1:m=_;var C=u.type,K=u.stateNode;if(!(u.flags&128)&&(typeof C.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(jf===null||!jf.has(K)))){u.flags|=65536,e&=-e,u.lanes|=e;var te=Fbe(u,m,e);Xfe(u,te);break e}}u=u.return}while(u!==null)}n_e(n)}catch(pe){e=pe,lo===n&&n!==null&&(lo=n=n.return);continue}break}while(1)}function e_e(){var t=w3.current;return w3.current=_3,t===null?_3:t}function oG(){(mo===0||mo===3||mo===2)&&(mo=4),Io===null||!(Ig&268435455)&&!(iL&268435455)||Mf(Io,Yo)}function E3(t,e){var n=br;br|=2;var r=e_e();(Io!==t||Yo!==e)&&(dh=null,wg(t,e));do try{w3e();break}catch(o){Jbe(t,o)}while(1);if(j9(),br=n,w3.current=r,lo!==null)throw Error(Nt(261));return Io=null,Yo=0,mo}function w3e(){for(;lo!==null;)t_e(lo)}function x3e(){for(;lo!==null&&!KOe();)t_e(lo)}function t_e(t){var e=i_e(t.alternate,t,La);t.memoizedProps=t.pendingProps,e===null?n_e(t):lo=e,eG.current=null}function n_e(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m3e(n,e),n!==null){n.flags&=32767,lo=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mo=6,lo=null;return}}else if(n=f3e(n,e,La),n!==null){lo=n;return}if(e=e.sibling,e!==null){lo=e;return}lo=e=t}while(e!==null);mo===0&&(mo=5)}function dg(t,e,n){var r=Ur,o=Nl.transition;try{Nl.transition=null,Ur=1,S3e(t,e,n,r)}finally{Nl.transition=o,Ur=r}return null}function S3e(t,e,n,r){do T_();while(If!==null);if(br&6)throw Error(Nt(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Nt(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(rDe(t,u),t===Io&&(lo=Io=null,Yo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oD||(oD=!0,o_e(o3,function(){return T_(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Nl.transition,Nl.transition=null;var p=Ur;Ur=1;var m=br;br|=4,eG.current=null,g3e(t,n),Ybe(n,t),HDe(sH),a3=!!oH,sH=oH=null,t.current=n,y3e(n),qOe(),br=m,Ur=p,Nl.transition=u}else t.current=n;if(oD&&(oD=!1,If=t,S3=o),u=t.pendingLanes,u===0&&(jf=null),ZOe(n.stateNode),va(t,Qi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(x3)throw x3=!1,t=PH,PH=null,t;return S3&1&&t.tag!==0&&T_(),u=t.pendingLanes,u&1?t===kH?AC++:(AC=0,kH=t):AC=0,sm(),null}function T_(){if(If!==null){var t=Lye(S3),e=Nl.transition,n=Ur;try{if(Nl.transition=null,Ur=16>t?16:t,If===null)var r=!1;else{if(t=If,If=null,S3=0,br&6)throw Error(Nt(331));var o=br;for(br|=4,ln=t.current;ln!==null;){var u=ln,p=u.child;if(ln.flags&16){var m=u.deletions;if(m!==null){for(var _=0;_<m.length;_++){var x=m[_];for(ln=x;ln!==null;){var M=ln;switch(M.tag){case 0:case 11:case 15:TC(8,M,u)}var R=M.child;if(R!==null)R.return=M,ln=R;else for(;ln!==null;){M=ln;var N=M.sibling,G=M.return;if(Kbe(M),M===x){ln=null;break}if(N!==null){N.return=G,ln=N;break}ln=G}}}var Z=u.alternate;if(Z!==null){var j=Z.child;if(j!==null){Z.child=null;do{var z=j.sibling;j.sibling=null,j=z}while(j!==null)}}ln=u}}if(u.subtreeFlags&2064&&p!==null)p.return=u,ln=p;else e:for(;ln!==null;){if(u=ln,u.flags&2048)switch(u.tag){case 0:case 11:case 15:TC(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,ln=U;break e}ln=u.return}}var C=t.current;for(ln=C;ln!==null;){p=ln;var K=p.child;if(p.subtreeFlags&2064&&K!==null)K.return=p,ln=K;else e:for(p=C;ln!==null;){if(m=ln,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:rL(9,m)}}catch(pe){Bi(m,m.return,pe)}if(m===p){ln=null;break e}var te=m.sibling;if(te!==null){te.return=m.return,ln=te;break e}ln=m.return}}if(br=o,sm(),Uc&&typeof Uc.onPostCommitFiberRoot=="function")try{Uc.onPostCommitFiberRoot(X3,t)}catch{}r=!0}return r}finally{Ur=n,Nl.transition=e}}return!1}function gme(t,e,n){e=V_(n,e),e=Nbe(t,e,1),t=Vf(t,e,1),e=zs(),t!==null&&(vP(t,1,e),va(t,e))}function Bi(t,e,n){if(t.tag===3)gme(t,t,n);else for(;e!==null;){if(e.tag===3){gme(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jf===null||!jf.has(r))){t=V_(n,t),t=Fbe(e,t,1),e=Vf(e,t,1),t=zs(),e!==null&&(vP(e,1,t),va(e,t));break}}e=e.return}}function E3e(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zs(),t.pingedLanes|=t.suspendedLanes&n,Io===t&&(Yo&n)===n&&(mo===4||mo===3&&(Yo&130023424)===Yo&&500>Qi()-nG?wg(t,0):tG|=n),va(t,e)}function r_e(t,e){e===0&&(t.mode&1?(e=XO,XO<<=1,!(XO&130023424)&&(XO=4194304)):e=1);var n=zs();t=kh(t,e),t!==null&&(vP(t,e,n),va(t,n))}function C3e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r_e(t,n)}function P3e(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Nt(314))}r!==null&&r.delete(e),r_e(t,n)}var i_e;i_e=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fa.current)ha=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ha=!1,p3e(t,e,n);ha=!!(t.flags&131072)}else ha=!1,gi&&e.flags&1048576&&abe(e,f3,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;GD(t,e),t=e.pendingProps;var o=N_(e,_s.current);k_(e,n),o=X9(null,e,r,t,o,n);var u=Y9();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ma(r)?(u=!0,h3(e)):u=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,G9(e),o.updater=tL,e.stateNode=o,o._reactInternals=e,mH(e,r,t,n),e=yH(null,e,r,!0,u,n)):(e.tag=0,gi&&u&&F9(e),Us(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(GD(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=T3e(r),t=Iu(r,t),o){case 0:e=gH(null,e,r,t,n);break e;case 1:e=ame(null,e,r,t,n);break e;case 11:e=ome(null,e,r,t,n);break e;case 14:e=sme(null,e,r,Iu(r.type,t),n);break e}throw Error(Nt(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Iu(r,o),gH(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Iu(r,o),ame(t,e,r,o,n);case 3:e:{if(jbe(e),t===null)throw Error(Nt(387));r=e.pendingProps,u=e.memoizedState,o=u.element,dbe(t,e),g3(e,r,null,n);var p=e.memoizedState;if(r=p.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){o=V_(Error(Nt(423)),e),e=lme(t,e,r,n,o);break e}else if(r!==o){o=V_(Error(Nt(424)),e),e=lme(t,e,r,n,o);break e}else for(Na=Uf(e.stateNode.containerInfo.firstChild),Fa=e,gi=!0,Ou=null,n=mbe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(F_(),r===o){e=Th(t,e,n);break e}Us(t,e,r,n)}e=e.child}return e;case 5:return vbe(e),t===null&&hH(e),r=e.type,o=e.pendingProps,u=t!==null?t.memoizedProps:null,p=o.children,aH(r,o)?p=null:u!==null&&aH(r,u)&&(e.flags|=32),Vbe(t,e),Us(t,e,p,n),e.child;case 6:return t===null&&hH(e),null;case 13:return zbe(t,e,n);case 4:return $9(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=B_(e,null,r,n):Us(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Iu(r,o),ome(t,e,r,o,n);case 7:return Us(t,e,e.pendingProps,n),e.child;case 8:return Us(t,e,e.pendingProps.children,n),e.child;case 12:return Us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,u=e.memoizedProps,p=o.value,ri(m3,r._currentValue),r._currentValue=p,u!==null)if(Uu(u.value,p)){if(u.children===o.children&&!fa.current){e=Th(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var m=u.dependencies;if(m!==null){p=u.child;for(var _=m.firstContext;_!==null;){if(_.context===r){if(u.tag===1){_=wh(-1,n&-n),_.tag=2;var x=u.updateQueue;if(x!==null){x=x.shared;var M=x.pending;M===null?_.next=_:(_.next=M.next,M.next=_),x.pending=_}}u.lanes|=n,_=u.alternate,_!==null&&(_.lanes|=n),pH(u.return,n,e),m.lanes|=n;break}_=_.next}}else if(u.tag===10)p=u.type===e.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(Nt(341));p.lanes|=n,m=p.alternate,m!==null&&(m.lanes|=n),pH(p,n,e),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===e){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}Us(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,k_(e,n),o=Bl(o),r=r(o),e.flags|=1,Us(t,e,r,n),e.child;case 14:return r=e.type,o=Iu(r,e.pendingProps),o=Iu(r.type,o),sme(t,e,r,o,n);case 15:return Bbe(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Iu(r,o),GD(t,e),e.tag=1,ma(r)?(t=!0,h3(e)):t=!1,k_(e,n),pbe(e,r,o),mH(e,r,o,n),yH(null,e,r,!0,t,n);case 19:return Hbe(t,e,n);case 22:return Ube(t,e,n)}throw Error(Nt(156,e.tag))};function o_e(t,e){return Iye(t,e)}function k3e(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(t,e,n,r){return new k3e(t,e,n,r)}function sG(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T3e(t){if(typeof t=="function")return sG(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C9)return 11;if(t===P9)return 14}return 2}function Hf(t,e){var n=t.alternate;return n===null?(n=Ol(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function KD(t,e,n,r,o,u){var p=2;if(r=t,typeof t=="function")sG(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case a_:return xg(n.children,o,u,e);case E9:p=8,o|=8;break;case U8:return t=Ol(12,n,e,o|2),t.elementType=U8,t.lanes=u,t;case V8:return t=Ol(13,n,e,o),t.elementType=V8,t.lanes=u,t;case j8:return t=Ol(19,n,e,o),t.elementType=j8,t.lanes=u,t;case fye:return oL(n,o,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hye:p=10;break e;case pye:p=9;break e;case C9:p=11;break e;case P9:p=14;break e;case Cf:p=16,r=null;break e}throw Error(Nt(130,t==null?t:typeof t,""))}return e=Ol(p,n,e,o),e.elementType=t,e.type=r,e.lanes=u,e}function xg(t,e,n,r){return t=Ol(7,t,r,e),t.lanes=n,t}function oL(t,e,n,r){return t=Ol(22,t,r,e),t.elementType=fye,t.lanes=n,t.stateNode={isHidden:!1},t}function T6(t,e,n){return t=Ol(6,t,null,e),t.lanes=n,t}function M6(t,e,n){return e=Ol(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M3e(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u6(0),this.expirationTimes=u6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u6(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function aG(t,e,n,r,o,u,p,m,_){return t=new M3e(t,e,n,m,_),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Ol(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},G9(u),t}function A3e(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s_,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s_e(t){if(!t)return Qf;t=t._reactInternals;e:{if(Hg(t)!==t||t.tag!==1)throw Error(Nt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ma(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Nt(171))}if(t.tag===1){var n=t.type;if(ma(n))return obe(t,n,e)}return e}function a_e(t,e,n,r,o,u,p,m,_){return t=aG(n,r,!0,t,o,u,p,m,_),t.context=s_e(null),n=t.current,r=zs(),o=zf(n),u=wh(r,o),u.callback=e??null,Vf(n,u,o),t.current.lanes=o,vP(t,o,r),va(t,r),t}function sL(t,e,n,r){var o=e.current,u=zs(),p=zf(o);return n=s_e(n),e.context===null?e.context=n:e.pendingContext=n,e=wh(u,p),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vf(o,e,p),t!==null&&(Bu(t,o,p,u),jD(t,o,p)),p}function C3(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yme(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lG(t,e){yme(t,e),(t=t.alternate)&&yme(t,e)}function I3e(){return null}var l_e=typeof reportError=="function"?reportError:function(t){console.error(t)};function uG(t){this._internalRoot=t}aL.prototype.render=uG.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Nt(409));sL(t,e,null,null)};aL.prototype.unmount=uG.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rg(function(){sL(null,t,null,null)}),e[Ph]=null}};function aL(t){this._internalRoot=t}aL.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bye();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tf.length&&e!==0&&e<Tf[n].priority;n++);Tf.splice(n,0,t),n===0&&Vye(t)}};function cG(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bme(){}function R3e(t,e,n,r,o){if(o){if(typeof r=="function"){var u=r;r=function(){var x=C3(p);u.call(x)}}var p=a_e(e,r,t,0,null,!1,!1,"",bme);return t._reactRootContainer=p,t[Ph]=p.current,$C(t.nodeType===8?t.parentNode:t),Rg(),p}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var m=r;r=function(){var x=C3(_);m.call(x)}}var _=aG(t,0,!1,null,null,!1,!1,"",bme);return t._reactRootContainer=_,t[Ph]=_.current,$C(t.nodeType===8?t.parentNode:t),Rg(function(){sL(e,_,n,r)}),_}function uL(t,e,n,r,o){var u=n._reactRootContainer;if(u){var p=u;if(typeof o=="function"){var m=o;o=function(){var _=C3(p);m.call(_)}}sL(e,p,t,o)}else p=R3e(n,e,t,o,r);return C3(p)}Nye=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yC(e.pendingLanes);n!==0&&(M9(e,n|1),va(e,Qi()),!(br&6)&&(j_=Qi()+500,sm()))}break;case 13:Rg(function(){var r=kh(t,1);if(r!==null){var o=zs();Bu(r,t,1,o)}}),lG(t,1)}};A9=function(t){if(t.tag===13){var e=kh(t,134217728);if(e!==null){var n=zs();Bu(e,t,134217728,n)}lG(t,134217728)}};Fye=function(t){if(t.tag===13){var e=zf(t),n=kh(t,e);if(n!==null){var r=zs();Bu(n,t,e,r)}lG(t,e)}};Bye=function(){return Ur};Uye=function(t,e){var n=Ur;try{return Ur=t,e()}finally{Ur=n}};Z8=function(t,e,n){switch(e){case"input":if(G8(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=J3(r);if(!o)throw Error(Nt(90));vye(r),G8(r,o)}}}break;case"textarea":yye(t,n);break;case"select":e=n.value,e!=null&&S_(t,!!n.multiple,e,!1)}};Cye=rG;Pye=Rg;var O3e={usingClientEntryPoint:!1,Events:[yP,d_,J3,Sye,Eye,rG]},QE={findFiberByHostInstance:gg,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},D3e={bundleType:QE.bundleType,version:QE.version,rendererPackageName:QE.rendererPackageName,rendererConfig:QE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mye(t),t===null?null:t.stateNode},findFiberByHostInstance:QE.findFiberByHostInstance||I3e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sD.isDisabled&&sD.supportsFiber)try{X3=sD.inject(D3e),Uc=sD}catch{}}za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O3e;za.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cG(e))throw Error(Nt(200));return A3e(t,e,null,n)};za.createRoot=function(t,e){if(!cG(t))throw Error(Nt(299));var n=!1,r="",o=l_e;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=aG(t,1,!1,null,null,n,!1,r,o),t[Ph]=e.current,$C(t.nodeType===8?t.parentNode:t),new uG(e)};za.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Nt(188)):(t=Object.keys(t).join(","),Error(Nt(268,t)));return t=Mye(e),t=t===null?null:t.stateNode,t};za.flushSync=function(t){return Rg(t)};za.hydrate=function(t,e,n){if(!lL(e))throw Error(Nt(200));return uL(null,t,e,!0,n)};za.hydrateRoot=function(t,e,n){if(!cG(t))throw Error(Nt(405));var r=n!=null&&n.hydratedSources||null,o=!1,u="",p=l_e;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),e=a_e(e,null,t,1,n??null,o,!1,u,p),t[Ph]=e.current,$C(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new aL(e)};za.render=function(t,e,n){if(!lL(e))throw Error(Nt(200));return uL(null,t,e,!1,n)};za.unmountComponentAtNode=function(t){if(!lL(t))throw Error(Nt(40));return t._reactRootContainer?(Rg(function(){uL(null,null,t,!1,function(){t._reactRootContainer=null,t[Ph]=null})}),!0):!1};za.unstable_batchedUpdates=rG;za.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lL(n))throw Error(Nt(200));if(t==null||t._reactInternals===void 0)throw Error(Nt(38));return uL(t,e,n,!1,r)};za.version="18.2.0-next-9e3b772b8-20220608";function u_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u_e)}catch(t){console.error(t)}}u_e(),aye.exports=za;var L3e=aye.exports,_me=L3e;F8.createRoot=_me.createRoot,F8.hydrateRoot=_me.hydrateRoot;function aD(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P3={exports:{}},Mt={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(ee,ve,De)=>ve in ee?e(ee,ve,{enumerable:!0,configurable:!0,writable:!0,value:De}):ee[ve]=De,_=(ee,ve)=>{for(var De in ve||(ve={}))u.call(ve,De)&&m(ee,De,ve[De]);if(o)for(var De of o(ve))p.call(ve,De)&&m(ee,De,ve[De]);return ee},x=(ee,ve)=>n(ee,r(ve)),M=ee=>e(ee,"__esModule",{value:!0}),R=(ee,ve)=>{M(ee);for(var De in ve)e(ee,De,{get:ve[De],enumerable:!0})};R(t,{Atom:()=>Am,PointerProxy:()=>Tw,Ticker:()=>ud,getPointerParts:()=>od,isPointer:()=>el,isPrism:()=>ad,iterateAndCountTicks:()=>kw,iterateOver:()=>Im,pointer:()=>Hl,pointerToPrism:()=>Xu,prism:()=>qu,val:()=>Kh});var N=Array.isArray,G=N,Z=typeof Ti=="object"&&Ti&&Ti.Object===Object&&Ti,j=Z,z=typeof self=="object"&&self&&self.Object===Object&&self,U=j||z||Function("return this")(),C=U,K=C.Symbol,te=K,pe=Object.prototype,Q=pe.hasOwnProperty,Se=pe.toString,Pe=te?te.toStringTag:void 0;function H(ee){var ve=Q.call(ee,Pe),De=ee[Pe];try{ee[Pe]=void 0;var ft=!0}catch{}var Rn=Se.call(ee);return ft&&(ve?ee[Pe]=De:delete ee[Pe]),Rn}var ye=H,St=Object.prototype,kt=St.toString;function it(ee){return kt.call(ee)}var me=it,lt="[object Null]",Fe="[object Undefined]",vt=te?te.toStringTag:void 0;function Ge(ee){return ee==null?ee===void 0?Fe:lt:vt&&vt in Object(ee)?ye(ee):me(ee)}var mt=Ge;function Je(ee){return ee!=null&&typeof ee=="object"}var Be=Je,nt="[object Symbol]";function Gt(ee){return typeof ee=="symbol"||Be(ee)&&mt(ee)==nt}var Bt=Gt,Dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/;function on(ee,ve){if(G(ee))return!1;var De=typeof ee;return De=="number"||De=="symbol"||De=="boolean"||ee==null||Bt(ee)?!0:Jt.test(ee)||!Dt.test(ee)||ve!=null&&ee in Object(ve)}var wn=on;function Wn(ee){var ve=typeof ee;return ee!=null&&(ve=="object"||ve=="function")}var Kr=Wn,xn="[object AsyncFunction]",et="[object Function]",Zr="[object GeneratorFunction]",Pn="[object Proxy]";function Sn(ee){if(!Kr(ee))return!1;var ve=mt(ee);return ve==et||ve==Zr||ve==xn||ve==Pn}var gn=Sn,Mr=C["__core-js_shared__"],kn=Mr,Nn=function(){var ee=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}();function cr(ee){return!!Nn&&Nn in ee}var oi=cr,Rr=Function.prototype,Ee=Rr.toString;function ce(ee){if(ee!=null){try{return Ee.call(ee)}catch{}try{return ee+""}catch{}}return""}var ut=ce,Ut=/[\\^$.*+?()[\]{}|]/g,Ot=/^\[object .+?Constructor\]$/,Ft=Function.prototype,mn=Object.prototype,zt=Ft.toString,pt=mn.hasOwnProperty,En=RegExp("^"+zt.call(pt).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function en(ee){if(!Kr(ee)||oi(ee))return!1;var ve=gn(ee)?En:Ot;return ve.test(ut(ee))}var yn=en;function rn(ee,ve){return ee==null?void 0:ee[ve]}var Qt=rn;function Bn(ee,ve){var De=Qt(ee,ve);return yn(De)?De:void 0}var pr=Bn,Le=pr(Object,"create"),Ht=Le;function dt(){this.__data__=Ht?Ht(null):{},this.size=0}var Vt=dt;function Kt(ee){var ve=this.has(ee)&&delete this.__data__[ee];return this.size-=ve?1:0,ve}var Qn=Kt,Or="__lodash_hash_undefined__",kr=Object.prototype,Jo=kr.hasOwnProperty;function rr(ee){var ve=this.__data__;if(Ht){var De=ve[ee];return De===Or?void 0:De}return Jo.call(ve,ee)?ve[ee]:void 0}var Vr=rr,Tr=Object.prototype,Xc=Tr.hasOwnProperty;function Yc(ee){var ve=this.__data__;return Ht?ve[ee]!==void 0:Xc.call(ve,ee)}var Zc=Yc,Wa="__lodash_hash_undefined__";function Qc(ee,ve){var De=this.__data__;return this.size+=this.has(ee)?0:1,De[ee]=Ht&&ve===void 0?Wa:ve,this}var Gu=Qc;function ba(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}ba.prototype.clear=Vt,ba.prototype.delete=Qn,ba.prototype.get=Vr,ba.prototype.has=Zc,ba.prototype.set=Gu;var Jc=ba;function Dh(){this.__data__=[],this.size=0}var dm=Dh;function _e(ee,ve){return ee===ve||ee!==ee&&ve!==ve}var tt=_e;function yt(ee,ve){for(var De=ee.length;De--;)if(tt(ee[De][0],ve))return De;return-1}var We=yt,_t=Array.prototype,qt=_t.splice;function pn(ee){var ve=this.__data__,De=We(ve,ee);if(De<0)return!1;var ft=ve.length-1;return De==ft?ve.pop():qt.call(ve,De,1),--this.size,!0}var Ln=pn;function Tn(ee){var ve=this.__data__,De=We(ve,ee);return De<0?void 0:ve[De][1]}var Kn=Tn;function Mn(ee){return We(this.__data__,ee)>-1}var jn=Mn;function Dr(ee,ve){var De=this.__data__,ft=We(De,ee);return ft<0?(++this.size,De.push([ee,ve])):De[ft][1]=ve,this}var lr=Dr;function qr(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}qr.prototype.clear=dm,qr.prototype.delete=Ln,qr.prototype.get=Kn,qr.prototype.has=jn,qr.prototype.set=lr;var xs=qr,jr=pr(C,"Map"),Yn=jr;function Ka(){this.size=0,this.__data__={hash:new Jc,map:new(Yn||xs),string:new Jc}}var wr=Ka;function Xs(ee){var ve=typeof ee;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ee!=="__proto__":ee===null}var qa=Xs;function Ys(ee,ve){var De=ee.__data__;return qa(ve)?De[typeof ve=="string"?"string":"hash"]:De.map}var Xa=Ys;function Xr(ee){var ve=Xa(this,ee).delete(ee);return this.size-=ve?1:0,ve}var es=Xr;function Ya(ee){return Xa(this,ee).get(ee)}var eo=Ya;function $u(ee){return Xa(this,ee).has(ee)}var Lh=$u;function ed(ee,ve){var De=Xa(this,ee),ft=De.size;return De.set(ee,ve),this.size+=De.size==ft?0:1,this}var hm=ed;function jl(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}jl.prototype.clear=wr,jl.prototype.delete=es,jl.prototype.get=eo,jl.prototype.has=Lh,jl.prototype.set=hm;var pm=jl,Nh="Expected a function";function fm(ee,ve){if(typeof ee!="function"||ve!=null&&typeof ve!="function")throw new TypeError(Nh);var De=function(){var ft=arguments,Rn=ve?ve.apply(this,ft):ft[0],dr=De.cache;if(dr.has(Rn))return dr.get(Rn);var to=ee.apply(this,ft);return De.cache=dr.set(Rn,to)||dr,to};return De.cache=new(fm.Cache||pm),De}fm.Cache=pm;var lw=fm,Za=500;function td(ee){var ve=lw(ee,function(ft){return De.size===Za&&De.clear(),ft}),De=ve.cache;return ve}var uw=td,nd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qg=/\\(\\)?/g,Jg=uw(function(ee){var ve=[];return ee.charCodeAt(0)===46&&ve.push(""),ee.replace(nd,function(De,ft,Rn,dr){ve.push(Rn?dr.replace(Qg,"$1"):ft||De)}),ve}),Qa=Jg;function e0(ee,ve){for(var De=-1,ft=ee==null?0:ee.length,Rn=Array(ft);++De<ft;)Rn[De]=ve(ee[De],De,ee);return Rn}var cw=e0,rd=1/0,mm=te?te.prototype:void 0,vm=mm?mm.toString:void 0;function gm(ee){if(typeof ee=="string")return ee;if(G(ee))return cw(ee,gm)+"";if(Bt(ee))return vm?vm.call(ee):"";var ve=ee+"";return ve=="0"&&1/ee==-rd?"-0":ve}var t0=gm;function n0(ee){return ee==null?"":t0(ee)}var r0=n0;function i0(ee,ve){return G(ee)?ee:wn(ee,ve)?[ee]:Qa(r0(ee))}var dw=i0,Wu=1/0;function id(ee){if(typeof ee=="string"||Bt(ee))return ee;var ve=ee+"";return ve=="0"&&1/ee==-Wu?"-0":ve}var hw=id;function ym(ee,ve){ve=dw(ve,ee);for(var De=0,ft=ve.length;ee!=null&&De<ft;)ee=ee[hw(ve[De++])];return De&&De==ft?ee:void 0}var Ja=ym;function zl(ee,ve,De){var ft=ee==null?void 0:Ja(ee,ve);return ft===void 0?De:ft}var o0=zl;function Fh(ee,ve){return function(De){return ee(ve(De))}}var pw=Fh,fw=pw(Object.getPrototypeOf,Object),s0=fw,mw="[object Object]",vw=Function.prototype,a0=Object.prototype,l0=vw.toString,u0=a0.hasOwnProperty,bm=l0.call(Object);function c0(ee){if(!Be(ee)||mt(ee)!=mw)return!1;var ve=s0(ee);if(ve===null)return!0;var De=u0.call(ve,"constructor")&&ve.constructor;return typeof De=="function"&&De instanceof De&&l0.call(De)==bm}var d0=c0;function h0(ee){var ve=ee==null?0:ee.length;return ve?ee[ve-1]:void 0}var _m=h0,Bh=new WeakMap,Ku=new WeakMap,p0=Symbol("pointerMeta"),gw={get(ee,ve){if(ve===p0)return Bh.get(ee);let De=Ku.get(ee);De||(De=new Map,Ku.set(ee,De));const ft=De.get(ve);if(ft!==void 0)return ft;const Rn=Bh.get(ee),dr=sd({root:Rn.root,path:[...Rn.path,ve]});return De.set(ve,dr),dr}},Zs=ee=>ee[p0],od=ee=>{const{root:ve,path:De}=Zs(ee);return{root:ve,path:De}};function sd(ee){var ve;const De={root:ee.root,path:(ve=ee.path)!=null?ve:[]},ft={};return Bh.set(ft,De),new Proxy(ft,gw)}var Hl=sd,el=ee=>ee&&!!Zs(ee);function wm(ee,ve,De){return ve.length===0?De(ee):Gl(ee,ve,De)}var Gl=(ee,ve,De)=>{if(ve.length===0)return De(ee);if(Array.isArray(ee)){let[ft,...Rn]=ve;ft=parseInt(String(ft),10),isNaN(ft)&&(ft=0);const dr=ee[ft],to=Gl(dr,Rn,De);if(dr===to)return ee;const Ss=[...ee];return Ss.splice(ft,1,to),Ss}else if(typeof ee=="object"&&ee!==null){const[ft,...Rn]=ve,dr=ee[ft],to=Gl(dr,Rn,De);return dr===to?ee:x(_({},ee),{[ft]:to})}else{const[ft,...Rn]=ve;return{[ft]:Gl(void 0,Rn,De)}}},zi=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const ee=this._head;if(ee)return this._head=ee.next,ee.data}push(ee){const ve={next:this._head,data:ee};this._head=ve}};function ad(ee){return!!(ee&&ee.isPrism&&ee.isPrism===!0)}function Uh(){const ee=()=>{},ve=new zi,De=ee;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{ve.push(De)},stopIgnoringDependencies:()=>{ve.peek()!==De||ve.pop()},reportResolutionStart:Yu=>{const Zu=ve.peek();Zu&&Zu(Yu),ve.push(De)},reportResolutionEnd:Yu=>{ve.pop()},pushCollector:Yu=>{ve.push(Yu)},popCollector:Yu=>{if(ve.peek()!==Yu)throw new Error("Popped collector is not on top of the stack");ve.pop()}}}function yw(){const ee="__dataverse_discoveryMechanism_sharedStack",ve=typeof window<"u"?window:typeof Ti<"u"?Ti:{};if(ve){const De=ve[ee];if(De&&typeof De=="object"&&De.type==="Dataverse_discoveryMechanism")return De;{const ft=Uh();return ve[ee]=ft,ft}}else return Uh()}var{startIgnoringDependencies:$l,stopIgnoringDependencies:tl,reportResolutionEnd:xm,reportResolutionStart:bw,pushCollector:Vh,popCollector:_w}=yw(),f0=()=>{},m0=class{constructor(ee,ve){this._fn=ee,this._prismInstance=ve,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new jh(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=De=>{this._possiblyStaleDeps.add(De),this._markAsStale()};for(const De of this._dependencies)De._addDependent(this._reactToDependencyGoingStale);$l(),this.getValue(),tl()}get hasDependents(){return this._dependents.size>0}removeDependent(ee){this._dependents.delete(ee)}addDependent(ee){this._dependents.add(ee)}destroy(){for(const ee of this._dependencies)ee._removeDependent(this._reactToDependencyGoingStale);Em(this._scope)}getValue(){if(!this._isFresh){const ee=this._recalculate();this._lastValue=ee,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let ee;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let ft=!1;$l();for(const Rn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Rn)!==Rn.getValue()){ft=!0;break}if(tl(),this._possiblyStaleDeps.clear(),!ft)return this._lastValue}const ve=new Set;this._cacheOfDendencyValues.clear();const De=ft=>{ve.add(ft),this._addDependency(ft)};Vh(De),Hi.push(this._scope);try{ee=this._fn()}catch(ft){console.error(ft)}finally{Hi.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}_w(De);for(const ft of this._dependencies)ve.has(ft)||this._removeDependency(ft);this._dependencies=ve,$l();for(const ft of ve)this._cacheOfDendencyValues.set(ft,ft.getValue());return tl(),ee}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const ee of this._dependents)ee(this._prismInstance)}}_addDependency(ee){this._dependencies.has(ee)||(this._dependencies.add(ee),ee._addDependent(this._reactToDependencyGoingStale))}_removeDependency(ee){this._dependencies.has(ee)&&(this._dependencies.delete(ee),ee._removeDependent(this._reactToDependencyGoingStale))}},Sm={},ww=class{constructor(ee){this._fn=ee,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(ee,ve,De=!1){const ft=()=>{ee.onThisOrNextTick(dr)};let Rn=Sm;const dr=()=>{const Ss=this.getValue();Ss!==Rn&&(Rn=Ss,ve(Ss))};return this._addDependent(ft),De&&(Rn=this.getValue(),ve(Rn)),()=>{this._removeDependent(ft),ee.offThisOrNextTick(dr),ee.offNextTick(dr)}}onStale(ee){const ve=()=>{this._removeDependent(De)},De=()=>ee();return this._addDependent(De),ve}keepHot(){return this.onStale(()=>{})}_addDependent(ee){this._state.hot||this._goHot(),this._state.handle.addDependent(ee)}_goHot(){const ee=new m0(this._fn,this);this._state={hot:!0,handle:ee}}_removeDependent(ee){const ve=this._state;if(!ve.hot)return;const De=ve.handle;De.removeDependent(ee),De.hasDependents||(this._state={hot:!1,handle:void 0},De.destroy())}getValue(){bw(this);const ee=this._state;let ve;return ee.hot?ve=ee.handle.getValue():ve=ld(this._fn),xm(this),ve}},jh=class{constructor(ee){this._hotHandle=ee,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(ee,ve){let De=this._refs.get(ee);if(De!==void 0)return De;{const ft={current:ve};return this._refs.set(ee,ft),ft}}effect(ee,ve,De){let ft=this.effects.get(ee);ft===void 0&&(ft={cleanup:f0,deps:void 0},this.effects.set(ee,ft)),Pm(ft.deps,De)&&(ft.cleanup(),$l(),ft.cleanup=zh(ve,f0).value,tl(),ft.deps=De)}memo(ee,ve,De){let ft=this.memos.get(ee);return ft===void 0&&(ft={cachedValue:null,deps:void 0},this.memos.set(ee,ft)),Pm(ft.deps,De)&&($l(),ft.cachedValue=zh(ve,void 0).value,tl(),ft.deps=De),ft.cachedValue}state(ee,ve){const{value:De,setValue:ft}=this.memo("state/"+ee,()=>{const Rn={current:ve};return{value:Rn,setValue:to=>{Rn.current=to,this._hotHandle.forceStale()}}},[]);return[De.current,ft]}sub(ee){return this.subs[ee]||(this.subs[ee]=new jh(this._hotHandle)),this.subs[ee]}cleanupEffects(){for(const ee of this.effects.values())zh(ee.cleanup,void 0);this.effects.clear()}source(ee,ve){const De="$$source/blah";return this.effect(De,()=>ee(()=>{this._hotHandle.forceStale()}),[ee]),ve()}};function Em(ee){for(const ve of Object.values(ee.subs))Em(ve);ee.cleanupEffects()}function zh(ee,ve){try{return{value:ee(),ok:!0}}catch(De){return setTimeout(function(){throw De}),{value:ve,ok:!1}}}var Hi=new zi;function xw(ee,ve){const De=Hi.peek();if(!De)throw new Error("prism.ref() is called outside of a prism() call.");return De.ref(ee,ve)}function Cm(ee,ve,De){const ft=Hi.peek();if(!ft)throw new Error("prism.effect() is called outside of a prism() call.");return ft.effect(ee,ve,De)}function Pm(ee,ve){if(ee===void 0||ve===void 0)return!0;const De=ee.length;if(De!==ve.length)return!0;for(let ft=0;ft<De;ft++)if(ee[ft]!==ve[ft])return!0;return!1}function km(ee,ve,De){const ft=Hi.peek();if(!ft)throw new Error("prism.memo() is called outside of a prism() call.");return ft.memo(ee,ve,De)}function Gi(ee,ve){const De=Hi.peek();if(!De)throw new Error("prism.state() is called outside of a prism() call.");return De.state(ee,ve)}function Hh(){if(!Hi.peek())throw new Error("The parent function is called outside of a prism() call.")}function Sw(ee,ve){const De=Hi.peek();if(!De)throw new Error("prism.scope() is called outside of a prism() call.");const ft=De.sub(ee);Hi.push(ft);const Rn=zh(ve,void 0).value;return Hi.pop(),Rn}function Gh(ee,ve,De){return km(ee,()=>si(ve),De).getValue()}function $h(){return!!Hi.peek()}function Ew(ee,ve){const De=Hi.peek();if(!De)throw new Error("prism.source() is called outside of a prism() call.");return De.source(ee,ve)}var si=ee=>new ww(ee),nl=class{effect(ee,ve,De){console.warn("prism.effect() does not run in cold prisms")}memo(ee,ve,De){return ve()}state(ee,ve){return[ve,()=>{}]}ref(ee,ve){return{current:ve}}sub(ee){return new nl}source(ee,ve){return ve()}};function ld(ee){const ve=new nl;Hi.push(ve);let De;try{De=ee()}catch(ft){console.error(ft)}finally{Hi.pop()!==ve&&console.warn("The Prism hook stack has slipped. This is a bug.")}return De}si.ref=xw,si.effect=Cm,si.memo=km,si.ensurePrism=Hh,si.state=Gi,si.scope=Sw,si.sub=Gh,si.inPrism=$h,si.source=Ew;var qu=si,Tm;(function(ee){ee[ee.Dict=0]="Dict",ee[ee.Array=1]="Array",ee[ee.Other=2]="Other"})(Tm||(Tm={}));var xr=ee=>Array.isArray(ee)?1:d0(ee)?0:2,Mm=(ee,ve,De=xr(ee))=>De===0&&typeof ve=="string"||De===1&&Cw(ve)?ee[ve]:void 0,Cw=ee=>{const ve=typeof ee=="number"?ee:parseInt(ee,10);return!isNaN(ve)&&ve>=0&&ve<1/0&&(ve|0)===ve},Wh=class{constructor(ee,ve){this._parent=ee,this._path=ve,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(ee){this.identityChangeListeners.add(ee)}removeIdentityChangeListener(ee){this.identityChangeListeners.delete(ee),this._checkForGC()}removeChild(ee){this.children.delete(ee),this._checkForGC()}getChild(ee){return this.children.get(ee)}getOrCreateChild(ee){let ve=this.children.get(ee);return ve||(ve=ve=new Wh(this,this._path.concat([ee])),this.children.set(ee,ve)),ve}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(_m(this._path))}},Am=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this.pointer=Hl({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(ve,De)=>{const{path:ft}=od(ve),Rn=this._getOrCreateScopeForPath(ft);return Rn.identityChangeListeners.add(De),()=>{Rn.identityChangeListeners.delete(De)}},this._currentState=ee,this._rootScope=new Wh(void 0,[])}set(ee){const ve=this._currentState;this._currentState=ee,this._checkUpdates(this._rootScope,ve,ee)}get(){return this._currentState}getByPointer(ee){const ve=el(ee)?ee:ee(this.pointer),De=od(ve).path;return this._getIn(De)}_getIn(ee){return ee.length===0?this.get():o0(this.get(),ee)}reduce(ee){this.set(ee(this.get()))}reduceByPointer(ee,ve){const De=el(ee)?ee:ee(this.pointer),ft=od(De).path,Rn=wm(this.get(),ft,ve);this.set(Rn)}setByPointer(ee,ve){this.reduceByPointer(ee,()=>ve)}_checkUpdates(ee,ve,De){if(ve===De)return;for(const dr of ee.identityChangeListeners)dr(De);if(ee.children.size===0)return;const ft=xr(ve),Rn=xr(De);if(!(ft===2&&ft===Rn))for(const[dr,to]of ee.children){const Ss=Mm(ve,dr,ft),y0=Mm(De,dr,Rn);this._checkUpdates(to,Ss,y0)}}_getOrCreateScopeForPath(ee){let ve=this._rootScope;for(const De of ee)ve=ve.getOrCreateChild(De);return ve}pointerToPrism(ee){const{path:ve}=od(ee),De=Rn=>this._onPointerValueChange(ee,Rn),ft=()=>this._getIn(ve);return qu(()=>qu.source(De,ft))}},v0=new WeakMap;function Pw(ee){return typeof ee=="object"&&ee!==null&&ee.$$isPointerToPrismProvider===!0}var Xu=ee=>{const ve=Zs(ee);let De=v0.get(ve);if(!De){const ft=ve.root;if(!Pw(ft))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");De=ft.pointerToPrism(ee),v0.set(ve,De)}return De},Kh=ee=>el(ee)?Xu(ee).getValue():ad(ee)?ee.getValue():ee;function*kw(ee){let ve;if(el(ee))ve=Xu(ee);else if(ad(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");let De=0;const ft=ve.onStale(()=>{De++});try{for(;;){const Rn=De;De=0,yield{value:ve.getValue(),ticks:Rn}}}finally{ft()}}var g0=60*3,ud=class{constructor(ee){this._conf=ee,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(ee){this._scheduledForThisOrNextTick.add(ee),this._dormant&&this._goActive()}onNextTick(ee){this._scheduledForNextTick.add(ee),this._dormant&&this._goActive()}offThisOrNextTick(ee){this._scheduledForThisOrNextTick.delete(ee)}offNextTick(ee){this._scheduledForNextTick.delete(ee)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var ee,ve;this._dormant&&(this._dormant=!1,(ve=(ee=this._conf)==null?void 0:ee.onActive)==null||ve.call(ee))}_goDormant(){var ee,ve;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(ve=(ee=this._conf)==null?void 0:ee.onDormant)==null||ve.call(ee))}tick(ee=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=g0)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=ee;for(const ve of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(ve);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(ee){const ve=this.time;if(ee>10&&console.warn("_tick() recursing for 10 times"),ee>100)throw new Error("Maximum recursion limit for _tick()");const De=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const ft of De)ft(ve);if(this._scheduledForThisOrNextTick.size>0)return this._tick(ee+1)}};function*Im(ee){let ve;if(el(ee))ve=Xu(ee);else if(ad(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");const De=new ud,ft=ve.onChange(De,Rn=>{});try{for(;;)De.tick(),yield ve.getValue()}finally{ft()}}var Tw=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Am(ee),this.pointer=Hl({root:this,path:[]})}setPointer(ee){this._currentPointerBox.set(ee)}pointerToPrism(ee){const{path:ve}=Zs(ee);return qu(()=>{const De=this._currentPointerBox.prism.getValue(),ft=ve.reduce((Rn,dr)=>Rn[dr],De);return Kh(ft)})}}})(Mt);P3.exports;(function(t,e){var n=Object.create,r=Object.freeze,o=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,G=(i,s)=>{if(s=Symbol[i])return s;throw Error("Symbol."+i+" is not defined")},Z=(i,s,a)=>s in i?o(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,j=(i,s)=>{for(var a in s||(s={}))R.call(s,a)&&Z(i,a,s[a]);if(x)for(var a of x(s))N.call(s,a)&&Z(i,a,s[a]);return i},z=(i,s)=>u(i,m(s)),U=(i,s)=>{var a={};for(var c in i)R.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&x)for(var c of x(i))s.indexOf(c)<0&&N.call(i,c)&&(a[c]=i[c]);return a},C=(i,s)=>()=>(i&&(s=i(i=0)),s),K=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),te=(i,s)=>{for(var a in s)o(i,a,{get:s[a],enumerable:!0})},pe=(i,s,a,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of _(s))!R.call(i,h)&&h!==a&&o(i,h,{get:()=>s[h],enumerable:!(c=p(s,h))||c.enumerable});return i},Q=(i,s,a)=>(a=i!=null?n(M(i)):{},pe(s||!i||!i.__esModule?o(a,"default",{value:i,enumerable:!0}):a,i)),Se=i=>pe(o({},"__esModule",{value:!0}),i),Pe=(i,s,a)=>(Z(i,typeof s!="symbol"?s+"":s,a),a),H=(i,s)=>r(o(i,"raw",{value:r(s||i.slice())})),ye=(i,s,a)=>new Promise((c,h)=>{var f=w=>{try{y(a.next(w))}catch(S){h(S)}},g=w=>{try{y(a.throw(w))}catch(S){h(S)}},y=w=>w.done?c(w.value):Promise.resolve(w.value).then(f,g);y((a=a.apply(i,s)).next())}),St=function(i,s){this[0]=i,this[1]=s},kt=i=>{var s=i[G("asyncIterator")],a=!1,c,h={};return s==null?(s=i[G("iterator")](),c=f=>h[f]=g=>s[f](g)):(s=s.call(i),c=f=>h[f]=g=>{if(a){if(a=!1,f==="throw")throw g;return g}return a=!0,{done:!1,value:new St(new Promise(y=>{var w=s[f](g);if(!(w instanceof Object))throw TypeError("Object expected");y(w)}),1)}}),h[G("iterator")]=()=>h,c("next"),"throw"in s?c("throw"):h.throw=f=>{throw f},"return"in s&&c("return"),h};function it(i){lt=i}function me(){return lt}var lt,Fe=C(()=>{});function vt(i,s,a=[]){if(typeof i=="object"&&i){if(Ge(i)||mt(i)){s(i,a);return}for(let[c,h]of Object.entries(i))vt(h,s,[...a,c])}else{if(i==null)return;s(i,a)}}var Ge,mt,Je=C(()=>{Ge=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"type")&&i.type==="image"&&Object.hasOwnProperty.call(i,"id")&&typeof i.id=="string"&&i.id!=="",mt=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"r")&&Object.hasOwnProperty.call(i,"g")&&Object.hasOwnProperty.call(i,"b")&&Object.hasOwnProperty.call(i,"a")&&typeof i.r=="number"&&typeof i.g=="number"&&typeof i.b=="number"&&typeof i.a=="number"});function Be(i){return s=>typeof s=="object"&&!!s&&s.type===i}var nt,Gt,Bt,Dt,Jt,on,wn,Wn=C(()=>{nt=Be("Theatre_Project"),Gt=Be("Theatre_Sheet"),Bt=Be("Theatre_SheetTemplate"),Dt=Be("Theatre_SheetObject"),Jt=Be("Theatre_SheetObjectTemplate"),on=Be("Theatre_Sheet_PublicAPI"),wn=Be("Theatre_SheetObject_PublicAPI")}),Kr,xn,et=C(()=>{Kr=typeof Ti=="object"&&Ti&&Ti.Object===Object&&Ti,xn=Kr}),Zr,Pn,Sn,gn=C(()=>{et(),Zr=typeof self=="object"&&self&&self.Object===Object&&self,Pn=xn||Zr||Function("return this")(),Sn=Pn}),Mr,kn,Nn=C(()=>{gn(),Mr=Sn.Symbol,kn=Mr});function cr(i){var s=Rr.call(i,ce),a=i[ce];try{i[ce]=void 0;var c=!0}catch{}var h=Ee.call(i);return c&&(s?i[ce]=a:delete i[ce]),h}var oi,Rr,Ee,ce,ut,Ut=C(()=>{Nn(),oi=Object.prototype,Rr=oi.hasOwnProperty,Ee=oi.toString,ce=kn?kn.toStringTag:void 0,ut=cr});function Ot(i){return mn.call(i)}var Ft,mn,zt,pt=C(()=>{Ft=Object.prototype,mn=Ft.toString,zt=Ot});function En(i){return i==null?i===void 0?yn:en:rn&&rn in Object(i)?ut(i):zt(i)}var en,yn,rn,Qt,Bn=C(()=>{Nn(),Ut(),pt(),en="[object Null]",yn="[object Undefined]",rn=kn?kn.toStringTag:void 0,Qt=En});function pr(i){return i!=null&&typeof i=="object"}var Le,Ht=C(()=>{Le=pr});function dt(i){return typeof i=="symbol"||Le(i)&&Qt(i)==Vt}var Vt,Kt,Qn=C(()=>{Bn(),Ht(),Vt="[object Symbol]",Kt=dt});function Or(i,s){for(var a=-1,c=i==null?0:i.length,h=Array(c);++a<c;)h[a]=s(i[a],a,i);return h}var kr,Jo=C(()=>{kr=Or}),rr,Vr,Tr=C(()=>{rr=Array.isArray,Vr=rr});function Xc(i){if(typeof i=="string")return i;if(Vr(i))return kr(i,Xc)+"";if(Kt(i))return Wa?Wa.call(i):"";var s=i+"";return s=="0"&&1/i==-Yc?"-0":s}var Yc,Zc,Wa,Qc,Gu=C(()=>{Nn(),Jo(),Tr(),Qn(),Yc=1/0,Zc=kn?kn.prototype:void 0,Wa=Zc?Zc.toString:void 0,Qc=Xc});function ba(i){for(var s=i.length;s--&&Jc.test(i.charAt(s)););return s}var Jc,Dh,dm=C(()=>{Jc=/\s/,Dh=ba});function _e(i){return i&&i.slice(0,Dh(i)+1).replace(tt,"")}var tt,yt,We=C(()=>{dm(),tt=/^\s+/,yt=_e});function _t(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}var qt,pn=C(()=>{qt=_t});function Ln(i){if(typeof i=="number")return i;if(Kt(i))return Tn;if(qt(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=qt(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=yt(i);var a=Mn.test(i);return a||jn.test(i)?Dr(i.slice(2),a?2:8):Kn.test(i)?Tn:+i}var Tn,Kn,Mn,jn,Dr,lr,qr=C(()=>{We(),pn(),Qn(),Tn=0/0,Kn=/^[-+]0x[0-9a-f]+$/i,Mn=/^0b[01]+$/i,jn=/^0o[0-7]+$/i,Dr=parseInt,lr=Ln});function xs(i){if(!i)return i===0?i:0;if(i=lr(i),i===jr||i===-jr){var s=i<0?-1:1;return s*Yn}return i===i?i:0}var jr,Yn,Ka,wr=C(()=>{qr(),jr=1/0,Yn=17976931348623157e292,Ka=xs});function Xs(i){var s=Ka(i),a=s%1;return s===s?a?s-a:s:0}var qa,Ys=C(()=>{wr(),qa=Xs});function Xa(i){return i}var Xr,es=C(()=>{Xr=Xa});function Ya(i){if(!qt(i))return!1;var s=Qt(i);return s==$u||s==Lh||s==eo||s==ed}var eo,$u,Lh,ed,hm,jl=C(()=>{Bn(),pn(),eo="[object AsyncFunction]",$u="[object Function]",Lh="[object GeneratorFunction]",ed="[object Proxy]",hm=Ya}),pm,Nh,fm=C(()=>{gn(),pm=Sn["__core-js_shared__"],Nh=pm});function lw(i){return!!Za&&Za in i}var Za,td,uw=C(()=>{fm(),Za=function(){var i=/[^.]+$/.exec(Nh&&Nh.keys&&Nh.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),td=lw});function nd(i){if(i!=null){try{return Jg.call(i)}catch{}try{return i+""}catch{}}return""}var Qg,Jg,Qa,e0=C(()=>{Qg=Function.prototype,Jg=Qg.toString,Qa=nd});function cw(i){if(!qt(i)||td(i))return!1;var s=hm(i)?r0:mm;return s.test(Qa(i))}var rd,mm,vm,gm,t0,n0,r0,i0,dw=C(()=>{jl(),uw(),pn(),e0(),rd=/[\\^$.*+?()[\]{}|]/g,mm=/^\[object .+?Constructor\]$/,vm=Function.prototype,gm=Object.prototype,t0=vm.toString,n0=gm.hasOwnProperty,r0=RegExp("^"+t0.call(n0).replace(rd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),i0=cw});function Wu(i,s){return i==null?void 0:i[s]}var id,hw=C(()=>{id=Wu});function ym(i,s){var a=id(i,s);return i0(a)?a:void 0}var Ja,zl=C(()=>{dw(),hw(),Ja=ym}),o0,Fh,pw=C(()=>{zl(),gn(),o0=Ja(Sn,"WeakMap"),Fh=o0});function fw(i,s,a){switch(a.length){case 0:return i.call(s);case 1:return i.call(s,a[0]);case 2:return i.call(s,a[0],a[1]);case 3:return i.call(s,a[0],a[1],a[2])}return i.apply(s,a)}var s0,mw=C(()=>{s0=fw});function vw(){}var a0,l0=C(()=>{a0=vw});function u0(i,s){var a=-1,c=i.length;for(s||(s=Array(c));++a<c;)s[a]=i[a];return s}var bm,c0=C(()=>{bm=u0});function d0(i){var s=0,a=0;return function(){var c=Bh(),h=_m-(c-a);if(a=c,h>0){if(++s>=h0)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}var h0,_m,Bh,Ku,p0=C(()=>{h0=800,_m=16,Bh=Date.now,Ku=d0});function gw(i){return function(){return i}}var Zs,od=C(()=>{Zs=gw}),sd,Hl,el=C(()=>{zl(),sd=function(){try{var i=Ja(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Hl=sd}),wm,Gl,zi=C(()=>{od(),el(),es(),wm=Hl?function(i,s){return Hl(i,"toString",{configurable:!0,enumerable:!1,value:Zs(s),writable:!0})}:Xr,Gl=wm}),ad,Uh,yw=C(()=>{zi(),p0(),ad=Ku(Gl),Uh=ad});function $l(i,s,a,c){for(var h=i.length,f=a+(c?1:-1);c?f--:++f<h;)if(s(i[f],f,i))return f;return-1}var tl,xm=C(()=>{tl=$l});function bw(i){return i!==i}var Vh,_w=C(()=>{Vh=bw});function f0(i,s,a){for(var c=a-1,h=i.length;++c<h;)if(i[c]===s)return c;return-1}var m0,Sm=C(()=>{m0=f0});function ww(i,s,a){return s===s?m0(i,s,a):tl(i,Vh,a)}var jh,Em=C(()=>{xm(),_w(),Sm(),jh=ww});function zh(i,s){var a=i==null?0:i.length;return!!a&&jh(i,s,0)>-1}var Hi,xw=C(()=>{Em(),Hi=zh});function Cm(i,s){var a=typeof i;return s=s??Pm,!!s&&(a=="number"||a!="symbol"&&km.test(i))&&i>-1&&i%1==0&&i<s}var Pm,km,Gi,Hh=C(()=>{Pm=9007199254740991,km=/^(?:0|[1-9]\d*)$/,Gi=Cm});function Sw(i,s,a){s=="__proto__"&&Hl?Hl(i,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):i[s]=a}var Gh,$h=C(()=>{el(),Gh=Sw});function Ew(i,s){return i===s||i!==i&&s!==s}var si,nl=C(()=>{si=Ew});function ld(i,s,a){var c=i[s];(!(Tm.call(i,s)&&si(c,a))||a===void 0&&!(s in i))&&Gh(i,s,a)}var qu,Tm,xr,Mm=C(()=>{$h(),nl(),qu=Object.prototype,Tm=qu.hasOwnProperty,xr=ld});function Cw(i,s,a){return s=Wh(s===void 0?i.length-1:s,0),function(){for(var c=arguments,h=-1,f=Wh(c.length-s,0),g=Array(f);++h<f;)g[h]=c[s+h];h=-1;for(var y=Array(s+1);++h<s;)y[h]=c[h];return y[s]=a(g),s0(i,this,y)}}var Wh,Am,v0=C(()=>{mw(),Wh=Math.max,Am=Cw});function Pw(i,s){return Uh(Am(i,s,Xr),i+"")}var Xu,Kh=C(()=>{es(),v0(),yw(),Xu=Pw});function kw(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=g0}var g0,ud,Im=C(()=>{g0=9007199254740991,ud=kw});function Tw(i){return i!=null&&ud(i.length)&&!hm(i)}var ee,ve=C(()=>{jl(),Im(),ee=Tw});function De(i,s,a){if(!qt(a))return!1;var c=typeof s;return(c=="number"?ee(a)&&Gi(s,a.length):c=="string"&&s in a)?si(a[s],i):!1}var ft,Rn=C(()=>{nl(),ve(),Hh(),pn(),ft=De});function dr(i){var s=i&&i.constructor,a=typeof s=="function"&&s.prototype||to;return i===a}var to,Ss,y0=C(()=>{to=Object.prototype,Ss=dr});function Yu(i,s){for(var a=-1,c=Array(i);++a<i;)c[a]=s(a);return c}var Zu,$P=C(()=>{Zu=Yu});function DL(i){return Le(i)&&Qt(i)==WP}var WP,Mw,LL=C(()=>{Bn(),Ht(),WP="[object Arguments]",Mw=DL}),Aw,KP,qP,Rm,b0,Iw=C(()=>{LL(),Ht(),Aw=Object.prototype,KP=Aw.hasOwnProperty,qP=Aw.propertyIsEnumerable,Rm=Mw(function(){return arguments}())?Mw:function(i){return Le(i)&&KP.call(i,"callee")&&!qP.call(i,"callee")},b0=Rm});function Rw(){return!1}var XP,YP=C(()=>{XP=Rw}),Ow,Dw,_0,Lw,ZP,QP,w0,Nw=C(()=>{gn(),YP(),Ow=e&&!e.nodeType&&e,Dw=Ow&&!0&&t&&!t.nodeType&&t,_0=Dw&&Dw.exports===Ow,Lw=_0?Sn.Buffer:void 0,ZP=Lw?Lw.isBuffer:void 0,QP=ZP||XP,w0=QP});function JP(i){return Le(i)&&ud(i.length)&&!!zr[Qt(i)]}var ek,tk,nk,Fw,rk,ik,Bw,Uw,ok,Vw,sk,ak,Om,lk,uk,ck,dk,hk,pk,fk,mk,vk,gk,yk,zr,bk,NL=C(()=>{Bn(),Im(),Ht(),ek="[object Arguments]",tk="[object Array]",nk="[object Boolean]",Fw="[object Date]",rk="[object Error]",ik="[object Function]",Bw="[object Map]",Uw="[object Number]",ok="[object Object]",Vw="[object RegExp]",sk="[object Set]",ak="[object String]",Om="[object WeakMap]",lk="[object ArrayBuffer]",uk="[object DataView]",ck="[object Float32Array]",dk="[object Float64Array]",hk="[object Int8Array]",pk="[object Int16Array]",fk="[object Int32Array]",mk="[object Uint8Array]",vk="[object Uint8ClampedArray]",gk="[object Uint16Array]",yk="[object Uint32Array]",zr={},zr[ck]=zr[dk]=zr[hk]=zr[pk]=zr[fk]=zr[mk]=zr[vk]=zr[gk]=zr[yk]=!0,zr[ek]=zr[tk]=zr[lk]=zr[nk]=zr[uk]=zr[Fw]=zr[rk]=zr[ik]=zr[Bw]=zr[Uw]=zr[ok]=zr[Vw]=zr[sk]=zr[ak]=zr[Om]=!1,bk=JP});function FL(i){return function(s){return i(s)}}var x0,jw=C(()=>{x0=FL}),zw,qh,_k,S0,wk,Hw,BL=C(()=>{et(),zw=e&&!e.nodeType&&e,qh=zw&&!0&&t&&!t.nodeType&&t,_k=qh&&qh.exports===zw,S0=_k&&xn.process,wk=function(){try{var i=qh&&qh.require&&qh.require("util").types;return i||S0&&S0.binding&&S0.binding("util")}catch{}}(),Hw=wk}),Lr,xk,Gw,Sk=C(()=>{NL(),jw(),BL(),Lr=Hw&&Hw.isTypedArray,xk=Lr?x0(Lr):bk,Gw=xk});function $w(i,s){var a=Vr(i),c=!a&&b0(i),h=!a&&!c&&w0(i),f=!a&&!c&&!h&&Gw(i),g=a||c||h||f,y=g?Zu(i.length,String):[],w=y.length;for(var S in i)(s||Xh.call(i,S))&&!(g&&(S=="length"||h&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Gi(S,w)))&&y.push(S);return y}var Ww,Xh,Ek,Kw=C(()=>{$P(),Iw(),Tr(),Nw(),Hh(),Sk(),Ww=Object.prototype,Xh=Ww.hasOwnProperty,Ek=$w});function UL(i,s){return function(a){return i(s(a))}}var Qu,qw=C(()=>{Qu=UL}),Ck,Xw,VL=C(()=>{qw(),Ck=Qu(Object.keys,Object),Xw=Ck});function jL(i){if(!Ss(i))return Xw(i);var s=[];for(var a in Object(i))Yw.call(i,a)&&a!="constructor"&&s.push(a);return s}var Pk,Yw,kk,Tk=C(()=>{y0(),VL(),Pk=Object.prototype,Yw=Pk.hasOwnProperty,kk=jL});function zL(i){return ee(i)?Ek(i):kk(i)}var E0,Zw=C(()=>{Kw(),Tk(),ve(),E0=zL});function HL(i,s){if(Vr(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||Kt(i)?!0:Ak.test(i)||!Mk.test(i)||s!=null&&i in Object(s)}var Mk,Ak,C0,cd=C(()=>{Tr(),Qn(),Mk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ak=/^\w*$/,C0=HL}),Ik,Yh,P0=C(()=>{zl(),Ik=Ja(Object,"create"),Yh=Ik});function GL(){this.__data__=Yh?Yh(null):{},this.size=0}var Rk,$L=C(()=>{P0(),Rk=GL});function WL(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}var k0,KL=C(()=>{k0=WL});function Ok(i){var s=this.__data__;if(Yh){var a=s[i];return a===Dk?void 0:a}return Lk.call(s,i)?s[i]:void 0}var Dk,T0,Lk,Nk,qL=C(()=>{P0(),Dk="__lodash_hash_undefined__",T0=Object.prototype,Lk=T0.hasOwnProperty,Nk=Ok});function Fk(i){var s=this.__data__;return Yh?s[i]!==void 0:Uk.call(s,i)}var Bk,Uk,Vk,XL=C(()=>{P0(),Bk=Object.prototype,Uk=Bk.hasOwnProperty,Vk=Fk});function YL(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=Yh&&s===void 0?Qw:s,this}var Qw,jk,ZL=C(()=>{P0(),Qw="__lodash_hash_undefined__",jk=YL});function Zh(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var Jw,QL=C(()=>{$L(),KL(),qL(),XL(),ZL(),Zh.prototype.clear=Rk,Zh.prototype.delete=k0,Zh.prototype.get=Nk,Zh.prototype.has=Vk,Zh.prototype.set=jk,Jw=Zh});function JL(){this.__data__=[],this.size=0}var zk,eN=C(()=>{zk=JL});function tN(i,s){for(var a=i.length;a--;)if(si(i[a][0],s))return a;return-1}var Dm,M0=C(()=>{nl(),Dm=tN});function e1(i){var s=this.__data__,a=Dm(s,i);if(a<0)return!1;var c=s.length-1;return a==c?s.pop():Gk.call(s,a,1),--this.size,!0}var Hk,Gk,t1,nN=C(()=>{M0(),Hk=Array.prototype,Gk=Hk.splice,t1=e1});function rN(i){var s=this.__data__,a=Dm(s,i);return a<0?void 0:s[a][1]}var $k,iN=C(()=>{M0(),$k=rN});function oN(i){return Dm(this.__data__,i)>-1}var Wk,n1=C(()=>{M0(),Wk=oN});function r1(i,s){var a=this.__data__,c=Dm(a,i);return c<0?(++this.size,a.push([i,s])):a[c][1]=s,this}var Kk,qk=C(()=>{M0(),Kk=r1});function dd(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var Qh,A0=C(()=>{eN(),nN(),iN(),n1(),qk(),dd.prototype.clear=zk,dd.prototype.delete=t1,dd.prototype.get=$k,dd.prototype.has=Wk,dd.prototype.set=Kk,Qh=dd}),i1,hd,o1=C(()=>{zl(),gn(),i1=Ja(Sn,"Map"),hd=i1});function sN(){this.size=0,this.__data__={hash:new Jw,map:new(hd||Qh),string:new Jw}}var Xk,aN=C(()=>{QL(),A0(),o1(),Xk=sN});function lN(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}var Yk,uN=C(()=>{Yk=lN});function cN(i,s){var a=i.__data__;return Yk(s)?a[typeof s=="string"?"string":"hash"]:a.map}var Lm,I0=C(()=>{uN(),Lm=cN});function dN(i){var s=Lm(this,i).delete(i);return this.size-=s?1:0,s}var s1,hN=C(()=>{I0(),s1=dN});function pN(i){return Lm(this,i).get(i)}var Zk,fN=C(()=>{I0(),Zk=pN});function mN(i){return Lm(this,i).has(i)}var Qk,vN=C(()=>{I0(),Qk=mN});function gN(i,s){var a=Lm(this,i),c=a.size;return a.set(i,s),this.size+=a.size==c?0:1,this}var Jk,yN=C(()=>{I0(),Jk=gN});function Jh(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var rl,pd=C(()=>{aN(),hN(),fN(),vN(),yN(),Jh.prototype.clear=Xk,Jh.prototype.delete=s1,Jh.prototype.get=Zk,Jh.prototype.has=Qk,Jh.prototype.set=Jk,rl=Jh});function a1(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(eT);var a=function(){var c=arguments,h=s?s.apply(this,c):c[0],f=a.cache;if(f.has(h))return f.get(h);var g=i.apply(this,c);return a.cache=f.set(h,g)||f,g};return a.cache=new(a1.Cache||rl),a}var eT,l1,tT=C(()=>{pd(),eT="Expected a function",a1.Cache=rl,l1=a1});function nT(i){var s=l1(i,function(c){return a.size===u1&&a.clear(),c}),a=s.cache;return s}var u1,rT,iT=C(()=>{tT(),u1=500,rT=nT}),c1,oT,sT,aT,bN=C(()=>{iT(),c1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oT=/\\(\\)?/g,sT=rT(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(c1,function(a,c,h,f){s.push(h?f.replace(oT,"$1"):c||a)}),s}),aT=sT});function _N(i){return i==null?"":Qc(i)}var Nm,lT=C(()=>{Gu(),Nm=_N});function wN(i,s){return Vr(i)?i:C0(i,s)?[i]:aT(Nm(i))}var Fm,d1=C(()=>{Tr(),cd(),bN(),lT(),Fm=wN});function h1(i){if(typeof i=="string"||Kt(i))return i;var s=i+"";return s=="0"&&1/i==-uT?"-0":s}var uT,ep,Bm=C(()=>{Qn(),uT=1/0,ep=h1});function xN(i,s){s=Fm(s,i);for(var a=0,c=s.length;i!=null&&a<c;)i=i[ep(s[a++])];return a&&a==c?i:void 0}var Um,p1=C(()=>{d1(),Bm(),Um=xN});function SN(i,s,a){var c=i==null?void 0:Um(i,s);return c===void 0?a:c}var fd,tp=C(()=>{p1(),fd=SN});function EN(i,s){for(var a=-1,c=s.length,h=i.length;++a<c;)i[h+a]=s[a];return i}var Vm,cT=C(()=>{Vm=EN});function CN(i){return Vr(i)||b0(i)||!!(f1&&i&&i[f1])}var f1,R0,PN=C(()=>{Nn(),Iw(),Tr(),f1=kn?kn.isConcatSpreadable:void 0,R0=CN});function O0(i,s,a,c,h){var f=-1,g=i.length;for(a||(a=R0),h||(h=[]);++f<g;){var y=i[f];s>0&&a(y)?s>1?O0(y,s-1,a,c,h):Vm(h,y):c||(h[h.length]=y)}return h}var dT,m1=C(()=>{cT(),PN(),dT=O0}),v1,hT,pT=C(()=>{qw(),v1=Qu(Object.getPrototypeOf,Object),hT=v1});function fT(i){if(!Le(i)||Qt(i)!=g1)return!1;var s=hT(i);if(s===null)return!0;var a=vT.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&b1.call(a)==gT}var g1,y1,mT,b1,vT,gT,D0,Ju=C(()=>{Bn(),pT(),Ht(),g1="[object Object]",y1=Function.prototype,mT=Object.prototype,b1=y1.toString,vT=mT.hasOwnProperty,gT=b1.call(Object),D0=fT});function jm(i){var s=Math[i];return function(a,c){if(a=lr(a),c=c==null?0:bT(qa(c),292),c&&yT(a)){var h=(Nm(a)+"e").split("e"),f=s(h[0]+"e"+(+h[1]+c));return h=(Nm(f)+"e").split("e"),+(h[0]+"e"+(+h[1]-c))}return s(a)}}var yT,bT,_T,kN=C(()=>{gn(),Ys(),qr(),lT(),yT=Sn.isFinite,bT=Math.min,_T=jm});function TN(i,s,a){return i===i&&(a!==void 0&&(i=i<=a?i:a),s!==void 0&&(i=i>=s?i:s)),i}var zm,MN=C(()=>{zm=TN});function _1(i,s,a){return a===void 0&&(a=s,s=void 0),a!==void 0&&(a=lr(a),a=a===a?a:0),s!==void 0&&(s=lr(s),s=s===s?s:0),zm(lr(i),s,a)}var ai,L0=C(()=>{MN(),qr(),ai=_1});function AN(){this.__data__=new Qh,this.size=0}var wT,IN=C(()=>{A0(),wT=AN});function xT(i){var s=this.__data__,a=s.delete(i);return this.size=s.size,a}var w1,RN=C(()=>{w1=xT});function ON(i){return this.__data__.get(i)}var ST,DN=C(()=>{ST=ON});function LN(i){return this.__data__.has(i)}var ET,NN=C(()=>{ET=LN});function FN(i,s){var a=this.__data__;if(a instanceof Qh){var c=a.__data__;if(!hd||c.length<CT-1)return c.push([i,s]),this.size=++a.size,this;a=this.__data__=new rl(c)}return a.set(i,s),this.size=a.size,this}var CT,PT,BN=C(()=>{A0(),o1(),pd(),CT=200,PT=FN});function np(i){var s=this.__data__=new Qh(i);this.size=s.size}var Hm,kT=C(()=>{A0(),IN(),RN(),DN(),NN(),BN(),np.prototype.clear=wT,np.prototype.delete=w1,np.prototype.get=ST,np.prototype.has=ET,np.prototype.set=PT,Hm=np});function UN(i,s){for(var a=-1,c=i==null?0:i.length,h=0,f=[];++a<c;){var g=i[a];s(g,a,i)&&(f[h++]=g)}return f}var TT,VN=C(()=>{TT=UN});function jN(){return[]}var MT,zN=C(()=>{MT=jN}),AT,IT,x1,RT,OT,HN=C(()=>{VN(),zN(),AT=Object.prototype,IT=AT.propertyIsEnumerable,x1=Object.getOwnPropertySymbols,RT=x1?function(i){return i==null?[]:(i=Object(i),TT(x1(i),function(s){return IT.call(i,s)}))}:MT,OT=RT});function GN(i,s,a){var c=s(i);return Vr(i)?c:Vm(c,a(i))}var DT,$N=C(()=>{cT(),Tr(),DT=GN});function WN(i){return DT(i,E0,OT)}var N0,KN=C(()=>{$N(),HN(),Zw(),N0=WN}),LT,F0,qN=C(()=>{zl(),gn(),LT=Ja(Sn,"DataView"),F0=LT}),NT,Gm,XN=C(()=>{zl(),gn(),NT=Ja(Sn,"Promise"),Gm=NT}),FT,md,BT=C(()=>{zl(),gn(),FT=Ja(Sn,"Set"),md=FT}),S1,E1,C1,P1,k1,T1,M1,UT,VT,jT,A1,ec,I1,YN=C(()=>{qN(),o1(),XN(),BT(),pw(),Bn(),e0(),S1="[object Map]",E1="[object Object]",C1="[object Promise]",P1="[object Set]",k1="[object WeakMap]",T1="[object DataView]",M1=Qa(F0),UT=Qa(hd),VT=Qa(Gm),jT=Qa(md),A1=Qa(Fh),ec=Qt,(F0&&ec(new F0(new ArrayBuffer(1)))!=T1||hd&&ec(new hd)!=S1||Gm&&ec(Gm.resolve())!=C1||md&&ec(new md)!=P1||Fh&&ec(new Fh)!=k1)&&(ec=function(i){var s=Qt(i),a=s==E1?i.constructor:void 0,c=a?Qa(a):"";if(c)switch(c){case M1:return T1;case UT:return S1;case VT:return C1;case jT:return P1;case A1:return k1}return s}),I1=ec}),zT,R1,ZN=C(()=>{gn(),zT=Sn.Uint8Array,R1=zT});function QN(i){return this.__data__.set(i,HT),this}var HT,GT,JN=C(()=>{HT="__lodash_hash_undefined__",GT=QN});function e5(i){return this.__data__.has(i)}var $T,t5=C(()=>{$T=e5});function B0(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new rl;++s<a;)this.add(i[s])}var O1,WT=C(()=>{pd(),JN(),t5(),B0.prototype.add=B0.prototype.push=GT,B0.prototype.has=$T,O1=B0});function Hr(i,s){for(var a=-1,c=i==null?0:i.length;++a<c;)if(s(i[a],a,i))return!0;return!1}var $m,n5=C(()=>{$m=Hr});function r5(i,s){return i.has(s)}var D1,KT=C(()=>{D1=r5});function i5(i,s,a,c,h,f){var g=a&qT,y=i.length,w=s.length;if(y!=w&&!(g&&w>y))return!1;var S=f.get(i),T=f.get(s);if(S&&T)return S==s&&T==i;var I=-1,A=!0,k=a&XT?new O1:void 0;for(f.set(i,s),f.set(s,i);++I<y;){var D=i[I],O=s[I];if(c)var F=g?c(O,D,I,s,i,f):c(D,O,I,i,s,f);if(F!==void 0){if(F)continue;A=!1;break}if(k){if(!$m(s,function(V,$){if(!D1(k,$)&&(D===V||h(D,V,a,c,f)))return k.push($)})){A=!1;break}}else if(!(D===O||h(D,O,a,c,f))){A=!1;break}}return f.delete(i),f.delete(s),A}var qT,XT,L1,YT=C(()=>{WT(),n5(),KT(),qT=1,XT=2,L1=i5});function o5(i){var s=-1,a=Array(i.size);return i.forEach(function(c,h){a[++s]=[h,c]}),a}var Wm,s5=C(()=>{Wm=o5});function a5(i){var s=-1,a=Array(i.size);return i.forEach(function(c){a[++s]=c}),a}var U0,N1=C(()=>{U0=a5});function l5(i,s,a,c,h,f,g){switch(a){case lM:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case aM:return!(i.byteLength!=s.byteLength||!f(new R1(i),new R1(s)));case JT:case F1:case nM:return si(+i,+s);case eM:return i.name==s.name&&i.message==s.message;case rM:case oM:return i==s+"";case tM:var y=Wm;case iM:var w=c&ZT;if(y||(y=U0),i.size!=s.size&&!w)return!1;var S=g.get(i);if(S)return S==s;c|=QT,g.set(i,s);var T=L1(y(i),y(s),c,h,f,g);return g.delete(i),T;case sM:if(V0)return V0.call(i)==V0.call(s)}return!1}var ZT,QT,JT,F1,eM,tM,nM,rM,iM,oM,sM,aM,lM,B1,V0,uM,u5=C(()=>{Nn(),ZN(),nl(),YT(),s5(),N1(),ZT=1,QT=2,JT="[object Boolean]",F1="[object Date]",eM="[object Error]",tM="[object Map]",nM="[object Number]",rM="[object RegExp]",iM="[object Set]",oM="[object String]",sM="[object Symbol]",aM="[object ArrayBuffer]",lM="[object DataView]",B1=kn?kn.prototype:void 0,V0=B1?B1.valueOf:void 0,uM=l5});function c5(i,s,a,c,h,f){var g=a&cM,y=N0(i),w=y.length,S=N0(s),T=S.length;if(w!=T&&!g)return!1;for(var I=w;I--;){var A=y[I];if(!(g?A in s:hM.call(s,A)))return!1}var k=f.get(i),D=f.get(s);if(k&&D)return k==s&&D==i;var O=!0;f.set(i,s),f.set(s,i);for(var F=g;++I<w;){A=y[I];var V=i[A],$=s[A];if(c)var X=g?c($,V,A,s,i,f):c(V,$,A,i,s,f);if(!(X===void 0?V===$||h(V,$,a,c,f):X)){O=!1;break}F||(F=A=="constructor")}if(O&&!F){var re=i.constructor,ne=s.constructor;re!=ne&&"constructor"in i&&"constructor"in s&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(O=!1)}return f.delete(i),f.delete(s),O}var cM,dM,hM,U1,V1=C(()=>{KN(),cM=1,dM=Object.prototype,hM=dM.hasOwnProperty,U1=c5});function d5(i,s,a,c,h,f){var g=Vr(i),y=Vr(s),w=g?z1:I1(i),S=y?z1:I1(s);w=w==j1?Km:w,S=S==j1?Km:S;var T=w==Km,I=S==Km,A=w==S;if(A&&w0(i)){if(!w0(s))return!1;g=!0,T=!1}if(A&&!T)return f||(f=new Hm),g||Gw(i)?L1(i,s,a,c,h,f):uM(i,s,w,a,c,h,f);if(!(a&pM)){var k=T&&H1.call(i,"__wrapped__"),D=I&&H1.call(s,"__wrapped__");if(k||D){var O=k?i.value():i,F=D?s.value():s;return f||(f=new Hm),h(O,F,a,c,f)}}return A?(f||(f=new Hm),U1(i,s,a,c,h,f)):!1}var pM,j1,z1,Km,fM,H1,mM,vM=C(()=>{kT(),YT(),u5(),V1(),YN(),Tr(),Nw(),Sk(),pM=1,j1="[object Arguments]",z1="[object Array]",Km="[object Object]",fM=Object.prototype,H1=fM.hasOwnProperty,mM=d5});function G1(i,s,a,c,h){return i===s?!0:i==null||s==null||!Le(i)&&!Le(s)?i!==i&&s!==s:mM(i,s,a,c,G1,h)}var rp,gM=C(()=>{vM(),Ht(),rp=G1});function yM(i,s,a,c){var h=a.length,f=h,g=!c;if(i==null)return!f;for(i=Object(i);h--;){var y=a[h];if(g&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<f;){y=a[h];var w=y[0],S=i[w],T=y[1];if(g&&y[2]){if(S===void 0&&!(w in i))return!1}else{var I=new Hm;if(c)var A=c(S,T,w,i,s,I);if(!(A===void 0?rp(T,S,bM|_M,c,I):A))return!1}}return!0}var bM,_M,$1,wM=C(()=>{kT(),gM(),bM=1,_M=2,$1=yM});function h5(i){return i===i&&!qt(i)}var W1,xM=C(()=>{pn(),W1=h5});function p5(i){for(var s=E0(i),a=s.length;a--;){var c=s[a],h=i[c];s[a]=[c,h,W1(h)]}return s}var SM,EM=C(()=>{xM(),Zw(),SM=p5});function f5(i,s){return function(a){return a==null?!1:a[i]===s&&(s!==void 0||i in Object(a))}}var K1,CM=C(()=>{K1=f5});function PM(i){var s=SM(i);return s.length==1&&s[0][2]?K1(s[0][0],s[0][1]):function(a){return a===i||$1(a,i,s)}}var kM,m5=C(()=>{wM(),EM(),CM(),kM=PM});function v5(i,s){return i!=null&&s in Object(i)}var TM,g5=C(()=>{TM=v5});function y5(i,s,a){s=Fm(s,i);for(var c=-1,h=s.length,f=!1;++c<h;){var g=ep(s[c]);if(!(f=i!=null&&a(i,g)))break;i=i[g]}return f||++c!=h?f:(h=i==null?0:i.length,!!h&&ud(h)&&Gi(g,h)&&(Vr(i)||b0(i)))}var MM,b5=C(()=>{d1(),Iw(),Tr(),Hh(),Im(),Bm(),MM=y5});function _5(i,s){return i!=null&&MM(i,s,TM)}var AM,w5=C(()=>{g5(),b5(),AM=_5});function x5(i,s){return C0(i)&&W1(s)?K1(ep(i),s):function(a){var c=fd(a,i);return c===void 0&&c===s?AM(a,i):rp(s,c,IM|q1)}}var IM,q1,RM,S5=C(()=>{gM(),tp(),w5(),cd(),xM(),CM(),Bm(),IM=1,q1=2,RM=x5});function E5(i){return function(s){return s==null?void 0:s[i]}}var OM,C5=C(()=>{OM=E5});function P5(i){return function(s){return Um(s,i)}}var DM,k5=C(()=>{p1(),DM=P5});function T5(i){return C0(i)?OM(ep(i)):DM(i)}var LM,M5=C(()=>{C5(),k5(),cd(),Bm(),LM=T5});function A5(i){return typeof i=="function"?i:i==null?Xr:typeof i=="object"?Vr(i)?RM(i[0],i[1]):kM(i):LM(i)}var ip,vd=C(()=>{m5(),S5(),es(),Tr(),M5(),ip=A5});function I5(i,s,a,c){for(var h=-1,f=i==null?0:i.length;++h<f;){var g=i[h];s(c,g,a(g),i)}return c}var NM,R5=C(()=>{NM=I5});function O5(i){return function(s,a,c){for(var h=-1,f=Object(s),g=c(s),y=g.length;y--;){var w=g[i?y:++h];if(a(f[w],w,f)===!1)break}return s}}var FM,D5=C(()=>{FM=O5}),BM,UM,L5=C(()=>{D5(),BM=FM(),UM=BM});function N5(i,s){return i&&UM(i,s,E0)}var X1,VM=C(()=>{L5(),Zw(),X1=N5});function F5(i,s){return function(a,c){if(a==null)return a;if(!ee(a))return i(a,c);for(var h=a.length,f=s?h:-1,g=Object(a);(s?f--:++f<h)&&c(g[f],f,g)!==!1;);return a}}var jM,B5=C(()=>{ve(),jM=F5}),zM,Y1,HM=C(()=>{VM(),B5(),zM=jM(X1),Y1=zM});function GM(i,s,a,c){return Y1(i,function(h,f,g){s(c,h,a(h),g)}),c}var $M,U5=C(()=>{HM(),$M=GM});function WM(i,s){return function(a,c){var h=Vr(a)?NM:$M,f=s?s():{};return h(a,i,ip(c,2),f)}}var KM,V5=C(()=>{R5(),U5(),vd(),Tr(),KM=WM}),qM,j0,j5=C(()=>{gn(),qM=function(){return Sn.Date.now()},j0=qM});function z5(i,s,a){var c,h,f,g,y,w,S=0,T=!1,I=!1,A=!0;if(typeof i!="function")throw new TypeError(z0);s=lr(s)||0,qt(a)&&(T=!!a.leading,I="maxWait"in a,f=I?H0(lr(a.maxWait)||0,s):f,A="trailing"in a?!!a.trailing:A);function k(ae){var xe=c,fe=h;return c=h=void 0,S=ae,g=i.apply(fe,xe),g}function D(ae){return S=ae,y=setTimeout(V,s),T?k(ae):g}function O(ae){var xe=ae-w,fe=ae-S,ge=s-xe;return I?XM(ge,f-fe):ge}function F(ae){var xe=ae-w,fe=ae-S;return w===void 0||xe>=s||xe<0||I&&fe>=f}function V(){var ae=j0();if(F(ae))return $(ae);y=setTimeout(V,O(ae))}function $(ae){return y=void 0,A&&c?k(ae):(c=h=void 0,g)}function X(){y!==void 0&&clearTimeout(y),S=0,c=w=h=y=void 0}function re(){return y===void 0?g:$(j0())}function ne(){var ae=j0(),xe=F(ae);if(c=arguments,h=this,w=ae,xe){if(y===void 0)return D(w);if(I)return clearTimeout(y),y=setTimeout(V,s),k(w)}return y===void 0&&(y=setTimeout(V,s)),g}return ne.cancel=X,ne.flush=re,ne}var z0,H0,XM,G0,Z1=C(()=>{pn(),j5(),qr(),z0="Expected a function",H0=Math.max,XM=Math.min,G0=z5});function YM(i,s,a){for(var c=-1,h=i==null?0:i.length;++c<h;)if(a(s,i[c]))return!0;return!1}var ZM,QM=C(()=>{ZM=YM});function JM(i){var s=i==null?0:i.length;return s?i[s-1]:void 0}var gd,$0=C(()=>{gd=JM});function H5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var h=a==null?0:qa(a);return h<0&&(h=Q1(c+h,0)),tl(i,ip(s,3),h)}var Q1,J1,G5=C(()=>{xm(),vd(),Ys(),Q1=Math.max,J1=H5});function $5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var h=c-1;return a!==void 0&&(h=qa(a),h=a<0?ex(c+h,0):e2(h,c-1)),tl(i,ip(s,3),h,!0)}var ex,e2,t2,W5=C(()=>{xm(),vd(),Ys(),ex=Math.max,e2=Math.min,t2=$5});function K5(i,s){var a=-1,c=ee(i)?Array(i.length):[];return Y1(i,function(h,f,g){c[++a]=s(h,f,g)}),c}var op,q5=C(()=>{HM(),ve(),op=K5});function n2(i,s,a){return i>=i2(s,a)&&i<r2(s,a)}var r2,i2,o2,W0=C(()=>{r2=Math.max,i2=Math.min,o2=n2});function tx(i,s,a){return s=Ka(s),a===void 0?(a=s,s=0):a=Ka(a),i=lr(i),o2(i,s,a)}var nx,X5=C(()=>{W0(),wr(),qr(),nx=tx});function Gr(i){return typeof i=="number"&&i==qa(i)}var ts,Es=C(()=>{Ys(),ts=Gr}),tc,Sr,Wl=C(()=>{$h(),V5(),tc=KM(function(i,s,a){Gh(i,a,s)}),Sr=tc});function s2(i,s){var a={};return s=ip(s,3),X1(i,function(c,h,f){Gh(a,h,s(c,h,f))}),a}var yd,a2=C(()=>{$h(),VM(),vd(),yd=s2});function Y5(i,s,a,c){if(!qt(i))return i;s=Fm(s,i);for(var h=-1,f=s.length,g=f-1,y=i;y!=null&&++h<f;){var w=ep(s[h]),S=a;if(w==="__proto__"||w==="constructor"||w==="prototype")return i;if(h!=g){var T=y[w];S=c?c(T,w,y):void 0,S===void 0&&(S=qt(T)?T:Gi(s[h+1])?[]:{})}xr(y,w,S),y=y[w]}return i}var l2,Z5=C(()=>{Mm(),d1(),Hh(),pn(),Bm(),l2=Y5});function u2(i,s){var a=i.length;for(i.sort(s);a--;)i[a]=i[a].value;return i}var rx,K0=C(()=>{rx=u2});function c2(i,s){if(i!==s){var a=i!==void 0,c=i===null,h=i===i,f=Kt(i),g=s!==void 0,y=s===null,w=s===s,S=Kt(s);if(!y&&!S&&!f&&i>s||f&&g&&w&&!y&&!S||c&&g&&w||!a&&w||!h)return 1;if(!c&&!f&&!S&&i<s||S&&a&&h&&!c&&!f||y&&a&&h||!g&&h||!w)return-1}return 0}var d2,h2=C(()=>{Qn(),d2=c2});function p2(i,s,a){for(var c=-1,h=i.criteria,f=s.criteria,g=h.length,y=a.length;++c<g;){var w=d2(h[c],f[c]);if(w){if(c>=y)return w;var S=a[c];return w*(S=="desc"?-1:1)}}return i.index-s.index}var ix,Q5=C(()=>{h2(),ix=p2});function J5(i,s,a){s.length?s=kr(s,function(f){return Vr(f)?function(g){return Um(g,f.length===1?f[0]:f)}:f}):s=[Xr];var c=-1;s=kr(s,x0(ip));var h=op(i,function(f,g,y){var w=kr(s,function(S){return S(f)});return{criteria:w,index:++c,value:f}});return rx(h,function(f,g){return ix(f,g,a)})}var ox,eF=C(()=>{Jo(),p1(),vd(),q5(),K0(),jw(),Q5(),es(),Tr(),ox=J5});function tF(i,s,a,c){for(var h=a-1,f=i.length;++h<f;)if(c(i[h],s))return h;return-1}var sp,f2=C(()=>{sp=tF});function nF(i,s,a,c){var h=c?sp:jh,f=-1,g=s.length,y=i;for(i===s&&(s=bm(s)),a&&(y=kr(i,x0(a)));++f<g;)for(var w=0,S=s[f],T=a?a(S):S;(w=h(y,T,w,c))>-1;)y!==i&&$i.call(y,w,1),$i.call(i,w,1);return i}var m2,$i,Kl,rF=C(()=>{Jo(),Em(),f2(),jw(),c0(),m2=Array.prototype,$i=m2.splice,Kl=nF});function q0(i,s){return i&&i.length&&s&&s.length?Kl(i,s):i}var v2,iF=C(()=>{rF(),v2=q0}),g2,y2,sx=C(()=>{Kh(),iF(),g2=Xu(v2),y2=g2}),b2,qm,ap=C(()=>{kN(),b2=_T("round"),qm=b2});function oF(i,s,a){return i==null?i:l2(i,s,a)}var lp,X0=C(()=>{Z5(),lp=oF}),Y0,_2,Z0=C(()=>{m1(),eF(),Kh(),Rn(),Y0=Xu(function(i,s){if(i==null)return[];var a=s.length;return a>1&&ft(i,s[0],s[1])?s=[]:a>2&&ft(s[0],s[1],s[2])&&(s=[s[0]]),ox(i,dT(s,1),[])}),_2=Y0}),ax,lx,w2,sF=C(()=>{BT(),l0(),N1(),ax=1/0,lx=md&&1/U0(new md([,-0]))[1]==ax?function(i){return new md(i)}:a0,w2=lx});function aF(i,s,a){var c=-1,h=Hi,f=i.length,g=!0,y=[],w=y;if(a)g=!1,h=ZM;else if(f>=x2){var S=s?null:w2(i);if(S)return U0(S);g=!1,h=D1,w=new O1}else w=s?[]:y;e:for(;++c<f;){var T=i[c],I=s?s(T):T;if(T=a||T!==0?T:0,g&&I===I){for(var A=w.length;A--;)if(w[A]===I)continue e;s&&w.push(I),y.push(T)}else h(w,I,a)||(w!==y&&w.push(I),y.push(T))}return y}var x2,S2,lF=C(()=>{WT(),xw(),QM(),KT(),sF(),N1(),x2=200,S2=aF});function uF(i){return i&&i.length?S2(i):[]}var ns,bd=C(()=>{lF(),ns=uF}),Qr=C(()=>{L0(),Z1(),G5(),X5(),Es(),Ju(),$0(),a2(),tT(),ap(),bd()}),ux=K((i,s)=>{var a;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ti):c=>(a||(a=Promise.resolve())).then(c).catch(h=>setTimeout(()=>{throw h},0))}),E2=K(i=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.iterator;function k(ue){return ue===null||typeof ue!="object"?null:(ue=A&&ue[A]||ue["@@iterator"],typeof ue=="function"?ue:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function V(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}V.prototype.isReactComponent={},V.prototype.setState=function(ue,he){if(typeof ue!="object"&&typeof ue!="function"&&ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ue,he,"setState")},V.prototype.forceUpdate=function(ue){this.updater.enqueueForceUpdate(this,ue,"forceUpdate")};function $(){}$.prototype=V.prototype;function X(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}var re=X.prototype=new $;re.constructor=X,O(re,V.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,ae=Object.prototype.hasOwnProperty,xe={current:null},fe={key:!0,ref:!0,__self:!0,__source:!0};function ge(ue,he,qe){var Ze,ot={},ze=null,Yt=null;if(he!=null)for(Ze in he.ref!==void 0&&(Yt=he.ref),he.key!==void 0&&(ze=""+he.key),he)ae.call(he,Ze)&&!fe.hasOwnProperty(Ze)&&(ot[Ze]=he[Ze]);var bt=arguments.length-2;if(bt===1)ot.children=qe;else if(1<bt){for(var Wt=Array(bt),cn=0;cn<bt;cn++)Wt[cn]=arguments[cn+2];ot.children=Wt}if(ue&&ue.defaultProps)for(Ze in bt=ue.defaultProps,bt)ot[Ze]===void 0&&(ot[Ze]=bt[Ze]);return{$$typeof:s,type:ue,key:ze,ref:Yt,props:ot,_owner:xe.current}}function Ie(ue,he){return{$$typeof:s,type:ue.type,key:he,ref:ue.ref,props:ue.props,_owner:ue._owner}}function Qe(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===s}function le(ue){var he={"=":"=0",":":"=2"};return"$"+ue.replace(/[=:]/g,function(qe){return he[qe]})}var Ae=/\/+/g;function Y(ue,he){return typeof ue=="object"&&ue!==null&&ue.key!=null?le(""+ue.key):he.toString(36)}function Ue(ue,he,qe,Ze,ot){var ze=typeof ue;(ze==="undefined"||ze==="boolean")&&(ue=null);var Yt=!1;if(ue===null)Yt=!0;else switch(ze){case"string":case"number":Yt=!0;break;case"object":switch(ue.$$typeof){case s:case a:Yt=!0}}if(Yt)return Yt=ue,ot=ot(Yt),ue=Ze===""?"."+Y(Yt,0):Ze,ne(ot)?(qe="",ue!=null&&(qe=ue.replace(Ae,"$&/")+"/"),Ue(ot,he,qe,"",function(cn){return cn})):ot!=null&&(Qe(ot)&&(ot=Ie(ot,qe+(!ot.key||Yt&&Yt.key===ot.key?"":(""+ot.key).replace(Ae,"$&/")+"/")+ue)),he.push(ot)),1;if(Yt=0,Ze=Ze===""?".":Ze+":",ne(ue))for(var bt=0;bt<ue.length;bt++){ze=ue[bt];var Wt=Ze+Y(ze,bt);Yt+=Ue(ze,he,qe,Wt,ot)}else if(Wt=k(ue),typeof Wt=="function")for(ue=Wt.call(ue),bt=0;!(ze=ue.next()).done;)ze=ze.value,Wt=Ze+Y(ze,bt++),Yt+=Ue(ze,he,qe,Wt,ot);else if(ze==="object")throw he=String(ue),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Yt}function Tt(ue,he,qe){if(ue==null)return ue;var Ze=[],ot=0;return Ue(ue,Ze,"","",function(ze){return he.call(qe,ze,ot++)}),Ze}function ke(ue){if(ue._status===-1){var he=ue._result;he=he(),he.then(function(qe){(ue._status===0||ue._status===-1)&&(ue._status=1,ue._result=qe)},function(qe){(ue._status===0||ue._status===-1)&&(ue._status=2,ue._result=qe)}),ue._status===-1&&(ue._status=0,ue._result=he)}if(ue._status===1)return ue._result.default;throw ue._result}var Te={current:null},je={transition:null},wt={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:je,ReactCurrentOwner:xe};i.Children={map:Tt,forEach:function(ue,he,qe){Tt(ue,function(){he.apply(this,arguments)},qe)},count:function(ue){var he=0;return Tt(ue,function(){he++}),he},toArray:function(ue){return Tt(ue,function(he){return he})||[]},only:function(ue){if(!Qe(ue))throw Error("React.Children.only expected to receive a single React element child.");return ue}},i.Component=V,i.Fragment=c,i.Profiler=f,i.PureComponent=X,i.StrictMode=h,i.Suspense=S,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wt,i.cloneElement=function(ue,he,qe){if(ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ue+".");var Ze=O({},ue.props),ot=ue.key,ze=ue.ref,Yt=ue._owner;if(he!=null){if(he.ref!==void 0&&(ze=he.ref,Yt=xe.current),he.key!==void 0&&(ot=""+he.key),ue.type&&ue.type.defaultProps)var bt=ue.type.defaultProps;for(Wt in he)ae.call(he,Wt)&&!fe.hasOwnProperty(Wt)&&(Ze[Wt]=he[Wt]===void 0&&bt!==void 0?bt[Wt]:he[Wt])}var Wt=arguments.length-2;if(Wt===1)Ze.children=qe;else if(1<Wt){bt=Array(Wt);for(var cn=0;cn<Wt;cn++)bt[cn]=arguments[cn+2];Ze.children=bt}return{$$typeof:s,type:ue.type,key:ot,ref:ze,props:Ze,_owner:Yt}},i.createContext=function(ue){return ue={$$typeof:y,_currentValue:ue,_currentValue2:ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ue.Provider={$$typeof:g,_context:ue},ue.Consumer=ue},i.createElement=ge,i.createFactory=function(ue){var he=ge.bind(null,ue);return he.type=ue,he},i.createRef=function(){return{current:null}},i.forwardRef=function(ue){return{$$typeof:w,render:ue}},i.isValidElement=Qe,i.lazy=function(ue){return{$$typeof:I,_payload:{_status:-1,_result:ue},_init:ke}},i.memo=function(ue,he){return{$$typeof:T,type:ue,compare:he===void 0?null:he}},i.startTransition=function(ue){var he=je.transition;je.transition={};try{ue()}finally{je.transition=he}},i.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},i.useCallback=function(ue,he){return Te.current.useCallback(ue,he)},i.useContext=function(ue){return Te.current.useContext(ue)},i.useDebugValue=function(){},i.useDeferredValue=function(ue){return Te.current.useDeferredValue(ue)},i.useEffect=function(ue,he){return Te.current.useEffect(ue,he)},i.useId=function(){return Te.current.useId()},i.useImperativeHandle=function(ue,he,qe){return Te.current.useImperativeHandle(ue,he,qe)},i.useInsertionEffect=function(ue,he){return Te.current.useInsertionEffect(ue,he)},i.useLayoutEffect=function(ue,he){return Te.current.useLayoutEffect(ue,he)},i.useMemo=function(ue,he){return Te.current.useMemo(ue,he)},i.useReducer=function(ue,he,qe){return Te.current.useReducer(ue,he,qe)},i.useRef=function(ue){return Te.current.useRef(ue)},i.useState=function(ue){return Te.current.useState(ue)},i.useSyncExternalStore=function(ue,he,qe){return Te.current.useSyncExternalStore(ue,he,qe)},i.useTransition=function(){return Te.current.useTransition()},i.version="18.2.0"}),Re=K((i,s)=>{s.exports=E2()}),C2=K(i=>{function s(Te,je){var wt=Te.length;Te.push(je);e:for(;0<wt;){var ue=wt-1>>>1,he=Te[ue];if(0<h(he,je))Te[ue]=je,Te[wt]=he,wt=ue;else break e}}function a(Te){return Te.length===0?null:Te[0]}function c(Te){if(Te.length===0)return null;var je=Te[0],wt=Te.pop();if(wt!==je){Te[0]=wt;e:for(var ue=0,he=Te.length,qe=he>>>1;ue<qe;){var Ze=2*(ue+1)-1,ot=Te[Ze],ze=Ze+1,Yt=Te[ze];if(0>h(ot,wt))ze<he&&0>h(Yt,ot)?(Te[ue]=Yt,Te[ze]=wt,ue=ze):(Te[ue]=ot,Te[Ze]=wt,ue=Ze);else if(ze<he&&0>h(Yt,wt))Te[ue]=Yt,Te[ze]=wt,ue=ze;else break e}}return je}function h(Te,je){var wt=Te.sortIndex-je.sortIndex;return wt!==0?wt:Te.id-je.id}typeof performance=="object"&&typeof performance.now=="function"?(f=performance,i.unstable_now=function(){return f.now()}):(g=Date,y=g.now(),i.unstable_now=function(){return g.now()-y});var f,g,y,w=[],S=[],T=1,I=null,A=3,k=!1,D=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(Te){for(var je=a(S);je!==null;){if(je.callback===null)c(S);else if(je.startTime<=Te)c(S),je.sortIndex=je.expirationTime,s(w,je);else break;je=a(S)}}function re(Te){if(O=!1,X(Te),!D)if(a(w)!==null)D=!0,Tt(ne);else{var je=a(S);je!==null&&ke(re,je.startTime-Te)}}function ne(Te,je){D=!1,O&&(O=!1,V(fe),fe=-1),k=!0;var wt=A;try{for(X(je),I=a(w);I!==null&&(!(I.expirationTime>je)||Te&&!Qe());){var ue=I.callback;if(typeof ue=="function"){I.callback=null,A=I.priorityLevel;var he=ue(I.expirationTime<=je);je=i.unstable_now(),typeof he=="function"?I.callback=he:I===a(w)&&c(w),X(je)}else c(w);I=a(w)}if(I!==null)var qe=!0;else{var Ze=a(S);Ze!==null&&ke(re,Ze.startTime-je),qe=!1}return qe}finally{I=null,A=wt,k=!1}}var ae=!1,xe=null,fe=-1,ge=5,Ie=-1;function Qe(){return!(i.unstable_now()-Ie<ge)}function le(){if(xe!==null){var Te=i.unstable_now();Ie=Te;var je=!0;try{je=xe(!0,Te)}finally{je?Ae():(ae=!1,xe=null)}}else ae=!1}var Ae;typeof $=="function"?Ae=function(){$(le)}:typeof MessageChannel<"u"?(Y=new MessageChannel,Ue=Y.port2,Y.port1.onmessage=le,Ae=function(){Ue.postMessage(null)}):Ae=function(){F(le,0)};var Y,Ue;function Tt(Te){xe=Te,ae||(ae=!0,Ae())}function ke(Te,je){fe=F(function(){Te(i.unstable_now())},je)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Te){Te.callback=null},i.unstable_continueExecution=function(){D||k||(D=!0,Tt(ne))},i.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Te?Math.floor(1e3/Te):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return a(w)},i.unstable_next=function(Te){switch(A){case 1:case 2:case 3:var je=3;break;default:je=A}var wt=A;A=je;try{return Te()}finally{A=wt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Te,je){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var wt=A;A=Te;try{return je()}finally{A=wt}},i.unstable_scheduleCallback=function(Te,je,wt){var ue=i.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?ue+wt:ue):wt=ue,Te){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=wt+he,Te={id:T++,callback:je,priorityLevel:Te,startTime:wt,expirationTime:he,sortIndex:-1},wt>ue?(Te.sortIndex=wt,s(S,Te),a(w)===null&&Te===a(S)&&(O?(V(fe),fe=-1):O=!0,ke(re,wt-ue))):(Te.sortIndex=he,s(w,Te),D||k||(D=!0,Tt(ne))),Te},i.unstable_shouldYield=Qe,i.unstable_wrapCallback=function(Te){var je=A;return function(){var wt=A;A=je;try{return Te.apply(this,arguments)}finally{A=wt}}}}),cF=K((i,s)=>{s.exports=C2()}),cx=K(i=>{var s=Re(),a=cF();function c(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,b=1;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,f={};function g(l,d){y(l,d),y(l+"Capture",d)}function y(l,d){for(f[l]=d,l=0;l<d.length;l++)h.add(d[l])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},A={};function k(l){return S.call(A,l)?!0:S.call(I,l)?!1:T.test(l)?A[l]=!0:(I[l]=!0,!1)}function D(l,d,b,P){if(b!==null&&b.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return P?!1:b!==null?!b.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function O(l,d,b,P){if(d===null||typeof d>"u"||D(l,d,b,P))return!0;if(P)return!1;if(b!==null)switch(b.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function F(l,d,b,P,B,W,oe){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=P,this.attributeNamespace=B,this.mustUseProperty=b,this.propertyName=l,this.type=d,this.sanitizeURL=W,this.removeEmptyString=oe}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){V[l]=new F(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];V[d]=new F(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){V[l]=new F(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){V[l]=new F(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){V[l]=new F(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){V[l]=new F(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){V[l]=new F(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){V[l]=new F(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){V[l]=new F(l,5,!1,l.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function X(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!1,!1)}),V.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!0,!0)});function re(l,d,b,P){var B=V.hasOwnProperty(d)?V[d]:null;(B!==null?B.type!==0:P||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(O(d,b,B,P)&&(b=null),P||B===null?k(d)&&(b===null?l.removeAttribute(d):l.setAttribute(d,""+b)):B.mustUseProperty?l[B.propertyName]=b===null?B.type===3?!1:"":b:(d=B.attributeName,P=B.attributeNamespace,b===null?l.removeAttribute(d):(B=B.type,b=B===3||B===4&&b===!0?"":""+b,P?l.setAttributeNS(P,d,b):l.setAttribute(d,b))))}var ne=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),xe=Symbol.for("react.portal"),fe=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),Qe=Symbol.for("react.provider"),le=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),je=Symbol.iterator;function wt(l){return l===null||typeof l!="object"?null:(l=je&&l[je]||l["@@iterator"],typeof l=="function"?l:null)}var ue=Object.assign,he;function qe(l){if(he===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);he=d&&d[1]||""}return`
`+he+l}var Ze=!1;function ot(l,d){if(!l||Ze)return"";Ze=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ct){var P=ct}Reflect.construct(l,[],d)}else{try{d.call()}catch(ct){P=ct}l.call(d.prototype)}else{try{throw Error()}catch(ct){P=ct}l()}}catch(ct){if(ct&&P&&typeof ct.stack=="string"){for(var B=ct.stack.split(`
`),W=P.stack.split(`
`),oe=B.length-1,Ce=W.length-1;1<=oe&&0<=Ce&&B[oe]!==W[Ce];)Ce--;for(;1<=oe&&0<=Ce;oe--,Ce--)if(B[oe]!==W[Ce]){if(oe!==1||Ce!==1)do if(oe--,Ce--,0>Ce||B[oe]!==W[Ce]){var Oe=`
`+B[oe].replace(" at new "," at ");return l.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",l.displayName)),Oe}while(1<=oe&&0<=Ce);break}}}finally{Ze=!1,Error.prepareStackTrace=b}return(l=l?l.displayName||l.name:"")?qe(l):""}function ze(l){switch(l.tag){case 5:return qe(l.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return l=ot(l.type,!1),l;case 11:return l=ot(l.type.render,!1),l;case 1:return l=ot(l.type,!0),l;default:return""}}function Yt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case fe:return"Fragment";case xe:return"Portal";case Ie:return"Profiler";case ge:return"StrictMode";case Y:return"Suspense";case Ue:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case le:return(l.displayName||"Context")+".Consumer";case Qe:return(l._context.displayName||"Context")+".Provider";case Ae:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Tt:return d=l.displayName||null,d!==null?d:Yt(l.type)||"Memo";case ke:d=l._payload,l=l._init;try{return Yt(l(d))}catch{}}return null}function bt(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yt(d);case 8:return d===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Wt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function cn(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function In(l){var d=cn(l)?"checked":"value",b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),P=""+l[d];if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var B=b.get,W=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return B.call(this)},set:function(oe){P=""+oe,W.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return P},setValue:function(oe){P=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Cn(l){l._valueTracker||(l._valueTracker=In(l))}function Er(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var b=d.getValue(),P="";return l&&(P=cn(l)?l.checked?"true":"false":l.value),l=P,l!==b?(d.setValue(l),!0):!1}function J(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function at(l,d){var b=d.checked;return ue({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??l._wrapperState.initialChecked})}function st(l,d){var b=d.defaultValue==null?"":d.defaultValue,P=d.checked!=null?d.checked:d.defaultChecked;b=Wt(d.value!=null?d.value:b),l._wrapperState={initialChecked:P,initialValue:b,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function we(l,d){d=d.checked,d!=null&&re(l,"checked",d,!1)}function be(l,d){we(l,d);var b=Wt(d.value),P=d.type;if(b!=null)P==="number"?(b===0&&l.value===""||l.value!=b)&&(l.value=""+b):l.value!==""+b&&(l.value=""+b);else if(P==="submit"||P==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?xt(l,d.type,b):d.hasOwnProperty("defaultValue")&&xt(l,d.type,Wt(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function He(l,d,b){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var P=d.type;if(!(P!=="submit"&&P!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,b||d===l.value||(l.value=d),l.defaultValue=d}b=l.name,b!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,b!==""&&(l.name=b)}function xt(l,d,b){(d!=="number"||J(l.ownerDocument)!==l)&&(b==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+b&&(l.defaultValue=""+b))}var Ct=Array.isArray;function Xe(l,d,b,P){if(l=l.options,d){d={};for(var B=0;B<b.length;B++)d["$"+b[B]]=!0;for(b=0;b<l.length;b++)B=d.hasOwnProperty("$"+l[b].value),l[b].selected!==B&&(l[b].selected=B),B&&P&&(l[b].defaultSelected=!0)}else{for(b=""+Wt(b),d=null,B=0;B<l.length;B++){if(l[B].value===b){l[B].selected=!0,P&&(l[B].defaultSelected=!0);return}d!==null||l[B].disabled||(d=l[B])}d!==null&&(d.selected=!0)}}function At(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(c(91));return ue({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Et(l,d){var b=d.value;if(b==null){if(b=d.children,d=d.defaultValue,b!=null){if(d!=null)throw Error(c(92));if(Ct(b)){if(1<b.length)throw Error(c(93));b=b[0]}d=b}d==null&&(d=""),b=d}l._wrapperState={initialValue:Wt(b)}}function Pt(l,d){var b=Wt(d.value),P=Wt(d.defaultValue);b!=null&&(b=""+b,b!==l.value&&(l.value=b),d.defaultValue==null&&l.defaultValue!==b&&(l.defaultValue=b)),P!=null&&(l.defaultValue=""+P)}function _n(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function gr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hn(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?gr(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var $o,$p=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,b,P,B){MSApp.execUnsafeLocalFunction(function(){return l(d,b,P,B)})}:l}(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for($o=$o||document.createElement("div"),$o.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=$o.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function as(l,d){if(d){var b=l.firstChild;if(b&&b===l.lastChild&&b.nodeType===3){b.nodeValue=d;return}}l.textContent=d}var vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ei=["Webkit","ms","Moz","O"];Object.keys(vu).forEach(function(l){Ei.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),vu[d]=vu[l]})});function jv(l,d,b){return d==null||typeof d=="boolean"||d===""?"":b||typeof d!="number"||d===0||vu.hasOwnProperty(l)&&vu[l]?(""+d).trim():d+"px"}function ub(l,d){l=l.style;for(var b in d)if(d.hasOwnProperty(b)){var P=b.indexOf("--")===0,B=jv(b,d[b],P);b==="float"&&(b="cssFloat"),P?l.setProperty(b,B):l[b]=B}}var gu=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cb(l,d){if(d){if(gu[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(c(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(c(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(c(61))}if(d.style!=null&&typeof d.style!="object")throw Error(c(62))}}function sE(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aE=null;function lE(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var db=null,gl=null,yu=null;function Pde(l){if(l=ME(l)){if(typeof db!="function")throw Error(c(280));var d=l.stateNode;d&&(d=sO(d),db(l.stateNode,l.type,d))}}function kde(l){gl?yu?yu.push(l):yu=[l]:gl=l}function Tde(){if(gl){var l=gl,d=yu;if(yu=gl=null,Pde(l),d)for(l=0;l<d.length;l++)Pde(d[l])}}function Mde(l,d){return l(d)}function Ade(){}var Ej=!1;function Ide(l,d,b){if(Ej)return l(d,b);Ej=!0;try{return Mde(l,d,b)}finally{Ej=!1,(gl!==null||yu!==null)&&(Ade(),Tde())}}function uE(l,d){var b=l.stateNode;if(b===null)return null;var P=sO(b);if(P===null)return null;b=P[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(l=l.type,P=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!P;break e;default:l=!1}if(l)return null;if(b&&typeof b!="function")throw Error(c(231,d,typeof b));return b}var Cj=!1;if(w)try{hb={},Object.defineProperty(hb,"passive",{get:function(){Cj=!0}}),window.addEventListener("test",hb,hb),window.removeEventListener("test",hb,hb)}catch{Cj=!1}var hb;function gIe(l,d,b,P,B,W,oe,Ce,Oe){var ct=Array.prototype.slice.call(arguments,3);try{d.apply(b,ct)}catch(Rt){this.onError(Rt)}}var cE=!1,LR=null,NR=!1,Pj=null,yIe={onError:function(l){cE=!0,LR=l}};function bIe(l,d,b,P,B,W,oe,Ce,Oe){cE=!1,LR=null,gIe.apply(yIe,arguments)}function _Ie(l,d,b,P,B,W,oe,Ce,Oe){if(bIe.apply(this,arguments),cE){if(cE){var ct=LR;cE=!1,LR=null}else throw Error(c(198));NR||(NR=!0,Pj=ct)}}function zv(l){var d=l,b=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,d.flags&4098&&(b=d.return),l=d.return;while(l)}return d.tag===3?b:null}function Rde(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Ode(l){if(zv(l)!==l)throw Error(c(188))}function wIe(l){var d=l.alternate;if(!d){if(d=zv(l),d===null)throw Error(c(188));return d!==l?null:l}for(var b=l,P=d;;){var B=b.return;if(B===null)break;var W=B.alternate;if(W===null){if(P=B.return,P!==null){b=P;continue}break}if(B.child===W.child){for(W=B.child;W;){if(W===b)return Ode(B),l;if(W===P)return Ode(B),d;W=W.sibling}throw Error(c(188))}if(b.return!==P.return)b=B,P=W;else{for(var oe=!1,Ce=B.child;Ce;){if(Ce===b){oe=!0,b=B,P=W;break}if(Ce===P){oe=!0,P=B,b=W;break}Ce=Ce.sibling}if(!oe){for(Ce=W.child;Ce;){if(Ce===b){oe=!0,b=W,P=B;break}if(Ce===P){oe=!0,P=W,b=B;break}Ce=Ce.sibling}if(!oe)throw Error(c(189))}}if(b.alternate!==P)throw Error(c(190))}if(b.tag!==3)throw Error(c(188));return b.stateNode.current===b?l:d}function Dde(l){return l=wIe(l),l!==null?Lde(l):null}function Lde(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=Lde(l);if(d!==null)return d;l=l.sibling}return null}var Nde=a.unstable_scheduleCallback,Fde=a.unstable_cancelCallback,xIe=a.unstable_shouldYield,SIe=a.unstable_requestPaint,Xi=a.unstable_now,EIe=a.unstable_getCurrentPriorityLevel,kj=a.unstable_ImmediatePriority,Bde=a.unstable_UserBlockingPriority,FR=a.unstable_NormalPriority,CIe=a.unstable_LowPriority,Ude=a.unstable_IdlePriority,BR=null,Tc=null;function PIe(l){if(Tc&&typeof Tc.onCommitFiberRoot=="function")try{Tc.onCommitFiberRoot(BR,l,void 0,(l.current.flags&128)===128)}catch{}}var bu=Math.clz32?Math.clz32:MIe,kIe=Math.log,TIe=Math.LN2;function MIe(l){return l>>>=0,l===0?32:31-(kIe(l)/TIe|0)|0}var UR=64,VR=4194304;function dE(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function jR(l,d){var b=l.pendingLanes;if(b===0)return 0;var P=0,B=l.suspendedLanes,W=l.pingedLanes,oe=b&268435455;if(oe!==0){var Ce=oe&~B;Ce!==0?P=dE(Ce):(W&=oe,W!==0&&(P=dE(W)))}else oe=b&~B,oe!==0?P=dE(oe):W!==0&&(P=dE(W));if(P===0)return 0;if(d!==0&&d!==P&&!(d&B)&&(B=P&-P,W=d&-d,B>=W||B===16&&(W&4194240)!==0))return d;if(P&4&&(P|=b&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=P;0<d;)b=31-bu(d),B=1<<b,P|=l[b],d&=~B;return P}function AIe(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IIe(l,d){for(var b=l.suspendedLanes,P=l.pingedLanes,B=l.expirationTimes,W=l.pendingLanes;0<W;){var oe=31-bu(W),Ce=1<<oe,Oe=B[oe];Oe===-1?(!(Ce&b)||Ce&P)&&(B[oe]=AIe(Ce,d)):Oe<=d&&(l.expiredLanes|=Ce),W&=~Ce}}function Tj(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Vde(){var l=UR;return UR<<=1,!(UR&4194240)&&(UR=64),l}function Mj(l){for(var d=[],b=0;31>b;b++)d.push(l);return d}function hE(l,d,b){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-bu(d),l[d]=b}function RIe(l,d){var b=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var P=l.eventTimes;for(l=l.expirationTimes;0<b;){var B=31-bu(b),W=1<<B;d[B]=0,P[B]=-1,l[B]=-1,b&=~W}}function Aj(l,d){var b=l.entangledLanes|=d;for(l=l.entanglements;b;){var P=31-bu(b),B=1<<P;B&d|l[P]&d&&(l[P]|=d),b&=~B}}var Br=0;function jde(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var zde,Ij,Hde,Gde,$de,Rj=!1,zR=[],Wp=null,Kp=null,qp=null,pE=new Map,fE=new Map,Xp=[],OIe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wde(l,d){switch(l){case"focusin":case"focusout":Wp=null;break;case"dragenter":case"dragleave":Kp=null;break;case"mouseover":case"mouseout":qp=null;break;case"pointerover":case"pointerout":pE.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":fE.delete(d.pointerId)}}function mE(l,d,b,P,B,W){return l===null||l.nativeEvent!==W?(l={blockedOn:d,domEventName:b,eventSystemFlags:P,nativeEvent:W,targetContainers:[B]},d!==null&&(d=ME(d),d!==null&&Ij(d)),l):(l.eventSystemFlags|=P,d=l.targetContainers,B!==null&&d.indexOf(B)===-1&&d.push(B),l)}function DIe(l,d,b,P,B){switch(d){case"focusin":return Wp=mE(Wp,l,d,b,P,B),!0;case"dragenter":return Kp=mE(Kp,l,d,b,P,B),!0;case"mouseover":return qp=mE(qp,l,d,b,P,B),!0;case"pointerover":var W=B.pointerId;return pE.set(W,mE(pE.get(W)||null,l,d,b,P,B)),!0;case"gotpointercapture":return W=B.pointerId,fE.set(W,mE(fE.get(W)||null,l,d,b,P,B)),!0}return!1}function Kde(l){var d=Hv(l.target);if(d!==null){var b=zv(d);if(b!==null){if(d=b.tag,d===13){if(d=Rde(b),d!==null){l.blockedOn=d,$de(l.priority,function(){Hde(b)});return}}else if(d===3&&b.stateNode.current.memoizedState.isDehydrated){l.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}l.blockedOn=null}function HR(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var b=Dj(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(b===null){b=l.nativeEvent;var P=new b.constructor(b.type,b);aE=P,b.target.dispatchEvent(P),aE=null}else return d=ME(b),d!==null&&Ij(d),l.blockedOn=b,!1;d.shift()}return!0}function qde(l,d,b){HR(l)&&b.delete(d)}function LIe(){Rj=!1,Wp!==null&&HR(Wp)&&(Wp=null),Kp!==null&&HR(Kp)&&(Kp=null),qp!==null&&HR(qp)&&(qp=null),pE.forEach(qde),fE.forEach(qde)}function vE(l,d){l.blockedOn===d&&(l.blockedOn=null,Rj||(Rj=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,LIe)))}function gE(l){function d(B){return vE(B,l)}if(0<zR.length){vE(zR[0],l);for(var b=1;b<zR.length;b++){var P=zR[b];P.blockedOn===l&&(P.blockedOn=null)}}for(Wp!==null&&vE(Wp,l),Kp!==null&&vE(Kp,l),qp!==null&&vE(qp,l),pE.forEach(d),fE.forEach(d),b=0;b<Xp.length;b++)P=Xp[b],P.blockedOn===l&&(P.blockedOn=null);for(;0<Xp.length&&(b=Xp[0],b.blockedOn===null);)Kde(b),b.blockedOn===null&&Xp.shift()}var pb=ne.ReactCurrentBatchConfig,GR=!0;function NIe(l,d,b,P){var B=Br,W=pb.transition;pb.transition=null;try{Br=1,Oj(l,d,b,P)}finally{Br=B,pb.transition=W}}function FIe(l,d,b,P){var B=Br,W=pb.transition;pb.transition=null;try{Br=4,Oj(l,d,b,P)}finally{Br=B,pb.transition=W}}function Oj(l,d,b,P){if(GR){var B=Dj(l,d,b,P);if(B===null)Xj(l,d,P,$R,b),Wde(l,P);else if(DIe(B,l,d,b,P))P.stopPropagation();else if(Wde(l,P),d&4&&-1<OIe.indexOf(l)){for(;B!==null;){var W=ME(B);if(W!==null&&zde(W),W=Dj(l,d,b,P),W===null&&Xj(l,d,P,$R,b),W===B)break;B=W}B!==null&&P.stopPropagation()}else Xj(l,d,P,null,b)}}var $R=null;function Dj(l,d,b,P){if($R=null,l=lE(P),l=Hv(l),l!==null)if(d=zv(l),d===null)l=null;else if(b=d.tag,b===13){if(l=Rde(d),l!==null)return l;l=null}else if(b===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return $R=l,null}function Xde(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EIe()){case kj:return 1;case Bde:return 4;case FR:case CIe:return 16;case Ude:return 536870912;default:return 16}default:return 16}}var Yp=null,Lj=null,WR=null;function Yde(){if(WR)return WR;var l,d=Lj,b=d.length,P,B="value"in Yp?Yp.value:Yp.textContent,W=B.length;for(l=0;l<b&&d[l]===B[l];l++);var oe=b-l;for(P=1;P<=oe&&d[b-P]===B[W-P];P++);return WR=B.slice(l,1<P?1-P:void 0)}function KR(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function qR(){return!0}function Zde(){return!1}function Ma(l){function d(b,P,B,W,oe){this._reactName=b,this._targetInst=B,this.type=P,this.nativeEvent=W,this.target=oe,this.currentTarget=null;for(var Ce in l)l.hasOwnProperty(Ce)&&(b=l[Ce],this[Ce]=b?b(W):W[Ce]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?qR:Zde,this.isPropagationStopped=Zde,this}return ue(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=qR)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=qR)},persist:function(){},isPersistent:qR}),d}var fb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nj=Ma(fb),yE=ue({},fb,{view:0,detail:0}),BIe=Ma(yE),Fj,Bj,bE,XR=ue({},yE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vj,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==bE&&(bE&&l.type==="mousemove"?(Fj=l.screenX-bE.screenX,Bj=l.screenY-bE.screenY):Bj=Fj=0,bE=l),Fj)},movementY:function(l){return"movementY"in l?l.movementY:Bj}}),Qde=Ma(XR),UIe=ue({},XR,{dataTransfer:0}),VIe=Ma(UIe),jIe=ue({},yE,{relatedTarget:0}),Uj=Ma(jIe),zIe=ue({},fb,{animationName:0,elapsedTime:0,pseudoElement:0}),HIe=Ma(zIe),GIe=ue({},fb,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),$Ie=Ma(GIe),WIe=ue({},fb,{data:0}),Jde=Ma(WIe),KIe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qIe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XIe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YIe(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=XIe[l])?!!d[l]:!1}function Vj(){return YIe}var ZIe=ue({},yE,{key:function(l){if(l.key){var d=KIe[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=KR(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?qIe[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vj,charCode:function(l){return l.type==="keypress"?KR(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?KR(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),QIe=Ma(ZIe),JIe=ue({},XR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ehe=Ma(JIe),eRe=ue({},yE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vj}),tRe=Ma(eRe),nRe=ue({},fb,{propertyName:0,elapsedTime:0,pseudoElement:0}),rRe=Ma(nRe),iRe=ue({},XR,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),oRe=Ma(iRe),sRe=[9,13,27,32],jj=w&&"CompositionEvent"in window,_E=null;w&&"documentMode"in document&&(_E=document.documentMode);var aRe=w&&"TextEvent"in window&&!_E,the=w&&(!jj||_E&&8<_E&&11>=_E),nhe=String.fromCharCode(32),rhe=!1;function ihe(l,d){switch(l){case"keyup":return sRe.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ohe(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var mb=!1;function lRe(l,d){switch(l){case"compositionend":return ohe(d);case"keypress":return d.which!==32?null:(rhe=!0,nhe);case"textInput":return l=d.data,l===nhe&&rhe?null:l;default:return null}}function uRe(l,d){if(mb)return l==="compositionend"||!jj&&ihe(l,d)?(l=Yde(),WR=Lj=Yp=null,mb=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return the&&d.locale!=="ko"?null:d.data;default:return null}}var cRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function she(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!cRe[l.type]:d==="textarea"}function ahe(l,d,b,P){kde(P),d=rO(d,"onChange"),0<d.length&&(b=new Nj("onChange","change",null,b,P),l.push({event:b,listeners:d}))}var wE=null,xE=null;function dRe(l){Phe(l,0)}function YR(l){var d=_b(l);if(Er(d))return l}function hRe(l,d){if(l==="change")return d}var lhe=!1;w&&(w?(ZR="oninput"in document,ZR||(Hj=document.createElement("div"),Hj.setAttribute("oninput","return;"),ZR=typeof Hj.oninput=="function"),zj=ZR):zj=!1,lhe=zj&&(!document.documentMode||9<document.documentMode));var zj,ZR,Hj;function uhe(){wE&&(wE.detachEvent("onpropertychange",che),xE=wE=null)}function che(l){if(l.propertyName==="value"&&YR(xE)){var d=[];ahe(d,xE,l,lE(l)),Ide(dRe,d)}}function pRe(l,d,b){l==="focusin"?(uhe(),wE=d,xE=b,wE.attachEvent("onpropertychange",che)):l==="focusout"&&uhe()}function fRe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return YR(xE)}function mRe(l,d){if(l==="click")return YR(d)}function vRe(l,d){if(l==="input"||l==="change")return YR(d)}function gRe(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var _u=typeof Object.is=="function"?Object.is:gRe;function SE(l,d){if(_u(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var b=Object.keys(l),P=Object.keys(d);if(b.length!==P.length)return!1;for(P=0;P<b.length;P++){var B=b[P];if(!S.call(d,B)||!_u(l[B],d[B]))return!1}return!0}function dhe(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function hhe(l,d){var b=dhe(l);l=0;for(var P;b;){if(b.nodeType===3){if(P=l+b.textContent.length,l<=d&&P>=d)return{node:b,offset:d-l};l=P}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=dhe(b)}}function phe(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?phe(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function fhe(){for(var l=window,d=J();d instanceof l.HTMLIFrameElement;){try{var b=typeof d.contentWindow.location.href=="string"}catch{b=!1}if(b)l=d.contentWindow;else break;d=J(l.document)}return d}function Gj(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function yRe(l){var d=fhe(),b=l.focusedElem,P=l.selectionRange;if(d!==b&&b&&b.ownerDocument&&phe(b.ownerDocument.documentElement,b)){if(P!==null&&Gj(b)){if(d=P.start,l=P.end,l===void 0&&(l=d),"selectionStart"in b)b.selectionStart=d,b.selectionEnd=Math.min(l,b.value.length);else if(l=(d=b.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var B=b.textContent.length,W=Math.min(P.start,B);P=P.end===void 0?W:Math.min(P.end,B),!l.extend&&W>P&&(B=P,P=W,W=B),B=hhe(b,W);var oe=hhe(b,P);B&&oe&&(l.rangeCount!==1||l.anchorNode!==B.node||l.anchorOffset!==B.offset||l.focusNode!==oe.node||l.focusOffset!==oe.offset)&&(d=d.createRange(),d.setStart(B.node,B.offset),l.removeAllRanges(),W>P?(l.addRange(d),l.extend(oe.node,oe.offset)):(d.setEnd(oe.node,oe.offset),l.addRange(d)))}}for(d=[],l=b;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<d.length;b++)l=d[b],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var bRe=w&&"documentMode"in document&&11>=document.documentMode,vb=null,$j=null,EE=null,Wj=!1;function mhe(l,d,b){var P=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Wj||vb==null||vb!==J(P)||(P=vb,"selectionStart"in P&&Gj(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),EE&&SE(EE,P)||(EE=P,P=rO($j,"onSelect"),0<P.length&&(d=new Nj("onSelect","select",null,d,b),l.push({event:d,listeners:P}),d.target=vb)))}function QR(l,d){var b={};return b[l.toLowerCase()]=d.toLowerCase(),b["Webkit"+l]="webkit"+d,b["Moz"+l]="moz"+d,b}var gb={animationend:QR("Animation","AnimationEnd"),animationiteration:QR("Animation","AnimationIteration"),animationstart:QR("Animation","AnimationStart"),transitionend:QR("Transition","TransitionEnd")},Kj={},vhe={};w&&(vhe=document.createElement("div").style,"AnimationEvent"in window||(delete gb.animationend.animation,delete gb.animationiteration.animation,delete gb.animationstart.animation),"TransitionEvent"in window||delete gb.transitionend.transition);function JR(l){if(Kj[l])return Kj[l];if(!gb[l])return l;var d=gb[l],b;for(b in d)if(d.hasOwnProperty(b)&&b in vhe)return Kj[l]=d[b];return l}var ghe=JR("animationend"),yhe=JR("animationiteration"),bhe=JR("animationstart"),_he=JR("transitionend"),whe=new Map,xhe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zp(l,d){whe.set(l,d),g(d,[l])}for(tO=0;tO<xhe.length;tO++)eO=xhe[tO],She=eO.toLowerCase(),Ehe=eO[0].toUpperCase()+eO.slice(1),Zp(She,"on"+Ehe);var eO,She,Ehe,tO;Zp(ghe,"onAnimationEnd"),Zp(yhe,"onAnimationIteration"),Zp(bhe,"onAnimationStart"),Zp("dblclick","onDoubleClick"),Zp("focusin","onFocus"),Zp("focusout","onBlur"),Zp(_he,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var CE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_Re=new Set("cancel close invalid load scroll toggle".split(" ").concat(CE));function Che(l,d,b){var P=l.type||"unknown-event";l.currentTarget=b,_Ie(P,d,void 0,l),l.currentTarget=null}function Phe(l,d){d=(d&4)!==0;for(var b=0;b<l.length;b++){var P=l[b],B=P.event;P=P.listeners;e:{var W=void 0;if(d)for(var oe=P.length-1;0<=oe;oe--){var Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget;if(Ce=Ce.listener,Oe!==W&&B.isPropagationStopped())break e;Che(B,Ce,ct),W=Oe}else for(oe=0;oe<P.length;oe++){if(Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget,Ce=Ce.listener,Oe!==W&&B.isPropagationStopped())break e;Che(B,Ce,ct),W=Oe}}}if(NR)throw l=Pj,NR=!1,Pj=null,l}function di(l,d){var b=d[tz];b===void 0&&(b=d[tz]=new Set);var P=l+"__bubble";b.has(P)||(khe(d,l,2,!1),b.add(P))}function qj(l,d,b){var P=0;d&&(P|=4),khe(b,l,P,d)}var nO="_reactListening"+Math.random().toString(36).slice(2);function PE(l){if(!l[nO]){l[nO]=!0,h.forEach(function(b){b!=="selectionchange"&&(_Re.has(b)||qj(b,!1,l),qj(b,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[nO]||(d[nO]=!0,qj("selectionchange",!1,d))}}function khe(l,d,b,P){switch(Xde(d)){case 1:var B=NIe;break;case 4:B=FIe;break;default:B=Oj}b=B.bind(null,d,b,l),B=void 0,!Cj||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(B=!0),P?B!==void 0?l.addEventListener(d,b,{capture:!0,passive:B}):l.addEventListener(d,b,!0):B!==void 0?l.addEventListener(d,b,{passive:B}):l.addEventListener(d,b,!1)}function Xj(l,d,b,P,B){var W=P;if(!(d&1)&&!(d&2)&&P!==null)e:for(;;){if(P===null)return;var oe=P.tag;if(oe===3||oe===4){var Ce=P.stateNode.containerInfo;if(Ce===B||Ce.nodeType===8&&Ce.parentNode===B)break;if(oe===4)for(oe=P.return;oe!==null;){var Oe=oe.tag;if((Oe===3||Oe===4)&&(Oe=oe.stateNode.containerInfo,Oe===B||Oe.nodeType===8&&Oe.parentNode===B))return;oe=oe.return}for(;Ce!==null;){if(oe=Hv(Ce),oe===null)return;if(Oe=oe.tag,Oe===5||Oe===6){P=W=oe;continue e}Ce=Ce.parentNode}}P=P.return}Ide(function(){var ct=W,Rt=lE(b),Lt=[];e:{var It=whe.get(l);if(It!==void 0){var tn=Nj,dn=l;switch(l){case"keypress":if(KR(b)===0)break e;case"keydown":case"keyup":tn=QIe;break;case"focusin":dn="focus",tn=Uj;break;case"focusout":dn="blur",tn=Uj;break;case"beforeblur":case"afterblur":tn=Uj;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tn=Qde;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tn=VIe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tn=tRe;break;case ghe:case yhe:case bhe:tn=HIe;break;case _he:tn=rRe;break;case"scroll":tn=BIe;break;case"wheel":tn=oRe;break;case"copy":case"cut":case"paste":tn=$Ie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tn=ehe}var fn=(d&4)!==0,Yi=!fn&&l==="scroll",Ye=fn?It!==null?It+"Capture":null:It;fn=[];for(var Ve=ct,rt;Ve!==null;){rt=Ve;var jt=rt.stateNode;if(rt.tag===5&&jt!==null&&(rt=jt,Ye!==null&&(jt=uE(Ve,Ye),jt!=null&&fn.push(kE(Ve,jt,rt)))),Yi)break;Ve=Ve.return}0<fn.length&&(It=new tn(It,dn,null,b,Rt),Lt.push({event:It,listeners:fn}))}}if(!(d&7)){e:{if(It=l==="mouseover"||l==="pointerover",tn=l==="mouseout"||l==="pointerout",It&&b!==aE&&(dn=b.relatedTarget||b.fromElement)&&(Hv(dn)||dn[qd]))break e;if((tn||It)&&(It=Rt.window===Rt?Rt:(It=Rt.ownerDocument)?It.defaultView||It.parentWindow:window,tn?(dn=b.relatedTarget||b.toElement,tn=ct,dn=dn?Hv(dn):null,dn!==null&&(Yi=zv(dn),dn!==Yi||dn.tag!==5&&dn.tag!==6)&&(dn=null)):(tn=null,dn=ct),tn!==dn)){if(fn=Qde,jt="onMouseLeave",Ye="onMouseEnter",Ve="mouse",(l==="pointerout"||l==="pointerover")&&(fn=ehe,jt="onPointerLeave",Ye="onPointerEnter",Ve="pointer"),Yi=tn==null?It:_b(tn),rt=dn==null?It:_b(dn),It=new fn(jt,Ve+"leave",tn,b,Rt),It.target=Yi,It.relatedTarget=rt,jt=null,Hv(Rt)===ct&&(fn=new fn(Ye,Ve+"enter",dn,b,Rt),fn.target=rt,fn.relatedTarget=Yi,jt=fn),Yi=jt,tn&&dn)t:{for(fn=tn,Ye=dn,Ve=0,rt=fn;rt;rt=yb(rt))Ve++;for(rt=0,jt=Ye;jt;jt=yb(jt))rt++;for(;0<Ve-rt;)fn=yb(fn),Ve--;for(;0<rt-Ve;)Ye=yb(Ye),rt--;for(;Ve--;){if(fn===Ye||Ye!==null&&fn===Ye.alternate)break t;fn=yb(fn),Ye=yb(Ye)}fn=null}else fn=null;tn!==null&&The(Lt,It,tn,fn,!1),dn!==null&&Yi!==null&&The(Lt,Yi,dn,fn,!0)}}e:{if(It=ct?_b(ct):window,tn=It.nodeName&&It.nodeName.toLowerCase(),tn==="select"||tn==="input"&&It.type==="file")var vn=hRe;else if(she(It))if(lhe)vn=vRe;else{vn=fRe;var On=pRe}else(tn=It.nodeName)&&tn.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&(vn=mRe);if(vn&&(vn=vn(l,ct))){ahe(Lt,vn,b,Rt);break e}On&&On(l,It,ct),l==="focusout"&&(On=It._wrapperState)&&On.controlled&&It.type==="number"&&xt(It,"number",It.value)}switch(On=ct?_b(ct):window,l){case"focusin":(she(On)||On.contentEditable==="true")&&(vb=On,$j=ct,EE=null);break;case"focusout":EE=$j=vb=null;break;case"mousedown":Wj=!0;break;case"contextmenu":case"mouseup":case"dragend":Wj=!1,mhe(Lt,b,Rt);break;case"selectionchange":if(bRe)break;case"keydown":case"keyup":mhe(Lt,b,Rt)}var Dn;if(jj)e:{switch(l){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else mb?ihe(l,b)&&(Gn="onCompositionEnd"):l==="keydown"&&b.keyCode===229&&(Gn="onCompositionStart");Gn&&(the&&b.locale!=="ko"&&(mb||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&mb&&(Dn=Yde()):(Yp=Rt,Lj="value"in Yp?Yp.value:Yp.textContent,mb=!0)),On=rO(ct,Gn),0<On.length&&(Gn=new Jde(Gn,l,null,b,Rt),Lt.push({event:Gn,listeners:On}),Dn?Gn.data=Dn:(Dn=ohe(b),Dn!==null&&(Gn.data=Dn)))),(Dn=aRe?lRe(l,b):uRe(l,b))&&(ct=rO(ct,"onBeforeInput"),0<ct.length&&(Rt=new Jde("onBeforeInput","beforeinput",null,b,Rt),Lt.push({event:Rt,listeners:ct}),Rt.data=Dn))}Phe(Lt,d)})}function kE(l,d,b){return{instance:l,listener:d,currentTarget:b}}function rO(l,d){for(var b=d+"Capture",P=[];l!==null;){var B=l,W=B.stateNode;B.tag===5&&W!==null&&(B=W,W=uE(l,b),W!=null&&P.unshift(kE(l,W,B)),W=uE(l,d),W!=null&&P.push(kE(l,W,B))),l=l.return}return P}function yb(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function The(l,d,b,P,B){for(var W=d._reactName,oe=[];b!==null&&b!==P;){var Ce=b,Oe=Ce.alternate,ct=Ce.stateNode;if(Oe!==null&&Oe===P)break;Ce.tag===5&&ct!==null&&(Ce=ct,B?(Oe=uE(b,W),Oe!=null&&oe.unshift(kE(b,Oe,Ce))):B||(Oe=uE(b,W),Oe!=null&&oe.push(kE(b,Oe,Ce)))),b=b.return}oe.length!==0&&l.push({event:d,listeners:oe})}var wRe=/\r\n?/g,xRe=/\u0000|\uFFFD/g;function Mhe(l){return(typeof l=="string"?l:""+l).replace(wRe,`
`).replace(xRe,"")}function iO(l,d,b){if(d=Mhe(d),Mhe(l)!==d&&b)throw Error(c(425))}function oO(){}var Yj=null,Zj=null;function Qj(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Jj=typeof setTimeout=="function"?setTimeout:void 0,SRe=typeof clearTimeout=="function"?clearTimeout:void 0,Ahe=typeof Promise=="function"?Promise:void 0,ERe=typeof queueMicrotask=="function"?queueMicrotask:typeof Ahe<"u"?function(l){return Ahe.resolve(null).then(l).catch(CRe)}:Jj;function CRe(l){setTimeout(function(){throw l})}function ez(l,d){var b=d,P=0;do{var B=b.nextSibling;if(l.removeChild(b),B&&B.nodeType===8)if(b=B.data,b==="/$"){if(P===0){l.removeChild(B),gE(d);return}P--}else b!=="$"&&b!=="$?"&&b!=="$!"||P++;b=B}while(b);gE(d)}function Qp(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function Ihe(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="$"||b==="$!"||b==="$?"){if(d===0)return l;d--}else b==="/$"&&d++}l=l.previousSibling}return null}var bb=Math.random().toString(36).slice(2),Mc="__reactFiber$"+bb,TE="__reactProps$"+bb,qd="__reactContainer$"+bb,tz="__reactEvents$"+bb,PRe="__reactListeners$"+bb,kRe="__reactHandles$"+bb;function Hv(l){var d=l[Mc];if(d)return d;for(var b=l.parentNode;b;){if(d=b[qd]||b[Mc]){if(b=d.alternate,d.child!==null||b!==null&&b.child!==null)for(l=Ihe(l);l!==null;){if(b=l[Mc])return b;l=Ihe(l)}return d}l=b,b=l.parentNode}return null}function ME(l){return l=l[Mc]||l[qd],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function _b(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(c(33))}function sO(l){return l[TE]||null}var nz=[],wb=-1;function Jp(l){return{current:l}}function hi(l){0>wb||(l.current=nz[wb],nz[wb]=null,wb--)}function ni(l,d){wb++,nz[wb]=l.current,l.current=d}var ef={},ls=Jp(ef),ia=Jp(!1),Gv=ef;function xb(l,d){var b=l.type.contextTypes;if(!b)return ef;var P=l.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===d)return P.__reactInternalMemoizedMaskedChildContext;var B={},W;for(W in b)B[W]=d[W];return P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=B),B}function oa(l){return l=l.childContextTypes,l!=null}function aO(){hi(ia),hi(ls)}function Rhe(l,d,b){if(ls.current!==ef)throw Error(c(168));ni(ls,d),ni(ia,b)}function Ohe(l,d,b){var P=l.stateNode;if(d=d.childContextTypes,typeof P.getChildContext!="function")return b;P=P.getChildContext();for(var B in P)if(!(B in d))throw Error(c(108,bt(l)||"Unknown",B));return ue({},b,P)}function lO(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ef,Gv=ls.current,ni(ls,l),ni(ia,ia.current),!0}function Dhe(l,d,b){var P=l.stateNode;if(!P)throw Error(c(169));b?(l=Ohe(l,d,Gv),P.__reactInternalMemoizedMergedChildContext=l,hi(ia),hi(ls),ni(ls,l)):hi(ia),ni(ia,b)}var Xd=null,uO=!1,rz=!1;function Lhe(l){Xd===null?Xd=[l]:Xd.push(l)}function TRe(l){uO=!0,Lhe(l)}function tf(){if(!rz&&Xd!==null){rz=!0;var l=0,d=Br;try{var b=Xd;for(Br=1;l<b.length;l++){var P=b[l];do P=P(!0);while(P!==null)}Xd=null,uO=!1}catch(B){throw Xd!==null&&(Xd=Xd.slice(l+1)),Nde(kj,tf),B}finally{Br=d,rz=!1}}return null}var Sb=[],Eb=0,cO=null,dO=0,yl=[],bl=0,$v=null,Yd=1,Zd="";function Wv(l,d){Sb[Eb++]=dO,Sb[Eb++]=cO,cO=l,dO=d}function Nhe(l,d,b){yl[bl++]=Yd,yl[bl++]=Zd,yl[bl++]=$v,$v=l;var P=Yd;l=Zd;var B=32-bu(P)-1;P&=~(1<<B),b+=1;var W=32-bu(d)+B;if(30<W){var oe=B-B%5;W=(P&(1<<oe)-1).toString(32),P>>=oe,B-=oe,Yd=1<<32-bu(d)+B|b<<B|P,Zd=W+l}else Yd=1<<W|b<<B|P,Zd=l}function iz(l){l.return!==null&&(Wv(l,1),Nhe(l,1,0))}function oz(l){for(;l===cO;)cO=Sb[--Eb],Sb[Eb]=null,dO=Sb[--Eb],Sb[Eb]=null;for(;l===$v;)$v=yl[--bl],yl[bl]=null,Zd=yl[--bl],yl[bl]=null,Yd=yl[--bl],yl[bl]=null}var Aa=null,Ia=null,vi=!1,wu=null;function Fhe(l,d){var b=Sl(5,null,null,0);b.elementType="DELETED",b.stateNode=d,b.return=l,d=l.deletions,d===null?(l.deletions=[b],l.flags|=16):d.push(b)}function Bhe(l,d){switch(l.tag){case 5:var b=l.type;return d=d.nodeType!==1||b.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Aa=l,Ia=Qp(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Aa=l,Ia=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(b=$v!==null?{id:Yd,overflow:Zd}:null,l.memoizedState={dehydrated:d,treeContext:b,retryLane:1073741824},b=Sl(18,null,null,0),b.stateNode=d,b.return=l,l.child=b,Aa=l,Ia=null,!0):!1;default:return!1}}function sz(l){return(l.mode&1)!==0&&(l.flags&128)===0}function az(l){if(vi){var d=Ia;if(d){var b=d;if(!Bhe(l,d)){if(sz(l))throw Error(c(418));d=Qp(b.nextSibling);var P=Aa;d&&Bhe(l,d)?Fhe(P,b):(l.flags=l.flags&-4097|2,vi=!1,Aa=l)}}else{if(sz(l))throw Error(c(418));l.flags=l.flags&-4097|2,vi=!1,Aa=l}}}function Uhe(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Aa=l}function hO(l){if(l!==Aa)return!1;if(!vi)return Uhe(l),vi=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!Qj(l.type,l.memoizedProps)),d&&(d=Ia)){if(sz(l))throw Vhe(),Error(c(418));for(;d;)Fhe(l,d),d=Qp(d.nextSibling)}if(Uhe(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="/$"){if(d===0){Ia=Qp(l.nextSibling);break e}d--}else b!=="$"&&b!=="$!"&&b!=="$?"||d++}l=l.nextSibling}Ia=null}}else Ia=Aa?Qp(l.stateNode.nextSibling):null;return!0}function Vhe(){for(var l=Ia;l;)l=Qp(l.nextSibling)}function Cb(){Ia=Aa=null,vi=!1}function lz(l){wu===null?wu=[l]:wu.push(l)}var MRe=ne.ReactCurrentBatchConfig;function xu(l,d){if(l&&l.defaultProps){d=ue({},d),l=l.defaultProps;for(var b in l)d[b]===void 0&&(d[b]=l[b]);return d}return d}var pO=Jp(null),fO=null,Pb=null,uz=null;function cz(){uz=Pb=fO=null}function dz(l){var d=pO.current;hi(pO),l._currentValue=d}function hz(l,d,b){for(;l!==null;){var P=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,P!==null&&(P.childLanes|=d)):P!==null&&(P.childLanes&d)!==d&&(P.childLanes|=d),l===b)break;l=l.return}}function kb(l,d){fO=l,uz=Pb=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&d&&(sa=!0),l.firstContext=null)}function _l(l){var d=l._currentValue;if(uz!==l)if(l={context:l,memoizedValue:d,next:null},Pb===null){if(fO===null)throw Error(c(308));Pb=l,fO.dependencies={lanes:0,firstContext:l}}else Pb=Pb.next=l;return d}var Kv=null;function pz(l){Kv===null?Kv=[l]:Kv.push(l)}function jhe(l,d,b,P){var B=d.interleaved;return B===null?(b.next=b,pz(d)):(b.next=B.next,B.next=b),d.interleaved=b,Qd(l,P)}function Qd(l,d){l.lanes|=d;var b=l.alternate;for(b!==null&&(b.lanes|=d),b=l,l=l.return;l!==null;)l.childLanes|=d,b=l.alternate,b!==null&&(b.childLanes|=d),b=l,l=l.return;return b.tag===3?b.stateNode:null}var nf=!1;function fz(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zhe(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Jd(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function rf(l,d,b){var P=l.updateQueue;if(P===null)return null;if(P=P.shared,yr&2){var B=P.pending;return B===null?d.next=d:(d.next=B.next,B.next=d),P.pending=d,Qd(l,b)}return B=P.interleaved,B===null?(d.next=d,pz(P)):(d.next=B.next,B.next=d),P.interleaved=d,Qd(l,b)}function mO(l,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194240)!==0)){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Aj(l,b)}}function Hhe(l,d){var b=l.updateQueue,P=l.alternate;if(P!==null&&(P=P.updateQueue,b===P)){var B=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var oe={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};W===null?B=W=oe:W=W.next=oe,b=b.next}while(b!==null);W===null?B=W=d:W=W.next=d}else B=W=d;b={baseState:P.baseState,firstBaseUpdate:B,lastBaseUpdate:W,shared:P.shared,effects:P.effects},l.updateQueue=b;return}l=b.lastBaseUpdate,l===null?b.firstBaseUpdate=d:l.next=d,b.lastBaseUpdate=d}function vO(l,d,b,P){var B=l.updateQueue;nf=!1;var W=B.firstBaseUpdate,oe=B.lastBaseUpdate,Ce=B.shared.pending;if(Ce!==null){B.shared.pending=null;var Oe=Ce,ct=Oe.next;Oe.next=null,oe===null?W=ct:oe.next=ct,oe=Oe;var Rt=l.alternate;Rt!==null&&(Rt=Rt.updateQueue,Ce=Rt.lastBaseUpdate,Ce!==oe&&(Ce===null?Rt.firstBaseUpdate=ct:Ce.next=ct,Rt.lastBaseUpdate=Oe))}if(W!==null){var Lt=B.baseState;oe=0,Rt=ct=Oe=null,Ce=W;do{var It=Ce.lane,tn=Ce.eventTime;if((P&It)===It){Rt!==null&&(Rt=Rt.next={eventTime:tn,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var dn=l,fn=Ce;switch(It=d,tn=b,fn.tag){case 1:if(dn=fn.payload,typeof dn=="function"){Lt=dn.call(tn,Lt,It);break e}Lt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=fn.payload,It=typeof dn=="function"?dn.call(tn,Lt,It):dn,It==null)break e;Lt=ue({},Lt,It);break e;case 2:nf=!0}}Ce.callback!==null&&Ce.lane!==0&&(l.flags|=64,It=B.effects,It===null?B.effects=[Ce]:It.push(Ce))}else tn={eventTime:tn,lane:It,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Rt===null?(ct=Rt=tn,Oe=Lt):Rt=Rt.next=tn,oe|=It;if(Ce=Ce.next,Ce===null){if(Ce=B.shared.pending,Ce===null)break;It=Ce,Ce=It.next,It.next=null,B.lastBaseUpdate=It,B.shared.pending=null}}while(1);if(Rt===null&&(Oe=Lt),B.baseState=Oe,B.firstBaseUpdate=ct,B.lastBaseUpdate=Rt,d=B.shared.interleaved,d!==null){B=d;do oe|=B.lane,B=B.next;while(B!==d)}else W===null&&(B.shared.lanes=0);Yv|=oe,l.lanes=oe,l.memoizedState=Lt}}function Ghe(l,d,b){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var P=l[d],B=P.callback;if(B!==null){if(P.callback=null,P=b,typeof B!="function")throw Error(c(191,B));B.call(P)}}}var $he=new s.Component().refs;function mz(l,d,b,P){d=l.memoizedState,b=b(P,d),b=b==null?d:ue({},d,b),l.memoizedState=b,l.lanes===0&&(l.updateQueue.baseState=b)}var gO={isMounted:function(l){return(l=l._reactInternals)?zv(l)===l:!1},enqueueSetState:function(l,d,b){l=l._reactInternals;var P=Ns(),B=lf(l),W=Jd(P,B);W.payload=d,b!=null&&(W.callback=b),d=rf(l,W,B),d!==null&&(Cu(d,l,B,P),mO(d,l,B))},enqueueReplaceState:function(l,d,b){l=l._reactInternals;var P=Ns(),B=lf(l),W=Jd(P,B);W.tag=1,W.payload=d,b!=null&&(W.callback=b),d=rf(l,W,B),d!==null&&(Cu(d,l,B,P),mO(d,l,B))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var b=Ns(),P=lf(l),B=Jd(b,P);B.tag=2,d!=null&&(B.callback=d),d=rf(l,B,P),d!==null&&(Cu(d,l,P,b),mO(d,l,P))}};function Whe(l,d,b,P,B,W,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(P,W,oe):d.prototype&&d.prototype.isPureReactComponent?!SE(b,P)||!SE(B,W):!0}function Khe(l,d,b){var P=!1,B=ef,W=d.contextType;return typeof W=="object"&&W!==null?W=_l(W):(B=oa(d)?Gv:ls.current,P=d.contextTypes,W=(P=P!=null)?xb(l,B):ef),d=new d(b,W),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=gO,l.stateNode=d,d._reactInternals=l,P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=B,l.__reactInternalMemoizedMaskedChildContext=W),d}function qhe(l,d,b,P){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,P),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,P),d.state!==l&&gO.enqueueReplaceState(d,d.state,null)}function vz(l,d,b,P){var B=l.stateNode;B.props=b,B.state=l.memoizedState,B.refs=$he,fz(l);var W=d.contextType;typeof W=="object"&&W!==null?B.context=_l(W):(W=oa(d)?Gv:ls.current,B.context=xb(l,W)),B.state=l.memoizedState,W=d.getDerivedStateFromProps,typeof W=="function"&&(mz(l,d,W,b),B.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(d=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),d!==B.state&&gO.enqueueReplaceState(B,B.state,null),vO(l,b,B,P),B.state=l.memoizedState),typeof B.componentDidMount=="function"&&(l.flags|=4194308)}function AE(l,d,b){if(l=b.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(c(309));var P=b.stateNode}if(!P)throw Error(c(147,l));var B=P,W=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===W?d.ref:(d=function(oe){var Ce=B.refs;Ce===$he&&(Ce=B.refs={}),oe===null?delete Ce[W]:Ce[W]=oe},d._stringRef=W,d)}if(typeof l!="string")throw Error(c(284));if(!b._owner)throw Error(c(290,l))}return l}function yO(l,d){throw l=Object.prototype.toString.call(d),Error(c(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function Xhe(l){var d=l._init;return d(l._payload)}function Yhe(l){function d(Ye,Ve){if(l){var rt=Ye.deletions;rt===null?(Ye.deletions=[Ve],Ye.flags|=16):rt.push(Ve)}}function b(Ye,Ve){if(!l)return null;for(;Ve!==null;)d(Ye,Ve),Ve=Ve.sibling;return null}function P(Ye,Ve){for(Ye=new Map;Ve!==null;)Ve.key!==null?Ye.set(Ve.key,Ve):Ye.set(Ve.index,Ve),Ve=Ve.sibling;return Ye}function B(Ye,Ve){return Ye=cf(Ye,Ve),Ye.index=0,Ye.sibling=null,Ye}function W(Ye,Ve,rt){return Ye.index=rt,l?(rt=Ye.alternate,rt!==null?(rt=rt.index,rt<Ve?(Ye.flags|=2,Ve):rt):(Ye.flags|=2,Ve)):(Ye.flags|=1048576,Ve)}function oe(Ye){return l&&Ye.alternate===null&&(Ye.flags|=2),Ye}function Ce(Ye,Ve,rt,jt){return Ve===null||Ve.tag!==6?(Ve=Qz(rt,Ye.mode,jt),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Oe(Ye,Ve,rt,jt){var vn=rt.type;return vn===fe?Rt(Ye,Ve,rt.props.children,jt,rt.key):Ve!==null&&(Ve.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&Xhe(vn)===Ve.type)?(jt=B(Ve,rt.props),jt.ref=AE(Ye,Ve,rt),jt.return=Ye,jt):(jt=FO(rt.type,rt.key,rt.props,null,Ye.mode,jt),jt.ref=AE(Ye,Ve,rt),jt.return=Ye,jt)}function ct(Ye,Ve,rt,jt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==rt.containerInfo||Ve.stateNode.implementation!==rt.implementation?(Ve=Jz(rt,Ye.mode,jt),Ve.return=Ye,Ve):(Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ve)}function Rt(Ye,Ve,rt,jt,vn){return Ve===null||Ve.tag!==7?(Ve=eg(rt,Ye.mode,jt,vn),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Lt(Ye,Ve,rt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ve=Qz(""+Ve,Ye.mode,rt),Ve.return=Ye,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case ae:return rt=FO(Ve.type,Ve.key,Ve.props,null,Ye.mode,rt),rt.ref=AE(Ye,null,Ve),rt.return=Ye,rt;case xe:return Ve=Jz(Ve,Ye.mode,rt),Ve.return=Ye,Ve;case ke:var jt=Ve._init;return Lt(Ye,jt(Ve._payload),rt)}if(Ct(Ve)||wt(Ve))return Ve=eg(Ve,Ye.mode,rt,null),Ve.return=Ye,Ve;yO(Ye,Ve)}return null}function It(Ye,Ve,rt,jt){var vn=Ve!==null?Ve.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return vn!==null?null:Ce(Ye,Ve,""+rt,jt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:return rt.key===vn?Oe(Ye,Ve,rt,jt):null;case xe:return rt.key===vn?ct(Ye,Ve,rt,jt):null;case ke:return vn=rt._init,It(Ye,Ve,vn(rt._payload),jt)}if(Ct(rt)||wt(rt))return vn!==null?null:Rt(Ye,Ve,rt,jt,null);yO(Ye,rt)}return null}function tn(Ye,Ve,rt,jt,vn){if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Ye=Ye.get(rt)||null,Ce(Ve,Ye,""+jt,vn);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case ae:return Ye=Ye.get(jt.key===null?rt:jt.key)||null,Oe(Ve,Ye,jt,vn);case xe:return Ye=Ye.get(jt.key===null?rt:jt.key)||null,ct(Ve,Ye,jt,vn);case ke:var On=jt._init;return tn(Ye,Ve,rt,On(jt._payload),vn)}if(Ct(jt)||wt(jt))return Ye=Ye.get(rt)||null,Rt(Ve,Ye,jt,vn,null);yO(Ve,jt)}return null}function dn(Ye,Ve,rt,jt){for(var vn=null,On=null,Dn=Ve,Gn=Ve=0,Po=null;Dn!==null&&Gn<rt.length;Gn++){Dn.index>Gn?(Po=Dn,Dn=null):Po=Dn.sibling;var Cr=It(Ye,Dn,rt[Gn],jt);if(Cr===null){Dn===null&&(Dn=Po);break}l&&Dn&&Cr.alternate===null&&d(Ye,Dn),Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr,Dn=Po}if(Gn===rt.length)return b(Ye,Dn),vi&&Wv(Ye,Gn),vn;if(Dn===null){for(;Gn<rt.length;Gn++)Dn=Lt(Ye,rt[Gn],jt),Dn!==null&&(Ve=W(Dn,Ve,Gn),On===null?vn=Dn:On.sibling=Dn,On=Dn);return vi&&Wv(Ye,Gn),vn}for(Dn=P(Ye,Dn);Gn<rt.length;Gn++)Po=tn(Dn,Ye,Gn,rt[Gn],jt),Po!==null&&(l&&Po.alternate!==null&&Dn.delete(Po.key===null?Gn:Po.key),Ve=W(Po,Ve,Gn),On===null?vn=Po:On.sibling=Po,On=Po);return l&&Dn.forEach(function(df){return d(Ye,df)}),vi&&Wv(Ye,Gn),vn}function fn(Ye,Ve,rt,jt){var vn=wt(rt);if(typeof vn!="function")throw Error(c(150));if(rt=vn.call(rt),rt==null)throw Error(c(151));for(var On=vn=null,Dn=Ve,Gn=Ve=0,Po=null,Cr=rt.next();Dn!==null&&!Cr.done;Gn++,Cr=rt.next()){Dn.index>Gn?(Po=Dn,Dn=null):Po=Dn.sibling;var df=It(Ye,Dn,Cr.value,jt);if(df===null){Dn===null&&(Dn=Po);break}l&&Dn&&df.alternate===null&&d(Ye,Dn),Ve=W(df,Ve,Gn),On===null?vn=df:On.sibling=df,On=df,Dn=Po}if(Cr.done)return b(Ye,Dn),vi&&Wv(Ye,Gn),vn;if(Dn===null){for(;!Cr.done;Gn++,Cr=rt.next())Cr=Lt(Ye,Cr.value,jt),Cr!==null&&(Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return vi&&Wv(Ye,Gn),vn}for(Dn=P(Ye,Dn);!Cr.done;Gn++,Cr=rt.next())Cr=tn(Dn,Ye,Gn,Cr.value,jt),Cr!==null&&(l&&Cr.alternate!==null&&Dn.delete(Cr.key===null?Gn:Cr.key),Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return l&&Dn.forEach(function(lOe){return d(Ye,lOe)}),vi&&Wv(Ye,Gn),vn}function Yi(Ye,Ve,rt,jt){if(typeof rt=="object"&&rt!==null&&rt.type===fe&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:e:{for(var vn=rt.key,On=Ve;On!==null;){if(On.key===vn){if(vn=rt.type,vn===fe){if(On.tag===7){b(Ye,On.sibling),Ve=B(On,rt.props.children),Ve.return=Ye,Ye=Ve;break e}}else if(On.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&Xhe(vn)===On.type){b(Ye,On.sibling),Ve=B(On,rt.props),Ve.ref=AE(Ye,On,rt),Ve.return=Ye,Ye=Ve;break e}b(Ye,On);break}else d(Ye,On);On=On.sibling}rt.type===fe?(Ve=eg(rt.props.children,Ye.mode,jt,rt.key),Ve.return=Ye,Ye=Ve):(jt=FO(rt.type,rt.key,rt.props,null,Ye.mode,jt),jt.ref=AE(Ye,Ve,rt),jt.return=Ye,Ye=jt)}return oe(Ye);case xe:e:{for(On=rt.key;Ve!==null;){if(Ve.key===On)if(Ve.tag===4&&Ve.stateNode.containerInfo===rt.containerInfo&&Ve.stateNode.implementation===rt.implementation){b(Ye,Ve.sibling),Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ye=Ve;break e}else{b(Ye,Ve);break}else d(Ye,Ve);Ve=Ve.sibling}Ve=Jz(rt,Ye.mode,jt),Ve.return=Ye,Ye=Ve}return oe(Ye);case ke:return On=rt._init,Yi(Ye,Ve,On(rt._payload),jt)}if(Ct(rt))return dn(Ye,Ve,rt,jt);if(wt(rt))return fn(Ye,Ve,rt,jt);yO(Ye,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,Ve!==null&&Ve.tag===6?(b(Ye,Ve.sibling),Ve=B(Ve,rt),Ve.return=Ye,Ye=Ve):(b(Ye,Ve),Ve=Qz(rt,Ye.mode,jt),Ve.return=Ye,Ye=Ve),oe(Ye)):b(Ye,Ve)}return Yi}var Tb=Yhe(!0),Zhe=Yhe(!1),IE={},Ac=Jp(IE),RE=Jp(IE),OE=Jp(IE);function qv(l){if(l===IE)throw Error(c(174));return l}function gz(l,d){switch(ni(OE,d),ni(RE,l),ni(Ac,IE),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Hn(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=Hn(d,l)}hi(Ac),ni(Ac,d)}function Mb(){hi(Ac),hi(RE),hi(OE)}function Qhe(l){qv(OE.current);var d=qv(Ac.current),b=Hn(d,l.type);d!==b&&(ni(RE,l),ni(Ac,b))}function yz(l){RE.current===l&&(hi(Ac),hi(RE))}var Ci=Jp(0);function bO(l){for(var d=l;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var bz=[];function _z(){for(var l=0;l<bz.length;l++)bz[l]._workInProgressVersionPrimary=null;bz.length=0}var _O=ne.ReactCurrentDispatcher,wz=ne.ReactCurrentBatchConfig,Xv=0,Pi=null,ho=null,Eo=null,wO=!1,DE=!1,LE=0,ARe=0;function us(){throw Error(c(321))}function xz(l,d){if(d===null)return!1;for(var b=0;b<d.length&&b<l.length;b++)if(!_u(l[b],d[b]))return!1;return!0}function Sz(l,d,b,P,B,W){if(Xv=W,Pi=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,_O.current=l===null||l.memoizedState===null?DRe:LRe,l=b(P,B),DE){W=0;do{if(DE=!1,LE=0,25<=W)throw Error(c(301));W+=1,Eo=ho=null,d.updateQueue=null,_O.current=NRe,l=b(P,B)}while(DE)}if(_O.current=EO,d=ho!==null&&ho.next!==null,Xv=0,Eo=ho=Pi=null,wO=!1,d)throw Error(c(300));return l}function Ez(){var l=LE!==0;return LE=0,l}function Ic(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Eo===null?Pi.memoizedState=Eo=l:Eo=Eo.next=l,Eo}function wl(){if(ho===null){var l=Pi.alternate;l=l!==null?l.memoizedState:null}else l=ho.next;var d=Eo===null?Pi.memoizedState:Eo.next;if(d!==null)Eo=d,ho=l;else{if(l===null)throw Error(c(310));ho=l,l={memoizedState:ho.memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},Eo===null?Pi.memoizedState=Eo=l:Eo=Eo.next=l}return Eo}function NE(l,d){return typeof d=="function"?d(l):d}function Cz(l){var d=wl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=ho,B=P.baseQueue,W=b.pending;if(W!==null){if(B!==null){var oe=B.next;B.next=W.next,W.next=oe}P.baseQueue=B=W,b.pending=null}if(B!==null){W=B.next,P=P.baseState;var Ce=oe=null,Oe=null,ct=W;do{var Rt=ct.lane;if((Xv&Rt)===Rt)Oe!==null&&(Oe=Oe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),P=ct.hasEagerState?ct.eagerState:l(P,ct.action);else{var Lt={lane:Rt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Oe===null?(Ce=Oe=Lt,oe=P):Oe=Oe.next=Lt,Pi.lanes|=Rt,Yv|=Rt}ct=ct.next}while(ct!==null&&ct!==W);Oe===null?oe=P:Oe.next=Ce,_u(P,d.memoizedState)||(sa=!0),d.memoizedState=P,d.baseState=oe,d.baseQueue=Oe,b.lastRenderedState=P}if(l=b.interleaved,l!==null){B=l;do W=B.lane,Pi.lanes|=W,Yv|=W,B=B.next;while(B!==l)}else B===null&&(b.lanes=0);return[d.memoizedState,b.dispatch]}function Pz(l){var d=wl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=b.dispatch,B=b.pending,W=d.memoizedState;if(B!==null){b.pending=null;var oe=B=B.next;do W=l(W,oe.action),oe=oe.next;while(oe!==B);_u(W,d.memoizedState)||(sa=!0),d.memoizedState=W,d.baseQueue===null&&(d.baseState=W),b.lastRenderedState=W}return[W,P]}function Jhe(){}function epe(l,d){var b=Pi,P=wl(),B=d(),W=!_u(P.memoizedState,B);if(W&&(P.memoizedState=B,sa=!0),P=P.queue,kz(rpe.bind(null,b,P,l),[l]),P.getSnapshot!==d||W||Eo!==null&&Eo.memoizedState.tag&1){if(b.flags|=2048,FE(9,npe.bind(null,b,P,B,d),void 0,null),Co===null)throw Error(c(349));Xv&30||tpe(b,d,B)}return B}function tpe(l,d,b){l.flags|=16384,l={getSnapshot:d,value:b},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.stores=[l]):(b=d.stores,b===null?d.stores=[l]:b.push(l))}function npe(l,d,b,P){d.value=b,d.getSnapshot=P,ipe(d)&&ope(l)}function rpe(l,d,b){return b(function(){ipe(d)&&ope(l)})}function ipe(l){var d=l.getSnapshot;l=l.value;try{var b=d();return!_u(l,b)}catch{return!0}}function ope(l){var d=Qd(l,1);d!==null&&Cu(d,l,1,-1)}function spe(l){var d=Ic();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:NE,lastRenderedState:l},d.queue=l,l=l.dispatch=ORe.bind(null,Pi,l),[d.memoizedState,l]}function FE(l,d,b,P){return l={tag:l,create:d,destroy:b,deps:P,next:null},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.lastEffect=l.next=l):(b=d.lastEffect,b===null?d.lastEffect=l.next=l:(P=b.next,b.next=l,l.next=P,d.lastEffect=l)),l}function ape(){return wl().memoizedState}function xO(l,d,b,P){var B=Ic();Pi.flags|=l,B.memoizedState=FE(1|d,b,void 0,P===void 0?null:P)}function SO(l,d,b,P){var B=wl();P=P===void 0?null:P;var W=void 0;if(ho!==null){var oe=ho.memoizedState;if(W=oe.destroy,P!==null&&xz(P,oe.deps)){B.memoizedState=FE(d,b,W,P);return}}Pi.flags|=l,B.memoizedState=FE(1|d,b,W,P)}function lpe(l,d){return xO(8390656,8,l,d)}function kz(l,d){return SO(2048,8,l,d)}function upe(l,d){return SO(4,2,l,d)}function cpe(l,d){return SO(4,4,l,d)}function dpe(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function hpe(l,d,b){return b=b!=null?b.concat([l]):null,SO(4,4,dpe.bind(null,d,l),b)}function Tz(){}function ppe(l,d){var b=wl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&xz(d,P[1])?P[0]:(b.memoizedState=[l,d],l)}function fpe(l,d){var b=wl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&xz(d,P[1])?P[0]:(l=l(),b.memoizedState=[l,d],l)}function mpe(l,d,b){return Xv&21?(_u(b,d)||(b=Vde(),Pi.lanes|=b,Yv|=b,l.baseState=!0),d):(l.baseState&&(l.baseState=!1,sa=!0),l.memoizedState=b)}function IRe(l,d){var b=Br;Br=b!==0&&4>b?b:4,l(!0);var P=wz.transition;wz.transition={};try{l(!1),d()}finally{Br=b,wz.transition=P}}function vpe(){return wl().memoizedState}function RRe(l,d,b){var P=lf(l);if(b={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null},gpe(l))ype(d,b);else if(b=jhe(l,d,b,P),b!==null){var B=Ns();Cu(b,l,P,B),bpe(b,d,P)}}function ORe(l,d,b){var P=lf(l),B={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null};if(gpe(l))ype(d,B);else{var W=l.alternate;if(l.lanes===0&&(W===null||W.lanes===0)&&(W=d.lastRenderedReducer,W!==null))try{var oe=d.lastRenderedState,Ce=W(oe,b);if(B.hasEagerState=!0,B.eagerState=Ce,_u(Ce,oe)){var Oe=d.interleaved;Oe===null?(B.next=B,pz(d)):(B.next=Oe.next,Oe.next=B),d.interleaved=B;return}}catch{}finally{}b=jhe(l,d,B,P),b!==null&&(B=Ns(),Cu(b,l,P,B),bpe(b,d,P))}}function gpe(l){var d=l.alternate;return l===Pi||d!==null&&d===Pi}function ype(l,d){DE=wO=!0;var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}function bpe(l,d,b){if(b&4194240){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Aj(l,b)}}var EO={readContext:_l,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},DRe={readContext:_l,useCallback:function(l,d){return Ic().memoizedState=[l,d===void 0?null:d],l},useContext:_l,useEffect:lpe,useImperativeHandle:function(l,d,b){return b=b!=null?b.concat([l]):null,xO(4194308,4,dpe.bind(null,d,l),b)},useLayoutEffect:function(l,d){return xO(4194308,4,l,d)},useInsertionEffect:function(l,d){return xO(4,2,l,d)},useMemo:function(l,d){var b=Ic();return d=d===void 0?null:d,l=l(),b.memoizedState=[l,d],l},useReducer:function(l,d,b){var P=Ic();return d=b!==void 0?b(d):d,P.memoizedState=P.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},P.queue=l,l=l.dispatch=RRe.bind(null,Pi,l),[P.memoizedState,l]},useRef:function(l){var d=Ic();return l={current:l},d.memoizedState=l},useState:spe,useDebugValue:Tz,useDeferredValue:function(l){return Ic().memoizedState=l},useTransition:function(){var l=spe(!1),d=l[0];return l=IRe.bind(null,l[1]),Ic().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,b){var P=Pi,B=Ic();if(vi){if(b===void 0)throw Error(c(407));b=b()}else{if(b=d(),Co===null)throw Error(c(349));Xv&30||tpe(P,d,b)}B.memoizedState=b;var W={value:b,getSnapshot:d};return B.queue=W,lpe(rpe.bind(null,P,W,l),[l]),P.flags|=2048,FE(9,npe.bind(null,P,W,b,d),void 0,null),b},useId:function(){var l=Ic(),d=Co.identifierPrefix;if(vi){var b=Zd,P=Yd;b=(P&~(1<<32-bu(P)-1)).toString(32)+b,d=":"+d+"R"+b,b=LE++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=ARe++,d=":"+d+"r"+b.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},LRe={readContext:_l,useCallback:ppe,useContext:_l,useEffect:kz,useImperativeHandle:hpe,useInsertionEffect:upe,useLayoutEffect:cpe,useMemo:fpe,useReducer:Cz,useRef:ape,useState:function(){return Cz(NE)},useDebugValue:Tz,useDeferredValue:function(l){var d=wl();return mpe(d,ho.memoizedState,l)},useTransition:function(){var l=Cz(NE)[0],d=wl().memoizedState;return[l,d]},useMutableSource:Jhe,useSyncExternalStore:epe,useId:vpe,unstable_isNewReconciler:!1},NRe={readContext:_l,useCallback:ppe,useContext:_l,useEffect:kz,useImperativeHandle:hpe,useInsertionEffect:upe,useLayoutEffect:cpe,useMemo:fpe,useReducer:Pz,useRef:ape,useState:function(){return Pz(NE)},useDebugValue:Tz,useDeferredValue:function(l){var d=wl();return ho===null?d.memoizedState=l:mpe(d,ho.memoizedState,l)},useTransition:function(){var l=Pz(NE)[0],d=wl().memoizedState;return[l,d]},useMutableSource:Jhe,useSyncExternalStore:epe,useId:vpe,unstable_isNewReconciler:!1};function Ab(l,d){try{var b="",P=d;do b+=ze(P),P=P.return;while(P);var B=b}catch(W){B=`
Error generating stack: `+W.message+`
`+W.stack}return{value:l,source:d,stack:B,digest:null}}function Mz(l,d,b){return{value:l,source:null,stack:b??null,digest:d??null}}function Az(l,d){try{console.error(d.value)}catch(b){setTimeout(function(){throw b})}}var FRe=typeof WeakMap=="function"?WeakMap:Map;function _pe(l,d,b){b=Jd(-1,b),b.tag=3,b.payload={element:null};var P=d.value;return b.callback=function(){IO||(IO=!0,Gz=P),Az(l,d)},b}function wpe(l,d,b){b=Jd(-1,b),b.tag=3;var P=l.type.getDerivedStateFromError;if(typeof P=="function"){var B=d.value;b.payload=function(){return P(B)},b.callback=function(){Az(l,d)}}var W=l.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(b.callback=function(){Az(l,d),typeof P!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var oe=d.stack;this.componentDidCatch(d.value,{componentStack:oe!==null?oe:""})}),b}function xpe(l,d,b){var P=l.pingCache;if(P===null){P=l.pingCache=new FRe;var B=new Set;P.set(d,B)}else B=P.get(d),B===void 0&&(B=new Set,P.set(d,B));B.has(b)||(B.add(b),l=ZRe.bind(null,l,d,b),d.then(l,l))}function Spe(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function Epe(l,d,b,P,B){return l.mode&1?(l.flags|=65536,l.lanes=B,l):(l===d?l.flags|=65536:(l.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(d=Jd(-1,1),d.tag=2,rf(b,d,1))),b.lanes|=1),l)}var BRe=ne.ReactCurrentOwner,sa=!1;function Ls(l,d,b,P){d.child=l===null?Zhe(d,null,b,P):Tb(d,l.child,b,P)}function Cpe(l,d,b,P,B){b=b.render;var W=d.ref;return kb(d,B),P=Sz(l,d,b,P,W,B),b=Ez(),l!==null&&!sa?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,eh(l,d,B)):(vi&&b&&iz(d),d.flags|=1,Ls(l,d,P,B),d.child)}function Ppe(l,d,b,P,B){if(l===null){var W=b.type;return typeof W=="function"&&!Zz(W)&&W.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(d.tag=15,d.type=W,kpe(l,d,W,P,B)):(l=FO(b.type,null,P,d,d.mode,B),l.ref=d.ref,l.return=d,d.child=l)}if(W=l.child,!(l.lanes&B)){var oe=W.memoizedProps;if(b=b.compare,b=b!==null?b:SE,b(oe,P)&&l.ref===d.ref)return eh(l,d,B)}return d.flags|=1,l=cf(W,P),l.ref=d.ref,l.return=d,d.child=l}function kpe(l,d,b,P,B){if(l!==null){var W=l.memoizedProps;if(SE(W,P)&&l.ref===d.ref)if(sa=!1,d.pendingProps=P=W,(l.lanes&B)!==0)l.flags&131072&&(sa=!0);else return d.lanes=l.lanes,eh(l,d,B)}return Iz(l,d,b,P,B)}function Tpe(l,d,b){var P=d.pendingProps,B=P.children,W=l!==null?l.memoizedState:null;if(P.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},ni(Rb,Ra),Ra|=b;else{if(!(b&1073741824))return l=W!==null?W.baseLanes|b:b,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,ni(Rb,Ra),Ra|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=W!==null?W.baseLanes:b,ni(Rb,Ra),Ra|=P}else W!==null?(P=W.baseLanes|b,d.memoizedState=null):P=b,ni(Rb,Ra),Ra|=P;return Ls(l,d,B,b),d.child}function Mpe(l,d){var b=d.ref;(l===null&&b!==null||l!==null&&l.ref!==b)&&(d.flags|=512,d.flags|=2097152)}function Iz(l,d,b,P,B){var W=oa(b)?Gv:ls.current;return W=xb(d,W),kb(d,B),b=Sz(l,d,b,P,W,B),P=Ez(),l!==null&&!sa?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,eh(l,d,B)):(vi&&P&&iz(d),d.flags|=1,Ls(l,d,b,B),d.child)}function Ape(l,d,b,P,B){if(oa(b)){var W=!0;lO(d)}else W=!1;if(kb(d,B),d.stateNode===null)PO(l,d),Khe(d,b,P),vz(d,b,P,B),P=!0;else if(l===null){var oe=d.stateNode,Ce=d.memoizedProps;oe.props=Ce;var Oe=oe.context,ct=b.contextType;typeof ct=="object"&&ct!==null?ct=_l(ct):(ct=oa(b)?Gv:ls.current,ct=xb(d,ct));var Rt=b.getDerivedStateFromProps,Lt=typeof Rt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Lt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==P||Oe!==ct)&&qhe(d,oe,P,ct),nf=!1;var It=d.memoizedState;oe.state=It,vO(d,P,oe,B),Oe=d.memoizedState,Ce!==P||It!==Oe||ia.current||nf?(typeof Rt=="function"&&(mz(d,b,Rt,P),Oe=d.memoizedState),(Ce=nf||Whe(d,b,Ce,P,It,Oe,ct))?(Lt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(d.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=P,d.memoizedState=Oe),oe.props=P,oe.state=Oe,oe.context=ct,P=Ce):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),P=!1)}else{oe=d.stateNode,zhe(l,d),Ce=d.memoizedProps,ct=d.type===d.elementType?Ce:xu(d.type,Ce),oe.props=ct,Lt=d.pendingProps,It=oe.context,Oe=b.contextType,typeof Oe=="object"&&Oe!==null?Oe=_l(Oe):(Oe=oa(b)?Gv:ls.current,Oe=xb(d,Oe));var tn=b.getDerivedStateFromProps;(Rt=typeof tn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==Lt||It!==Oe)&&qhe(d,oe,P,Oe),nf=!1,It=d.memoizedState,oe.state=It,vO(d,P,oe,B);var dn=d.memoizedState;Ce!==Lt||It!==dn||ia.current||nf?(typeof tn=="function"&&(mz(d,b,tn,P),dn=d.memoizedState),(ct=nf||Whe(d,b,ct,P,It,dn,Oe)||!1)?(Rt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(P,dn,Oe),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(P,dn,Oe)),typeof oe.componentDidUpdate=="function"&&(d.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),d.memoizedProps=P,d.memoizedState=dn),oe.props=P,oe.state=dn,oe.context=Oe,P=ct):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),P=!1)}return Rz(l,d,b,P,W,B)}function Rz(l,d,b,P,B,W){Mpe(l,d);var oe=(d.flags&128)!==0;if(!P&&!oe)return B&&Dhe(d,b,!1),eh(l,d,W);P=d.stateNode,BRe.current=d;var Ce=oe&&typeof b.getDerivedStateFromError!="function"?null:P.render();return d.flags|=1,l!==null&&oe?(d.child=Tb(d,l.child,null,W),d.child=Tb(d,null,Ce,W)):Ls(l,d,Ce,W),d.memoizedState=P.state,B&&Dhe(d,b,!0),d.child}function Ipe(l){var d=l.stateNode;d.pendingContext?Rhe(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Rhe(l,d.context,!1),gz(l,d.containerInfo)}function Rpe(l,d,b,P,B){return Cb(),lz(B),d.flags|=256,Ls(l,d,b,P),d.child}var Oz={dehydrated:null,treeContext:null,retryLane:0};function Dz(l){return{baseLanes:l,cachePool:null,transitions:null}}function Ope(l,d,b){var P=d.pendingProps,B=Ci.current,W=!1,oe=(d.flags&128)!==0,Ce;if((Ce=oe)||(Ce=l!==null&&l.memoizedState===null?!1:(B&2)!==0),Ce?(W=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(B|=1),ni(Ci,B&1),l===null)return az(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(d.mode&1?l.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(oe=P.children,l=P.fallback,W?(P=d.mode,W=d.child,oe={mode:"hidden",children:oe},!(P&1)&&W!==null?(W.childLanes=0,W.pendingProps=oe):W=BO(oe,P,0,null),l=eg(l,P,b,null),W.return=d,l.return=d,W.sibling=l,d.child=W,d.child.memoizedState=Dz(b),d.memoizedState=Oz,l):Lz(d,oe));if(B=l.memoizedState,B!==null&&(Ce=B.dehydrated,Ce!==null))return URe(l,d,oe,P,Ce,B,b);if(W){W=P.fallback,oe=d.mode,B=l.child,Ce=B.sibling;var Oe={mode:"hidden",children:P.children};return!(oe&1)&&d.child!==B?(P=d.child,P.childLanes=0,P.pendingProps=Oe,d.deletions=null):(P=cf(B,Oe),P.subtreeFlags=B.subtreeFlags&14680064),Ce!==null?W=cf(Ce,W):(W=eg(W,oe,b,null),W.flags|=2),W.return=d,P.return=d,P.sibling=W,d.child=P,P=W,W=d.child,oe=l.child.memoizedState,oe=oe===null?Dz(b):{baseLanes:oe.baseLanes|b,cachePool:null,transitions:oe.transitions},W.memoizedState=oe,W.childLanes=l.childLanes&~b,d.memoizedState=Oz,P}return W=l.child,l=W.sibling,P=cf(W,{mode:"visible",children:P.children}),!(d.mode&1)&&(P.lanes=b),P.return=d,P.sibling=null,l!==null&&(b=d.deletions,b===null?(d.deletions=[l],d.flags|=16):b.push(l)),d.child=P,d.memoizedState=null,P}function Lz(l,d){return d=BO({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function CO(l,d,b,P){return P!==null&&lz(P),Tb(d,l.child,null,b),l=Lz(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function URe(l,d,b,P,B,W,oe){if(b)return d.flags&256?(d.flags&=-257,P=Mz(Error(c(422))),CO(l,d,oe,P)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(W=P.fallback,B=d.mode,P=BO({mode:"visible",children:P.children},B,0,null),W=eg(W,B,oe,null),W.flags|=2,P.return=d,W.return=d,P.sibling=W,d.child=P,d.mode&1&&Tb(d,l.child,null,oe),d.child.memoizedState=Dz(oe),d.memoizedState=Oz,W);if(!(d.mode&1))return CO(l,d,oe,null);if(B.data==="$!"){if(P=B.nextSibling&&B.nextSibling.dataset,P)var Ce=P.dgst;return P=Ce,W=Error(c(419)),P=Mz(W,P,void 0),CO(l,d,oe,P)}if(Ce=(oe&l.childLanes)!==0,sa||Ce){if(P=Co,P!==null){switch(oe&-oe){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=B&(P.suspendedLanes|oe)?0:B,B!==0&&B!==W.retryLane&&(W.retryLane=B,Qd(l,B),Cu(P,l,B,-1))}return Yz(),P=Mz(Error(c(421))),CO(l,d,oe,P)}return B.data==="$?"?(d.flags|=128,d.child=l.child,d=QRe.bind(null,l),B._reactRetry=d,null):(l=W.treeContext,Ia=Qp(B.nextSibling),Aa=d,vi=!0,wu=null,l!==null&&(yl[bl++]=Yd,yl[bl++]=Zd,yl[bl++]=$v,Yd=l.id,Zd=l.overflow,$v=d),d=Lz(d,P.children),d.flags|=4096,d)}function Dpe(l,d,b){l.lanes|=d;var P=l.alternate;P!==null&&(P.lanes|=d),hz(l.return,d,b)}function Nz(l,d,b,P,B){var W=l.memoizedState;W===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:P,tail:b,tailMode:B}:(W.isBackwards=d,W.rendering=null,W.renderingStartTime=0,W.last=P,W.tail=b,W.tailMode=B)}function Lpe(l,d,b){var P=d.pendingProps,B=P.revealOrder,W=P.tail;if(Ls(l,d,P.children,b),P=Ci.current,P&2)P=P&1|2,d.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Dpe(l,b,d);else if(l.tag===19)Dpe(l,b,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}P&=1}if(ni(Ci,P),!(d.mode&1))d.memoizedState=null;else switch(B){case"forwards":for(b=d.child,B=null;b!==null;)l=b.alternate,l!==null&&bO(l)===null&&(B=b),b=b.sibling;b=B,b===null?(B=d.child,d.child=null):(B=b.sibling,b.sibling=null),Nz(d,!1,B,b,W);break;case"backwards":for(b=null,B=d.child,d.child=null;B!==null;){if(l=B.alternate,l!==null&&bO(l)===null){d.child=B;break}l=B.sibling,B.sibling=b,b=B,B=l}Nz(d,!0,b,null,W);break;case"together":Nz(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function PO(l,d){!(d.mode&1)&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function eh(l,d,b){if(l!==null&&(d.dependencies=l.dependencies),Yv|=d.lanes,!(b&d.childLanes))return null;if(l!==null&&d.child!==l.child)throw Error(c(153));if(d.child!==null){for(l=d.child,b=cf(l,l.pendingProps),d.child=b,b.return=d;l.sibling!==null;)l=l.sibling,b=b.sibling=cf(l,l.pendingProps),b.return=d;b.sibling=null}return d.child}function VRe(l,d,b){switch(d.tag){case 3:Ipe(d),Cb();break;case 5:Qhe(d);break;case 1:oa(d.type)&&lO(d);break;case 4:gz(d,d.stateNode.containerInfo);break;case 10:var P=d.type._context,B=d.memoizedProps.value;ni(pO,P._currentValue),P._currentValue=B;break;case 13:if(P=d.memoizedState,P!==null)return P.dehydrated!==null?(ni(Ci,Ci.current&1),d.flags|=128,null):b&d.child.childLanes?Ope(l,d,b):(ni(Ci,Ci.current&1),l=eh(l,d,b),l!==null?l.sibling:null);ni(Ci,Ci.current&1);break;case 19:if(P=(b&d.childLanes)!==0,l.flags&128){if(P)return Lpe(l,d,b);d.flags|=128}if(B=d.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ni(Ci,Ci.current),P)break;return null;case 22:case 23:return d.lanes=0,Tpe(l,d,b)}return eh(l,d,b)}var Npe,Fz,Fpe,Bpe;Npe=function(l,d){for(var b=d.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Fz=function(){},Fpe=function(l,d,b,P){var B=l.memoizedProps;if(B!==P){l=d.stateNode,qv(Ac.current);var W=null;switch(b){case"input":B=at(l,B),P=at(l,P),W=[];break;case"select":B=ue({},B,{value:void 0}),P=ue({},P,{value:void 0}),W=[];break;case"textarea":B=At(l,B),P=At(l,P),W=[];break;default:typeof B.onClick!="function"&&typeof P.onClick=="function"&&(l.onclick=oO)}cb(b,P);var oe;b=null;for(ct in B)if(!P.hasOwnProperty(ct)&&B.hasOwnProperty(ct)&&B[ct]!=null)if(ct==="style"){var Ce=B[ct];for(oe in Ce)Ce.hasOwnProperty(oe)&&(b||(b={}),b[oe]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(f.hasOwnProperty(ct)?W||(W=[]):(W=W||[]).push(ct,null));for(ct in P){var Oe=P[ct];if(Ce=B!=null?B[ct]:void 0,P.hasOwnProperty(ct)&&Oe!==Ce&&(Oe!=null||Ce!=null))if(ct==="style")if(Ce){for(oe in Ce)!Ce.hasOwnProperty(oe)||Oe&&Oe.hasOwnProperty(oe)||(b||(b={}),b[oe]="");for(oe in Oe)Oe.hasOwnProperty(oe)&&Ce[oe]!==Oe[oe]&&(b||(b={}),b[oe]=Oe[oe])}else b||(W||(W=[]),W.push(ct,b)),b=Oe;else ct==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ce=Ce?Ce.__html:void 0,Oe!=null&&Ce!==Oe&&(W=W||[]).push(ct,Oe)):ct==="children"?typeof Oe!="string"&&typeof Oe!="number"||(W=W||[]).push(ct,""+Oe):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(f.hasOwnProperty(ct)?(Oe!=null&&ct==="onScroll"&&di("scroll",l),W||Ce===Oe||(W=[])):(W=W||[]).push(ct,Oe))}b&&(W=W||[]).push("style",b);var ct=W;(d.updateQueue=ct)&&(d.flags|=4)}},Bpe=function(l,d,b,P){b!==P&&(d.flags|=4)};function BE(l,d){if(!vi)switch(l.tailMode){case"hidden":d=l.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?l.tail=null:b.sibling=null;break;case"collapsed":b=l.tail;for(var P=null;b!==null;)b.alternate!==null&&(P=b),b=b.sibling;P===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:P.sibling=null}}function cs(l){var d=l.alternate!==null&&l.alternate.child===l.child,b=0,P=0;if(d)for(var B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags&14680064,P|=B.flags&14680064,B.return=l,B=B.sibling;else for(B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags,P|=B.flags,B.return=l,B=B.sibling;return l.subtreeFlags|=P,l.childLanes=b,d}function jRe(l,d,b){var P=d.pendingProps;switch(oz(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(d),null;case 1:return oa(d.type)&&aO(),cs(d),null;case 3:return P=d.stateNode,Mb(),hi(ia),hi(ls),_z(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(l===null||l.child===null)&&(hO(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,wu!==null&&(Kz(wu),wu=null))),Fz(l,d),cs(d),null;case 5:yz(d);var B=qv(OE.current);if(b=d.type,l!==null&&d.stateNode!=null)Fpe(l,d,b,P,B),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!P){if(d.stateNode===null)throw Error(c(166));return cs(d),null}if(l=qv(Ac.current),hO(d)){P=d.stateNode,b=d.type;var W=d.memoizedProps;switch(P[Mc]=d,P[TE]=W,l=(d.mode&1)!==0,b){case"dialog":di("cancel",P),di("close",P);break;case"iframe":case"object":case"embed":di("load",P);break;case"video":case"audio":for(B=0;B<CE.length;B++)di(CE[B],P);break;case"source":di("error",P);break;case"img":case"image":case"link":di("error",P),di("load",P);break;case"details":di("toggle",P);break;case"input":st(P,W),di("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!W.multiple},di("invalid",P);break;case"textarea":Et(P,W),di("invalid",P)}cb(b,W),B=null;for(var oe in W)if(W.hasOwnProperty(oe)){var Ce=W[oe];oe==="children"?typeof Ce=="string"?P.textContent!==Ce&&(W.suppressHydrationWarning!==!0&&iO(P.textContent,Ce,l),B=["children",Ce]):typeof Ce=="number"&&P.textContent!==""+Ce&&(W.suppressHydrationWarning!==!0&&iO(P.textContent,Ce,l),B=["children",""+Ce]):f.hasOwnProperty(oe)&&Ce!=null&&oe==="onScroll"&&di("scroll",P)}switch(b){case"input":Cn(P),He(P,W,!0);break;case"textarea":Cn(P),_n(P);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(P.onclick=oO)}P=B,d.updateQueue=P,P!==null&&(d.flags|=4)}else{oe=B.nodeType===9?B:B.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=gr(b)),l==="http://www.w3.org/1999/xhtml"?b==="script"?(l=oe.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof P.is=="string"?l=oe.createElement(b,{is:P.is}):(l=oe.createElement(b),b==="select"&&(oe=l,P.multiple?oe.multiple=!0:P.size&&(oe.size=P.size))):l=oe.createElementNS(l,b),l[Mc]=d,l[TE]=P,Npe(l,d,!1,!1),d.stateNode=l;e:{switch(oe=sE(b,P),b){case"dialog":di("cancel",l),di("close",l),B=P;break;case"iframe":case"object":case"embed":di("load",l),B=P;break;case"video":case"audio":for(B=0;B<CE.length;B++)di(CE[B],l);B=P;break;case"source":di("error",l),B=P;break;case"img":case"image":case"link":di("error",l),di("load",l),B=P;break;case"details":di("toggle",l),B=P;break;case"input":st(l,P),B=at(l,P),di("invalid",l);break;case"option":B=P;break;case"select":l._wrapperState={wasMultiple:!!P.multiple},B=ue({},P,{value:void 0}),di("invalid",l);break;case"textarea":Et(l,P),B=At(l,P),di("invalid",l);break;default:B=P}cb(b,B),Ce=B;for(W in Ce)if(Ce.hasOwnProperty(W)){var Oe=Ce[W];W==="style"?ub(l,Oe):W==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&$p(l,Oe)):W==="children"?typeof Oe=="string"?(b!=="textarea"||Oe!=="")&&as(l,Oe):typeof Oe=="number"&&as(l,""+Oe):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(f.hasOwnProperty(W)?Oe!=null&&W==="onScroll"&&di("scroll",l):Oe!=null&&re(l,W,Oe,oe))}switch(b){case"input":Cn(l),He(l,P,!1);break;case"textarea":Cn(l),_n(l);break;case"option":P.value!=null&&l.setAttribute("value",""+Wt(P.value));break;case"select":l.multiple=!!P.multiple,W=P.value,W!=null?Xe(l,!!P.multiple,W,!1):P.defaultValue!=null&&Xe(l,!!P.multiple,P.defaultValue,!0);break;default:typeof B.onClick=="function"&&(l.onclick=oO)}switch(b){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return cs(d),null;case 6:if(l&&d.stateNode!=null)Bpe(l,d,l.memoizedProps,P);else{if(typeof P!="string"&&d.stateNode===null)throw Error(c(166));if(b=qv(OE.current),qv(Ac.current),hO(d)){if(P=d.stateNode,b=d.memoizedProps,P[Mc]=d,(W=P.nodeValue!==b)&&(l=Aa,l!==null))switch(l.tag){case 3:iO(P.nodeValue,b,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&iO(P.nodeValue,b,(l.mode&1)!==0)}W&&(d.flags|=4)}else P=(b.nodeType===9?b:b.ownerDocument).createTextNode(P),P[Mc]=d,d.stateNode=P}return cs(d),null;case 13:if(hi(Ci),P=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(vi&&Ia!==null&&d.mode&1&&!(d.flags&128))Vhe(),Cb(),d.flags|=98560,W=!1;else if(W=hO(d),P!==null&&P.dehydrated!==null){if(l===null){if(!W)throw Error(c(318));if(W=d.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(c(317));W[Mc]=d}else Cb(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;cs(d),W=!1}else wu!==null&&(Kz(wu),wu=null),W=!0;if(!W)return d.flags&65536?d:null}return d.flags&128?(d.lanes=b,d):(P=P!==null,P!==(l!==null&&l.memoizedState!==null)&&P&&(d.child.flags|=8192,d.mode&1&&(l===null||Ci.current&1?po===0&&(po=3):Yz())),d.updateQueue!==null&&(d.flags|=4),cs(d),null);case 4:return Mb(),Fz(l,d),l===null&&PE(d.stateNode.containerInfo),cs(d),null;case 10:return dz(d.type._context),cs(d),null;case 17:return oa(d.type)&&aO(),cs(d),null;case 19:if(hi(Ci),W=d.memoizedState,W===null)return cs(d),null;if(P=(d.flags&128)!==0,oe=W.rendering,oe===null)if(P)BE(W,!1);else{if(po!==0||l!==null&&l.flags&128)for(l=d.child;l!==null;){if(oe=bO(l),oe!==null){for(d.flags|=128,BE(W,!1),P=oe.updateQueue,P!==null&&(d.updateQueue=P,d.flags|=4),d.subtreeFlags=0,P=b,b=d.child;b!==null;)W=b,l=P,W.flags&=14680066,oe=W.alternate,oe===null?(W.childLanes=0,W.lanes=l,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=oe.childLanes,W.lanes=oe.lanes,W.child=oe.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=oe.memoizedProps,W.memoizedState=oe.memoizedState,W.updateQueue=oe.updateQueue,W.type=oe.type,l=oe.dependencies,W.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),b=b.sibling;return ni(Ci,Ci.current&1|2),d.child}l=l.sibling}W.tail!==null&&Xi()>Ob&&(d.flags|=128,P=!0,BE(W,!1),d.lanes=4194304)}else{if(!P)if(l=bO(oe),l!==null){if(d.flags|=128,P=!0,b=l.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),BE(W,!0),W.tail===null&&W.tailMode==="hidden"&&!oe.alternate&&!vi)return cs(d),null}else 2*Xi()-W.renderingStartTime>Ob&&b!==1073741824&&(d.flags|=128,P=!0,BE(W,!1),d.lanes=4194304);W.isBackwards?(oe.sibling=d.child,d.child=oe):(b=W.last,b!==null?b.sibling=oe:d.child=oe,W.last=oe)}return W.tail!==null?(d=W.tail,W.rendering=d,W.tail=d.sibling,W.renderingStartTime=Xi(),d.sibling=null,b=Ci.current,ni(Ci,P?b&1|2:b&1),d):(cs(d),null);case 22:case 23:return Xz(),P=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==P&&(d.flags|=8192),P&&d.mode&1?Ra&1073741824&&(cs(d),d.subtreeFlags&6&&(d.flags|=8192)):cs(d),null;case 24:return null;case 25:return null}throw Error(c(156,d.tag))}function zRe(l,d){switch(oz(d),d.tag){case 1:return oa(d.type)&&aO(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Mb(),hi(ia),hi(ls),_z(),l=d.flags,l&65536&&!(l&128)?(d.flags=l&-65537|128,d):null;case 5:return yz(d),null;case 13:if(hi(Ci),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(c(340));Cb()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return hi(Ci),null;case 4:return Mb(),null;case 10:return dz(d.type._context),null;case 22:case 23:return Xz(),null;case 24:return null;default:return null}}var kO=!1,ds=!1,HRe=typeof WeakSet=="function"?WeakSet:Set,an=null;function Ib(l,d){var b=l.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(P){Fi(l,d,P)}else b.current=null}function Upe(l,d,b){try{b()}catch(P){Fi(l,d,P)}}var Vpe=!1;function GRe(l,d){if(Yj=GR,l=fhe(),Gj(l)){if("selectionStart"in l)var b={start:l.selectionStart,end:l.selectionEnd};else e:{b=(b=l.ownerDocument)&&b.defaultView||window;var P=b.getSelection&&b.getSelection();if(P&&P.rangeCount!==0){b=P.anchorNode;var B=P.anchorOffset,W=P.focusNode;P=P.focusOffset;try{b.nodeType,W.nodeType}catch{b=null;break e}var oe=0,Ce=-1,Oe=-1,ct=0,Rt=0,Lt=l,It=null;t:for(;;){for(var tn;Lt!==b||B!==0&&Lt.nodeType!==3||(Ce=oe+B),Lt!==W||P!==0&&Lt.nodeType!==3||(Oe=oe+P),Lt.nodeType===3&&(oe+=Lt.nodeValue.length),(tn=Lt.firstChild)!==null;)It=Lt,Lt=tn;for(;;){if(Lt===l)break t;if(It===b&&++ct===B&&(Ce=oe),It===W&&++Rt===P&&(Oe=oe),(tn=Lt.nextSibling)!==null)break;Lt=It,It=Lt.parentNode}Lt=tn}b=Ce===-1||Oe===-1?null:{start:Ce,end:Oe}}else b=null}b=b||{start:0,end:0}}else b=null;for(Zj={focusedElem:l,selectionRange:b},GR=!1,an=d;an!==null;)if(d=an,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,an=l;else for(;an!==null;){d=an;try{var dn=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(dn!==null){var fn=dn.memoizedProps,Yi=dn.memoizedState,Ye=d.stateNode,Ve=Ye.getSnapshotBeforeUpdate(d.elementType===d.type?fn:xu(d.type,fn),Yi);Ye.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:var rt=d.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(jt){Fi(d,d.return,jt)}if(l=d.sibling,l!==null){l.return=d.return,an=l;break}an=d.return}return dn=Vpe,Vpe=!1,dn}function UE(l,d,b){var P=d.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var B=P=P.next;do{if((B.tag&l)===l){var W=B.destroy;B.destroy=void 0,W!==void 0&&Upe(d,b,W)}B=B.next}while(B!==P)}}function TO(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var b=d=d.next;do{if((b.tag&l)===l){var P=b.create;b.destroy=P()}b=b.next}while(b!==d)}}function Bz(l){var d=l.ref;if(d!==null){var b=l.stateNode;switch(l.tag){case 5:l=b;break;default:l=b}typeof d=="function"?d(l):d.current=l}}function jpe(l){var d=l.alternate;d!==null&&(l.alternate=null,jpe(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Mc],delete d[TE],delete d[tz],delete d[PRe],delete d[kRe])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function zpe(l){return l.tag===5||l.tag===3||l.tag===4}function Hpe(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||zpe(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Uz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.nodeType===8?b.parentNode.insertBefore(l,d):b.insertBefore(l,d):(b.nodeType===8?(d=b.parentNode,d.insertBefore(l,b)):(d=b,d.appendChild(l)),b=b._reactRootContainer,b!=null||d.onclick!==null||(d.onclick=oO));else if(P!==4&&(l=l.child,l!==null))for(Uz(l,d,b),l=l.sibling;l!==null;)Uz(l,d,b),l=l.sibling}function Vz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.insertBefore(l,d):b.appendChild(l);else if(P!==4&&(l=l.child,l!==null))for(Vz(l,d,b),l=l.sibling;l!==null;)Vz(l,d,b),l=l.sibling}var Wo=null,Su=!1;function of(l,d,b){for(b=b.child;b!==null;)Gpe(l,d,b),b=b.sibling}function Gpe(l,d,b){if(Tc&&typeof Tc.onCommitFiberUnmount=="function")try{Tc.onCommitFiberUnmount(BR,b)}catch{}switch(b.tag){case 5:ds||Ib(b,d);case 6:var P=Wo,B=Su;Wo=null,of(l,d,b),Wo=P,Su=B,Wo!==null&&(Su?(l=Wo,b=b.stateNode,l.nodeType===8?l.parentNode.removeChild(b):l.removeChild(b)):Wo.removeChild(b.stateNode));break;case 18:Wo!==null&&(Su?(l=Wo,b=b.stateNode,l.nodeType===8?ez(l.parentNode,b):l.nodeType===1&&ez(l,b),gE(l)):ez(Wo,b.stateNode));break;case 4:P=Wo,B=Su,Wo=b.stateNode.containerInfo,Su=!0,of(l,d,b),Wo=P,Su=B;break;case 0:case 11:case 14:case 15:if(!ds&&(P=b.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){B=P=P.next;do{var W=B,oe=W.destroy;W=W.tag,oe!==void 0&&(W&2||W&4)&&Upe(b,d,oe),B=B.next}while(B!==P)}of(l,d,b);break;case 1:if(!ds&&(Ib(b,d),P=b.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=b.memoizedProps,P.state=b.memoizedState,P.componentWillUnmount()}catch(Ce){Fi(b,d,Ce)}of(l,d,b);break;case 21:of(l,d,b);break;case 22:b.mode&1?(ds=(P=ds)||b.memoizedState!==null,of(l,d,b),ds=P):of(l,d,b);break;default:of(l,d,b)}}function $pe(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var b=l.stateNode;b===null&&(b=l.stateNode=new HRe),d.forEach(function(P){var B=JRe.bind(null,l,P);b.has(P)||(b.add(P),P.then(B,B))})}}function Eu(l,d){var b=d.deletions;if(b!==null)for(var P=0;P<b.length;P++){var B=b[P];try{var W=l,oe=d,Ce=oe;e:for(;Ce!==null;){switch(Ce.tag){case 5:Wo=Ce.stateNode,Su=!1;break e;case 3:Wo=Ce.stateNode.containerInfo,Su=!0;break e;case 4:Wo=Ce.stateNode.containerInfo,Su=!0;break e}Ce=Ce.return}if(Wo===null)throw Error(c(160));Gpe(W,oe,B),Wo=null,Su=!1;var Oe=B.alternate;Oe!==null&&(Oe.return=null),B.return=null}catch(ct){Fi(B,d,ct)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Wpe(d,l),d=d.sibling}function Wpe(l,d){var b=l.alternate,P=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Eu(d,l),Rc(l),P&4){try{UE(3,l,l.return),TO(3,l)}catch(fn){Fi(l,l.return,fn)}try{UE(5,l,l.return)}catch(fn){Fi(l,l.return,fn)}}break;case 1:Eu(d,l),Rc(l),P&512&&b!==null&&Ib(b,b.return);break;case 5:if(Eu(d,l),Rc(l),P&512&&b!==null&&Ib(b,b.return),l.flags&32){var B=l.stateNode;try{as(B,"")}catch(fn){Fi(l,l.return,fn)}}if(P&4&&(B=l.stateNode,B!=null)){var W=l.memoizedProps,oe=b!==null?b.memoizedProps:W,Ce=l.type,Oe=l.updateQueue;if(l.updateQueue=null,Oe!==null)try{Ce==="input"&&W.type==="radio"&&W.name!=null&&we(B,W),sE(Ce,oe);var ct=sE(Ce,W);for(oe=0;oe<Oe.length;oe+=2){var Rt=Oe[oe],Lt=Oe[oe+1];Rt==="style"?ub(B,Lt):Rt==="dangerouslySetInnerHTML"?$p(B,Lt):Rt==="children"?as(B,Lt):re(B,Rt,Lt,ct)}switch(Ce){case"input":be(B,W);break;case"textarea":Pt(B,W);break;case"select":var It=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!W.multiple;var tn=W.value;tn!=null?Xe(B,!!W.multiple,tn,!1):It!==!!W.multiple&&(W.defaultValue!=null?Xe(B,!!W.multiple,W.defaultValue,!0):Xe(B,!!W.multiple,W.multiple?[]:"",!1))}B[TE]=W}catch(fn){Fi(l,l.return,fn)}}break;case 6:if(Eu(d,l),Rc(l),P&4){if(l.stateNode===null)throw Error(c(162));B=l.stateNode,W=l.memoizedProps;try{B.nodeValue=W}catch(fn){Fi(l,l.return,fn)}}break;case 3:if(Eu(d,l),Rc(l),P&4&&b!==null&&b.memoizedState.isDehydrated)try{gE(d.containerInfo)}catch(fn){Fi(l,l.return,fn)}break;case 4:Eu(d,l),Rc(l);break;case 13:Eu(d,l),Rc(l),B=l.child,B.flags&8192&&(W=B.memoizedState!==null,B.stateNode.isHidden=W,!W||B.alternate!==null&&B.alternate.memoizedState!==null||(Hz=Xi())),P&4&&$pe(l);break;case 22:if(Rt=b!==null&&b.memoizedState!==null,l.mode&1?(ds=(ct=ds)||Rt,Eu(d,l),ds=ct):Eu(d,l),Rc(l),P&8192){if(ct=l.memoizedState!==null,(l.stateNode.isHidden=ct)&&!Rt&&l.mode&1)for(an=l,Rt=l.child;Rt!==null;){for(Lt=an=Rt;an!==null;){switch(It=an,tn=It.child,It.tag){case 0:case 11:case 14:case 15:UE(4,It,It.return);break;case 1:Ib(It,It.return);var dn=It.stateNode;if(typeof dn.componentWillUnmount=="function"){P=It,b=It.return;try{d=P,dn.props=d.memoizedProps,dn.state=d.memoizedState,dn.componentWillUnmount()}catch(fn){Fi(P,b,fn)}}break;case 5:Ib(It,It.return);break;case 22:if(It.memoizedState!==null){Xpe(Lt);continue}}tn!==null?(tn.return=It,an=tn):Xpe(Lt)}Rt=Rt.sibling}e:for(Rt=null,Lt=l;;){if(Lt.tag===5){if(Rt===null){Rt=Lt;try{B=Lt.stateNode,ct?(W=B.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(Ce=Lt.stateNode,Oe=Lt.memoizedProps.style,oe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ce.style.display=jv("display",oe))}catch(fn){Fi(l,l.return,fn)}}}else if(Lt.tag===6){if(Rt===null)try{Lt.stateNode.nodeValue=ct?"":Lt.memoizedProps}catch(fn){Fi(l,l.return,fn)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===l)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===l)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===l)break e;Rt===Lt&&(Rt=null),Lt=Lt.return}Rt===Lt&&(Rt=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:Eu(d,l),Rc(l),P&4&&$pe(l);break;case 21:break;default:Eu(d,l),Rc(l)}}function Rc(l){var d=l.flags;if(d&2){try{e:{for(var b=l.return;b!==null;){if(zpe(b)){var P=b;break e}b=b.return}throw Error(c(160))}switch(P.tag){case 5:var B=P.stateNode;P.flags&32&&(as(B,""),P.flags&=-33);var W=Hpe(l);Vz(l,W,B);break;case 3:case 4:var oe=P.stateNode.containerInfo,Ce=Hpe(l);Uz(l,Ce,oe);break;default:throw Error(c(161))}}catch(Oe){Fi(l,l.return,Oe)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function $Re(l,d,b){an=l,Kpe(l)}function Kpe(l,d,b){for(var P=(l.mode&1)!==0;an!==null;){var B=an,W=B.child;if(B.tag===22&&P){var oe=B.memoizedState!==null||kO;if(!oe){var Ce=B.alternate,Oe=Ce!==null&&Ce.memoizedState!==null||ds;Ce=kO;var ct=ds;if(kO=oe,(ds=Oe)&&!ct)for(an=B;an!==null;)oe=an,Oe=oe.child,oe.tag===22&&oe.memoizedState!==null?Ype(B):Oe!==null?(Oe.return=oe,an=Oe):Ype(B);for(;W!==null;)an=W,Kpe(W),W=W.sibling;an=B,kO=Ce,ds=ct}qpe(l)}else B.subtreeFlags&8772&&W!==null?(W.return=B,an=W):qpe(l)}}function qpe(l){for(;an!==null;){var d=an;if(d.flags&8772){var b=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ds||TO(5,d);break;case 1:var P=d.stateNode;if(d.flags&4&&!ds)if(b===null)P.componentDidMount();else{var B=d.elementType===d.type?b.memoizedProps:xu(d.type,b.memoizedProps);P.componentDidUpdate(B,b.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var W=d.updateQueue;W!==null&&Ghe(d,W,P);break;case 3:var oe=d.updateQueue;if(oe!==null){if(b=null,d.child!==null)switch(d.child.tag){case 5:b=d.child.stateNode;break;case 1:b=d.child.stateNode}Ghe(d,oe,b)}break;case 5:var Ce=d.stateNode;if(b===null&&d.flags&4){b=Ce;var Oe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&b.focus();break;case"img":Oe.src&&(b.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ct=d.alternate;if(ct!==null){var Rt=ct.memoizedState;if(Rt!==null){var Lt=Rt.dehydrated;Lt!==null&&gE(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}ds||d.flags&512&&Bz(d)}catch(It){Fi(d,d.return,It)}}if(d===l){an=null;break}if(b=d.sibling,b!==null){b.return=d.return,an=b;break}an=d.return}}function Xpe(l){for(;an!==null;){var d=an;if(d===l){an=null;break}var b=d.sibling;if(b!==null){b.return=d.return,an=b;break}an=d.return}}function Ype(l){for(;an!==null;){var d=an;try{switch(d.tag){case 0:case 11:case 15:var b=d.return;try{TO(4,d)}catch(Oe){Fi(d,b,Oe)}break;case 1:var P=d.stateNode;if(typeof P.componentDidMount=="function"){var B=d.return;try{P.componentDidMount()}catch(Oe){Fi(d,B,Oe)}}var W=d.return;try{Bz(d)}catch(Oe){Fi(d,W,Oe)}break;case 5:var oe=d.return;try{Bz(d)}catch(Oe){Fi(d,oe,Oe)}}}catch(Oe){Fi(d,d.return,Oe)}if(d===l){an=null;break}var Ce=d.sibling;if(Ce!==null){Ce.return=d.return,an=Ce;break}an=d.return}}var WRe=Math.ceil,MO=ne.ReactCurrentDispatcher,jz=ne.ReactCurrentOwner,xl=ne.ReactCurrentBatchConfig,yr=0,Co=null,oo=null,Ko=0,Ra=0,Rb=Jp(0),po=0,VE=null,Yv=0,AO=0,zz=0,jE=null,aa=null,Hz=0,Ob=1/0,th=null,IO=!1,Gz=null,sf=null,RO=!1,af=null,OO=0,zE=0,$z=null,DO=-1,LO=0;function Ns(){return yr&6?Xi():DO!==-1?DO:DO=Xi()}function lf(l){return l.mode&1?yr&2&&Ko!==0?Ko&-Ko:MRe.transition!==null?(LO===0&&(LO=Vde()),LO):(l=Br,l!==0||(l=window.event,l=l===void 0?16:Xde(l.type)),l):1}function Cu(l,d,b,P){if(50<zE)throw zE=0,$z=null,Error(c(185));hE(l,b,P),(!(yr&2)||l!==Co)&&(l===Co&&(!(yr&2)&&(AO|=b),po===4&&uf(l,Ko)),la(l,P),b===1&&yr===0&&!(d.mode&1)&&(Ob=Xi()+500,uO&&tf()))}function la(l,d){var b=l.callbackNode;IIe(l,d);var P=jR(l,l===Co?Ko:0);if(P===0)b!==null&&Fde(b),l.callbackNode=null,l.callbackPriority=0;else if(d=P&-P,l.callbackPriority!==d){if(b!=null&&Fde(b),d===1)l.tag===0?TRe(Qpe.bind(null,l)):Lhe(Qpe.bind(null,l)),ERe(function(){!(yr&6)&&tf()}),b=null;else{switch(jde(P)){case 1:b=kj;break;case 4:b=Bde;break;case 16:b=FR;break;case 536870912:b=Ude;break;default:b=FR}b=sfe(b,Zpe.bind(null,l))}l.callbackPriority=d,l.callbackNode=b}}function Zpe(l,d){if(DO=-1,LO=0,yr&6)throw Error(c(327));var b=l.callbackNode;if(Db()&&l.callbackNode!==b)return null;var P=jR(l,l===Co?Ko:0);if(P===0)return null;if(P&30||P&l.expiredLanes||d)d=NO(l,P);else{d=P;var B=yr;yr|=2;var W=efe();(Co!==l||Ko!==d)&&(th=null,Ob=Xi()+500,Qv(l,d));do try{XRe();break}catch(Ce){Jpe(l,Ce)}while(1);cz(),MO.current=W,yr=B,oo!==null?d=0:(Co=null,Ko=0,d=po)}if(d!==0){if(d===2&&(B=Tj(l),B!==0&&(P=B,d=Wz(l,B))),d===1)throw b=VE,Qv(l,0),uf(l,P),la(l,Xi()),b;if(d===6)uf(l,P);else{if(B=l.current.alternate,!(P&30)&&!KRe(B)&&(d=NO(l,P),d===2&&(W=Tj(l),W!==0&&(P=W,d=Wz(l,W))),d===1))throw b=VE,Qv(l,0),uf(l,P),la(l,Xi()),b;switch(l.finishedWork=B,l.finishedLanes=P,d){case 0:case 1:throw Error(c(345));case 2:Jv(l,aa,th);break;case 3:if(uf(l,P),(P&130023424)===P&&(d=Hz+500-Xi(),10<d)){if(jR(l,0)!==0)break;if(B=l.suspendedLanes,(B&P)!==P){Ns(),l.pingedLanes|=l.suspendedLanes&B;break}l.timeoutHandle=Jj(Jv.bind(null,l,aa,th),d);break}Jv(l,aa,th);break;case 4:if(uf(l,P),(P&4194240)===P)break;for(d=l.eventTimes,B=-1;0<P;){var oe=31-bu(P);W=1<<oe,oe=d[oe],oe>B&&(B=oe),P&=~W}if(P=B,P=Xi()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*WRe(P/1960))-P,10<P){l.timeoutHandle=Jj(Jv.bind(null,l,aa,th),P);break}Jv(l,aa,th);break;case 5:Jv(l,aa,th);break;default:throw Error(c(329))}}}return la(l,Xi()),l.callbackNode===b?Zpe.bind(null,l):null}function Wz(l,d){var b=jE;return l.current.memoizedState.isDehydrated&&(Qv(l,d).flags|=256),l=NO(l,d),l!==2&&(d=aa,aa=b,d!==null&&Kz(d)),l}function Kz(l){aa===null?aa=l:aa.push.apply(aa,l)}function KRe(l){for(var d=l;;){if(d.flags&16384){var b=d.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var P=0;P<b.length;P++){var B=b[P],W=B.getSnapshot;B=B.value;try{if(!_u(W(),B))return!1}catch{return!1}}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function uf(l,d){for(d&=~zz,d&=~AO,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var b=31-bu(d),P=1<<b;l[b]=-1,d&=~P}}function Qpe(l){if(yr&6)throw Error(c(327));Db();var d=jR(l,0);if(!(d&1))return la(l,Xi()),null;var b=NO(l,d);if(l.tag!==0&&b===2){var P=Tj(l);P!==0&&(d=P,b=Wz(l,P))}if(b===1)throw b=VE,Qv(l,0),uf(l,d),la(l,Xi()),b;if(b===6)throw Error(c(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,Jv(l,aa,th),la(l,Xi()),null}function qz(l,d){var b=yr;yr|=1;try{return l(d)}finally{yr=b,yr===0&&(Ob=Xi()+500,uO&&tf())}}function Zv(l){af!==null&&af.tag===0&&!(yr&6)&&Db();var d=yr;yr|=1;var b=xl.transition,P=Br;try{if(xl.transition=null,Br=1,l)return l()}finally{Br=P,xl.transition=b,yr=d,!(yr&6)&&tf()}}function Xz(){Ra=Rb.current,hi(Rb)}function Qv(l,d){l.finishedWork=null,l.finishedLanes=0;var b=l.timeoutHandle;if(b!==-1&&(l.timeoutHandle=-1,SRe(b)),oo!==null)for(b=oo.return;b!==null;){var P=b;switch(oz(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&aO();break;case 3:Mb(),hi(ia),hi(ls),_z();break;case 5:yz(P);break;case 4:Mb();break;case 13:hi(Ci);break;case 19:hi(Ci);break;case 10:dz(P.type._context);break;case 22:case 23:Xz()}b=b.return}if(Co=l,oo=l=cf(l.current,null),Ko=Ra=d,po=0,VE=null,zz=AO=Yv=0,aa=jE=null,Kv!==null){for(d=0;d<Kv.length;d++)if(b=Kv[d],P=b.interleaved,P!==null){b.interleaved=null;var B=P.next,W=b.pending;if(W!==null){var oe=W.next;W.next=B,P.next=oe}b.pending=P}Kv=null}return l}function Jpe(l,d){do{var b=oo;try{if(cz(),_O.current=EO,wO){for(var P=Pi.memoizedState;P!==null;){var B=P.queue;B!==null&&(B.pending=null),P=P.next}wO=!1}if(Xv=0,Eo=ho=Pi=null,DE=!1,LE=0,jz.current=null,b===null||b.return===null){po=1,VE=d,oo=null;break}e:{var W=l,oe=b.return,Ce=b,Oe=d;if(d=Ko,Ce.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ct=Oe,Rt=Ce,Lt=Rt.tag;if(!(Rt.mode&1)&&(Lt===0||Lt===11||Lt===15)){var It=Rt.alternate;It?(Rt.updateQueue=It.updateQueue,Rt.memoizedState=It.memoizedState,Rt.lanes=It.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var tn=Spe(oe);if(tn!==null){tn.flags&=-257,Epe(tn,oe,Ce,W,d),tn.mode&1&&xpe(W,ct,d),d=tn,Oe=ct;var dn=d.updateQueue;if(dn===null){var fn=new Set;fn.add(Oe),d.updateQueue=fn}else dn.add(Oe);break e}else{if(!(d&1)){xpe(W,ct,d),Yz();break e}Oe=Error(c(426))}}else if(vi&&Ce.mode&1){var Yi=Spe(oe);if(Yi!==null){!(Yi.flags&65536)&&(Yi.flags|=256),Epe(Yi,oe,Ce,W,d),lz(Ab(Oe,Ce));break e}}W=Oe=Ab(Oe,Ce),po!==4&&(po=2),jE===null?jE=[W]:jE.push(W),W=oe;do{switch(W.tag){case 3:W.flags|=65536,d&=-d,W.lanes|=d;var Ye=_pe(W,Oe,d);Hhe(W,Ye);break e;case 1:Ce=Oe;var Ve=W.type,rt=W.stateNode;if(!(W.flags&128)&&(typeof Ve.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(sf===null||!sf.has(rt)))){W.flags|=65536,d&=-d,W.lanes|=d;var jt=wpe(W,Ce,d);Hhe(W,jt);break e}}W=W.return}while(W!==null)}nfe(b)}catch(vn){d=vn,oo===b&&b!==null&&(oo=b=b.return);continue}break}while(1)}function efe(){var l=MO.current;return MO.current=EO,l===null?EO:l}function Yz(){(po===0||po===3||po===2)&&(po=4),Co===null||!(Yv&268435455)&&!(AO&268435455)||uf(Co,Ko)}function NO(l,d){var b=yr;yr|=2;var P=efe();(Co!==l||Ko!==d)&&(th=null,Qv(l,d));do try{qRe();break}catch(B){Jpe(l,B)}while(1);if(cz(),yr=b,MO.current=P,oo!==null)throw Error(c(261));return Co=null,Ko=0,po}function qRe(){for(;oo!==null;)tfe(oo)}function XRe(){for(;oo!==null&&!xIe();)tfe(oo)}function tfe(l){var d=ofe(l.alternate,l,Ra);l.memoizedProps=l.pendingProps,d===null?nfe(l):oo=d,jz.current=null}function nfe(l){var d=l;do{var b=d.alternate;if(l=d.return,d.flags&32768){if(b=zRe(b,d),b!==null){b.flags&=32767,oo=b;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{po=6,oo=null;return}}else if(b=jRe(b,d,Ra),b!==null){oo=b;return}if(d=d.sibling,d!==null){oo=d;return}oo=d=l}while(d!==null);po===0&&(po=5)}function Jv(l,d,b){var P=Br,B=xl.transition;try{xl.transition=null,Br=1,YRe(l,d,b,P)}finally{xl.transition=B,Br=P}return null}function YRe(l,d,b,P){do Db();while(af!==null);if(yr&6)throw Error(c(327));b=l.finishedWork;var B=l.finishedLanes;if(b===null)return null;if(l.finishedWork=null,l.finishedLanes=0,b===l.current)throw Error(c(177));l.callbackNode=null,l.callbackPriority=0;var W=b.lanes|b.childLanes;if(RIe(l,W),l===Co&&(oo=Co=null,Ko=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||RO||(RO=!0,sfe(FR,function(){return Db(),null})),W=(b.flags&15990)!==0,b.subtreeFlags&15990||W){W=xl.transition,xl.transition=null;var oe=Br;Br=1;var Ce=yr;yr|=4,jz.current=null,GRe(l,b),Wpe(b,l),yRe(Zj),GR=!!Yj,Zj=Yj=null,l.current=b,$Re(b),SIe(),yr=Ce,Br=oe,xl.transition=W}else l.current=b;if(RO&&(RO=!1,af=l,OO=B),W=l.pendingLanes,W===0&&(sf=null),PIe(b.stateNode),la(l,Xi()),d!==null)for(P=l.onRecoverableError,b=0;b<d.length;b++)B=d[b],P(B.value,{componentStack:B.stack,digest:B.digest});if(IO)throw IO=!1,l=Gz,Gz=null,l;return OO&1&&l.tag!==0&&Db(),W=l.pendingLanes,W&1?l===$z?zE++:(zE=0,$z=l):zE=0,tf(),null}function Db(){if(af!==null){var l=jde(OO),d=xl.transition,b=Br;try{if(xl.transition=null,Br=16>l?16:l,af===null)var P=!1;else{if(l=af,af=null,OO=0,yr&6)throw Error(c(331));var B=yr;for(yr|=4,an=l.current;an!==null;){var W=an,oe=W.child;if(an.flags&16){var Ce=W.deletions;if(Ce!==null){for(var Oe=0;Oe<Ce.length;Oe++){var ct=Ce[Oe];for(an=ct;an!==null;){var Rt=an;switch(Rt.tag){case 0:case 11:case 15:UE(8,Rt,W)}var Lt=Rt.child;if(Lt!==null)Lt.return=Rt,an=Lt;else for(;an!==null;){Rt=an;var It=Rt.sibling,tn=Rt.return;if(jpe(Rt),Rt===ct){an=null;break}if(It!==null){It.return=tn,an=It;break}an=tn}}}var dn=W.alternate;if(dn!==null){var fn=dn.child;if(fn!==null){dn.child=null;do{var Yi=fn.sibling;fn.sibling=null,fn=Yi}while(fn!==null)}}an=W}}if(W.subtreeFlags&2064&&oe!==null)oe.return=W,an=oe;else e:for(;an!==null;){if(W=an,W.flags&2048)switch(W.tag){case 0:case 11:case 15:UE(9,W,W.return)}var Ye=W.sibling;if(Ye!==null){Ye.return=W.return,an=Ye;break e}an=W.return}}var Ve=l.current;for(an=Ve;an!==null;){oe=an;var rt=oe.child;if(oe.subtreeFlags&2064&&rt!==null)rt.return=oe,an=rt;else e:for(oe=Ve;an!==null;){if(Ce=an,Ce.flags&2048)try{switch(Ce.tag){case 0:case 11:case 15:TO(9,Ce)}}catch(vn){Fi(Ce,Ce.return,vn)}if(Ce===oe){an=null;break e}var jt=Ce.sibling;if(jt!==null){jt.return=Ce.return,an=jt;break e}an=Ce.return}}if(yr=B,tf(),Tc&&typeof Tc.onPostCommitFiberRoot=="function")try{Tc.onPostCommitFiberRoot(BR,l)}catch{}P=!0}return P}finally{Br=b,xl.transition=d}}return!1}function rfe(l,d,b){d=Ab(b,d),d=_pe(l,d,1),l=rf(l,d,1),d=Ns(),l!==null&&(hE(l,1,d),la(l,d))}function Fi(l,d,b){if(l.tag===3)rfe(l,l,b);else for(;d!==null;){if(d.tag===3){rfe(d,l,b);break}else if(d.tag===1){var P=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(sf===null||!sf.has(P))){l=Ab(b,l),l=wpe(d,l,1),d=rf(d,l,1),l=Ns(),d!==null&&(hE(d,1,l),la(d,l));break}}d=d.return}}function ZRe(l,d,b){var P=l.pingCache;P!==null&&P.delete(d),d=Ns(),l.pingedLanes|=l.suspendedLanes&b,Co===l&&(Ko&b)===b&&(po===4||po===3&&(Ko&130023424)===Ko&&500>Xi()-Hz?Qv(l,0):zz|=b),la(l,d)}function ife(l,d){d===0&&(l.mode&1?(d=VR,VR<<=1,!(VR&130023424)&&(VR=4194304)):d=1);var b=Ns();l=Qd(l,d),l!==null&&(hE(l,d,b),la(l,b))}function QRe(l){var d=l.memoizedState,b=0;d!==null&&(b=d.retryLane),ife(l,b)}function JRe(l,d){var b=0;switch(l.tag){case 13:var P=l.stateNode,B=l.memoizedState;B!==null&&(b=B.retryLane);break;case 19:P=l.stateNode;break;default:throw Error(c(314))}P!==null&&P.delete(d),ife(l,b)}var ofe;ofe=function(l,d,b){if(l!==null)if(l.memoizedProps!==d.pendingProps||ia.current)sa=!0;else{if(!(l.lanes&b)&&!(d.flags&128))return sa=!1,VRe(l,d,b);sa=!!(l.flags&131072)}else sa=!1,vi&&d.flags&1048576&&Nhe(d,dO,d.index);switch(d.lanes=0,d.tag){case 2:var P=d.type;PO(l,d),l=d.pendingProps;var B=xb(d,ls.current);kb(d,b),B=Sz(null,d,P,l,B,b);var W=Ez();return d.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,oa(P)?(W=!0,lO(d)):W=!1,d.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,fz(d),B.updater=gO,d.stateNode=B,B._reactInternals=d,vz(d,P,l,b),d=Rz(null,d,P,!0,W,b)):(d.tag=0,vi&&W&&iz(d),Ls(null,d,B,b),d=d.child),d;case 16:P=d.elementType;e:{switch(PO(l,d),l=d.pendingProps,B=P._init,P=B(P._payload),d.type=P,B=d.tag=tOe(P),l=xu(P,l),B){case 0:d=Iz(null,d,P,l,b);break e;case 1:d=Ape(null,d,P,l,b);break e;case 11:d=Cpe(null,d,P,l,b);break e;case 14:d=Ppe(null,d,P,xu(P.type,l),b);break e}throw Error(c(306,P,""))}return d;case 0:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:xu(P,B),Iz(l,d,P,B,b);case 1:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:xu(P,B),Ape(l,d,P,B,b);case 3:e:{if(Ipe(d),l===null)throw Error(c(387));P=d.pendingProps,W=d.memoizedState,B=W.element,zhe(l,d),vO(d,P,null,b);var oe=d.memoizedState;if(P=oe.element,W.isDehydrated)if(W={element:P,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},d.updateQueue.baseState=W,d.memoizedState=W,d.flags&256){B=Ab(Error(c(423)),d),d=Rpe(l,d,P,b,B);break e}else if(P!==B){B=Ab(Error(c(424)),d),d=Rpe(l,d,P,b,B);break e}else for(Ia=Qp(d.stateNode.containerInfo.firstChild),Aa=d,vi=!0,wu=null,b=Zhe(d,null,P,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Cb(),P===B){d=eh(l,d,b);break e}Ls(l,d,P,b)}d=d.child}return d;case 5:return Qhe(d),l===null&&az(d),P=d.type,B=d.pendingProps,W=l!==null?l.memoizedProps:null,oe=B.children,Qj(P,B)?oe=null:W!==null&&Qj(P,W)&&(d.flags|=32),Mpe(l,d),Ls(l,d,oe,b),d.child;case 6:return l===null&&az(d),null;case 13:return Ope(l,d,b);case 4:return gz(d,d.stateNode.containerInfo),P=d.pendingProps,l===null?d.child=Tb(d,null,P,b):Ls(l,d,P,b),d.child;case 11:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:xu(P,B),Cpe(l,d,P,B,b);case 7:return Ls(l,d,d.pendingProps,b),d.child;case 8:return Ls(l,d,d.pendingProps.children,b),d.child;case 12:return Ls(l,d,d.pendingProps.children,b),d.child;case 10:e:{if(P=d.type._context,B=d.pendingProps,W=d.memoizedProps,oe=B.value,ni(pO,P._currentValue),P._currentValue=oe,W!==null)if(_u(W.value,oe)){if(W.children===B.children&&!ia.current){d=eh(l,d,b);break e}}else for(W=d.child,W!==null&&(W.return=d);W!==null;){var Ce=W.dependencies;if(Ce!==null){oe=W.child;for(var Oe=Ce.firstContext;Oe!==null;){if(Oe.context===P){if(W.tag===1){Oe=Jd(-1,b&-b),Oe.tag=2;var ct=W.updateQueue;if(ct!==null){ct=ct.shared;var Rt=ct.pending;Rt===null?Oe.next=Oe:(Oe.next=Rt.next,Rt.next=Oe),ct.pending=Oe}}W.lanes|=b,Oe=W.alternate,Oe!==null&&(Oe.lanes|=b),hz(W.return,b,d),Ce.lanes|=b;break}Oe=Oe.next}}else if(W.tag===10)oe=W.type===d.type?null:W.child;else if(W.tag===18){if(oe=W.return,oe===null)throw Error(c(341));oe.lanes|=b,Ce=oe.alternate,Ce!==null&&(Ce.lanes|=b),hz(oe,b,d),oe=W.sibling}else oe=W.child;if(oe!==null)oe.return=W;else for(oe=W;oe!==null;){if(oe===d){oe=null;break}if(W=oe.sibling,W!==null){W.return=oe.return,oe=W;break}oe=oe.return}W=oe}Ls(l,d,B.children,b),d=d.child}return d;case 9:return B=d.type,P=d.pendingProps.children,kb(d,b),B=_l(B),P=P(B),d.flags|=1,Ls(l,d,P,b),d.child;case 14:return P=d.type,B=xu(P,d.pendingProps),B=xu(P.type,B),Ppe(l,d,P,B,b);case 15:return kpe(l,d,d.type,d.pendingProps,b);case 17:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:xu(P,B),PO(l,d),d.tag=1,oa(P)?(l=!0,lO(d)):l=!1,kb(d,b),Khe(d,P,B),vz(d,P,B,b),Rz(null,d,P,!0,l,b);case 19:return Lpe(l,d,b);case 22:return Tpe(l,d,b)}throw Error(c(156,d.tag))};function sfe(l,d){return Nde(l,d)}function eOe(l,d,b,P){this.tag=l,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sl(l,d,b,P){return new eOe(l,d,b,P)}function Zz(l){return l=l.prototype,!(!l||!l.isReactComponent)}function tOe(l){if(typeof l=="function")return Zz(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Ae)return 11;if(l===Tt)return 14}return 2}function cf(l,d){var b=l.alternate;return b===null?(b=Sl(l.tag,d,l.key,l.mode),b.elementType=l.elementType,b.type=l.type,b.stateNode=l.stateNode,b.alternate=l,l.alternate=b):(b.pendingProps=d,b.type=l.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=l.flags&14680064,b.childLanes=l.childLanes,b.lanes=l.lanes,b.child=l.child,b.memoizedProps=l.memoizedProps,b.memoizedState=l.memoizedState,b.updateQueue=l.updateQueue,d=l.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=l.sibling,b.index=l.index,b.ref=l.ref,b}function FO(l,d,b,P,B,W){var oe=2;if(P=l,typeof l=="function")Zz(l)&&(oe=1);else if(typeof l=="string")oe=5;else e:switch(l){case fe:return eg(b.children,B,W,d);case ge:oe=8,B|=8;break;case Ie:return l=Sl(12,b,d,B|2),l.elementType=Ie,l.lanes=W,l;case Y:return l=Sl(13,b,d,B),l.elementType=Y,l.lanes=W,l;case Ue:return l=Sl(19,b,d,B),l.elementType=Ue,l.lanes=W,l;case Te:return BO(b,B,W,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Qe:oe=10;break e;case le:oe=9;break e;case Ae:oe=11;break e;case Tt:oe=14;break e;case ke:oe=16,P=null;break e}throw Error(c(130,l==null?l:typeof l,""))}return d=Sl(oe,b,d,B),d.elementType=l,d.type=P,d.lanes=W,d}function eg(l,d,b,P){return l=Sl(7,l,P,d),l.lanes=b,l}function BO(l,d,b,P){return l=Sl(22,l,P,d),l.elementType=Te,l.lanes=b,l.stateNode={isHidden:!1},l}function Qz(l,d,b){return l=Sl(6,l,null,d),l.lanes=b,l}function Jz(l,d,b){return d=Sl(4,l.children!==null?l.children:[],l.key,d),d.lanes=b,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function nOe(l,d,b,P,B){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mj(0),this.expirationTimes=Mj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mj(0),this.identifierPrefix=P,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function e6(l,d,b,P,B,W,oe,Ce,Oe){return l=new nOe(l,d,b,Ce,Oe),d===1?(d=1,W===!0&&(d|=8)):d=0,W=Sl(3,null,null,d),l.current=W,W.stateNode=l,W.memoizedState={element:P,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},fz(W),l}function rOe(l,d,b){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:P==null?null:""+P,children:l,containerInfo:d,implementation:b}}function afe(l){if(!l)return ef;l=l._reactInternals;e:{if(zv(l)!==l||l.tag!==1)throw Error(c(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(oa(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(c(171))}if(l.tag===1){var b=l.type;if(oa(b))return Ohe(l,b,d)}return d}function lfe(l,d,b,P,B,W,oe,Ce,Oe){return l=e6(b,P,!0,l,B,W,oe,Ce,Oe),l.context=afe(null),b=l.current,P=Ns(),B=lf(b),W=Jd(P,B),W.callback=d??null,rf(b,W,B),l.current.lanes=B,hE(l,B,P),la(l,P),l}function UO(l,d,b,P){var B=d.current,W=Ns(),oe=lf(B);return b=afe(b),d.context===null?d.context=b:d.pendingContext=b,d=Jd(W,oe),d.payload={element:l},P=P===void 0?null:P,P!==null&&(d.callback=P),l=rf(B,d,oe),l!==null&&(Cu(l,B,oe,W),mO(l,B,oe)),oe}function VO(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function ufe(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var b=l.retryLane;l.retryLane=b!==0&&b<d?b:d}}function t6(l,d){ufe(l,d),(l=l.alternate)&&ufe(l,d)}function iOe(){return null}var cfe=typeof reportError=="function"?reportError:function(l){console.error(l)};function n6(l){this._internalRoot=l}jO.prototype.render=n6.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(c(409));UO(l,d,null,null)},jO.prototype.unmount=n6.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Zv(function(){UO(null,l,null,null)}),d[qd]=null}};function jO(l){this._internalRoot=l}jO.prototype.unstable_scheduleHydration=function(l){if(l){var d=Gde();l={blockedOn:null,target:l,priority:d};for(var b=0;b<Xp.length&&d!==0&&d<Xp[b].priority;b++);Xp.splice(b,0,l),b===0&&Kde(l)}};function r6(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function zO(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function dfe(){}function oOe(l,d,b,P,B){if(B){if(typeof P=="function"){var W=P;P=function(){var ct=VO(oe);W.call(ct)}}var oe=lfe(d,P,l,0,null,!1,!1,"",dfe);return l._reactRootContainer=oe,l[qd]=oe.current,PE(l.nodeType===8?l.parentNode:l),Zv(),oe}for(;B=l.lastChild;)l.removeChild(B);if(typeof P=="function"){var Ce=P;P=function(){var ct=VO(Oe);Ce.call(ct)}}var Oe=e6(l,0,!1,null,null,!1,!1,"",dfe);return l._reactRootContainer=Oe,l[qd]=Oe.current,PE(l.nodeType===8?l.parentNode:l),Zv(function(){UO(d,Oe,b,P)}),Oe}function HO(l,d,b,P,B){var W=b._reactRootContainer;if(W){var oe=W;if(typeof B=="function"){var Ce=B;B=function(){var Oe=VO(oe);Ce.call(Oe)}}UO(d,oe,l,B)}else oe=oOe(b,d,l,B,P);return VO(oe)}zde=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var b=dE(d.pendingLanes);b!==0&&(Aj(d,b|1),la(d,Xi()),!(yr&6)&&(Ob=Xi()+500,tf()))}break;case 13:Zv(function(){var P=Qd(l,1);if(P!==null){var B=Ns();Cu(P,l,1,B)}}),t6(l,1)}},Ij=function(l){if(l.tag===13){var d=Qd(l,134217728);if(d!==null){var b=Ns();Cu(d,l,134217728,b)}t6(l,134217728)}},Hde=function(l){if(l.tag===13){var d=lf(l),b=Qd(l,d);if(b!==null){var P=Ns();Cu(b,l,d,P)}t6(l,d)}},Gde=function(){return Br},$de=function(l,d){var b=Br;try{return Br=l,d()}finally{Br=b}},db=function(l,d,b){switch(d){case"input":if(be(l,b),d=b.name,b.type==="radio"&&d!=null){for(b=l;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<b.length;d++){var P=b[d];if(P!==l&&P.form===l.form){var B=sO(P);if(!B)throw Error(c(90));Er(P),be(P,B)}}}break;case"textarea":Pt(l,b);break;case"select":d=b.value,d!=null&&Xe(l,!!b.multiple,d,!1)}},Mde=qz,Ade=Zv;var sOe={usingClientEntryPoint:!1,Events:[ME,_b,sO,kde,Tde,qz]},HE={findFiberByHostInstance:Hv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aOe={bundleType:HE.bundleType,version:HE.version,rendererPackageName:HE.rendererPackageName,rendererConfig:HE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Dde(l),l===null?null:l.stateNode},findFiberByHostInstance:HE.findFiberByHostInstance||iOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(GE=__REACT_DEVTOOLS_GLOBAL_HOOK__,!GE.isDisabled&&GE.supportsFiber))try{BR=GE.inject(aOe),Tc=GE}catch{}var GE;i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sOe,i.createPortal=function(l,d){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r6(d))throw Error(c(200));return rOe(l,d,null,b)},i.createRoot=function(l,d){if(!r6(l))throw Error(c(299));var b=!1,P="",B=cfe;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(P=d.identifierPrefix),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=e6(l,1,!1,null,null,b,!1,P,B),l[qd]=d.current,PE(l.nodeType===8?l.parentNode:l),new n6(d)},i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(c(188)):(l=Object.keys(l).join(","),Error(c(268,l)));return l=Dde(d),l=l===null?null:l.stateNode,l},i.flushSync=function(l){return Zv(l)},i.hydrate=function(l,d,b){if(!zO(d))throw Error(c(200));return HO(null,l,d,!0,b)},i.hydrateRoot=function(l,d,b){if(!r6(l))throw Error(c(405));var P=b!=null&&b.hydratedSources||null,B=!1,W="",oe=cfe;if(b!=null&&(b.unstable_strictMode===!0&&(B=!0),b.identifierPrefix!==void 0&&(W=b.identifierPrefix),b.onRecoverableError!==void 0&&(oe=b.onRecoverableError)),d=lfe(d,null,l,1,b??null,B,!1,W,oe),l[qd]=d.current,PE(l),P)for(l=0;l<P.length;l++)b=P[l],B=b._getVersion,B=B(b._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[b,B]:d.mutableSourceEagerHydrationData.push(b,B);return new jO(d)},i.render=function(l,d,b){if(!zO(d))throw Error(c(200));return HO(null,l,d,!1,b)},i.unmountComponentAtNode=function(l){if(!zO(l))throw Error(c(40));return l._reactRootContainer?(Zv(function(){HO(null,null,l,!1,function(){l._reactRootContainer=null,l[qd]=null})}),!0):!1},i.unstable_batchedUpdates=qz,i.unstable_renderSubtreeIntoContainer=function(l,d,b,P){if(!zO(b))throw Error(c(200));if(l==null||l._reactInternals===void 0)throw Error(c(38));return HO(l,d,b,!1,P)},i.version="18.2.0-next-9e3b772b8-20220608"}),ql=K((i,s)=>{function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(c){console.error(c)}}a(),s.exports=cx()});function dF(i){let[,s]=(0,nc.useState)(0);return(0,nc.useCallback)(()=>{s(a=>a+1)},[])}function Un(i,s,a){let c=(0,nc.useCallback)(i,s),h=(0,nc.useRef)(null);h.current?h.current.set(c):h.current=new Qs.Atom(c);let f=(0,nc.useRef)(null);return f.current||(f.current=(0,Qs.prism)(()=>h.current.prism.getValue()())),Q0(f.current,a)}function P2(){Xm||(Xm=!0,(0,dx.default)(()=>{(0,k2.unstable_batchedUpdates)(function(){for(var i,s;_a.length>0;){let a=_a.shift();up.delete(a);let c;Xl&&((i=a.debug)==null||i.history.push("queue reached"));try{c=a.der.getValue()}catch(h){Xl&&((s=a.debug)==null||s.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(h),a.runUpdate();continue}c!==a.lastValue&&(a.lastValue=c,a.runUpdate())}Xm=!1},1)}))}function Q0(i,s){var a;let c=dF(),h=(0,nc.useRef)(void 0);h.current||(hx++,h.current={order:hx,runUpdate:()=>{h.current.unmounted||c()},der:i,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var g;Xl&&((g=h.current.debug)==null||g.history.push("queueUpdate()")),T2(h.current)},untap:i.onStale(()=>{Xl&&h.current.debug.history.push("onStale(cb)"),h.current.queueUpdate()})},Xl&&(h.current.debug={label:s,traceOfFirstTimeRender:new Error,history:[]})),(0,nc.useLayoutEffect)(()=>function(){h.current.unmounted=!0,h.current.untap(),px(h.current)},[]),px(h.current);let f=h.current.der.getValue();return h.current.lastValue=f,Xl&&((a=h.current.debug)==null||a.history.push("rendered")),f}var Qs,dx,nc,k2,Xl,$n,hx,_a,up,Xm,T2,M2,px,hn=C(()=>{Qs=Mt,Qr(),dx=Q(ux()),nc=Q(Re()),k2=Q(ql()),Xl=!1,$n=(i,s)=>Un(()=>(0,Qs.val)(i),[i],s),hx=0,_a=[],up=new Set,Xm=!1,T2=i=>{M2(i),P2()},M2=i=>{if(!up.has(i))if(up.add(i),_a.length===0)_a.push(i);else{let s=J1(_a,a=>a.order>=i.order);s===-1?_a.push(i):_a[s].order>i.order&&_a.splice(s,0,i)}},px=i=>{if(!up.has(i))return;up.delete(i);let s=J1(_a,a=>a===i);_a.splice(s,1)}}),hF=K(i=>{var s=60103,a=60106,c=60107,h=60108,f=60114,g=60109,y=60110,w=60112,S=60113,T=60120,I=60115,A=60116,k=60121,D=60122,O=60117,F=60129,V=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,s=$("react.element"),a=$("react.portal"),c=$("react.fragment"),h=$("react.strict_mode"),f=$("react.profiler"),g=$("react.provider"),y=$("react.context"),w=$("react.forward_ref"),S=$("react.suspense"),T=$("react.suspense_list"),I=$("react.memo"),A=$("react.lazy"),k=$("react.block"),D=$("react.server.block"),O=$("react.fundamental"),F=$("react.debug_trace_mode"),V=$("react.legacy_hidden"));var $;function X(Y){if(typeof Y=="object"&&Y!==null){var Ue=Y.$$typeof;switch(Ue){case s:switch(Y=Y.type,Y){case c:case f:case h:case S:case T:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case y:case w:case A:case I:case g:return Y;default:return Ue}}case a:return Ue}}}var re=g,ne=s,ae=w,xe=c,fe=A,ge=I,Ie=a,Qe=f,le=h,Ae=S;i.ContextConsumer=y,i.ContextProvider=re,i.Element=ne,i.ForwardRef=ae,i.Fragment=xe,i.Lazy=fe,i.Memo=ge,i.Portal=Ie,i.Profiler=Qe,i.StrictMode=le,i.Suspense=Ae,i.isAsyncMode=function(){return!1},i.isConcurrentMode=function(){return!1},i.isContextConsumer=function(Y){return X(Y)===y},i.isContextProvider=function(Y){return X(Y)===g},i.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===s},i.isForwardRef=function(Y){return X(Y)===w},i.isFragment=function(Y){return X(Y)===c},i.isLazy=function(Y){return X(Y)===A},i.isMemo=function(Y){return X(Y)===I},i.isPortal=function(Y){return X(Y)===a},i.isProfiler=function(Y){return X(Y)===f},i.isStrictMode=function(Y){return X(Y)===h},i.isSuspense=function(Y){return X(Y)===S},i.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===c||Y===f||Y===F||Y===h||Y===S||Y===T||Y===V||typeof Y=="object"&&Y!==null&&(Y.$$typeof===A||Y.$$typeof===I||Y.$$typeof===g||Y.$$typeof===y||Y.$$typeof===w||Y.$$typeof===O||Y.$$typeof===k||Y[0]===D)},i.typeOf=X}),pF=K((i,s)=>{s.exports=hF()}),fx=K((i,s)=>{s.exports=function(a,c,h,f){var g=h?h.call(f,a,c):void 0;if(g!==void 0)return!!g;if(a===c)return!0;if(typeof a!="object"||!a||typeof c!="object"||!c)return!1;var y=Object.keys(a),w=Object.keys(c);if(y.length!==w.length)return!1;for(var S=Object.prototype.hasOwnProperty.bind(c),T=0;T<y.length;T++){var I=y[T];if(!S(I))return!1;var A=a[I],k=c[I];if(g=h?h.call(f,A,k,I):void 0,g===!1||g===void 0&&A!==k)return!1}return!0}});function fF(i){function s(he,qe,Ze,ot,ze){for(var Yt=0,bt=0,Wt=0,cn=0,In,Cn,Er=0,J=0,at,st=at=In=0,we=0,be=0,He=0,xt=0,Ct=Ze.length,Xe=Ct-1,At,Et="",Pt="",_n="",gr="",Hn;we<Ct;){if(Cn=Ze.charCodeAt(we),we===Xe&&bt+cn+Wt+Yt!==0&&(bt!==0&&(Cn=bt===47?10:47),cn=Wt=Yt=0,Ct++,Xe++),bt+cn+Wt+Yt===0){if(we===Xe&&(0<be&&(Et=Et.replace(A,"")),0<Et.trim().length)){switch(Cn){case 32:case 9:case 59:case 13:case 10:break;default:Et+=Ze.charAt(we)}Cn=59}switch(Cn){case 123:for(Et=Et.trim(),In=Et.charCodeAt(0),at=1,xt=++we;we<Ct;){switch(Cn=Ze.charCodeAt(we)){case 123:at++;break;case 125:at--;break;case 47:switch(Cn=Ze.charCodeAt(we+1)){case 42:case 47:e:{for(st=we+1;st<Xe;++st)switch(Ze.charCodeAt(st)){case 47:if(Cn===42&&Ze.charCodeAt(st-1)===42&&we+2!==st){we=st+1;break e}break;case 10:if(Cn===47){we=st+1;break e}}we=st}}break;case 91:Cn++;case 40:Cn++;case 34:case 39:for(;we++<Xe&&Ze.charCodeAt(we)!==Cn;);}if(at===0)break;we++}switch(at=Ze.substring(xt,we),In===0&&(In=(Et=Et.replace(I,"").trim()).charCodeAt(0)),In){case 64:switch(0<be&&(Et=Et.replace(A,"")),Cn=Et.charCodeAt(1),Cn){case 100:case 109:case 115:case 45:be=qe;break;default:be=Tt}if(at=s(qe,be,at,Cn,ze+1),xt=at.length,0<Te&&(be=a(Tt,Et,He),Hn=y(3,at,be,qe,Ae,le,xt,Cn,ze,ot),Et=be.join(""),Hn!==void 0&&(xt=(at=Hn.trim()).length)===0&&(Cn=0,at="")),0<xt)switch(Cn){case 115:Et=Et.replace(ae,g);case 100:case 109:case 45:at=Et+"{"+at+"}";break;case 107:Et=Et.replace($,"$1 $2"),at=Et+"{"+at+"}",at=Ue===1||Ue===2&&f("@"+at,3)?"@-webkit-"+at+"@"+at:"@"+at;break;default:at=Et+at,ot===112&&(at=(Pt+=at,""))}else at="";break;default:at=s(qe,a(qe,Et,He),at,ot,ze+1)}_n+=at,at=He=be=st=In=0,Et="",Cn=Ze.charCodeAt(++we);break;case 125:case 59:if(Et=(0<be?Et.replace(A,""):Et).trim(),1<(xt=Et.length))switch(st===0&&(In=Et.charCodeAt(0),In===45||96<In&&123>In)&&(xt=(Et=Et.replace(" ",":")).length),0<Te&&(Hn=y(1,Et,qe,he,Ae,le,Pt.length,ot,ze,ot))!==void 0&&(xt=(Et=Hn.trim()).length)===0&&(Et="\0\0"),In=Et.charCodeAt(0),Cn=Et.charCodeAt(1),In){case 0:break;case 64:if(Cn===105||Cn===99){gr+=Et+Ze.charAt(we);break}default:Et.charCodeAt(xt-1)!==58&&(Pt+=h(Et,In,Cn,Et.charCodeAt(2)))}He=be=st=In=0,Et="",Cn=Ze.charCodeAt(++we)}}switch(Cn){case 13:case 10:bt===47?bt=0:1+In===0&&ot!==107&&0<Et.length&&(be=1,Et+="\0"),0<Te*wt&&y(0,Et,qe,he,Ae,le,Pt.length,ot,ze,ot),le=1,Ae++;break;case 59:case 125:if(bt+cn+Wt+Yt===0){le++;break}default:switch(le++,At=Ze.charAt(we),Cn){case 9:case 32:if(cn+Yt+bt===0)switch(Er){case 44:case 58:case 9:case 32:At="";break;default:Cn!==32&&(At=" ")}break;case 0:At="\\0";break;case 12:At="\\f";break;case 11:At="\\v";break;case 38:cn+bt+Yt===0&&(be=He=1,At="\f"+At);break;case 108:if(cn+bt+Yt+Y===0&&0<st)switch(we-st){case 2:Er===112&&Ze.charCodeAt(we-3)===58&&(Y=Er);case 8:J===111&&(Y=J)}break;case 58:cn+bt+Yt===0&&(st=we);break;case 44:bt+Wt+cn+Yt===0&&(be=1,At+="\r");break;case 34:case 39:bt===0&&(cn=cn===Cn?0:cn===0?Cn:cn);break;case 91:cn+bt+Wt===0&&Yt++;break;case 93:cn+bt+Wt===0&&Yt--;break;case 41:cn+bt+Yt===0&&Wt--;break;case 40:if(cn+bt+Yt===0){if(In===0)switch(2*Er+3*J){case 533:break;default:In=1}Wt++}break;case 64:bt+Wt+cn+Yt+st+at===0&&(at=1);break;case 42:case 47:if(!(0<cn+Yt+Wt))switch(bt){case 0:switch(2*Cn+3*Ze.charCodeAt(we+1)){case 235:bt=47;break;case 220:xt=we,bt=42}break;case 42:Cn===47&&Er===42&&xt+2!==we&&(Ze.charCodeAt(xt+2)===33&&(Pt+=Ze.substring(xt,we+1)),At="",bt=0)}}bt===0&&(Et+=At)}J=Er,Er=Cn,we++}if(xt=Pt.length,0<xt){if(be=qe,0<Te&&(Hn=y(2,Pt,be,he,Ae,le,xt,ot,ze,ot),Hn!==void 0&&(Pt=Hn).length===0))return gr+Pt+_n;if(Pt=be.join(",")+"{"+Pt+"}",Ue*Y!==0){switch(Ue!==2||f(Pt,2)||(Y=0),Y){case 111:Pt=Pt.replace(re,":-moz-$1")+Pt;break;case 112:Pt=Pt.replace(X,"::-webkit-input-$1")+Pt.replace(X,"::-moz-$1")+Pt.replace(X,":-ms-input-$1")+Pt}Y=0}}return gr+Pt+_n}function a(he,qe,Ze){var ot=qe.trim().split(F);qe=ot;var ze=ot.length,Yt=he.length;switch(Yt){case 0:case 1:var bt=0;for(he=Yt===0?"":he[0]+" ";bt<ze;++bt)qe[bt]=c(he,qe[bt],Ze).trim();break;default:var Wt=bt=0;for(qe=[];bt<ze;++bt)for(var cn=0;cn<Yt;++cn)qe[Wt++]=c(he[cn]+" ",ot[bt],Ze).trim()}return qe}function c(he,qe,Ze){var ot=qe.charCodeAt(0);switch(33>ot&&(ot=(qe=qe.trim()).charCodeAt(0)),ot){case 38:return qe.replace(V,"$1"+he.trim());case 58:return he.trim()+qe.replace(V,"$1"+he.trim());default:if(0<1*Ze&&0<qe.indexOf("\f"))return qe.replace(V,(he.charCodeAt(0)===58?"":"$1")+he.trim())}return he+qe}function h(he,qe,Ze,ot){var ze=he+";",Yt=2*qe+3*Ze+4*ot;if(Yt===944){he=ze.indexOf(":",9)+1;var bt=ze.substring(he,ze.length-1).trim();return bt=ze.substring(0,he).trim()+bt+";",Ue===1||Ue===2&&f(bt,1)?"-webkit-"+bt+bt:bt}if(Ue===0||Ue===2&&!f(ze,1))return ze;switch(Yt){case 1015:return ze.charCodeAt(10)===97?"-webkit-"+ze+ze:ze;case 951:return ze.charCodeAt(3)===116?"-webkit-"+ze+ze:ze;case 963:return ze.charCodeAt(5)===110?"-webkit-"+ze+ze:ze;case 1009:if(ze.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ze+ze;case 978:return"-webkit-"+ze+"-moz-"+ze+ze;case 1019:case 983:return"-webkit-"+ze+"-moz-"+ze+"-ms-"+ze+ze;case 883:if(ze.charCodeAt(8)===45)return"-webkit-"+ze+ze;if(0<ze.indexOf("image-set(",11))return ze.replace(Qe,"$1-webkit-$2")+ze;break;case 932:if(ze.charCodeAt(4)===45)switch(ze.charCodeAt(5)){case 103:return"-webkit-box-"+ze.replace("-grow","")+"-webkit-"+ze+"-ms-"+ze.replace("grow","positive")+ze;case 115:return"-webkit-"+ze+"-ms-"+ze.replace("shrink","negative")+ze;case 98:return"-webkit-"+ze+"-ms-"+ze.replace("basis","preferred-size")+ze}return"-webkit-"+ze+"-ms-"+ze+ze;case 964:return"-webkit-"+ze+"-ms-flex-"+ze+ze;case 1023:if(ze.charCodeAt(8)!==99)break;return bt=ze.substring(ze.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+bt+"-webkit-"+ze+"-ms-flex-pack"+bt+ze;case 1005:return D.test(ze)?ze.replace(k,":-webkit-")+ze.replace(k,":-moz-")+ze:ze;case 1e3:switch(bt=ze.substring(13).trim(),qe=bt.indexOf("-")+1,bt.charCodeAt(0)+bt.charCodeAt(qe)){case 226:bt=ze.replace(ne,"tb");break;case 232:bt=ze.replace(ne,"tb-rl");break;case 220:bt=ze.replace(ne,"lr");break;default:return ze}return"-webkit-"+ze+"-ms-"+bt+ze;case 1017:if(ze.indexOf("sticky",9)===-1)break;case 975:switch(qe=(ze=he).length-10,bt=(ze.charCodeAt(qe)===33?ze.substring(0,qe):ze).substring(he.indexOf(":",7)+1).trim(),Yt=bt.charCodeAt(0)+(bt.charCodeAt(7)|0)){case 203:if(111>bt.charCodeAt(8))break;case 115:ze=ze.replace(bt,"-webkit-"+bt)+";"+ze;break;case 207:case 102:ze=ze.replace(bt,"-webkit-"+(102<Yt?"inline-":"")+"box")+";"+ze.replace(bt,"-webkit-"+bt)+";"+ze.replace(bt,"-ms-"+bt+"box")+";"+ze}return ze+";";case 938:if(ze.charCodeAt(5)===45)switch(ze.charCodeAt(6)){case 105:return bt=ze.replace("-items",""),"-webkit-"+ze+"-webkit-box-"+bt+"-ms-flex-"+bt+ze;case 115:return"-webkit-"+ze+"-ms-flex-item-"+ze.replace(fe,"")+ze;default:return"-webkit-"+ze+"-ms-flex-line-pack"+ze.replace("align-content","").replace(fe,"")+ze}break;case 973:case 989:if(ze.charCodeAt(3)!==45||ze.charCodeAt(4)===122)break;case 931:case 953:if(Ie.test(he)===!0)return(bt=he.substring(he.indexOf(":")+1)).charCodeAt(0)===115?h(he.replace("stretch","fill-available"),qe,Ze,ot).replace(":fill-available",":stretch"):ze.replace(bt,"-webkit-"+bt)+ze.replace(bt,"-moz-"+bt.replace("fill-",""))+ze;break;case 962:if(ze="-webkit-"+ze+(ze.charCodeAt(5)===102?"-ms-"+ze:"")+ze,Ze+ot===211&&ze.charCodeAt(13)===105&&0<ze.indexOf("transform",10))return ze.substring(0,ze.indexOf(";",27)+1).replace(O,"$1-webkit-$2")+ze}return ze}function f(he,qe){var Ze=he.indexOf(qe===1?":":"{"),ot=he.substring(0,qe!==3?Ze:10);return Ze=he.substring(Ze+1,he.length-1),je(qe!==2?ot:ot.replace(ge,"$1"),Ze,qe)}function g(he,qe){var Ze=h(qe,qe.charCodeAt(0),qe.charCodeAt(1),qe.charCodeAt(2));return Ze!==qe+";"?Ze.replace(xe," or ($1)").substring(4):"("+qe+")"}function y(he,qe,Ze,ot,ze,Yt,bt,Wt,cn,In){for(var Cn=0,Er=qe,J;Cn<Te;++Cn)switch(J=ke[Cn].call(T,he,Er,Ze,ot,ze,Yt,bt,Wt,cn,In)){case void 0:case!1:case!0:case null:break;default:Er=J}if(Er!==qe)return Er}function w(he){switch(he){case void 0:case null:Te=ke.length=0;break;default:if(typeof he=="function")ke[Te++]=he;else if(typeof he=="object")for(var qe=0,Ze=he.length;qe<Ze;++qe)w(he[qe]);else wt=!!he|0}return w}function S(he){return he=he.prefix,he!==void 0&&(je=null,he?typeof he!="function"?Ue=1:(Ue=2,je=he):Ue=0),S}function T(he,qe){var Ze=he;if(33>Ze.charCodeAt(0)&&(Ze=Ze.trim()),ue=Ze,Ze=[ue],0<Te){var ot=y(-1,qe,Ze,Ze,Ae,le,0,0,0,0);ot!==void 0&&typeof ot=="string"&&(qe=ot)}var ze=s(Tt,Ze,qe,0,0);return 0<Te&&(ot=y(-2,ze,Ze,Ze,Ae,le,ze.length,0,0,0),ot!==void 0&&(ze=ot)),ue="",Y=0,le=Ae=1,ze}var I=/^\0+/g,A=/[\0\r\f]/g,k=/: */g,D=/zoo|gra/,O=/([,: ])(transform)/g,F=/,\r+?/g,V=/([\t\r\n ])*\f?&/g,$=/@(k\w+)\s*(\S*)\s*/,X=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,ae=/\(\s*(.*)\s*\)/g,xe=/([\s\S]*?);/g,fe=/-self|flex-/g,ge=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ie=/stretch|:\s*\w+\-(?:conte|avail)/,Qe=/([^-])(image-set\()/,le=1,Ae=1,Y=0,Ue=1,Tt=[],ke=[],Te=0,je=null,wt=0,ue="";return T.use=w,T.set=S,i!==void 0&&S(i),T}var cp,A2=C(()=>{cp=fF}),I2,R2,mF=C(()=>{I2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},R2=I2});function vF(i){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=i(a)),s[a]}}var J0,gF=C(()=>{J0=vF}),dp,O2,mx,yF=C(()=>{gF(),dp=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,O2=J0(function(i){return dp.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),mx=O2}),bF=K(i=>{var s=typeof Symbol=="function"&&Symbol.for,a=s?Symbol.for("react.element"):60103,c=s?Symbol.for("react.portal"):60106,h=s?Symbol.for("react.fragment"):60107,f=s?Symbol.for("react.strict_mode"):60108,g=s?Symbol.for("react.profiler"):60114,y=s?Symbol.for("react.provider"):60109,w=s?Symbol.for("react.context"):60110,S=s?Symbol.for("react.async_mode"):60111,T=s?Symbol.for("react.concurrent_mode"):60111,I=s?Symbol.for("react.forward_ref"):60112,A=s?Symbol.for("react.suspense"):60113,k=s?Symbol.for("react.suspense_list"):60120,D=s?Symbol.for("react.memo"):60115,O=s?Symbol.for("react.lazy"):60116,F=s?Symbol.for("react.block"):60121,V=s?Symbol.for("react.fundamental"):60117,$=s?Symbol.for("react.responder"):60118,X=s?Symbol.for("react.scope"):60119;function re(ae){if(typeof ae=="object"&&ae!==null){var xe=ae.$$typeof;switch(xe){case a:switch(ae=ae.type,ae){case S:case T:case h:case g:case f:case A:return ae;default:switch(ae=ae&&ae.$$typeof,ae){case w:case I:case O:case D:case y:return ae;default:return xe}}case c:return xe}}}function ne(ae){return re(ae)===T}i.AsyncMode=S,i.ConcurrentMode=T,i.ContextConsumer=w,i.ContextProvider=y,i.Element=a,i.ForwardRef=I,i.Fragment=h,i.Lazy=O,i.Memo=D,i.Portal=c,i.Profiler=g,i.StrictMode=f,i.Suspense=A,i.isAsyncMode=function(ae){return ne(ae)||re(ae)===S},i.isConcurrentMode=ne,i.isContextConsumer=function(ae){return re(ae)===w},i.isContextProvider=function(ae){return re(ae)===y},i.isElement=function(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===a},i.isForwardRef=function(ae){return re(ae)===I},i.isFragment=function(ae){return re(ae)===h},i.isLazy=function(ae){return re(ae)===O},i.isMemo=function(ae){return re(ae)===D},i.isPortal=function(ae){return re(ae)===c},i.isProfiler=function(ae){return re(ae)===g},i.isStrictMode=function(ae){return re(ae)===f},i.isSuspense=function(ae){return re(ae)===A},i.isValidElementType=function(ae){return typeof ae=="string"||typeof ae=="function"||ae===h||ae===T||ae===g||ae===f||ae===A||ae===k||typeof ae=="object"&&ae!==null&&(ae.$$typeof===O||ae.$$typeof===D||ae.$$typeof===y||ae.$$typeof===w||ae.$$typeof===I||ae.$$typeof===V||ae.$$typeof===$||ae.$$typeof===X||ae.$$typeof===F)},i.typeOf=re}),vx=K((i,s)=>{s.exports=bF()}),D2=K((i,s)=>{var a=vx(),c={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},f={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},y={};y[a.ForwardRef]=f,y[a.Memo]=g;function w(F){return a.isMemo(F)?g:y[F.$$typeof]||c}var S=Object.defineProperty,T=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,D=Object.prototype;function O(F,V,$){if(typeof V!="string"){if(D){var X=k(V);X&&X!==D&&O(F,X,$)}var re=T(V);I&&(re=re.concat(I(V)));for(var ne=w(F),ae=w(V),xe=0;xe<re.length;++xe){var fe=re[xe];if(!h[fe]&&!($&&$[fe])&&!(ae&&ae[fe])&&!(ne&&ne[fe])){var ge=A(V,fe);try{S(F,fe,ge)}catch{}}}}return F}s.exports=O});function wa(){return(wa=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}).apply(this,arguments)}function Ym(i){return typeof i=="function"}function Cs(i){return i.displayName||i.name||"Component"}function Yl(i){return i&&typeof i.styledComponentId=="string"}function Oo(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw new Error("An error occurred. See https://git.io/JUIaE#"+i+" for more information."+(a.length>0?" Args: "+a.join(", "):""))}function gx(i){var s,a="";for(s=Math.abs(i);s>52;s=s/52|0)a=Ex(s%52)+a;return(Ex(s%52)+a).replace(ev,"$1-$2")}function hp(i){for(var s=0;s<i.length;s+=1){var a=i[s];if(Ym(a)&&!Yl(a))return!1}return!0}function _d(i){var s,a,c,h,f=i===void 0?Js:i,g=f.options,y=g===void 0?Js:g,w=f.plugins,S=w===void 0?wd:w,T=new cp(y),I=[],A=function(O){function F(V){if(V)try{O(V+"}")}catch{}}return function(V,$,X,re,ne,ae,xe,fe,ge,Ie){switch(V){case 1:if(ge===0&&$.charCodeAt(0)===64)return O($+";"),"";break;case 2:if(fe===0)return $+"/*|*/";break;case 3:switch(fe){case 102:case 112:return O(X[0]+$),"";default:return $+(Ie===0?"/*|*/":"")}case-2:$.split("/*|*/}").forEach(F)}}}(function(O){I.push(O)}),k=function(O,F,V){return F===0&&kx.indexOf(V[a.length])!==-1||V.match(h)?O:"."+s};function D(O,F,V,$){$===void 0&&($="&");var X=O.replace(Px,""),re=F&&V?V+" "+F+" { "+X+" }":X;return s=$,a=F,c=new RegExp("\\"+a+"\\b","g"),h=new RegExp("(\\"+a+"\\b){2,}"),T(V||!F?"":F,re)}return T.use([].concat(S,[function(O,F,V){O===2&&V.length&&V[0].lastIndexOf(a)>0&&(V[0]=V[0].replace(c,k))},A,function(O){if(O===-2){var F=I;return I=[],F}}])),D.hash=S.length?S.reduce(function(O,F){return F.name||Oo(15),Wi(O,F.name)},5381).toString():"",D}function Zm(){return(0,li.useContext)(dy)||Tx}function L2(){return(0,li.useContext)(hy)||gp}function yx(i){var s=(0,li.useState)(i.stylisPlugins),a=s[0],c=s[1],h=Zm(),f=(0,li.useMemo)(function(){var y=h;return i.sheet?y=i.sheet:i.target&&(y=y.reconstructWithOptions({target:i.target},!1)),i.disableCSSOMInjection&&(y=y.reconstructWithOptions({useCSSOMInjection:!1})),y},[i.disableCSSOMInjection,i.sheet,i.target]),g=(0,li.useMemo)(function(){return _d({options:{prefix:!i.disableVendorPrefixes},plugins:a})},[i.disableVendorPrefixes,a]);return(0,li.useEffect)(function(){(0,Qm.default)(a,i.stylisPlugins)||c(i.stylisPlugins)},[i.stylisPlugins]),li.default.createElement(dy.Provider,{value:f},li.default.createElement(hy.Provider,{value:g},i.children))}function N2(i){return H2.test(i)?i.replace(G2,Ax).replace(py,"-ms-"):i}function Zl(i,s,a,c){if(Array.isArray(i)){for(var h,f=[],g=0,y=i.length;g<y;g+=1)(h=Zl(i[g],s,a,c))!==""&&(Array.isArray(h)?f.push.apply(f,h):f.push(h));return f}if(Ix(i))return"";if(Yl(i))return"."+i.styledComponentId;if(Ym(i)){if(typeof(S=i)!="function"||S.prototype&&S.prototype.isReactComponent||!s)return i;var w=i(s);return Zl(w,s,a,c)}var S;return i instanceof Mx?a?(i.inject(a,c),i.getName(c)):i:iy(i)?function T(I,A){var k,D,O=[];for(var F in I)I.hasOwnProperty(F)&&!Ix(I[F])&&(Array.isArray(I[F])&&I[F].isCss||Ym(I[F])?O.push(N2(F)+":",I[F],";"):iy(I[F])?O.push.apply(O,T(I[F],F)):O.push(N2(F)+": "+(k=F,(D=I[F])==null||typeof D=="boolean"||D===""?"":typeof D!="number"||D===0||k in R2||k.startsWith("--")?String(D).trim():D+"px")+";"));return A?[A+" {"].concat(O,["}"]):O}(i):i.toString()}function Do(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return Ym(i)||iy(i)?Rx(Zl(ry(wd,[i].concat(a)))):a.length===0&&i.length===1&&typeof i[0]=="string"?i:Rx(Zl(ry(i,a)))}function Ql(i){return i.replace(E,"-").replace(L,"")}function pp(i){return typeof i=="string"&&!0}function bx(i,s,a){var c=i[a];ie(s)&&ie(c)?F2(c,s):i[a]=s}function F2(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];for(var h=0,f=a;h<f.length;h++){var g=f[h];if(ie(g))for(var y in g)de(y)&&bx(i,g[y],y)}return i}function ey(i,s,a){var c=Yl(i),h=!pp(i),f=s.attrs,g=f===void 0?wd:f,y=s.componentId,w=y===void 0?function($,X){var re=typeof $!="string"?"sc":Ql($);$e[re]=($e[re]||0)+1;var ne=re+"-"+q("5.3.11"+re+$e[re]);return X?X+"-"+ne:ne}(s.displayName,s.parentComponentId):y,S=s.displayName,T=S===void 0?function($){return pp($)?"styled."+$:"Styled("+Cs($)+")"}(i):S,I=s.displayName&&s.componentId?Ql(s.displayName)+"-"+s.componentId:s.componentId||w,A=c&&i.attrs?Array.prototype.concat(i.attrs,g).filter(Boolean):g,k=s.shouldForwardProp;c&&i.shouldForwardProp&&(k=s.shouldForwardProp?function($,X,re){return i.shouldForwardProp($,X,re)&&s.shouldForwardProp($,X,re)}:i.shouldForwardProp);var D,O=new z2(a,I,c?i.componentStyle:void 0),F=O.isStatic&&g.length===0,V=function($,X){return function(re,ne,ae,xe){var fe=re.attrs,ge=re.componentStyle,Ie=re.defaultProps,Qe=re.foldedComponentIds,le=re.shouldForwardProp,Ae=re.styledComponentId,Y=re.target,Ue=function(ot,ze,Yt){ot===void 0&&(ot=Js);var bt=wa({},ze,{theme:ot}),Wt={};return Yt.forEach(function(cn){var In,Cn,Er,J=cn;for(In in Ym(J)&&(J=J(bt)),J)bt[In]=Wt[In]=In==="className"?(Cn=Wt[In],Er=J[In],Cn&&Er?Cn+" "+Er:Cn||Er):J[In]}),[bt,Wt]}(v(ne,(0,li.useContext)(Me),Ie)||Js,ne,fe),Tt=Ue[0],ke=Ue[1],Te=function(ot,ze,Yt,bt){var Wt=Zm(),cn=L2(),In=ze?ot.generateAndInjectStyles(Js,Wt,cn):ot.generateAndInjectStyles(Yt,Wt,cn);return In}(ge,xe,Tt),je=ae,wt=ke.$as||ne.$as||ke.as||ne.as||Y,ue=pp(wt),he=ke!==ne?wa({},ne,{},ke):ne,qe={};for(var Ze in he)Ze[0]!=="$"&&Ze!=="as"&&(Ze==="forwardedAs"?qe.as=he[Ze]:(le?le(Ze,mx,wt):!ue||mx(Ze))&&(qe[Ze]=he[Ze]));return ne.style&&ke.style!==ne.style&&(qe.style=wa({},ne.style,{},ke.style)),qe.className=Array.prototype.concat(Qe,Ae,Te!==Ae?Te:null,ne.className,ke.className).filter(Boolean).join(" "),qe.ref=je,(0,li.createElement)(wt,qe)}(D,$,X,F)};return V.displayName=T,(D=li.default.forwardRef(V)).attrs=A,D.componentStyle=O,D.displayName=T,D.shouldForwardProp=k,D.foldedComponentIds=c?Array.prototype.concat(i.foldedComponentIds,i.styledComponentId):wd,D.styledComponentId=I,D.target=c?i.target:i,D.withComponent=function($){var X=s.componentId,re=function(ae,xe){if(ae==null)return{};var fe,ge,Ie={},Qe=Object.keys(ae);for(ge=0;ge<Qe.length;ge++)fe=Qe[ge],xe.indexOf(fe)>=0||(Ie[fe]=ae[fe]);return Ie}(s,["componentId"]),ne=X&&X+"-"+(pp($)?$:Ql(Cs($)));return ey($,wa({},re,{attrs:A,componentId:ne}),a)},Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=c?F2({},i.defaultProps,$):$}}),Object.defineProperty(D,"toString",{value:function(){return"."+D.styledComponentId}}),h&&(0,ny.default)(D,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),D}function il(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var h=Do.apply(void 0,[i].concat(a)),f="sc-global-"+q(JSON.stringify(h)),g=new gt(h,f);function y(S){var T=Zm(),I=L2(),A=(0,li.useContext)(Me),k=(0,li.useRef)(T.allocateGSInstance(f)).current;return T.server&&w(k,S,T,A,I),(0,li.useLayoutEffect)(function(){if(!T.server)return w(k,S,T,A,I),function(){return g.removeStyles(k,T)}},[k,S,T,A,I]),null}function w(S,T,I,A,k){if(g.isStatic)g.renderStyles(S,_x,I,k);else{var D=wa({},T,{theme:v(T,A,y.defaultProps)});g.renderStyles(S,D,I,k)}}return li.default.memo(y)}var ty,li,Qm,ny,ry,iy,wd,Js,ol,xd,oy,_x,sy,Sd,Ed,fp,mp,wx,vp,ay,B2,U2,xx,Jm,ly,Lo,V2,uy,Sx,j2,Jl,ev,Ex,Wi,Cx,cy,z2,Px,kx,dy,hy,Tx,gp,Mx,H2,G2,py,Ax,Ix,Rx,v,E,L,q,ie,de,Me,$e,Ke,gt,se,Ne=C(()=>{ty=Q(pF()),li=Q(Re()),Qm=Q(fx()),A2(),mF(),yF(),ny=Q(D2()),ry=function(i,s){for(var a=[i[0]],c=0,h=s.length;c<h;c+=1)a.push(s[c],i[c+1]);return a},iy=function(i){return i!==null&&typeof i=="object"&&(i.toString?i.toString():Object.prototype.toString.call(i))==="[object Object]"&&!(0,ty.typeOf)(i)},wd=Object.freeze([]),Js=Object.freeze({}),ol=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",xd=typeof window<"u"&&"HTMLElement"in window,oy=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),_x={},sy=function(){function i(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var s=i.prototype;return s.indexOfGroup=function(a){for(var c=0,h=0;h<a;h++)c+=this.groupSizes[h];return c},s.insertRules=function(a,c){if(a>=this.groupSizes.length){for(var h=this.groupSizes,f=h.length,g=f;a>=g;)(g<<=1)<0&&Oo(16,""+a);this.groupSizes=new Uint32Array(g),this.groupSizes.set(h),this.length=g;for(var y=f;y<g;y++)this.groupSizes[y]=0}for(var w=this.indexOfGroup(a+1),S=0,T=c.length;S<T;S++)this.tag.insertRule(w,c[S])&&(this.groupSizes[a]++,w++)},s.clearGroup=function(a){if(a<this.length){var c=this.groupSizes[a],h=this.indexOfGroup(a),f=h+c;this.groupSizes[a]=0;for(var g=h;g<f;g++)this.tag.deleteRule(h)}},s.getGroup=function(a){var c="";if(a>=this.length||this.groupSizes[a]===0)return c;for(var h=this.groupSizes[a],f=this.indexOfGroup(a),g=f+h,y=f;y<g;y++)c+=this.tag.getRule(y)+`/*!sc*/
`;return c},i}(),Sd=new Map,Ed=new Map,fp=1,mp=function(i){if(Sd.has(i))return Sd.get(i);for(;Ed.has(fp);)fp++;var s=fp++;return Sd.set(i,s),Ed.set(s,i),s},wx=function(i){return Ed.get(i)},vp=function(i,s){s>=fp&&(fp=s+1),Sd.set(i,s),Ed.set(s,i)},ay="style["+ol+'][data-styled-version="5.3.11"]',B2=new RegExp("^"+ol+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),U2=function(i,s,a){for(var c,h=a.split(","),f=0,g=h.length;f<g;f++)(c=h[f])&&i.registerName(s,c)},xx=function(i,s){for(var a=(s.textContent||"").split(`/*!sc*/
`),c=[],h=0,f=a.length;h<f;h++){var g=a[h].trim();if(g){var y=g.match(B2);if(y){var w=0|parseInt(y[1],10),S=y[2];w!==0&&(vp(S,w),U2(i,S,y[3]),i.getTag().insertRules(w,c)),c.length=0}else c.push(g)}}},Jm=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},ly=function(i){var s=document.head,a=i||s,c=document.createElement("style"),h=function(y){for(var w=y.childNodes,S=w.length;S>=0;S--){var T=w[S];if(T&&T.nodeType===1&&T.hasAttribute(ol))return T}}(a),f=h!==void 0?h.nextSibling:null;c.setAttribute(ol,"active"),c.setAttribute("data-styled-version","5.3.11");var g=Jm();return g&&c.setAttribute("nonce",g),a.insertBefore(c,f),c},Lo=function(){function i(a){var c=this.element=ly(a);c.appendChild(document.createTextNode("")),this.sheet=function(h){if(h.sheet)return h.sheet;for(var f=document.styleSheets,g=0,y=f.length;g<y;g++){var w=f[g];if(w.ownerNode===h)return w}Oo(17)}(c),this.length=0}var s=i.prototype;return s.insertRule=function(a,c){try{return this.sheet.insertRule(c,a),this.length++,!0}catch{return!1}},s.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},s.getRule=function(a){var c=this.sheet.cssRules[a];return c!==void 0&&typeof c.cssText=="string"?c.cssText:""},i}(),V2=function(){function i(a){var c=this.element=ly(a);this.nodes=c.childNodes,this.length=0}var s=i.prototype;return s.insertRule=function(a,c){if(a<=this.length&&a>=0){var h=document.createTextNode(c),f=this.nodes[a];return this.element.insertBefore(h,f||null),this.length++,!0}return!1},s.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},s.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},i}(),uy=function(){function i(a){this.rules=[],this.length=0}var s=i.prototype;return s.insertRule=function(a,c){return a<=this.length&&(this.rules.splice(a,0,c),this.length++,!0)},s.deleteRule=function(a){this.rules.splice(a,1),this.length--},s.getRule=function(a){return a<this.length?this.rules[a]:""},i}(),Sx=xd,j2={isServer:!xd,useCSSOMInjection:!oy},Jl=function(){function i(a,c,h){a===void 0&&(a=Js),c===void 0&&(c={}),this.options=wa({},j2,{},a),this.gs=c,this.names=new Map(h),this.server=!!a.isServer,!this.server&&xd&&Sx&&(Sx=!1,function(f){for(var g=document.querySelectorAll(ay),y=0,w=g.length;y<w;y++){var S=g[y];S&&S.getAttribute(ol)!=="active"&&(xx(f,S),S.parentNode&&S.parentNode.removeChild(S))}}(this))}i.registerId=function(a){return mp(a)};var s=i.prototype;return s.reconstructWithOptions=function(a,c){return c===void 0&&(c=!0),new i(wa({},this.options,{},a),this.gs,c&&this.names||void 0)},s.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},s.getTag=function(){return this.tag||(this.tag=(h=(c=this.options).isServer,f=c.useCSSOMInjection,g=c.target,a=h?new uy(g):f?new Lo(g):new V2(g),new sy(a)));var a,c,h,f,g},s.hasNameForId=function(a,c){return this.names.has(a)&&this.names.get(a).has(c)},s.registerName=function(a,c){if(mp(a),this.names.has(a))this.names.get(a).add(c);else{var h=new Set;h.add(c),this.names.set(a,h)}},s.insertRules=function(a,c,h){this.registerName(a,c),this.getTag().insertRules(mp(a),h)},s.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},s.clearRules=function(a){this.getTag().clearGroup(mp(a)),this.clearNames(a)},s.clearTag=function(){this.tag=void 0},s.toString=function(){return function(a){for(var c=a.getTag(),h=c.length,f="",g=0;g<h;g++){var y=wx(g);if(y!==void 0){var w=a.names.get(y),S=c.getGroup(g);if(w&&S&&w.size){var T=ol+".g"+g+'[id="'+y+'"]',I="";w!==void 0&&w.forEach(function(A){A.length>0&&(I+=A+",")}),f+=""+S+T+'{content:"'+I+`"}/*!sc*/
`}}}return f}(this)},i}(),ev=/(a)(d)/gi,Ex=function(i){return String.fromCharCode(i+(i>25?39:97))},Wi=function(i,s){for(var a=s.length;a;)i=33*i^s.charCodeAt(--a);return i},Cx=function(i){return Wi(5381,i)},cy=Cx("5.3.11"),z2=function(){function i(s,a,c){this.rules=s,this.staticRulesId="",this.isStatic=(c===void 0||c.isStatic)&&hp(s),this.componentId=a,this.baseHash=Wi(cy,a),this.baseStyle=c,Jl.registerId(a)}return i.prototype.generateAndInjectStyles=function(s,a,c){var h=this.componentId,f=[];if(this.baseStyle&&f.push(this.baseStyle.generateAndInjectStyles(s,a,c)),this.isStatic&&!c.hash)if(this.staticRulesId&&a.hasNameForId(h,this.staticRulesId))f.push(this.staticRulesId);else{var g=Zl(this.rules,s,a,c).join(""),y=gx(Wi(this.baseHash,g)>>>0);if(!a.hasNameForId(h,y)){var w=c(g,"."+y,void 0,h);a.insertRules(h,y,w)}f.push(y),this.staticRulesId=y}else{for(var S=this.rules.length,T=Wi(this.baseHash,c.hash),I="",A=0;A<S;A++){var k=this.rules[A];if(typeof k=="string")I+=k;else if(k){var D=Zl(k,s,a,c),O=Array.isArray(D)?D.join(""):D;T=Wi(T,O+A),I+=O}}if(I){var F=gx(T>>>0);if(!a.hasNameForId(h,F)){var V=c(I,"."+F,void 0,h);a.insertRules(h,F,V)}f.push(F)}}return f.join(" ")},i}(),Px=/^\s*\/\/.*$/gm,kx=[":","[",".","#"],dy=li.default.createContext(),dy.Consumer,hy=li.default.createContext(),Tx=(hy.Consumer,new Jl),gp=_d(),Mx=function(){function i(s,a){var c=this;this.inject=function(h,f){f===void 0&&(f=gp);var g=c.name+f.hash;h.hasNameForId(c.id,g)||h.insertRules(c.id,g,f(c.rules,g,"@keyframes"))},this.toString=function(){return Oo(12,String(c.name))},this.name=s,this.id="sc-keyframes-"+s,this.rules=a}return i.prototype.getName=function(s){return s===void 0&&(s=gp),this.name+s.hash},i}(),H2=/([A-Z])/,G2=/([A-Z])/g,py=/^ms-/,Ax=function(i){return"-"+i.toLowerCase()},Ix=function(i){return i==null||i===!1||i===""},Rx=function(i){return Array.isArray(i)&&(i.isCss=!0),i},v=function(i,s,a){return a===void 0&&(a=Js),i.theme!==a.theme&&i.theme||s||a.theme},E=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,L=/(^-|-$)/g,q=function(i){return gx(Cx(i)>>>0)},ie=function(i){return typeof i=="function"||typeof i=="object"&&i!==null&&!Array.isArray(i)},de=function(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"},Me=li.default.createContext(),Me.Consumer,$e={},Ke=function(i){return function s(a,c,h){if(h===void 0&&(h=Js),!(0,ty.isValidElementType)(c))return Oo(1,String(c));var f=function(){return a(c,h,Do.apply(void 0,arguments))};return f.withConfig=function(g){return s(a,c,wa({},h,{},g))},f.attrs=function(g){return s(a,c,wa({},h,{attrs:Array.prototype.concat(h.attrs,g).filter(Boolean)}))},f}(ey,i)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(i){Ke[i]=Ke(i)}),gt=function(){function i(a,c){this.rules=a,this.componentId=c,this.isStatic=hp(a),Jl.registerId(this.componentId+1)}var s=i.prototype;return s.createStyles=function(a,c,h,f){var g=f(Zl(this.rules,c,h,f).join(""),""),y=this.componentId+a;h.insertRules(y,y,g)},s.removeStyles=function(a,c){c.clearRules(this.componentId+a)},s.renderStyles=function(a,c,h,f){a>2&&Jl.registerId(this.componentId+a),this.removeStyles(a,h),this.createStyles(a,c,h,f)},i}(),function(){function i(){var a=this;this._emitSheetCSS=function(){var c=a.instance.toString();if(!c)return"";var h=Jm();return"<style "+[h&&'nonce="'+h+'"',ol+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+c+"</style>"},this.getStyleTags=function(){return a.sealed?Oo(2):a._emitSheetCSS()},this.getStyleElement=function(){var c;if(a.sealed)return Oo(2);var h=((c={})[ol]="",c["data-styled-version"]="5.3.11",c.dangerouslySetInnerHTML={__html:a.instance.toString()},c),f=Jm();return f&&(h.nonce=f),[li.default.createElement("style",wa({},h,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new Jl({isServer:!0}),this.sealed=!1}var s=i.prototype;return s.collectStyles=function(a){return this.sealed?Oo(2):li.default.createElement(yx,{sheet:this.instance},a)},s.interleaveWithNodeStream=function(a){return Oo(3)},i}(),se=Ke});function $t(){return $t=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i},$t.apply(this,arguments)}var bn=C(()=>{});function un(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var qn=C(()=>{});function Xn(i,s){return Xn=Object.setPrototypeOf||function(a,c){return a.__proto__=c,a},Xn(i,s)}var zn=C(()=>{});function fr(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,Xn(i,s)}var bo=C(()=>{zn()});function _o(i){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},_o(i)}var wo=C(()=>{});function Nr(i){return Function.toString.call(i).indexOf("[native code]")!==-1}var xo=C(()=>{});function Ps(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sl=C(()=>{});function al(i,s,a){return Ps()?al=Reflect.construct:al=function(c,h,f){var g=[null];g.push.apply(g,h);var y=Function.bind.apply(c,g),w=new y;return f&&Xn(w,f.prototype),w},al.apply(null,arguments)}var Cd=C(()=>{zn(),sl()});function eu(i){var s=typeof Map=="function"?new Map:void 0;return eu=function(a){if(a===null||!Nr(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(a))return s.get(a);s.set(a,c)}function c(){return al(a,arguments,_o(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Xn(c,a)},eu(i)}var Pd=C(()=>{wo(),zn(),xo(),Cd()}),kd=C(()=>{});function Ni(i){return i.charAt(0).toUpperCase()+i.slice(1)}function ks(i,s){if(!i)return s.toLowerCase();var a=i.split("-");if(a.length>1)return a.splice(1,0,s),a.reduce(function(h,f){return""+h+Ni(f)});var c=i.replace(/([a-z])([A-Z])/g,"$1"+s+"$2");return i===c?""+i+s:c}function $r(i,s){for(var a={},c=0;c<s.length;c+=1)(s[c]||s[c]===0)&&(a[ks(i,Y$[c])]=s[c]);return a}function ll(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var h=a[0],f=a[1],g=f===void 0?h:f,y=a[2],w=y===void 0?h:y,S=a[3],T=S===void 0?g:S,I=[h,g,w,T];return $r(i,I)}function xa(i){return Math.round(i*255)}function OSe(i,s,a){return xa(i)+","+xa(s)+","+xa(a)}function Ox(i,s,a,c){if(c===void 0&&(c=OSe),s===0)return c(a,a,a);var h=(i%360+360)%360/60,f=(1-Math.abs(2*a-1))*s,g=f*(1-Math.abs(h%2-1)),y=0,w=0,S=0;h>=0&&h<1?(y=f,w=g):h>=1&&h<2?(y=g,w=f):h>=2&&h<3?(w=f,S=g):h>=3&&h<4?(w=g,S=f):h>=4&&h<5?(y=g,S=f):h>=5&&h<6&&(y=f,S=g);var T=a-f/2,I=y+T,A=w+T,k=S+T;return c(I,A,k)}function DSe(i){if(typeof i!="string")return i;var s=i.toLowerCase();return PF[s]?"#"+PF[s]:i}function _F(i){if(typeof i!="string")throw new tu(3);var s=DSe(i);if(s.match(Z$))return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16)};if(s.match(Q$)){var a=parseFloat((parseInt(""+s[7]+s[8],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16),alpha:a}}if(s.match(J$))return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16)};if(s.match(eW)){var c=parseFloat((parseInt(""+s[4]+s[4],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16),alpha:c}}var h=q2.exec(s);if(h)return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)};var f=tW.exec(s.substring(0,50));if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+f[4])};var g=nW.exec(s);if(g){var y=parseInt(""+g[1],10),w=parseInt(""+g[2],10)/100,S=parseInt(""+g[3],10)/100,T="rgb("+Ox(y,w,S)+")",I=q2.exec(T);if(!I)throw new tu(4,s,T);return{red:parseInt(""+I[1],10),green:parseInt(""+I[2],10),blue:parseInt(""+I[3],10)}}var A=rW.exec(s.substring(0,50));if(A){var k=parseInt(""+A[1],10),D=parseInt(""+A[2],10)/100,O=parseInt(""+A[3],10)/100,F="rgb("+Ox(k,D,O)+")",V=q2.exec(F);if(!V)throw new tu(4,s,F);return{red:parseInt(""+V[1],10),green:parseInt(""+V[2],10),blue:parseInt(""+V[3],10),alpha:parseFloat(""+A[4])}}throw new tu(5)}function LSe(i){var s=i.red/255,a=i.green/255,c=i.blue/255,h=Math.max(s,a,c),f=Math.min(s,a,c),g=(h+f)/2;if(h===f)return i.alpha!==void 0?{hue:0,saturation:0,lightness:g,alpha:i.alpha}:{hue:0,saturation:0,lightness:g};var y,w=h-f,S=g>.5?w/(2-h-f):w/(h+f);switch(h){case s:y=(a-c)/w+(a<c?6:0);break;case a:y=(c-s)/w+2;break;default:y=(s-a)/w+4;break}return y*=60,i.alpha!==void 0?{hue:y,saturation:S,lightness:g,alpha:i.alpha}:{hue:y,saturation:S,lightness:g}}function wF(i){return LSe(_F(i))}function tv(i){var s=i.toString(16);return s.length===1?"0"+s:s}function xF(i){return tv(Math.round(i*255))}function NSe(i,s,a){return X2("#"+xF(i)+xF(s)+xF(a))}function $2(i,s,a){return Ox(i,s,a,NSe)}function FSe(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return $2(i,s,a);if(typeof i=="object"&&s===void 0&&a===void 0)return $2(i.hue,i.saturation,i.lightness);throw new tu(1)}function BSe(i,s,a,c){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?$2(i,s,a):"rgba("+Ox(i,s,a)+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?$2(i.hue,i.saturation,i.lightness):"rgba("+Ox(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new tu(2)}function SF(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return X2("#"+tv(i)+tv(s)+tv(a));if(typeof i=="object"&&s===void 0&&a===void 0)return X2("#"+tv(i.red)+tv(i.green)+tv(i.blue));throw new tu(6)}function q$(i,s,a,c){if(typeof i=="string"&&typeof s=="number"){var h=_F(i);return"rgba("+h.red+","+h.green+","+h.blue+","+s+")"}else{if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?SF(i,s,a):"rgba("+i+","+s+","+a+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?SF(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")"}throw new tu(7)}function EF(i){if(typeof i!="object")throw new tu(8);if(oW(i))return q$(i);if(iW(i))return SF(i);if(aW(i))return BSe(i);if(sW(i))return FSe(i);throw new tu(8)}function X$(i,s,a){return function(){var c=a.concat(Array.prototype.slice.call(arguments));return c.length>=s?i.apply(this,c):X$(i,s,c)}}function W2(i){return X$(i,i.length,[])}function K2(i,s,a){return Math.max(i,Math.min(s,a))}function USe(i,s){if(s==="transparent")return s;var a=wF(s);return EF($t({},a,{lightness:K2(0,1,a.lightness-parseFloat(i))}))}function VSe(i,s){if(s==="transparent")return s;var a=wF(s);return EF($t({},a,{lightness:K2(0,1,a.lightness+parseFloat(i))}))}function jSe(i,s){if(s==="transparent")return s;var a=wF(s);return EF($t({},a,{saturation:K2(0,1,a.saturation+parseFloat(i))}))}function zSe(i,s){if(s==="transparent")return s;var a=_F(s),c=typeof a.alpha=="number"?a.alpha:1,h=$t({},a,{alpha:K2(0,1,+(c*100-parseFloat(i)*100).toFixed(2)/100)});return q$(h)}function CF(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return lW.indexOf(i)>=0&&i?$t({},ll.apply(void 0,[""].concat(a)),{position:i}):ll.apply(void 0,["",i].concat(a))}var tu,Y$,PF,Z$,Q$,J$,eW,q2,tW,nW,rW,X2,iW,oW,sW,aW,Dx,fy,Y2,nu,lW,Sa=C(()=>{bn(),qn(),bo(),Pd(),kd(),tu=function(i){fr(s,i);function s(a){var c;return c=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+a+" for more information.")||this,un(c)}return s}(eu(Error)),Y$=["Top","Right","Bottom","Left"],PF={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z$=/^#[a-fA-F0-9]{6}$/,Q$=/^#[a-fA-F0-9]{8}$/,J$=/^#[a-fA-F0-9]{3}$/,eW=/^#[a-fA-F0-9]{4}$/,q2=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,tW=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,nW=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,rW=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,X2=function(i){return i.length===7&&i[1]===i[2]&&i[3]===i[4]&&i[5]===i[6]?"#"+i[1]+i[3]+i[5]:i},iW=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},oW=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&typeof i.alpha=="number"},sW=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},aW=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&typeof i.alpha=="number"},Dx=W2(USe),fy=W2(VSe),Y2=W2(jSe),nu=W2(zSe),lW=["absolute","fixed","relative","static","sticky"]});function HSe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function uW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),a.push.apply(a,c)}return a}function nv(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?uW(Object(a),!0).forEach(function(c){HSe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):uW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function my(i,s){if(i==null)return{};var a={},c=Object.keys(i),h,f;for(f=0;f<c.length;f++)h=c[f],!(s.indexOf(h)>=0)&&(a[h]=i[h]);return a}var Lx=C(()=>{}),cW,kF,dW=C(()=>{cW=Q(Re()),kF=(0,cW.createContext)({})});function GSe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function hW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),a.push.apply(a,c)}return a}function vy(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?hW(Object(a),!0).forEach(function(c){GSe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):hW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function TF(i,s){if(i==null)return{};var a={},c=Object.keys(i),h,f;for(f=0;f<c.length;f++)h=c[f],!(s.indexOf(h)>=0)&&(a[h]=i[h]);return a}function $Se(i,s){if(i){if(typeof i=="string")return pW(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pW(i,s)}}function pW(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,c=new Array(s);a<s;a++)c[a]=i[a];return c}function fW(i,s){var a;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(a=$Se(i))||s&&i&&typeof i.length=="number"){a&&(i=a);var c=0;return function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return a=i[Symbol.iterator](),a.next.bind(a)}var Z2=C(()=>{});function WSe(i){return typeof i=="function"}var MF,mW,KSe=C(()=>{MF=Q(Re()),dW(),Z2(),mW=function(i,s,a){a===void 0&&(a=s.children);var c=(0,MF.useContext)(kF);if(c.useCreateElement)return c.useCreateElement(i,s,a);if(typeof i=="string"&&WSe(a)){s.children;var h=TF(s,["children"]);return a(h)}return(0,MF.createElement)(i,s,a)}});function qSe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function vW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),a.push.apply(a,c)}return a}function gy(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?vW(Object(a),!0).forEach(function(c){qSe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):vW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function XSe(i,s){if(i==null)return{};var a={},c=Object.keys(i),h,f;for(f=0;f<c.length;f++)h=c[f],!(s.indexOf(h)>=0)&&(a[h]=i[h]);return a}var gW=C(()=>{});function YSe(i){return typeof i=="object"&&i!=null}var ZSe=C(()=>{});function AF(i){var s;if(!YSe(i))return!1;var a=Object.getPrototypeOf(i);return a==null?!0:((s=a.constructor)===null||s===void 0?void 0:s.toString())===Object.toString()}var yW=C(()=>{ZSe()});function bW(i,s){for(var a=Object.keys(i),c={},h={},f=0,g=a;f<g.length;f++){var y=g[f];s.indexOf(y)>=0?c[y]=i[y]:h[y]=i[y]}return[c,h]}function _W(i,s){if(s===void 0&&(s=[]),!AF(i.state))return bW(i,s);var a=bW(i,[].concat(s,["state"])),c=a[0],h=a[1],f=c.state,g=XSe(c,["state"]);return[gy(gy({},f),g),h]}var QSe=C(()=>{gW(),yW()});function Q2(i,s){if(i===s)return!0;if(!i||!s||typeof i!="object"||typeof s!="object")return!1;var a=Object.keys(i),c=Object.keys(s),h=a.length;if(c.length!==h)return!1;for(var f=0,g=a;f<g.length;f++){var y=g[f];if(i[y]!==s[y])return!1}return!0}var IF=C(()=>{});function wW(i){return i.name==="normalizePropsAreEqualInner"?i:function(s,a){return!AF(s.state)||!AF(a.state)?i(s,a):i(gy(gy({},s.state),s),gy(gy({},a.state),a))}}var JSe=C(()=>{gW(),yW()});function eEe(i){return(0,RF.forwardRef)(i)}function tEe(i,s){return(0,RF.memo)(i,s)}function Nx(i){var s=i.as,a=i.useHook,c=i.memo,h=i.propsAreEqual,f=h===void 0?a==null?void 0:a.unstable_propsAreEqual:h,g=i.keys,y=g===void 0?(a==null?void 0:a.__keys)||[]:g,w=i.useCreateElement,S=w===void 0?mW:w,T=function(I,A){var k=I.as,D=k===void 0?s:k,O=TF(I,["as"]);if(a){var F,V=_W(O,y),$=V[0],X=V[1],re=a($,vy({ref:A},X)),ne=re.wrapElement,ae=TF(re,["wrapElement"]),xe=((F=D.render)===null||F===void 0?void 0:F.__keys)||D.__keys,fe=xe&&_W(O,xe)[0],ge=fe?vy(vy({},ae),fe):ae,Ie=S(D,ge);return ne?ne(Ie):Ie}return S(D,vy({ref:A},O))};return T=eEe(T),c&&(T=tEe(T,f&&wW(f))),T.__keys=y,T.unstable_propsAreEqual=wW(f||Q2),T}var RF,Fx=C(()=>{RF=Q(Re()),Z2(),KSe(),QSe(),IF(),JSe()});function xW(i,s){(0,OF.useDebugValue)(i);var a=(0,OF.useContext)(kF);return a[i]!=null?a[i]:s}var OF,SW=C(()=>{OF=Q(Re()),dW()});function nEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Props";(0,EW.useDebugValue)(c);var h=xW(c);return h?h(s,a):a}var EW,rEe=C(()=>{EW=Q(Re()),SW()});function iEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Options";(0,CW.useDebugValue)(c);var h=xW(c);return h?vy(vy({},s),h(s,a)):s}var CW,oEe=C(()=>{CW=Q(Re()),SW(),Z2()});function sEe(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}var aEe=C(()=>{});function Bx(i){var s,a,c=sEe(i.compose),h=function(y,w){if(i.useOptions&&(y=i.useOptions(y,w)),i.name&&(y=iEe(i.name,y,w)),i.compose)for(var S=fW(c),T;!(T=S()).done;){var I=T.value;y=I.__useOptions(y,w)}return y},f=function(y,w,S){if(y===void 0&&(y={}),w===void 0&&(w={}),S===void 0&&(S=!1),S||(y=h(y,w)),i.useProps&&(w=i.useProps(y,w)),i.name&&(w=nEe(i.name,y,w)),i.compose)if(i.useComposeOptions&&(y=i.useComposeOptions(y,w)),i.useComposeProps)w=i.useComposeProps(y,w);else for(var T=fW(c),I;!(I=T()).done;){var A=I.value;w=A(y,w,!0)}var k={},D=w||{};for(var O in D)D[O]!==void 0&&(k[O]=D[O]);return k};f.__useOptions=h;var g=c.reduce(function(y,w){return y.push.apply(y,w.__keys||[]),y},[]);return f.__keys=[].concat(g,((s=i.useState)===null||s===void 0?void 0:s.__keys)||[],i.keys||[]),f.unstable_propsAreEqual=i.propsAreEqual||((a=c[0])===null||a===void 0?void 0:a.unstable_propsAreEqual)||Q2,f}var Ux=C(()=>{Q(Re()),rEe(),Z2(),oEe(),IF(),aEe()});function PW(i,s){s===void 0&&(s=null),i&&(typeof i=="function"?i(s):i.current=s)}function kW(i,s){return(0,TW.useMemo)(function(){return i==null&&s==null?null:function(a){PW(i,a),PW(s,a)}},[i,s])}var TW,MW=C(()=>{TW=Q(Re())});function DF(i){if(i.tagName==="BUTTON")return!0;if(i.tagName==="INPUT"){var s=i;return AW.indexOf(s.type)!==-1}return!1}var AW,LF=C(()=>{AW=["button","color","file","image","reset","submit"]}),NF=C(()=>{}),lEe=C(()=>{NF(),Q(Re())}),J2=C(()=>{NF(),Q(Re()),lEe()});function IW(i){return i?i.ownerDocument||i:document}var RW=C(()=>{});function uEe(i){return i&&IW(i).defaultView||OW}var OW,cEe=C(()=>{RW();try{OW=window}catch{}});function dEe(){var i=uEe();return!!(typeof i<"u"&&i.document&&i.document.createElement)}var eA,FF=C(()=>{cEe(),eA=dEe()}),BF,UF,VF=C(()=>{BF=Q(Re()),FF(),UF=eA?BF.useLayoutEffect:BF.useEffect});function yy(i){var s=(0,DW.useRef)(i);return UF(function(){s.current=i}),s}var DW,LW=C(()=>{DW=Q(Re()),VF()});function hEe(i){return i.target===i.currentTarget}var pEe=C(()=>{});function fEe(i){var s=IW(i),a=s.activeElement;return a!=null&&a.nodeName?a:null}var mEe=C(()=>{RW()});function NW(i,s){return i===s||i.contains(s)}var FW=C(()=>{});function vEe(i){var s=fEe(i);if(!s)return!1;if(NW(i,s))return!0;var a=s.getAttribute("aria-activedescendant");return a?a===i.id?!0:!!i.querySelector("#"+a):!1}var gEe=C(()=>{mEe(),FW()});function yEe(i){return!NW(i.currentTarget,i.target)}var bEe=C(()=>{FW()});function tA(i){return eA?window.navigator.userAgent.indexOf(i)!==-1:!1}var _Ee=C(()=>{FF()});function wEe(i,s){return"matches"in i?i.matches(s):"msMatchesSelector"in i?i.msMatchesSelector(s):i.webkitMatchesSelector(s)}var xEe=C(()=>{});function SEe(i){var s=i;return s.offsetWidth>0||s.offsetHeight>0||i.getClientRects().length>0}function EEe(i){return wEe(i,BW)&&SEe(i)}var BW,CEe=C(()=>{xEe(),BW="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),UW,nA,VW=C(()=>{Lx(),Fx(),Ux(),IF(),UW=["unstable_system"],nA=Bx({name:"Role",keys:UW,propsAreEqual:function(i,s){var a=i.unstable_system,c=my(i,["unstable_system"]),h=s.unstable_system,f=my(s,["unstable_system"]);return a!==h&&!Q2(a,h)?!1:Q2(c,f)}}),Nx({as:"div",useHook:nA})});function jW(i){!vEe(i)&&EEe(i)&&i.focus()}function PEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.tagName==="A"}function kEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"}function TEe(i,s,a,c){return i?s&&!a?-1:void 0:s?c:c||0}function jF(i,s){return(0,by.useCallback)(function(a){var c;(c=i.current)===null||c===void 0||c.call(i,a),!a.defaultPrevented&&s&&(a.stopPropagation(),a.preventDefault())},[i,s])}var by,zW,HW,zF,MEe=C(()=>{Lx(),Fx(),Ux(),by=Q(Re()),MW(),LF(),J2(),LW(),VF(),gEe(),bEe(),_Ee(),CEe(),VW(),zW=["disabled","focusable"],HW=tA("Mac")&&!tA("Chrome")&&(tA("Safari")||tA("Firefox")),zF=Bx({name:"Tabbable",compose:nA,keys:zW,useOptions:function(i,s){var a=s.disabled;return nv({disabled:a},i)},useProps:function(i,s){var a=s.ref,c=s.tabIndex,h=s.onClickCapture,f=s.onMouseDownCapture,g=s.onMouseDown,y=s.onKeyPressCapture,w=s.style,S=my(s,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),T=(0,by.useRef)(null),I=yy(h),A=yy(f),k=yy(g),D=yy(y),O=!!i.disabled&&!i.focusable,F=(0,by.useState)(!0),V=F[0],$=F[1],X=(0,by.useState)(!0),re=X[0],ne=X[1],ae=i.disabled?nv({pointerEvents:"none"},w):w;UF(function(){var Qe=T.current;Qe&&(PEe(Qe)||$(!1),kEe(Qe)||ne(!1))},[]);var xe=jF(I,i.disabled),fe=jF(A,i.disabled),ge=jF(D,i.disabled),Ie=(0,by.useCallback)(function(Qe){var le;(le=k.current)===null||le===void 0||le.call(k,Qe);var Ae=Qe.currentTarget;if(!Qe.defaultPrevented&&HW&&!yEe(Qe)&&DF(Ae)){var Y=requestAnimationFrame(function(){Ae.removeEventListener("mouseup",Ue,!0),jW(Ae)}),Ue=function(){cancelAnimationFrame(Y),jW(Ae)};Ae.addEventListener("mouseup",Ue,{once:!0,capture:!0})}},[]);return nv({ref:kW(T,a),style:ae,tabIndex:TEe(O,V,re,c),disabled:O&&re?!0:void 0,"aria-disabled":i.disabled?!0:void 0,onClickCapture:xe,onMouseDownCapture:fe,onMouseDown:Ie,onKeyPressCapture:ge},S)}}),Nx({as:"div",useHook:zF})});function AEe(i){var s=i.currentTarget;return i.isTrusted?DF(s)||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="A"||s.tagName==="SELECT":!1}var rA,GW,HF,IEe=C(()=>{Lx(),Fx(),Ux(),rA=Q(Re()),LF(),J2(),LW(),pEe(),MEe(),GW=["unstable_clickOnEnter","unstable_clickOnSpace"],HF=Bx({name:"Clickable",compose:zF,keys:GW,useOptions:function(i){var s=i.unstable_clickOnEnter,a=s===void 0?!0:s,c=i.unstable_clickOnSpace,h=c===void 0?!0:c,f=my(i,["unstable_clickOnEnter","unstable_clickOnSpace"]);return nv({unstable_clickOnEnter:a,unstable_clickOnSpace:h},f)},useProps:function(i,s){var a=s.onKeyDown,c=s.onKeyUp,h=my(s,["onKeyDown","onKeyUp"]),f=(0,rA.useState)(!1),g=f[0],y=f[1],w=yy(a),S=yy(c),T=(0,rA.useCallback)(function(A){var k;if((k=w.current)===null||k===void 0||k.call(w,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey&&hEe(A)){var D=i.unstable_clickOnEnter&&A.key==="Enter",O=i.unstable_clickOnSpace&&A.key===" ";if(D||O){if(AEe(A))return;A.preventDefault(),D?A.currentTarget.click():O&&y(!0)}}},[i.disabled,i.unstable_clickOnEnter,i.unstable_clickOnSpace]),I=(0,rA.useCallback)(function(A){var k;if((k=S.current)===null||k===void 0||k.call(S,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey){var D=i.unstable_clickOnSpace&&A.key===" ";g&&D&&(y(!1),A.currentTarget.click())}},[i.disabled,i.unstable_clickOnSpace,g]);return nv({"data-active":g||void 0,onKeyDown:T,onKeyUp:I},h)}}),Nx({as:"button",memo:!0,useHook:HF})}),Vx,$W,WW,KW,REe=C(()=>{Lx(),Fx(),Ux(),Vx=Q(Re()),MW(),LF(),J2(),IEe(),$W=[],WW=Bx({name:"Button",compose:HF,keys:$W,useProps:function(i,s){var a=s.ref,c=my(s,["ref"]),h=(0,Vx.useRef)(null),f=(0,Vx.useState)(void 0),g=f[0],y=f[1],w=(0,Vx.useState)("button"),S=w[0],T=w[1];return(0,Vx.useEffect)(function(){var I=h.current;I&&(DF(I)||(I.tagName!=="A"&&y("button"),T(void 0)))},[]),nv({ref:kW(h,a),role:g,type:S},c)}}),KW=Nx({as:"button",memo:!0,useHook:WW})}),qW,XW,YW,OEe=C(()=>{Lx(),Fx(),Ux(),VW(),qW=[],XW=Bx({name:"Group",compose:nA,keys:qW,useProps:function(i,s){return nv({role:"group"},s)}}),YW=Nx({as:"div",useHook:XW})});function DEe(){return eA?document.body:null}var ZW,_y,LEe=C(()=>{ZW=Q(Re()),VF(),FF(),Q(ql()),_y=(0,ZW.createContext)(DEe())}),GF,NEe=C(()=>{typeof window<"u"&&(GF={get passive(){}},window.addEventListener("testPassive",null,GF),window.removeEventListener("testPassive",null,GF))}),rv=C(()=>{Q(Re()),J2(),REe(),OEe(),Q(ql()),LEe(),NEe(),NF()});function sr(i){let s=(0,$F.useMemo)(()=>{let h=i;return{get current(){return h},set current(f){h=f,c(f)}}},[]),[a,c]=(0,$F.useState)(()=>i);return[s,a]}var $F,mr=C(()=>{$F=Q(Re())});function FEe(i){return s=>rs.default.createElement(r7,null,rs.default.createElement(i,j({},s)))}var rs,QW,JW,hr,wy,e7,t7,n7,WF,KF,r7,vr=C(()=>{Sa(),Ne(),Ne(),rs=Q(Re()),QW=Q(ql()),rv(),mr(),hr=Do(JW||(JW=H([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),wy={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return fy(.6,wy.panel.bg)}}}}}},t7=typeof window<"u"?il(e7||(e7=H([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},WF=se.div(n7||(n7=H([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),KF=i=>rs.default.createElement(yx,{disableVendorPrefixes:!0,target:i.target},rs.default.createElement(rs.default.Fragment,null,rs.default.createElement(t7,null),i.children)),r7=i=>{let[s,a]=(0,rs.useState)(null),[c,h]=(0,rs.useState)(null);(0,rs.useLayoutEffect)(()=>{if(!s)return;let{parentNode:y}=s;if(!y)return;let w=y.shadowRoot?parent.shadowRoot:y.attachShadow({mode:"open"});h(w)},[s]);let[f,g]=sr(void 0);return c?QW.default.createPortal(rs.default.createElement(KF,{target:c},rs.default.createElement(rs.default.Fragment,null,rs.default.createElement(WF,{ref:f}),rs.default.createElement(_y.Provider,{value:g},i.children))),c):rs.default.createElement("template",{ref:a,"shadow-root":"open"},i.children)}}),xy,i7,o7,yp,s7,jx,a7,l7,iA,u7,qF,rc,Td=C(()=>{vr(),Ne(),xy={get outlinePanel(){return 1},get propsPanel(){return xy.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},i7=wy.panel.bg,yp=se.span(o7||(o7=H([`
  white-space: nowrap;
`]))),jx=se.span(s7||(s7=H([`
  white-space: nowrap;
  color: `,`;
`])),wy.panel.head.punctuation.color),l7=se.div(a7||(a7=H([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),i7),iA=18,qF=se.div(u7||(u7=H([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),iA),rc=100}),c7,ru,Sy=C(()=>{c7=()=>{},ru=c7});function BEe(i){return XF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),XF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var XF,YF,UEe=C(()=>{XF=Q(Re()),YF=BEe});function VEe(i){return ZF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),ZF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var ZF,d7,jEe=C(()=>{ZF=Q(Re()),d7=VEe});function zEe(i){return QF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),QF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var QF,h7,HEe=C(()=>{QF=Q(Re()),h7=zEe});function GEe(i){return JF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),JF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var JF,p7,$Ee=C(()=>{JF=Q(Re()),p7=GEe});function WEe(i){return eB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),eB.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var eB,tB,KEe=C(()=>{eB=Q(Re()),tB=WEe});function qEe(i){return nB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),nB.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var nB,oA,XEe=C(()=>{nB=Q(Re()),oA=qEe});function YEe(i){return rB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),rB.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var rB,iB,ZEe=C(()=>{rB=Q(Re()),iB=YEe}),zx=C(()=>{UEe(),jEe(),HEe(),$Ee(),KEe(),XEe(),ZEe()}),ic,f7,sA,m7,v7,g7,y7,b7,_7,w7,x7,S7,E7,C7,P7,k7,T7,M7,Hx,aA=C(()=>{ic=Q(Re()),Ne(),Sy(),vr(),zx(),sA=se.li(f7||(f7=H([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),v7=se.div(m7||(m7=H([""]))),y7=se(v7)(g7||(g7=H([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),_7=Do(b7||(b7=H([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),x7=se.span(w7||(w7=H([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),_7,hr),E7=se.div(S7||(S7=H([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),P7=se.span(C7||(C7=H([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),sA),T7=se.ul(k7||(k7=H([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),sA),M7=({label:i,children:s,depth:a,select:c,selectionStatus:h,labelDecoration:f,collapsed:g=!1,setIsCollapsed:y})=>{let w=s!==void 0;return ic.default.createElement(sA,{style:{"--depth":a},className:g?"collapsed":""},ic.default.createElement(y7,{className:h,onClick:c??ru,"data-header":!0},ic.default.createElement(E7,null,w?ic.default.createElement(P7,{onClick:S=>{S.stopPropagation(),S.preventDefault(),y==null||y(!g)}},ic.default.createElement(d7,null)):ic.default.createElement(tB,null)),ic.default.createElement(x7,null,ic.default.createElement("span",null,i)),f),w&&ic.default.createElement(T7,null,s))},Hx=M7});function QEe(i){return Object.keys(i)}function JEe(i){return Object.keys((0,oc.val)(i.sheetTemplatesP))}function eCe(){let i=ns(bp().filter(s=>Gt(s)||Dt(s)).map(s=>Dt(s)?s.sheet:s))[0];if(i)return i.getSequence()}var oc,bp,A7,_p=C(()=>{oc=Mt,Wn(),Qr(),Fe(),bp=()=>{var i;let s=(0,oc.val)(me().projectsP),a=((i=(0,oc.val)(me().atomP.historic.panels.outlinePanel.selection))!=null?i:[]).map(c=>{let h=s[c.projectId];if(!h)return;if(c.type==="Project")return h;if(!(0,oc.val)(h.sheetTemplatesP[c.sheetId]))return;let f=A7(h,c.sheetId);if(!f)return;if(c.type==="Sheet")return f;let g=(0,oc.val)(f.objectsP[c.objectKey]);if(g)return g});return ns(a.filter(c=>typeof c<"u"))},A7=(i,s)=>{let a=me().atomP.historic.projects.stateByProjectId[i.address.projectId],c=(0,oc.val)(a.stateBySheetId[s].selectedInstanceId),h=(0,oc.val)(i.sheetTemplatesP[s]);if(h){if(c)return(0,oc.val)(h.instancesP[c]);{let f=(0,oc.val)(h.instancesP);return f[QEe(f)[0]]}}}}),I7,R7,tCe=C(()=>{Fe(),I7=Q(Re()),aA(),hn(),_p(),R7=({sheetObject:i,depth:s,overrideLabel:a})=>{let c=()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},h=Un(()=>bp(),[]);return I7.default.createElement(Hx,{select:c,label:a??i.address.objectKey,depth:s,selectionStatus:h.includes(i)?"selected":"not-selected"})}});function oB(i){var s;let a=i.type==="namespace"?"namespace:".concat(i.sheet.address.sheetId,":").concat(i.path.join("/")):i.type==="Theatre_Project"?"project":i.type==="Theatre_Sheet"?"sheetInstance:".concat(i.address.sheetId,":").concat(i.address.sheetInstanceId):"unknown",c=i.type==="namespace"?i.sheet.address.projectId:i.address.projectId,h=(s=$n(me().atomP.ahistoric.projects.stateByProjectId[c].collapsedItemsInOutline[a]))!=null?s:!1,f=(0,O7.useCallback)(g=>{me().transaction(({stateEditors:y})=>{y.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:c,isCollapsed:g,itemKey:a})})},[a]);return{collapsed:h,setCollapsed:f}}var O7,sB=C(()=>{O7=Q(Re()),Fe(),hn()});function D7(i){return sc.default.createElement(sc.default.Fragment,null,[...i.namespace.entries()].map(([s,{object:a,nested:c}])=>sc.default.createElement(nCe,{key:s,label:s,object:a,nested:c,visualIndentation:i.visualIndentation,path:i.path,sheet:i.sheet})))}function nCe(i){let{nested:s,label:a,object:c,sheet:h}=i,{collapsed:f,setCollapsed:g}=oB({type:"namespace",sheet:h,path:[...i.path,a]}),y=s&&sc.default.createElement(D7,{namespace:s,path:[...i.path,a],key:"namespaceTree("+a+")",visualIndentation:i.visualIndentation+1,sheet:h}),w=c&&sc.default.createElement(R7,{depth:i.visualIndentation,key:"objectPath("+c.address.objectKey+")",sheetObject:c,overrideLabel:a});return sc.default.createElement(sc.default.Fragment,{key:"".concat(a," - ").concat(i.visualIndentation)},w,y&&sc.default.createElement(Hx,{selectionStatus:"not-selectable",label:a,key:"baseItem(".concat(a,")"),depth:i.visualIndentation,children:y,collapsed:f,setIsCollapsed:g}))}function L7(i,s,a=rCe(s)){let[c,...h]=a,f=i.get(c);f||(f={nested:void 0,object:void 0,path:[...a]},i.set(c,f)),h.length===0?(console.assert(!f.object,"expect not to have existing object with same name",{existing:f,object:s}),f.object=s):(f.nested||(f.nested=new Map),L7(f.nested,s,h))}function rCe(i){let s=aB.get(i);return s||(s=i.address.objectKey.split(V7),console.assert(s.length>0,"expected not empty"),aB.set(i,s)),s}var N7,sc,F7,B7,U7,V7,aB,iCe=C(()=>{hn(),N7=Mt,sc=Q(Re()),Ne(),tCe(),aA(),sB(),se.li(F7||(F7=H([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),B7=({sheet:i,depth:s})=>Un(()=>{let a=(0,N7.val)(i.objectsP),c=Object.values(a).filter(f=>f!=null),h=new Map;return c.forEach(f=>{L7(h,f)}),sc.default.createElement(D7,{namespace:h,visualIndentation:s,path:[],sheet:i})},[i,s]),U7=B7,V7=/\s*\/\s*/g,aB=new WeakMap}),Ey,j7,z7,H7,G7,$7,W7,oCe=C(()=>{Fe(),_p(),hn(),Ey=Q(Re()),Ne(),iCe(),aA(),sB(),z7=se.div(j7||(j7=H([`
  display: flex;
`]))),se.li(H7||(H7=H([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),$7=se.div(G7||(G7=H([""]))),W7=({sheet:i,depth:s})=>{let{collapsed:a,setCollapsed:c}=oB(i),h=(0,Ey.useCallback)(()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},[i]);return Un(()=>{let f=bp();return Ey.default.createElement(Hx,{depth:s,select:h,setIsCollapsed:c,collapsed:a,selectionStatus:f.some(g=>g===i)?"selected":f.some(g=>g.type==="Theatre_SheetObject"&&g.sheet===i)?"descendant-is-selected":"not-selected",label:Ey.default.createElement(z7,null,i.address.sheetId,": ",i.address.sheetInstanceId)},Ey.default.createElement($7,null,Ey.default.createElement(U7,{depth:s+1,sheet:i,key:"objectList"+i.address.sheetInstanceId})))},[s,a])}}),lB,Cy,K7,q7,X7,Y7,sCe=C(()=>{hn(),lB=Mt,Cy=Q(Re()),Ne(),oCe(),se.div(K7||(K7=H([`
  display: flex;
`]))),se.li(q7||(q7=H([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),se.div(X7||(X7=H([""]))),Y7=({sheetId:i,depth:s,project:a})=>Un(()=>{let c=(0,lB.val)(a.sheetTemplatesP[i]);if(!c)return Cy.default.createElement(Cy.default.Fragment,null);let h=(0,lB.val)(c.instancesP);return Cy.default.createElement(Cy.default.Fragment,null,Object.entries(h).map(([f,g])=>Cy.default.createElement(W7,{key:g.address.sheetInstanceId,sheet:g,depth:s})))},[s,i,a])}),lA,Z7,Q7,aCe=C(()=>{_p(),hn(),lA=Q(Re()),sCe(),Z7=({project:i,depth:s})=>Un(()=>{if(!i)return null;let a=JEe(i);return lA.default.createElement(lA.default.Fragment,null,a.map(c=>lA.default.createElement(Y7,{depth:s,sheetId:c,key:"sheet-".concat(c),project:i})))},[i,s]),Q7=Z7}),Gx,J7,eK,tK,nK,rK,lCe=C(()=>{Gx=Q(Re()),aA(),aCe(),Fe(),hn(),_p(),J7=Mt,Ne(),sB(),tK=se.div(eK||(eK=H([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),nK=({depth:i,project:s})=>{let a=Un(()=>bp(),[]),c=Un(()=>{let y=s.address.projectId,w=(0,J7.val)(me().atomP.ephemeral.coreByProject[y].loadingState);return(w==null?void 0:w.type)==="browserStateIsNotBasedOnDiskState"},[s]),h=(0,Gx.useCallback)(()=>{me().transaction(({stateEditors:y})=>{y.studio.historic.panels.outline.selection.set([s])})},[s]),{collapsed:f,setCollapsed:g}=oB(s);return Gx.default.createElement(Hx,{depth:i,label:s.address.projectId,setIsCollapsed:g,collapsed:f,labelDecoration:c?Gx.default.createElement(tK,null,"Has Conflicts"):null,children:Gx.default.createElement(Q7,{project:s,depth:i+1}),selectionStatus:a.includes(s)?"selected":a.some(y=>y.address.projectId===s.address.projectId)?"descendant-is-selected":"not-selected",select:h})},rK=nK}),iK,uB,oK,sK,aK,lK,uCe=C(()=>{iK=Mt,hn(),Fe(),uB=Q(Re()),Ne(),lCe(),sK=se.ul(oK||(oK=H([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),aK=i=>Un(()=>{let s=(0,iK.val)(me().projectsP);return uB.default.createElement(sK,null,Object.keys(s).map(a=>{let c=s[a];return uB.default.createElement(rK,{depth:0,project:c,key:"projectListItem-".concat(a)})}))},[]),lK=aK});function uK(i){let[s,a]=(0,cB.useState)(!1);return(0,cB.useEffect)(()=>{let c=f=>{let g=s?200:50,y=56,w=i==="left"?f.x<g:f.x>window.innerWidth-g;w&&(w=f.y>y),a(!!w)};document.addEventListener("mousemove",c);let h=()=>{a(!1)};return document.addEventListener("mouseleave",h),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseleave",h)}},[s]),s}var cB,cK=C(()=>{cB=Q(Re())}),$x,Py,dB,dK,hK,pK,fK,uA,Wx,mK,cCe=C(()=>{$x=Q(Re()),Ne(),Td(),uCe(),hn(),Fe(),cK(),Py=Mt,vr(),dB="44px",hK=se.div(dK||(dK=H([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),hr,xy.outlinePanel,dB,dB,({pin:i})=>i?"block":"none"),pK=()=>{var i;let s=(i=$n(me().atomP.ahistoric.pinOutline))!=null?i:!0,a=$n(mK),c=uK("left");return(0,$x.useLayoutEffect)(()=>{uA.set(c)},[c]),(0,$x.useEffect)(()=>()=>{Wx.set(!1),uA.set(!1)},[]),$x.default.createElement(hK,{pin:s||a,onMouseEnter:()=>{Wx.set(!0)},onMouseLeave:()=>{Wx.set(!1)}},$x.default.createElement(lK,null))},fK=pK,uA=new Py.Atom(!1),Wx=new Py.Atom(!1),mK=(0,Py.prism)(()=>{let i=(0,Py.val)(Wx.prism),s=(0,Py.val)(uA.prism);return i||s})}),vK,gK,yK,dCe=C(()=>{Ne(),gK=se.input.attrs({type:"checkbox"})(vK||(vK=H([`
  outline: none;
`]))),yK=gK});function hCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let h=(0,hB.useCallback)(f=>{s.permanentlySetValue(!!f.target.checked)},[i,s]);return hB.default.createElement(_K,{checked:a,onChange:h,autoFocus:c})}var hB,bK,_K,wK,pCe=C(()=>{hB=Q(Re()),Ne(),dCe(),_K=se(yK)(bK||(bK=H([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),wK=hCe});function cA(i){return s=>{i.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var dA=C(()=>{});function pB(i,s,a){(0,xK.useEffect)(()=>{if(!i||a===!1)return;let c=Array.isArray(i)?i.filter(f=>f):[i],h=f=>{c.every(g=>!f.composedPath().includes(g))&&s(f)};return window.addEventListener("mousedown",h,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",h,{capture:!0,passive:!1})}},[i,a])}var xK,fB=C(()=>{xK=Q(Re())}),Md,SK,Ad,EK,CK,PK,kK,mB,TK,ul,MK,Ea=C(()=>{Md=Q(Re()),Ne(),SK="pointer-root",Ad="--lockedCursor",CK=se.div(EK||(EK=H([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),kK=se.div(PK||(PK=H([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),mB=(0,Md.createContext)({}),TK=i=>{var s,a,c,h;let[f,g]=(0,Md.useState)([]),y=(0,Md.useMemo)(()=>({getLock:(S,T)=>{let I={className:S,cursor:T};return g(A=>[...A,I]),()=>{g(A=>A.filter(k=>k!==I))}}}),[]),w=(a=(s=f[0])==null?void 0:s.cursor)!=null?a:"";return Md.default.createElement(mB.Provider,{value:y},Md.default.createElement(CK,{id:SK,className:((h=(c=f[0])==null?void 0:c.className)!=null?h:"normal")+" "+i.className},Md.default.createElement(kK,{style:{cursor:w,[Ad]:w}},i.children)))},ul=(i,s,a)=>{let c=(0,Md.useContext)(mB);(0,Md.useLayoutEffect)(()=>{if(i)return c.getLock(s,a)},[i,s,a])},MK=TK});function AK(i){return Kx.default.createElement(vB.Provider,{value:i.logger},i.children)}function wp(i,s){let a=(0,Kx.useContext)(vB);return(0,Kx.useMemo)(()=>i?a.named(i,s):a,[a,i,s])}var Kx,vB,xp=C(()=>{Kx=Q(Re()),vB=Kx.default.createContext(null)});function fCe(){let i=wp("PointerCapturing"),s=iu.default.useRef(null),a=()=>s.current!=null;return c=>{let h,f=g=>(h=g,s.current=g,g);return{capturing:{capturePointer(g){if(i._debug("Capturing pointer",{forDebugName:c,reason:g}),s.current!=null)throw new Error('"'.concat(c,'" attempted capturing pointer for "').concat(g,'" while already captured by "').concat(s.current.debugOwnerName,'" for "').concat(s.current.debugReason,'"'));let y=f({debugOwnerName:c,debugReason:g});return{isCapturing(){return y===s.current},release(){return y===s.current?(i._debug("Releasing pointer",{forDebugName:c,reason:g}),f(null),!0):!1}}},isPointerBeingCaptured:a},forceRelease(){h&&s.current===h&&(i._debug("Force releasing pointer",{localCapture:h}),f(null))}}}}function mCe(i){let s=fCe();return iu.default.createElement(gB.Provider,{value:s},iu.default.createElement(RK,{children:i.children}))}function IK(i){let s=(0,iu.useContext)(gB),a=(0,iu.useMemo)(()=>s(i),[i,s]);return(0,iu.useEffect)(()=>()=>{a.forceRelease()},[a]),a.capturing}var iu,gB,RK,yB=C(()=>{iu=Q(Re()),xp(),gB=iu.default.createContext(null),RK=iu.default.memo(({children:i})=>iu.default.createElement(iu.default.Fragment,null,i))}),bB,vCe=C(()=>{bB=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function xi(i,s){let a=(0,ky.useRef)(s);a.current=s;let c=s.shouldPointerLock&&!bB,h=(0,ky.useRef)({domDragStarted:!1}),{capturePointer:f}=IK("useDrag for ".concat(s.debugName)),g=(0,ky.useRef)({onDrag:ru,onDragEnd:ru,onClick:ru}),y=(0,ky.useRef)(),[w,S]=sr(!1);return(0,ky.useLayoutEffect)(()=>{if(!i)return;let T=()=>{let $=h.current.domDragStarted&&h.current.detection.detected;w.current!==$&&(w.current=$)},I=$=>{if(!h.current.domDragStarted)return;let X=h.current;if(!gCe($,X)&&(X.detection.detected||(X.detection.totalDistanceMoved+=Math.abs($.movementY)+Math.abs($.movementX),X.detection.totalDistanceMoved>OK&&(c&&i.requestPointerLock(),X.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},T())),X.detection.detected)){X.detection.dragEventCount+=1;let{dragMovement:re}=X.detection;if(c)re.x+=$.movementX,re.y+=$.movementY;else{let{startPos:ne}=X;re.x=$.screenX-ne.x,re.y=$.screenY-ne.y}g.current.onDrag(re.x,re.y,$,$.movementX,$.movementY)}},A=$=>{if(D(),!h.current.domDragStarted)return;let X=h.current.detection.detected;h.current={domDragStarted:!1},s.shouldPointerLock&&!bB&&document.exitPointerLock(),g.current.onDragEnd(X),window.focus(),X||g.current.onClick($),T()},k=()=>{document.addEventListener("mousemove",I),document.addEventListener("mouseup",A)},D=()=>{var $;($=y.current)==null||$.release(),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",A)},O=$=>{a.current.disabled||h.current.domDragStarted&&h.current.detection.detected&&(a.current.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),h.current.detection={detected:!1,totalDistanceMoved:0},T())},F=$=>{var X,re,ne,ae;(X=y.current)==null||X.release();let xe=a.current;if(xe.disabled===!0||!((re=xe.buttons)!=null?re:[0]).includes($.button))return;let fe=xe.onDragStart($);fe!==!1&&(g.current.onDrag=fe.onDrag,g.current.onDragEnd=(ne=fe.onDragEnd)!=null?ne:ru,g.current.onClick=(ae=fe.onClick)!=null?ae:ru,y.current=f("Drag start"),xe.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),h.current={domDragStarted:!0,startPos:{x:$.screenX,y:$.screenY},detection:{detected:!1,totalDistanceMoved:0}},T(),k())},V=$=>{F($)};return i.addEventListener("mousedown",V),i.addEventListener("click",O),()=>{var $,X;D(),i.removeEventListener("mousedown",V),i.removeEventListener("click",O),h.current.domDragStarted&&((X=($=g.current).onDragEnd)==null||X.call($,h.current.detection.detected)),h.current={domDragStarted:!1},T()}},[i]),ul(S&&!!s.lockCSSCursorTo,"dragging",s.lockCSSCursorTo),[S]}function gCe(i,s){return(!s.detection.detected||s.detection.detected&&s.detection.dragEventCount<3)&&(Math.abs(i.movementX)>_B||Math.abs(i.movementY)>_B)}var ky,OK,_B,no=C(()=>{ky=Q(Re()),Ea(),yB(),Sy(),vCe(),mr(),OK=3,_B=100});function yCe(i){return isNaN(i)?"NaN":ts(i)?i.toFixed(0):qm(i,3).toString()}var DK,LK,Id,NK,hA,FK,BK,UK,VK,jK,zK,HK,GK,pA,wB=C(()=>{Qr(),DK=Q(Re()),LK=Q(Re()),Id=Q(Re()),Ne(),dA(),mr(),fB(),no(),hA=se.div(NK||(NK=H([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),BK=se.input(FK||(FK=H([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),VK=se.div(UK||(UK=H([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),hA,hA),zK=se.div(jK||(jK=H([`
  display: contents;
`]))),HK=i=>!0,GK=i=>{var s;let[a]=sr({mode:"noFocus"}),c=(s=i.isValid)!=null?s:HK,h=(0,Id.useRef)(i);h.current=i;let f=(0,Id.useRef)(null);pB(f.current,()=>{f.current.blur()},a.current.mode==="editingViaKeyboard");let g=(0,Id.useRef)(null),y=(0,Id.useMemo)(()=>{let F=fe=>{let ge=fe.target,{value:Ie}=ge,Qe=a.current;a.current=z(j({},Qe),{currentEditedValueInString:Ie});let le=parseFloat(Ie);!isFinite(le)||!c(le)||h.current.temporarilySetValue(le)},V=()=>{a.current.mode==="editingViaKeyboard"&&($(),a.current={mode:"noFocus"}),i.onBlur&&i.onBlur()},$=()=>{let fe=a.current,ge=parseFloat(fe.currentEditedValueInString);!isFinite(ge)||!c(ge)||fe.valueBeforeEditing===ge?h.current.discardTemporaryValue():h.current.permanentlySetValue(ge)},X=fe=>{fe.key==="Escape"?(h.current.discardTemporaryValue(),a.current={mode:"noFocus"},f.current.blur()):(fe.key==="Enter"||fe.key==="Tab")&&($(),f.current.blur())},re=fe=>{a.current.mode==="noFocus"&&(f.current.focus(),fe.preventDefault()),fe.stopPropagation()},ne=()=>{a.current.mode==="noFocus"?ae():a.current.mode},ae=()=>{let fe=h.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(fe),valueBeforeEditing:fe},setTimeout(()=>{f.current.focus(),f.current.setSelectionRange(0,100)})},xe;return{inputChange:F,onBlur:V,transitionToDraggingMode:()=>{var fe;let ge=h.current.value;xe=(fe=f.current)==null?void 0:fe.getBoundingClientRect().width,a.current={mode:"dragging"};let Ie=ge,Qe=ge;return g.current=document.body.style.cursor,{onDrag(le,Ae,Y,Ue){let Tt=Y.altKey?Ue/10:Ue,ke=Qe+i.nudge({deltaX:Tt,deltaFraction:Tt/xe,magnitude:1});Qe=i.range?ai(ke,i.range[0],i.range[1]):ke,h.current.temporarilySetValue(Qe)},onDragEnd(le){le?(Ie===Qe?h.current.discardTemporaryValue():h.current.permanentlySetValue(Qe),a.current={mode:"noFocus"}):(h.current.discardTemporaryValue(),a.current={mode:"noFocus"})},onClick(){f.current.focus(),f.current.setSelectionRange(0,100)}}},onInputKeyDown:X,onClick:re,onFocus:ne}},[]);(0,DK.useEffect)(()=>()=>{y.onBlur()},[]);let w=a.current.mode!=="editingViaKeyboard"?yCe(i.value):a.current.currentEditedValueInString;typeof w=="number"&&isNaN(w)&&(w="NaN");let S=[f];i.inputRef&&S.push(i.inputRef);let T=Id.default.createElement(BK,{key:"input",type:"text",onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:cA(S),onMouseDown:F=>{F.stopPropagation()},onDoubleClick:F=>{F.preventDefault(),F.stopPropagation()},autoFocus:i.autoFocus}),{range:I}=i,A=parseFloat(w),k=I?Id.default.createElement(VK,{style:{"--percentage":ai((A-I[0])/(I[1]-I[0]),0,1)}}):null,[D,O]=(0,LK.useState)(null);return xi(D,{debugName:"form/BasicNumberInput",onDragStart:y.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:a.current.mode==="editingViaKeyboard"}),Id.default.createElement(hA,{className:i.className+" "+a.current.mode},Id.default.createElement(zK,{ref:O},T),k)},pA=GK});function bCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let h=(0,xB.useCallback)(f=>i.nudgeFn(z(j({},f),{config:i})),[i]);return xB.default.createElement(pA,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,range:i.range,nudge:h,autoFocus:c})}var xB,SB,$K=C(()=>{wB(),xB=Q(Re()),SB=bCe});function _Ce({value:i,onChange:s,options:a,autoFocus:c}){let h=(0,qx.useCallback)(f=>{s(String(f.target.value))},[s]);return qx.default.createElement(EB,{role:"radiogroup"},Object.keys(a).map((f,g)=>qx.default.createElement(qK,{key:"label-"+g,"data-checked":i===f},a[f],qx.default.createElement(YK,{type:"radio",checked:i===f,value:f,onChange:h,name:"switchbox",autoFocus:c}))))}var qx,WK,EB,KK,qK,XK,YK,ZK,wCe=C(()=>{Sa(),qx=Q(Re()),Ne(),EB=se.form(WK||(WK=H([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),qK=se.label(KK||(KK=H([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),EB,Dx(.1,"white")),YK=se.input(XK||(XK=H([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),ZK=_Ce}),xCe=C(()=>{}),CB,PB,kB,QK=C(()=>{CB=Q(Re()),PB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kB=CB.default.createContext&&CB.default.createContext(PB)});function JK(i){return i&&i.map(function(s,a){return My.default.createElement(s.tag,Rd({key:a},s.attr),JK(s.child))})}function Ty(i){return function(s){return My.default.createElement(SCe,Rd({attr:Rd({},i.attr)},s),JK(i.child))}}function SCe(i){var s=function(a){var c=i.attr,h=i.size,f=i.title,g=eq(i,["attr","size","title"]),y=h||a.size||"1em",w;return a.className&&(w=a.className),i.className&&(w=(w?w+" ":"")+i.className),My.default.createElement("svg",Rd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,c,g,{className:w,style:Rd(Rd({color:i.color||a.color},a.style),i.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),f&&My.default.createElement("title",null,f),i.children)};return kB!==void 0?My.default.createElement(kB.Consumer,null,function(a){return s(a)}):s(PB)}var My,Rd,eq,ECe=C(()=>{My=Q(Re()),QK(),Rd=function(){return Rd=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},Rd.apply(this,arguments)},eq=function(i,s){var a={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,c=Object.getOwnPropertySymbols(i);h<c.length;h++)s.indexOf(c[h])<0&&Object.prototype.propertyIsEnumerable.call(i,c[h])&&(a[c[h]]=i[c[h]]);return a}}),Ki=C(()=>{xCe(),ECe(),QK()}),CCe=C(()=>{Ki()}),PCe=C(()=>{Ki()});function kCe(i){return Ty({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(i)}var TCe=C(()=>{Ki()}),MCe=C(()=>{Ki()}),ACe=C(()=>{Ki()});function ICe(i){return Ty({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(i)}function RCe(i){return Ty({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(i)}var OCe=C(()=>{Ki()}),DCe=C(()=>{Ki()}),LCe=C(()=>{Ki()}),NCe=C(()=>{Ki()}),FCe=C(()=>{Ki()}),BCe=C(()=>{Ki()}),UCe=C(()=>{Ki()}),VCe=C(()=>{Ki()}),jCe=C(()=>{Ki()}),zCe=C(()=>{Ki()});function tq(i){return Ty({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(i)}var HCe=C(()=>{Ki()}),GCe=C(()=>{Ki()}),$Ce=C(()=>{Ki()}),WCe=C(()=>{Ki()});function KCe(i){return Ty({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(i)}var qCe=C(()=>{Ki()});function XCe(i){return Ty({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(i)}var YCe=C(()=>{Ki()}),Ay=C(()=>{CCe(),PCe(),TCe(),MCe(),ACe(),OCe(),DCe(),LCe(),NCe(),FCe(),BCe(),UCe(),VCe(),jCe(),zCe(),HCe(),GCe(),$Ce(),WCe(),qCe(),YCe()});function ZCe({value:i,onChange:s,options:a,className:c,autoFocus:h}){let f=(0,iv.useCallback)(g=>{s(String(g.target.value))},[s]);return iv.default.createElement(rq,null,iv.default.createElement(aq,{className:c,value:i,onChange:f,autoFocus:h},Object.keys(a).map((g,y)=>iv.default.createElement("option",{key:"option-"+y,value:g},a[g]))),iv.default.createElement(oq,null,iv.default.createElement(KCe,null)))}var iv,nq,rq,iq,oq,sq,aq,lq,QCe=C(()=>{iv=Q(Re()),Ne(),Ay(),rq=se.div(nq||(nq=H([`
  width: 100%;
  position: relative;
`]))),oq=se.div(iq||(iq=H([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),aq=se.select(sq||(sq=H([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),lq=ZCe});function JCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let h=(0,fA.useCallback)(f=>{s.permanentlySetValue(f)},[i,s]);return i.as==="menu"?fA.default.createElement(lq,{value:a,onChange:h,options:i.valuesAndLabels,autoFocus:c}):fA.default.createElement(ZK,{value:a,onChange:h,options:i.valuesAndLabels,autoFocus:c})}var fA,uq,ePe=C(()=>{fA=Q(Re()),wCe(),QCe(),uq=JCe}),cq,Xx,dq,hq,pq,fq,mA,TB=C(()=>{Ne(),cq=Q(Re()),Xx=Q(Re()),dA(),mr(),fB(),hq=se.input.attrs({type:"text"})(dq||(dq=H([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),pq=i=>!0,fq=i=>{var s,a;let[c]=sr({mode:"noFocus"}),h=(s=i.isValid)!=null?s:pq,f=(0,Xx.useRef)(i);f.current=i;let g=(0,Xx.useRef)(null);pB(g.current,()=>{g.current.blur()},c.current.mode==="editingViaKeyboard");let y=(0,Xx.useMemo)(()=>{let T=V=>{let $=V.target,{value:X}=$,re=c.current;c.current=z(j({},re),{currentEditedValueInString:X}),h(X)&&f.current.temporarilySetValue(X)},I=()=>{var V,$;c.current.mode==="editingViaKeyboard"&&(A(),c.current={mode:"noFocus"}),($=(V=f.current).onBlur)==null||$.call(V)},A=()=>{let V=c.current,$=V.currentEditedValueInString;h($)?V.valueBeforeEditing===$?f.current.discardTemporaryValue():f.current.permanentlySetValue($):f.current.discardTemporaryValue()},k=V=>{V.key==="Escape"?(f.current.discardTemporaryValue(),c.current={mode:"noFocus"},g.current.blur()):(V.key==="Enter"||V.key==="Tab")&&(A(),g.current.blur())},D=V=>{c.current.mode==="noFocus"&&(g.current.focus(),V.preventDefault()),V.stopPropagation()},O=()=>{c.current.mode==="noFocus"?F():c.current.mode},F=()=>{let V=f.current.value;c.current={mode:"editingViaKeyboard",currentEditedValueInString:String(V),valueBeforeEditing:V},setTimeout(()=>{g.current.focus()})};return{inputChange:T,onBlur:I,onInputKeyDown:k,onClick:D,onFocus:O}},[]);(0,cq.useEffect)(()=>()=>{y.onBlur()},[]);let w=c.current.mode!=="editingViaKeyboard"?i.value:c.current.currentEditedValueInString,S=[g];return i.inputRef&&S.push(i.inputRef),Xx.default.createElement(hq,{key:"input",type:"text",className:"".concat((a=i.className)!=null?a:""," ").concat(h(w)?"":"invalid"),onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:cA(S),onMouseDown:T=>{T.stopPropagation()},onDoubleClick:T=>{T.preventDefault(),T.stopPropagation()},autoFocus:i.autoFocus})},mA=fq});function tPe({editingTools:i,value:s,autoFocus:a}){return mq.default.createElement(mA,{value:s,temporarilySetValue:i.temporarilySetValue,discardTemporaryValue:i.discardTemporaryValue,permanentlySetValue:i.permanentlySetValue,autoFocus:a})}var mq,vq,nPe=C(()=>{mq=Q(Re()),TB(),vq=tPe});function rPe(i){i=i.trim().toLowerCase();let s=i.match(IB);if(!s)return{r:0,g:0,b:0,a:1};let a=iPe(s[1]);return{r:parseInt(a.substr(0,2),16)/255,g:parseInt(a.substr(2,2),16)/255,b:parseInt(a.substr(4,2),16)/255,a:parseInt(a.substr(6,2),16)/255}}function MB(i,{removeAlphaIfOpaque:s=!1}={}){let a=(i.a*255|256).toString(16).slice(1),c=(i.r*255|256).toString(16).slice(1)+(i.g*255|256).toString(16).slice(1)+(i.b*255|256).toString(16).slice(1)+(s&&a==="ff"?"":a);return"#".concat(c)}function AB(i){return z(j({},i),{toString(){return MB(this,{removeAlphaIfOpaque:!0})}})}function iPe(i){switch(i.length){case 3:return"".concat(i.repeat(2),"ff");case 4:let s=i.substr(0,3),a=i[3];return"".concat(s.repeat(2)).concat(a.repeat(2));case 6:return"".concat(i,"ff")}return i}var IB,gq=C(()=>{IB=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function vA(i){let s=(0,RB.useRef)(i),a=(0,RB.useRef)(c=>{s.current&&s.current(c)});return s.current=i,a.current}var RB,yq=C(()=>{RB=Q(Re())}),ov,gA=C(()=>{ov=(i,s=0,a=1)=>i>a?a:i<s?s:i}),Yx,OB,bq,DB,LB=C(()=>{Yx=Q(Re()),OB=(0,Yx.createContext)(void 0),bq=({children:i})=>{let[s,a]=(0,Yx.useState)(!1);return Yx.default.createElement(OB.Provider,{value:{editing:s,setEditing:a}},i)},DB=()=>(0,Yx.useContext)(OB)}),Sp,Iy,_q,yA,NB,FB,wq,xq,Sq,Eq,Zx,bA=C(()=>{Sp=Q(Re()),yq(),gA(),Ne(),LB(),Iy=i=>"touches"in i,_q=(i,s)=>{for(let a=0;a<i.length;a++)if(i[a].identifier===s)return i[a];return i[0]},yA=i=>i&&i.ownerDocument.defaultView||self,NB=(i,s,a)=>{let c=i.getBoundingClientRect(),h=Iy(s)?_q(s.touches,a):s;return{left:ov((h.pageX-(c.left+yA(i).pageXOffset))/c.width),top:ov((h.pageY-(c.top+yA(i).pageYOffset))/c.height)}},FB=i=>{!Iy(i)&&i.preventDefault()},wq=(i,s)=>s&&!Iy(i),Sq=se.div(xq||(xq=H([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),Eq=i=>{var s=i,{onMove:a,onKey:c}=s,h=U(s,["onMove","onKey"]);let f=(0,Sp.useRef)(null),g=vA(a),y=vA(c),w=(0,Sp.useRef)(null),S=(0,Sp.useRef)(!1),{setEditing:T}=DB(),[I,A,k]=(0,Sp.useMemo)(()=>{let D=({nativeEvent:X})=>{let re=f.current;if(re&&(FB(X),!(wq(X,S.current)||!re))){if(Iy(X)){S.current=!0;let ne=X.changedTouches||[];ne.length&&(w.current=ne[0].identifier)}re.focus(),T(!0),g(NB(re,X,w.current)),$(!0)}},O=X=>{FB(X),(Iy(X)?X.touches.length>0:X.buttons>0)&&f.current?g(NB(f.current,X,w.current)):(T(!1),$(!1))},F=X=>{T(!1),$(!1)},V=X=>{let re=X.which||X.keyCode;re<37||re>40||(X.preventDefault(),y({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function $(X){let re=S.current,ne=f.current,ae=yA(ne),xe=X?ae.addEventListener:ae.removeEventListener;xe(re?"touchmove":"mousemove",O),xe(re?"touchend":"mouseup",F)}return[D,V,$]},[y,g]);return(0,Sp.useEffect)(()=>k,[k]),Sp.default.createElement(Sq,z(j({},h),{onTouchStart:I,onMouseDown:I,ref:f,onKeyDown:A,tabIndex:0,role:"slider"}))},Zx=Sp.default.memo(Eq)}),BB,Cq,Pq,kq,Tq,Mq,Aq,_A,UB=C(()=>{BB=Q(Re()),Ne(),bA(),Pq=se(Zx)(Cq||(Cq=H([""]))),Tq=se.div(kq||(kq=H([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),Pq),Aq=se.div(Mq||(Mq=H([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),_A=({className:i,color:s,left:a,top:c=.5})=>{let h={top:"".concat(c*100,"%"),left:"".concat(a*100,"%")};return BB.default.createElement(Tq,{style:h,className:i},BB.default.createElement(Aq,{style:{backgroundColor:s}}))}}),is,wA=C(()=>{is=(i,s=0,a=Math.pow(10,s))=>Math.round(a*i)/a}),VB,xA,SA,Iq,Rq,EA=C(()=>{wA(),VB=({h:i,s,v:a,a:c})=>{let h=(200-s)*a/100;return{h:is(i),s:is(h>0&&h<200?s*a/100/(h<=100?h:200-h)*100:0),l:is(h/2),a:is(c,2)}},xA=i=>{let{h:s,s:a,l:c}=VB(i);return"hsl(".concat(s,", ").concat(a,"%, ").concat(c,"%)")},SA=i=>{let{h:s,s:a,l:c,a:h}=VB(i);return"hsla(".concat(s,", ").concat(a,"%, ").concat(c,"%, ").concat(h,")")},Iq=({h:i,s,v:a,a:c})=>{i=i/360*6,s=s/100,a=a/100;let h=Math.floor(i),f=a*(1-s),g=a*(1-(i-h)*s),y=a*(1-(1-i+h)*s),w=h%6;return{r:is([a,g,f,f,y,a][w]*255),g:is([y,a,a,g,f,f][w]*255),b:is([f,f,y,a,a,g][w]*255),a:is(c,2)}},Rq=({r:i,g:s,b:a,a:c})=>{let h=Math.max(i,s,a),f=h-Math.min(i,s,a),g=f?h===i?(s-a)/f:h===s?2+(a-i)/f:4+(i-s)/f:0;return{h:is(60*(g<0?g+6:g)),s:is(h?f/h*100:0),v:is(h/255*100),a:c}}}),Qx,Oq,Dq,Lq,Nq,Fq,Bq,oPe=C(()=>{Qx=Q(Re()),bA(),UB(),EA(),gA(),wA(),Ne(),Dq=se.div(Oq||(Oq=H([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),Nq=se(_A)(Lq||(Lq=H([`
  z-index: 2;
`]))),Fq=({className:i,hue:s,onChange:a})=>Qx.default.createElement(Dq,{className:i},Qx.default.createElement(Zx,{onMove:c=>{a({h:360*c.left})},onKey:c=>{a({h:ov(s+c.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":is(s)},Qx.default.createElement(Nq,{left:s/360,color:xA({h:s,s:100,v:100,a:1})}))),Bq=Qx.default.memo(Fq)}),Jx,Uq,Vq,jq,zq,Hq,Gq,sPe=C(()=>{Jx=Q(Re()),bA(),UB(),EA(),gA(),wA(),Ne(),Vq=se.div(Uq||(Uq=H([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),zq=se(_A)(jq||(jq=H([`
  z-index: 3;
`]))),Hq=({hsva:i,onChange:s})=>{let a=f=>{s({s:f.left*100,v:100-f.top*100})},c=f=>{s({s:ov(i.s+f.left*100,0,100),v:ov(i.v-f.top*100,0,100)})},h={backgroundColor:xA({h:i.h,s:100,v:100,a:1})};return Jx.default.createElement(Vq,{style:h},Jx.default.createElement(Zx,{onMove:a,onKey:c,"aria-label":"Color","aria-valuetext":"Saturation ".concat(is(i.s),"%, Brightness ").concat(is(i.v),"%")},Jx.default.createElement(zq,{top:1-i.v/100,left:i.s/100,color:xA(i)})))},Gq=Jx.default.memo(Hq)}),eS,$q,Wq,Kq,qq,Xq,Yq,Zq,aPe=C(()=>{eS=Q(Re()),bA(),UB(),EA(),gA(),wA(),Ne(),Wq=se.div($q||($q=H([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),qq=se.div.attrs(({colorFrom:i,colorTo:s})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(i,", ").concat(s,")")}}))(Kq||(Kq=H([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),Yq=se(_A)(Xq||(Xq=H([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),Zq=({className:i,hsva:s,onChange:a})=>{let c=y=>{a({a:y.left})},h=y=>{a({a:ov(s.a+y.left)})},f=SA(Object.assign({},s,{a:0})),g=SA(Object.assign({},s,{a:1}));return eS.default.createElement(Wq,{className:i},eS.default.createElement(qq,{colorFrom:f,colorTo:g}),eS.default.createElement(Zx,{onMove:c,onKey:h,"aria-label":"Alpha","aria-valuetext":"".concat(is(s.a*100),"%")},eS.default.createElement(Yq,{left:s.a,color:SA(s)})))}}),CA,Qq=C(()=>{CA=(i,s)=>{if(i===s)return!0;for(let a in i)if(i[a]!==s[a])return!1;return!0}});function lPe(i,s,a,c){let{editing:h}=DB(),[f,g]=(0,Od.useState)(s),y=vA(a),w=vA(c),S=h?f:s,[T,I]=(0,Od.useState)(()=>i.toHsva(S)),A=(0,Od.useRef)({color:S,hsva:T}),k=(0,Od.useRef)({color:S,hsva:T});(0,Od.useEffect)(()=>{h&&g(A.current.color)},[h]),(0,Od.useEffect)(()=>{let O=i.fromHsva(T);h?!CA(T,A.current.hsva)&&!i.equal(O,A.current.color)&&(A.current={hsva:T,color:O},g(O),y(O)):!CA(T,k.current.hsva)&&!i.equal(O,k.current.color)&&(k.current={hsva:T,color:O},A.current={hsva:T,color:O},w(O))},[h,T,i,y,w]),(0,Od.useEffect)(()=>{if(!h&&!i.equal(S,k.current.color)){let O=i.toHsva(S);k.current={hsva:O,color:S},I(O)}},[h,S,i]);let D=(0,Od.useCallback)(O=>{I(F=>Object.assign({},F,O))},[]);return[T,D]}var Od,uPe=C(()=>{Od=Q(Re()),Qq(),yq(),LB()}),Ry,Jq,eX,tX,cPe=C(()=>{Ry=Q(Re()),oPe(),sPe(),aPe(),uPe(),Ne(),eX=se.div(Jq||(Jq=H([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),tX=i=>{var s=i,{className:a,colorModel:c,color:h=c.defaultColor,temporarilySetValue:f,permanentlySetValue:g,discardTemporaryValue:y}=s,w=U(s,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[S,T]=lPe(c,h,f,g);return(0,Ry.useEffect)(()=>()=>{y()},[]),Ry.default.createElement(eX,j({},w),Ry.default.createElement(Gq,{hsva:S,onChange:T}),Ry.default.createElement(Bq,{hue:S.h,onChange:T}),Ry.default.createElement(Zq,{hsva:S,onChange:T}))}}),jB,nX,rX,iX,oX,dPe=C(()=>{jB=Q(Re()),cPe(),Qq(),EA(),LB(),nX=i=>({r:i.r/255,g:i.g/255,b:i.b/255,a:i.a}),rX=i=>({r:i.r*255,g:i.g*255,b:i.b*255,a:i.a}),iX={defaultColor:{r:0,g:0,b:0,a:1},toHsva:i=>Rq(rX(i)),fromHsva:i=>nX(Iq(i)),equal:CA},oX=i=>jB.default.createElement(bq,null,jB.default.createElement(tX,z(j({},i),{permanentlySetValue:s=>{i.permanentlySetValue(s)},colorModel:iX})))}),hPe=C(()=>{dPe()}),sX,aX,lX,pPe=C(()=>{sX=Q(Re()),aX=function(i){(0,sX.useEffect)(i,[])},lX=aX}),uX,cX,dX,fPe=C(()=>{uX=Q(Re()),pPe(),cX=function(i){var s=(0,uX.useRef)(i);s.current=i,lX(function(){return function(){return s.current()}})},dX=cX}),PA,hX,pX,mPe=C(()=>{PA=Q(Re()),fPe(),hX=function(i){var s=(0,PA.useRef)(0),a=(0,PA.useState)(i),c=a[0],h=a[1],f=(0,PA.useCallback)(function(g){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){h(g)})},[]);return dX(function(){cancelAnimationFrame(s.current)}),[c,f]},pX=hX});function vPe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.addEventListener&&i.addEventListener.apply(i,s)}function gPe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.removeEventListener&&i.removeEventListener.apply(i,s)}var kA,yPe=C(()=>{kA=typeof window<"u"}),fX,mX,TA,zB=C(()=>{fX=Q(Re()),mPe(),yPe(),mX=function(i,s){i===void 0&&(i=1/0),s===void 0&&(s=1/0);var a=pX({width:kA?window.innerWidth:i,height:kA?window.innerHeight:s}),c=a[0],h=a[1];return(0,fX.useEffect)(function(){if(kA){var f=function(){h({width:window.innerWidth,height:window.innerHeight})};return vPe(window,"resize",f),function(){gPe(window,"resize",f)}}},[]),c},TA=mX});function HB(i){let[s,a]=(0,GB.useState)(null);return(0,GB.useLayoutEffect)(()=>(i&&a(i.getBoundingClientRect()),()=>{a(null)}),[i]),s}var GB,vX=C(()=>{GB=Q(Re())}),gX,yX,$B,bX=C(()=>{gX=Q(Re()),yX=(0,gX.createContext)({}),$B=yX});function bPe(i,s,a){let c=i.getBoundingClientRect(),h=f=>{(f.clientX<c.left-s||f.clientX>c.left+c.width+s||f.clientY<c.top-s||f.clientY>c.top+c.height+s)&&a(f)};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}}var _Pe=C(()=>{}),_X,MA,WB,wX,KB,xX=C(()=>{_X=Q(Re()),MA=Q(Re()),zB(),vX(),bX(),mr(),fB(),_Pe(),Sy(),Qr(),WB=8,wX=i=>{var s,a;let c=i.children(),[h,f]=sr(null),g=c.props.style?j({},c.props.style):{};g.position="absolute";let y=HB(f),w=HB(i.target),S=TA(),[T,I]=(0,MA.useState)({});return(0,MA.useLayoutEffect)(()=>{var A,k,D;if(!y||!f||!w)return;let O=(A=i.verticalGap)!=null?A:8,F={},V=(k=i.verticalPlacement)!=null?k:"bottom",$=0,X=0;V==="bottom"?w.bottom+y.height+O<S.height?(V="bottom",$=w.bottom+O,F.top="0px"):w.top>y.height+O?(V="top",$=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):V="overlay":V==="top"&&(w.top>y.height+O?(V="top",$=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):w.bottom+y.height+O<S.height?(V="bottom",$=w.bottom+O,F.top="0px"):V="overlay");let re=0;if(V!=="overlay"){let Ie=w.left+w.width/2;Ie<y.width/2?(X=O,re=Math.max(Ie-O,WB)):Ie+y.width/2>S.width?(X=S.width-(O+y.width),re=Math.min(Ie-X,y.width-WB)):(X=Ie-y.width/2,re=y.width/2),F.left=re+"px"}let{minX:ne=-1/0,maxX:ae=1/0,minY:xe=-1/0,maxY:fe=1/0}=(D=i.constraints)!=null?D:{},ge={left:ai(X,ne,ae-y.width),top:ai($,xe,fe+y.height)};if(f.style.left=ge.left+"px",f.style.top=ge.top+"px",I(F),i.onPointerOutside)return bPe(f,i.onPointerOutside.threshold,i.onPointerOutside.callback)},[y,f,i.target,w,S,i.onPointerOutside]),pB([f,(s=i.target)!=null?s:null],(a=i.onClickOutside)!=null?a:ru),_X.default.createElement($B.Provider,{value:T},(0,MA.cloneElement)(c,{ref:h,style:g}))},KB=wX});function ac(i,s){let a=(...k)=>{},{isPointerBeingCaptured:c}=IK("usePopover"),[h,f]=sr({isOpen:!1}),g=(0,os.useRef)(i),y=(0,os.useCallback)(k=>{h.current={isOpen:!1}},[]),w=(0,os.useCallback)((k,D)=>{var O;let F=typeof g.current=="function"?g.current():g.current;function V(){T.childHasFocusRef.current||F.closeOnClickOutside!==!1&&y("clicked outside popover")}h.current={isOpen:!0,clickPoint:{clientX:k.clientX,clientY:k.clientY},target:D,opts:F,onClickOutside:V,onPointerOutside:F.closeWhenPointerIsDistant===!1?void 0:{threshold:(O=F.pointerDistanceThreshold)!=null?O:100,callback:()=>{T.childHasFocusRef.current||c()||y("pointer outside")}}}},[]),S=(0,os.useCallback)((...k)=>{h.current.isOpen?y("toggled"):w(...k)},[]),T=wPe({_debug:a,state:f}),[,I]=(0,os.useContext)(TS);(0,os.useEffect)(()=>{let k;return f.isOpen&&(k=I()),()=>k==null?void 0:k()},[f.isOpen]);let A=(0,os.useContext)(_y);return{node:f.isOpen?(0,SX.createPortal)(os.default.createElement(qB.Provider,{value:T.childPopoverLock},os.default.createElement(KB,{children:s,target:f.target,onClickOutside:f.onClickOutside,onPointerOutside:f.onPointerOutside,constraints:f.opts.constraints,verticalGap:f.opts.verticalGap})),A):os.default.createElement(os.default.Fragment,null),open:w,close:y,toggle:S,isOpen:f.isOpen}}function wPe(i){let s=(0,os.useContext)(qB);(0,os.useEffect)(()=>{if(i.state.isOpen){let c=s.takeFocus();return i._debug("take focus"),()=>{i._debug("release focus"),c.releaseFocus()}}},[i.state.isOpen]);let a=(0,os.useRef)(!1);return{childHasFocusRef:a,childPopoverLock:{takeFocus(){return a.current=!0,{releaseFocus(){a.current=!1}}}}}}var os,SX,qB,lc=C(()=>{yB(),mr(),os=Q(Re()),SX=Q(ql()),rv(),xX(),FU(),qB=os.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),Dd,EX,CX,PX,kX,TX,MX,AX,IX,RX,OX,DX,LX,xPe=C(()=>{Dd=Q(Re()),Ne(),bX(),CX=se.div(EX||(EX=H([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),kX=se.div(PX||(PX=H([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),MX=se.path(TX||(TX=H([`
  fill: var(--popover-bg);
`]))),IX=se.path(AX||(AX=H([`
  fill: var(--popover-inner-stroke);
`]))),OX=se.path(RX||(RX=H([`
  fill: var(--popover-outer-stroke);
`]))),DX=(0,Dd.forwardRef)(({className:i},s)=>{let a=(0,Dd.useContext)($B);return Dd.default.createElement(CX,{className:i,ref:s,style:j({},a)},Dd.default.createElement(kX,null,Dd.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Dd.default.createElement(OX,{d:"M6 0L0 6H12L6 0Z"}),Dd.default.createElement(IX,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),Dd.default.createElement(MX,{d:"M6 3L0 9H12L6 3Z"}))))}),LX=DX}),AA,XB,NX,FX,BX,uc,cc=C(()=>{vr(),Sa(),AA=Q(Re()),Ne(),xPe(),XB=nu(.05,"#2a2a31"),FX=se.div(NX||(NX=H([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),XB,hr),BX=AA.default.forwardRef(({children:i,className:s,showPopoverEdgeTriangle:a=!0},c)=>AA.default.createElement(FX,{className:s,ref:c},a?AA.default.createElement(LX,null):void 0,i)),uc=BX});function SPe({editingTools:i,value:s,autoFocus:a}){let c=(0,dc.useRef)(null),h=(0,dc.useCallback)(g=>{let y=AB(rPe(g));i.permanentlySetValue(y)},[i]),f=ac({debugName:"RgbaPropEditor"},()=>dc.default.createElement(WX,null,dc.default.createElement(oX,{color:{r:s.r,g:s.g,b:s.b,a:s.a},temporarilySetValue:g=>{let y=AB(g);i.temporarilySetValue(y)},permanentlySetValue:g=>{let y=AB(g);i.permanentlySetValue(y)},discardTemporaryValue:i.discardTemporaryValue})));return dc.default.createElement(dc.default.Fragment,null,dc.default.createElement(VX,null,dc.default.createElement(zX,{rgbaColor:s,ref:c,onClick:g=>{f.toggle(g,c.current)}}),dc.default.createElement(GX,{value:MB(s,{removeAlphaIfOpaque:!0}),temporarilySetValue:YB,discardTemporaryValue:YB,permanentlySetValue:h,isValid:g=>!!g.match(IB),autoFocus:a})),f.node)}var dc,UX,VX,jX,zX,HX,GX,YB,$X,WX,KX,EPe=C(()=>{gq(),gq(),dc=Q(Re()),hPe(),Ne(),lc(),TB(),cc(),VX=se.div(UX||(UX=H([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),zX=se.div.attrs(i=>({style:{background:MB(i.rgbaColor)}}))(jX||(jX=H([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),GX=se(mA)(HX||(HX=H([`
  flex: 1;
`]))),YB=()=>{},WX=se.div($X||($X=H([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),XB),KX=SPe});function CPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[h,f]=ou.default.useState();(0,ou.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,ou.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"image",id:void 0});let T=yield s.createAsset(S);T?s.permanentlySetValue({type:"image",id:T}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return ou.default.createElement(ZB,{empty:y},ou.default.createElement(eY,{empty:y,title:y?"Upload image":'"'.concat(a.id,'" (Click to upload new image)')},ou.default.createElement(nY,{type:"file",onChange:g,accept:"image/*,.hdr",autoFocus:c}),h?ou.default.createElement(iY,{src:h}):ou.default.createElement(YX,null)),!y&&ou.default.createElement(sY,{title:"Delete image",onClick:()=>{s.permanentlySetValue({type:"image",id:void 0})}},ou.default.createElement(iB,null)))}var ou,qX,ZB,XX,YX,ZX,QX,JX,eY,tY,nY,rY,iY,oY,sY,aY,PPe=C(()=>{zx(),ou=Q(Re()),Ne(),ZB=se.div(qX||(qX=H([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),YX=se.div(XX||(XX=H([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),eY=se.label(JX||(JX=H([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?Do(ZX||(ZX=H([""]))):Do(QX||(QX=H([""])))),nY=se.input.attrs({type:"file"})(tY||(tY=H([`
  display: none;
`]))),iY=se.img(rY||(rY=H([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),sY=se.button(oY||(oY=H([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),ZB),aY=CPe});function kPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[h,f]=su.default.useState();(0,su.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,su.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"file",id:void 0});let T=yield s.createAsset(S);T?s.permanentlySetValue({type:"file",id:T}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return su.default.createElement(QB,{empty:y},su.default.createElement(fY,{empty:y,title:y?"Upload file":'"'.concat(a.id,'" (Click to upload new file)')},su.default.createElement(vY,{type:"file",onChange:g,autoFocus:c}),h?su.default.createElement(tB,null):su.default.createElement(cY,null)),!y&&su.default.createElement(yY,{title:"Delete file",onClick:()=>{s.permanentlySetValue({type:"file",id:void 0})}},su.default.createElement(iB,null)))}var su,lY,QB,uY,cY,dY,hY,pY,fY,mY,vY,gY,yY,bY,TPe=C(()=>{zx(),su=Q(Re()),Ne(),QB=se.div(lY||(lY=H([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),cY=se.div(uY||(uY=H([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),fY=se.label(pY||(pY=H([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?Do(dY||(dY=H([""]))):Do(hY||(hY=H([""])))),vY=se.input.attrs({type:"file"})(mY||(mY=H([`
  display: none;
`]))),yY=se.button(gY||(gY=H([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),QB),bY=kPe}),JB,_Y=C(()=>{pCe(),$K(),ePe(),nPe(),EPe(),PPe(),TPe(),JB={number:SB,string:vq,boolean:wK,stringLiteral:uq,rgba:KX,image:aY,file:bY}});function tS(i){let s=new WeakMap;return a=>(s.has(a)||s.set(a,i(a)),s.get(a))}var IA=C(()=>{});function hc(i){return i.type==="compound"||i.type==="enum"}function RA(i,s){if(!i)return;let[a,...c]=s;if(a===void 0)return i;if(!hc(i))return;let h=i.type==="enum"?i.cases[a]:i.props[a];return RA(h,c)}function OA(i,s){let a=s.deserializeAndSanitize(i);return a===void 0?s.default:a}function MPe(i){return!hc(i)}function*nS(i,s){if(i.type==="compound")for(let a in i.props)yield*kt(nS(i.props[a],[...s,a]));else{if(i.type==="enum")throw new Error("Not implemented yet");return yield{path:s,conf:i}}}var eU,Ep=C(()=>{IA(),eU=tS(i=>{if(i.type==="enum")throw new Error("Not implemented yet for enums");for(let s in i.props){let a=i.props[s];if(hc(a)){if(eU(a))return!0}else return!0}return!1})}),tU,wY=C(()=>{tU="calc(var(--left-pad) + var(--depth) * var(--step))"}),xY,Cp,sv=C(()=>{Ne(),Cp=Do(xY||(xY=H([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),i=>i.isHighlighted==="self"?"#CCC":"#919191")}),rS,DA,SY,EY,CY,PY,kY,TY,MY=C(()=>{Sy(),rS=Q(Re()),Ne(),DA=26,EY=se.li(SY||(SY=H([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),DA,i=>i.enabled?"white":"#8f8f8f",i=>i.enabled?"normal":"not-allowed",i=>i.enabled?"rgba(63, 174, 191, 0.75)":"initial"),PY=se.span(CY||(CY=H([""]))),kY=i=>rS.default.createElement(EY,{onClick:i.enabled?i.onClick:ru,enabled:i.enabled,title:i.enabled?void 0:"Disabled"},rS.default.createElement(PY,null,rS.default.createElement(rS.default.Fragment,null,i.label))),TY=kY});function APe(i){let s=(0,nU.useRef)(i);s.current=i,(0,nU.useEffect)(()=>{let a=c=>s.current(c);return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var nU,IPe=C(()=>{nU=Q(Re())}),iS,AY,IY,RY,OY,DY,LY,NY,rU,FY=C(()=>{iS=Q(Re()),MY(),Ne(),Sa(),vr(),AY=190,IY=!0,OY=se.ul(RY||(RY=H([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),AY,nu(.2,"#111"),hr),LY=se.div(DY||(DY=H([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),NY=iS.default.forwardRef((i,s)=>iS.default.createElement(OY,{ref:s},IY&&i.displayName?iS.default.createElement(LY,null,i.displayName):null,i.items.map((a,c)=>iS.default.createElement(TY,{key:"item-".concat(c),label:a.label,enabled:a.enabled!==!1,onClick:h=>{a.callback&&a.callback(h),i.onRequestClose()}})))),rU=NY}),BY,UY,LA,VY,oS,jY,zY,RPe=C(()=>{vX(),BY=Q(Re()),UY=Q(Re()),LA=Q(Re()),VY=Q(ql()),zB(),MY(),rv(),IPe(),FY(),oS=20,jY=i=>{let[s,a]=(0,LA.useState)(null),c=HB(s),h=TA();(0,LA.useLayoutEffect)(()=>{if(!c||!s)return;let y={left:c.width/2,top:DA/2+(i.displayName?DA:0)},w={left:i.clickPoint.clientX-y.left,top:i.clickPoint.clientY-y.top};w.left<0?w.left=0:w.left+c.width>h.width&&(w.left=h.width-c.width),w.top<0?w.top=0:w.top+c.height>h.height&&(w.top=h.height-c.height),s.style.left=w.left+"px",s.style.top=w.top+"px";let S=T=>{(T.clientX<w.left-oS||T.clientX>w.left+c.width+oS||T.clientY<w.top-oS||T.clientY>w.top+c.height+oS)&&i.onRequestClose()};return window.addEventListener("mousemove",S),()=>{window.removeEventListener("mousemove",S)}},[c,s,i.clickPoint,h,i.onRequestClose]);let f=(0,UY.useContext)(_y);APe(y=>{y.key==="Escape"&&i.onRequestClose()});let g=(0,BY.useMemo)(()=>{let y=Array.isArray(i.items)?i.items:i.items();return y.length>0?y:[{label:i.displayName?"No actions for ".concat(i.displayName):"No actions found",enabled:!1}]},[i.items]);return(0,VY.createPortal)(LA.default.createElement(rU,{items:g,onRequestClose:i.onRequestClose,displayName:i.displayName,ref:a}),f)},zY=jY}),NA,HY,GY,OPe=C(()=>{NA=Q(Re()),HY=(i,s)=>{let[a,c]=(0,NA.useState)({isOpen:!1}),h=(0,NA.useCallback)(()=>c({isOpen:!1}),[]);return(0,NA.useEffect)(()=>{if(!i||s.disabled===!0){c({isOpen:!1});return}let f=g=>{c({isOpen:!0,event:g}),g.preventDefault(),g.stopPropagation()};return i.addEventListener("contextmenu",f),()=>{i.removeEventListener("contextmenu",f)}},[i,s.disabled]),[a,h]},GY=HY});function Ts(i,s){let[a,c]=GY(i,s),[,h]=(0,Oy.useContext)(TS);return(0,Oy.useEffect)(()=>{var f;let g;return a.isOpen&&((f=s.onOpen)==null||f.call(s),g=h()),()=>g==null?void 0:g()},[a.isOpen,s.onOpen]),[a.isOpen?Oy.default.createElement(zY,{items:s.menuItems,displayName:s.displayName,clickPoint:a.event,onRequestClose:c}):$Y,c,a.isOpen]}var Oy,$Y,Ms=C(()=>{Oy=Q(Re()),RPe(),OPe(),FU(),$Y=Oy.default.createElement(Oy.default.Fragment,null)});function Pp(i,s){return s.length===0?i:fd(i,s)}var FA=C(()=>{tp()});function WY(i,s){return i==null?null:i instanceof Element&&i.matches(s)?i:WY(i.parentElement,s)}var DPe=C(()=>{});function sS(i,s){let a=i;for(let c of s)a=a[c];return a}var BA=C(()=>{});function LPe(i){let s=new UA.Atom(void 0),a=new UA.Atom({}),c=new UA.Atom({}),h=0;return{addRelatedFlags(f,g){let y=String(++h),w=g.map(S=>{let T={flag:S.flag},I=[S.affects,f,y];return c.setByPointer(A=>sS(A,I),T),I});return()=>{for(let S of w)c.setByPointer(T=>sS(T,S),void 0)}},usePresenceFlag(f){if(!i.enabled)return;let g=(0,aS.useMemo)(()=>{if(!f)return oU;let y=s.prism,w=(0,lS.pointerToPrism)(a.pointer[f]),S=(0,lS.pointerToPrism)(c.pointer[f]);return(0,lS.prism)(()=>{if(w.getValue())return 2;{let T=S.getValue(),I=y.getValue(),A=T&&I&&T[I];if(A){let k;for(let D of Object.values(A))D&&(k&&k>=D.flag||(k=D.flag));return k}return}})},[f]);return Q0(g)},setUserHover(f){let g=s.get();g!==f&&(g&&a.setByPointer(y=>y[g],!1),s.set(f),f&&a.setByPointer(y=>y[f],!0))}}}function av(i){let s=aS.default.useContext(sU),a=s.usePresenceFlag(i);return{attrs:{[VA]:i},flag:a,useRelations(c,h){(0,iU.useEffect)(()=>i&&s.addRelatedFlags(i,c()),[i,...h])}}}function KY(i){let s=aS.default.useContext(sU),a=wp("PresenceListeners");(0,iU.useEffect)(()=>{let c;if(!i)return;let h=f=>{if(f.target instanceof Node){let g=WY(f.target,"[".concat(VA,"]"));if(g){let y=g.getAttribute(VA);c!==y&&(c=y,s.setUserHover(y||void 0),a._debug("Updated current hover",{itemKey:y}));return}c!=null&&(c=null,s.setUserHover(void 0),a._debug("Cleared current hover"))}};return i.addEventListener("mouseover",h),()=>{i.removeEventListener("mouseover",h),c!=null&&(c=null,a._debug("Cleared current hover as part of cleanup"))}},[i,s])}var aS,iU,lS,UA,oU,sU,VA,lv=C(()=>{aS=Q(Re()),iU=Q(Re()),xp(),lS=Mt,UA=Mt,hn(),DPe(),BA(),oU=(0,lS.prism)(()=>{}),oU.keepHot(),sU=aS.default.createContext(LPe({enabled:!1})),VA="data-pi-key"}),No,qY,uS,XY,aU,kp,YY,lU,ZY,QY,JY,jA,eZ,tZ,nZ,rZ,iZ,oZ,cS,sZ,uU,zA=C(()=>{vr(),Sa(),No=Q(Re()),Ne(),lv(),uS=se.div(qY||(qY=H([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),nu(.2,"black")),aU=se.div(XY||(XY=H([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),uS),kp={offColor:"#555",onColor:"#e0c917"},lU=se(aU)(YY||(YY=H([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),i=>i.presence===2?"white":i.isOn?kp.onColor:kp.offColor),QY=Do(ZY||(ZY=H([`
  pointer-events: none !important;
`]))),jA=se(aU)(JY||(JY=H([`
  color: `,`;

  `,`;
`])),i=>i.flag===2?"white":i.available?kp.onColor:kp.offColor,i=>i.available?hr:QY),tZ=se(jA)(eZ||(eZ=H([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),uS),rZ=se(jA)(nZ||(nZ=H([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),uS),(i=>{let s=se.g(iZ||(iZ=H([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),jA);i.Prev=()=>No.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},No.default.createElement(s,{transform:"translate(6 3)"},No.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),i.Next=()=>No.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},No.default.createElement(s,{transform:"translate(1 3)"},No.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let a=se.g(oZ||(oZ=H([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),lU);i.Cur=()=>No.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},No.default.createElement(a,{transform:"translate(1 4)"},No.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(cS||(cS={})),sZ=i=>{var s,a,c,h,f;let g=av((s=i.prev)==null?void 0:s.itemKey),y=av(((a=i.cur)==null?void 0:a.type)==="on"?i.cur.itemKey:void 0),w=av((c=i.next)==null?void 0:c.itemKey);return No.default.createElement(uS,null,No.default.createElement(tZ,j({available:!!i.prev,onClick:(h=i.prev)==null?void 0:h.jump,flag:g.flag},g.attrs),No.default.createElement(cS.Prev,null)),No.default.createElement(lU,j({isOn:i.cur.type==="on",onClick:i.cur.toggle,presence:y.flag},y.attrs),No.default.createElement(cS.Cur,null)),No.default.createElement(rZ,j({available:!!i.next,onClick:(f=i.next)==null?void 0:f.jump,flag:w.flag},w.attrs),No.default.createElement(cS.Next,null)))},uU=sZ}),HA,dS,aZ,lZ,uZ,cZ,dZ,hZ,pZ,hS,fZ=C(()=>{Sa(),HA=Q(Re()),Ne(),Fe(),zA(),Ep(),dS={defaultState:{color:nu(.95,"#C4C4C4"),hoverColor:nu(.15,kp.onColor)},withStaticOverride:{color:nu(.85,"#C4C4C4"),hoverColor:nu(.15,kp.onColor)}},lZ=se.div(aZ||(aZ=H([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),i=>i.hasStaticOverride?dS.withStaticOverride.color:dS.defaultState.color,i=>i.hasStaticOverride?dS.withStaticOverride.hoverColor:dS.defaultState.hoverColor),cZ=se.div(uZ||(uZ=H([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),hZ=se.div(dZ||(dZ=H([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),pZ=i=>{let{hasStaticOverride:s,obj:a,propConfig:c,pathToProp:h}=i;return HA.default.createElement(lZ,{hasStaticOverride:s,onClick:()=>{me().transaction(({stateEditors:f})=>{for(let{path:g,conf:y}of nS(c,h)){if(hc(y))continue;let w=z(j({},a.address),{pathToProp:g});f.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(w,c)}})},title:"Sequence this prop"},s?HA.default.createElement(hZ,{title:"The default value is overridden"}):HA.default.createElement(cZ,{title:"This is the default value for this prop"}))},hS=pZ});function pS(i){return JSON.stringify(cU(i))}function cU(i){return D0(i)?Object.keys(i).sort().reduce((s,a)=>(s[a]=cU(i[a]),s),{}):Array.isArray(i)?i.map(cU):i}var NPe=C(()=>{Qr()}),mZ,fS,vZ=C(()=>{mZ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",fS=(i=21)=>{let s="",a=i;for(;a--;)s+=mZ[Math.random()*64|0];return s}});function gZ(){return fS(10)}function FPe(){return fS(10)}function BPe(){return fS(10)}var co,Ld=C(()=>{NPe(),vZ(),co={forSheet(){return"sheet"},forSheetObject(i){return pS({o:i.address.objectKey})},forSheetObjectProp(i,s){return pS({o:i.address.objectKey,p:s})},forTrackKeyframe(i,s,a){return pS({o:i.address.objectKey,t:s,k:a})},forSheetObjectAggregateKeyframe(i,s){return co.forCompoundPropAggregateKeyframe(i,[],s)},forSheetAggregateKeyframe(i,s){return pS({o:i.address.sheetId,pos:s})},forCompoundPropAggregateKeyframe(i,s,a){return pS({o:i.address.objectKey,p:s,pos:a})}}});function yZ(i,s,a){if(!s||s.data.keyframes.length===0)return bZ;let c=dU.get(s.data);if(c&&c[0]===a)return c[1];function h(g){if(!s)return;let y=s.data.keyframes[g];return y&&{kf:y,track:s,itemKey:co.forTrackKeyframe(i,s.id,y.id)}}let f=(()=>{let g=s.data.keyframes.findIndex(w=>w.position>=a);if(g===-1)return{prev:h(s.data.keyframes.length-1)};let y=h(g);return y.kf.position===a?{prev:h(g-1),cur:y,next:h(g+1)}:{next:y,prev:h(g-1)}})();return dU.set(s.data,[a,f]),f}var dU,bZ,_Z=C(()=>{Ld(),dU=new WeakMap,bZ={}}),hU,wZ=C(()=>{hU={}});function UPe(i,s,a){let c=(0,cl.getPointerParts)(i).path;return Un(()=>{if(!eU(a))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:uv.default.createElement(hS,{hasStaticOverride:!1,obj:s,pathToProp:c,propConfig:a})};let h=!!(0,cl.val)(fd(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,cl.getPointerParts)(i).path)),f=[],g={beingScrubbed:h,contextMenuItems:f,controlIndicators:uv.default.createElement(uv.default.Fragment,null)},y=(0,cl.val)(s.template.getMapOfValidSequenceTracks_forStudio()),w=Pp(y,c),S=w!==void 0&&Object.keys(w).length!==0,T=[],I=(0,cl.val)(s.template.getStaticButNotSequencedOverrides()),A=Pp(I??hU,c)!==void 0;if(S)for(let k of nS(a,[])){if(hc(k.conf))continue;let D=Pp(w,k.path);typeof D!="string"?A=!0:T.push(D)}if((A||S)&&f.push({label:"Reset all to default",callback:()=>{me().transaction(({unset:k})=>{k(i)})}}),S&&f.push({label:"Make all static",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of nS(a,[])){if(hc(O))continue;let F=z(j({},s.address),{pathToProp:[...c,...D]}),V=sS(i,D);k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},F),{value:s.getValueByPointer(V)}))}})}}),(!S||S&&A)&&f.push({label:"Sequence all",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of nS(a,c)){if(hc(O))continue;let F=z(j({},s.address),{pathToProp:D});k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(F,a)}})}}),S){let k=cl.prism.memo("controlIndicators",()=>uv.default.createElement(VPe,{pointerToProp:i,obj:s,possibleSequenceTrackIds:w,listOfDescendantTrackIds:T}),[w,T]);return z(j({},g),{type:"HasSequences",controlIndicators:k})}else return z(j({},g),{type:"AllStatic",controlIndicators:uv.default.createElement(hS,{hasStaticOverride:A,obj:s,pathToProp:c,propConfig:a})})},[])}function VPe({pointerToProp:i,obj:s,possibleSequenceTrackIds:a,listOfDescendantTrackIds:c}){return Un(()=>{let h=(0,cl.getPointerParts)(i).path,f=(0,cl.val)(s.sheet.getSequence().positionPrism),g=c.map(k=>({trackId:k,track:(0,cl.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[k])})).filter(({track:k})=>!!k).map(k=>z(j({},k),{nearbies:yZ(s,{id:k.trackId,data:k.track,sheetObject:s},f)})),y=g.find(({nearbies:k})=>!!k.cur),w=g.every(({nearbies:k})=>!!k.cur),S=g.reduce((k,D)=>D.nearbies.prev&&(k===void 0||D.nearbies.prev.kf.position>k.kf.position)?D.nearbies.prev:k,void 0),T=g.reduce((k,D)=>D.nearbies.next&&(k===void 0||D.nearbies.next.kf.position<k.kf.position)?D.nearbies.next:k,void 0),I=()=>{w?me().transaction(k=>{k.unset(i)}):y?me().transaction(k=>{k.set(i,(0,cl.val)(i))}):me().transaction(k=>{k.set(i,(0,cl.val)(i))})},A={cur:y?{type:"on",itemKey:co.forCompoundPropAggregateKeyframe(s,h,f),toggle:I}:{toggle:I,type:"off"},prev:S!==void 0?{position:S.kf.position,itemKey:co.forCompoundPropAggregateKeyframe(s,h,S.kf.position),jump:()=>{s.sheet.getSequence().position=S.kf.position}}:void 0,next:T!==void 0?{position:T.kf.position,itemKey:co.forCompoundPropAggregateKeyframe(s,h,T.kf.position),jump:()=>{s.sheet.getSequence().position=T.kf.position}}:void 0};return uv.default.createElement(uU,j({},A))},[i,s,a,c])}var cl,uv,jPe=C(()=>{Fe(),FA(),hn(),cl=Mt,tp(),uv=Q(Re()),fZ(),Ep(),Ld(),BA(),zA(),_Z(),wZ()});function zPe(){let i=0,s=new EZ.Atom({hasLock:!1});return{replaceLock(a,c){let h=i++,f=s.get();return f.hasLock&&f.cleanup(),s.set({hasLock:!0,lockId:h,cleanup:c,deepPath:HPe(xZ(a))}),function(){let g=s.get();g.hasLock&&g.lockId===h&&(g.cleanup(),s.set({hasLock:!1}))}},getIsPropHighlightedD(a){let c=sS(s.pointer.deepPath,xZ(a));return(0,CZ.prism)(()=>{let h=(0,SZ.val)(c);return h===!0?"self":h?"descendent":null})}}}function xZ(i){return[i.projectId,i.sheetId,i.objectKey,...i.pathToProp]}function HPe(i){let s={};return lp(s,i,!0),s}var SZ,EZ,CZ,GA,pU=C(()=>{SZ=Mt,EZ=Mt,CZ=Mt,BA(),X0(),GA=zPe()});function GPe(i,s){return JSON.stringify(i,s,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var $Pe=C(()=>{});function PZ(i,s=!0){try{return typeof i=="string"?i:typeof i=="function"||i instanceof Error?i.toString():s?GPe(i):JSON.stringify(i)}catch{return(i==null?void 0:i.name)||String(i)}}var WPe=C(()=>{$Pe()});function KPe(i,s,a){i||(arguments.length>2?kZ(s,a):kZ(s))}function kZ(i,s){let a=arguments.length>1,c=PZ(typeof i=="function"?i():i),h=a?`
Instead found: `.concat(PZ(s)):"";throw new RZ("Invariant: ".concat(c).concat(h),s)}var TZ,MZ,AZ,IZ,RZ,qPe=C(()=>{WPe(),TZ=/^\s*at.+node:internal.+/gm,MZ=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,AZ=/^\s*(at|[^@]+@).+test\-helpers.+/gm,IZ=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,RZ=class extends Error{constructor(i,s){var a;super(i),Pe(this,"found"),s!==void 0&&(this.found=s),this.stack=(a=this.stack)==null?void 0:a.replace(MZ,"").replace(IZ,"").replace(AZ,"").replace(TZ,"")}}});function XPe(i){return(0,$A.prism)(()=>{if(Array.isArray(i)){let s=new Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[a].getValue();return s}else{let s={};for(let a in i)s[a]=(0,$A.val)(i[a]);return s}})}function fU(i){let s=Dy.default.memo(Dy.default.forwardRef(function(a,c){let h=[],f={},g={ref:c};for(let T in a){let I=a[T];(0,$A.isPrism)(I)?(h.push(I),f[T]=I):g[T]=I}let y=(0,Dy.useRef)(h.length);KPe(y.current===h.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:y.current,count:h.length});let w=(0,Dy.useMemo)(()=>XPe(f),h),S=Q0(w);return S&&Dy.default.createElement(i,j(j({},g),S))}));return s.displayName="deriver(".concat(i.displayName,")"),s}var $A,Dy,OZ=C(()=>{$A=Mt,hn(),Dy=Q(Re()),qPe()});function YPe(i,s,a){return(0,au.prism)(()=>{var c;let h=(0,au.getPointerParts)(i).path,f=s.getValueByPointer(i),g=au.prism.memo("editPropValue",()=>{let D=null;return{temporarilySetValue(O){D||(D=me().scrub()),D.capture(F=>{F.set(i,O)})},discardTemporaryValue(){D&&(D.discard(),D=null)},permanentlySetValue(O){D?(D.capture(F=>{F.set(i,O)}),D.commit(),D=null):me().transaction(F=>{F.set(i,O)})}}},[]),y={createAsset:D=>s.sheet.project.assetStorage.createAsset(D),getAssetUrl:D=>D.id?s.sheet.project.assetStorage.getAssetUrl(D.id):void 0},w=(0,au.val)(fd(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,au.getPointerParts)(i).path))===!0,S=[],T=z(j(j({},g),y),{value:f,beingScrubbed:w,contextMenuItems:S,controlIndicators:Ly.default.createElement(Ly.default.Fragment,null)}),I=MPe(a);if(I){let D=(0,au.val)(s.template.getMapOfValidSequenceTracks_forStudio()),O=Pp(D,h);if(typeof O=="string"){S.push({label:"Make static",callback:()=>{me().transaction(({stateEditors:ae})=>{let xe=z(j({},s.address),{pathToProp:h});ae.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},xe),{value:s.getValueByPointer(i)}))})}});let F=O,V=au.prism.sub("lcr",()=>{let ae=(0,au.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[F]),xe=(0,au.val)(s.sheet.getSequence().positionPrism);return yZ(s,ae&&{data:ae,id:F,sheetObject:s},xe)},[F]),$;T.beingScrubbed?$="Sequenced_OnKeyframe_BeingScrubbed":V.cur?$="Sequenced_OnKeyframe":((c=V.prev)==null?void 0:c.kf.connectedRight)===!0?$="Sequenced_BeingInterpolated":$="Sequened_NotBeingInterpolated";let X=()=>{V.cur?me().transaction(ae=>{ae.unset(i)}):me().transaction(ae=>{ae.set(i,T.value)})},re={cur:V.cur?{type:"on",itemKey:V.cur.itemKey,toggle:X}:{type:"off",toggle:X},prev:V.prev!==void 0?{itemKey:V.prev.itemKey,position:V.prev.kf.position,jump:()=>{s.sheet.getSequence().position=V.prev.kf.position}}:void 0,next:V.next!==void 0?{itemKey:V.next.itemKey,position:V.next.kf.position,jump:()=>{s.sheet.getSequence().position=V.next.kf.position}}:void 0},ne=Ly.default.createElement(uU,j({},re));return z(j({},T),{type:"Sequenced",shade:$,nearbyKeyframes:V,controlIndicators:ne})}}let A=(0,au.val)(s.template.getStaticValues()),k=Pp(A,h);return typeof k<"u"&&S.push({label:"Reset to default",callback:()=>{me().transaction(({unset:D})=>{D(i)})}}),I&&S.push({label:"Sequence",callback:()=>{me().transaction(({stateEditors:D})=>{let O=z(j({},s.address),{pathToProp:h});D.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(O,a)})}}),typeof k<"u"?z(j({},T),{type:"Static",shade:T.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Ly.default.createElement(hS,{hasStaticOverride:!0,obj:s,pathToProp:h,propConfig:a})}):z(j({},T),{type:"Default",shade:"Default",controlIndicators:Ly.default.createElement(hS,{hasStaticOverride:!0,obj:s,pathToProp:h,propConfig:a})})})}function ZPe(i,s,a){if(WA.has(i))return WA.get(i);{let c=YPe(i,s,a);return WA.set(i,c),c}}function mU(i,s,a){let c=ZPe(i,s,a);return Q0(c)}var Ly,au,WA,vU=C(()=>{tp(),Ly=Q(Re()),au=Mt,Fe(),FA(),hn(),Ep(),fZ(),_Z(),zA(),WA=new WeakMap});function QPe({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let h=mU(s,a,i);return Fo.default.createElement(SB,{editingTools:h,propConfig:i,value:h.value})}function JPe({pointerToProp:i,obj:s,propConfig:a,visualIndentation:c}){var h;let f=(h=a.label)!=null?h:gd((0,mS.getPointerParts)(i).path),g=Object.entries(a.props),y=g.filter(([X,re])=>hc(re)),w=g.filter(([X,re])=>!hc(re)),[S,T]=sr(null),I=UPe(i,s,a),[A]=Ts(T,{menuItems:I.contextMenuItems}),k=y.length>0,D=(0,Fo.useMemo)(()=>GA.getIsPropHighlightedD(z(j({},s.address),{pathToProp:(0,mS.getPointerParts)(i).path})),[i]),O="".concat(s.address.projectId,",").concat(s.address.sheetId,",").concat(s.address.sheetInstanceId,",").concat(s.address.objectKey,",").concat((0,mS.getPointerParts)(i).path.join()),F=XZ(a);(0,Fo.useLayoutEffect)(()=>{KA.has(O)||KA.set(O,new mS.Atom(F))},[O,a]);let V=KA.get(O),$=Un(()=>V?(0,DZ.val)(V.pointer):F,[V]);return Fo.default.createElement(NZ,null,A,Fo.default.createElement(gU,{style:{"--depth":c-1}},Fo.default.createElement(UZ,{isVectorProp:F},Fo.default.createElement(jZ,null,I.controlIndicators),Fo.default.createElement(HZ,{isHighlighted:D,ref:S},Fo.default.createElement("span",null,f||"Props")),Fo.default.createElement($Z,{isCollapsed:$,isVector:F,onClick:()=>{V==null||V.set(!V.get())}},Fo.default.createElement(tq,null))),F&&$&&Fo.default.createElement(ZZ,null,[...g].map(([X,re])=>Fo.default.createElement(QPe,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s})))),!$&&Fo.default.createElement(qZ,{style:{"--depth":c},depth:c,lastSubIsComposite:k},[...w,...y].map(([X,re])=>Fo.default.createElement(bU,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s,visualIndentation:c+1}))))}var mS,Fo,DZ,LZ,NZ,FZ,gU,BZ,UZ,VZ,jZ,zZ,HZ,GZ,$Z,WZ,KZ,qZ,XZ,YZ,ZZ,QZ,KA,eke=C(()=>{Ep(),mS=Mt,$0(),Sa(),Fo=Q(Re()),Ne(),wY(),sv(),vr(),mr(),hQ(),Ms(),jPe(),pU(),OZ(),$K(),vU(),hn(),DZ=Mt,Ay(),IA(),NZ=se.div(LZ||(LZ=H([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),hr),gU=se.div(FZ||(FZ=H([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),UZ=se.div(BZ||(BZ=H([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),tU,({isVectorProp:i})=>i?"width: calc(100% - var(--right-width))":""),jZ=se.div(VZ||(VZ=H([`
  flexshrink: 0;
`]))),HZ=fU(se.div(zZ||(zZ=H([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>Cp)),$Z=se.span(GZ||(GZ=H([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>!i.isVector&&i.isCollapsed||i.isVector&&!i.isCollapsed?"visible":"hidden",gU,i=>i.isCollapsed?15:75),WZ=nu(.05,"#282b2f"),qZ=se.div(KZ||(KZ=H([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:i})=>Dx(i*.03,WZ),i=>i.lastSubIsComposite?0:"4px"),XZ=tS(i=>{let s=Object.entries(i.props);return s.length<=3&&s.every(([a,c])=>c.type==="number"&&["x","y","z"].includes(a))}),ZZ=se.div(YZ||(YZ=H([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),QZ=Fo.default.memo(JPe),KA=new Map});function tke({isHighlighted:i}){return i==="self"?"#1857a4":i==="descendent"?"#0a2f5c":"initial"}var nke=C(()=>{});function rke({propConfig:i,pointerToProp:s,editingTools:a,children:c,isPropHighlightedD:h}){var f;let g=(f=i.label)!=null?f:gd((0,yU.getPointerParts)(s).path),[y,w]=sr(null),[S]=Ts(w,{menuItems:a.contextMenuItems});return Ny.default.createElement(eQ,{isHighlighted:h},S,Ny.default.createElement(nQ,null,Ny.default.createElement(sQ,null,a.controlIndicators),Ny.default.createElement(iQ,{isHighlighted:h,ref:y,title:["obj","props",...(0,yU.getPointerParts)(s).path].join(".")},g)),Ny.default.createElement(lQ,null,c))}var yU,Ny,JZ,eQ,tQ,nQ,rQ,iQ,oQ,sQ,aQ,lQ,ike=C(()=>{yU=Mt,Ms(),mr(),Qr(),Ny=Q(Re()),Ne(),vr(),sv(),OZ(),wY(),nke(),eQ=fU(se.div(JZ||(JZ=H([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),hr,tke)),nQ=se.div(tQ||(tQ=H([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),tU),iQ=fU(se.div(rQ||(rQ=H([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),Cp)),sQ=se.div(oQ||(oQ=H([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),lQ=se.div(aQ||(aQ=H([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function oke({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let h=mU(s,a,i),f=(0,vS.useMemo)(()=>GA.getIsPropHighlightedD(z(j({},a.address),{pathToProp:(0,uQ.getPointerParts)(s).path})),[s]);return vS.default.createElement(rke,{editingTools:h,propConfig:i,pointerToProp:s,isPropHighlightedD:f},vS.default.createElement(c,{editingTools:h,propConfig:i,value:h.value}))}var vS,uQ,cQ,ske=C(()=>{vS=Q(Re()),vU(),ike(),uQ=Mt,pU(),cQ=vS.default.memo(oke)}),gS,dQ,bU,hQ=C(()=>{gS=Q(Re()),_Y(),eke(),ske(),dQ=({propConfig:i,visualIndentation:s,pointerToProp:a,obj:c})=>{if(i.type==="compound")return gS.default.createElement(QZ,{obj:c,visualIndentation:s,pointerToProp:a,propConfig:i});if(i.type==="enum")return gS.default.createElement(gS.default.Fragment,null);{let h=JB[i.type];return gS.default.createElement(cQ,{SimpleEditorComponent:h,obj:c,visualIndentation:s,pointerToProp:a,propConfig:i})}},bU=dQ});function pQ(i){return qA.has(i)||qA.set(i,(fQ++).toString()),qA.get(i)}var qA,fQ,mQ=C(()=>{qA=new WeakMap,fQ=0}),Fy,vQ,gQ,yQ,bQ,_Q,wQ,ake=C(()=>{Fy=Q(Re()),hQ(),hn(),mQ(),Ne(),gQ=se.div(vQ||(vQ=H([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),bQ=se.button(yQ||(yQ=H([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),_Q=({objects:i})=>{let s=i[0],a=$n(s.template.configPointer),c=$n(s.template._temp_actionsPointer);return Fy.default.createElement(Fy.default.Fragment,null,Fy.default.createElement(bU,{key:pQ(s),obj:s,pointerToProp:s.propsP,propConfig:a,visualIndentation:1}),Fy.default.createElement(gQ,null,c&&Object.entries(c).map(([h,f])=>Fy.default.createElement(bQ,{key:h,onClick:()=>{f(s.publicApi)}},h))))},wQ=_Q}),xQ,SQ,XA,EQ=C(()=>{Ne(),SQ=se.button(xQ||(xQ=H([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),i=>i.disabled?"none":"pointer",i=>i.disabled?.4:1),XA=SQ}),lke=C(()=>{}),CQ,uke=C(()=>{lke(),CQ=(i=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(i));for(;i--;){let c=a[i]&63;c<36?s+=c.toString(36):c<62?s+=(c-26).toString(36).toUpperCase():c<63?s+="_":s+="-"}return s}});function PQ(){return CQ(16)}var kQ=C(()=>{uke()}),TQ,Nd,_U,MQ,AQ,IQ,RQ,OQ=C(()=>{TQ=Mt,mr(),Nd=Q(Re()),_U=(0,Nd.createContext)(null),MQ=0,AQ=()=>{let i=(0,Nd.useMemo)(()=>MQ++,[]),{cur:s,set:a}=(0,Nd.useContext)(_U),[c,h]=sr(!1),f=(0,Nd.useCallback)((g,y)=>{a(g?i:-1,y)},[]);return(0,Nd.useEffect)(()=>s.onStale(()=>{let g=s.getValue()===i;c.current!==g&&(c.current=g)}),[s,i]),[h,f]},IQ=({children:i})=>{let s=(0,Nd.useMemo)(()=>new TQ.Atom(-1),[]),a=s.prism,c=(0,Nd.useMemo)(()=>{let h;return(f,g)=>{let y=h!==void 0;h!==void 0&&(clearTimeout(h),h=void 0),g===0||y?s.set(f):h=setTimeout(()=>{s.set(f),h=void 0},g)}},[]);return Nd.default.createElement(_U.Provider,{value:{cur:a,set:c}},i)},RQ=IQ});function By(i,s){let a=i.enabled!==!1,[c,h]=AQ(),[f,g]=sr(null);(0,LQ.useEffect)(()=>{if(!a)return;let w=f.current;if(!w)return;let S=()=>{var I;return h(!0,(I=i.enterDelay)!=null?I:400)},T=()=>{var I;return h(!1,(I=i.exitDelay)!=null?I:200)};return w.addEventListener("mouseenter",S),w.addEventListener("mouseleave",T),()=>{w.removeEventListener("mouseenter",S),w.removeEventListener("mouseleave",T)}},[f,a,i.enterDelay,i.exitDelay]);let y=(0,DQ.useContext)(_y);return[a&&c&&g?(0,NQ.createPortal)(YA.default.createElement(KB,{children:s,target:g,onClickOutside:ru,verticalPlacement:i.verticalPlacement,verticalGap:i.verticalGap}),y):YA.default.createElement(YA.default.Fragment,null),f,c]}var DQ,LQ,YA,NQ,yS=C(()=>{mr(),DQ=Q(Re()),LQ=Q(Re()),YA=Q(Re()),xX(),NQ=Q(ql()),OQ(),rv(),Sy()}),FQ,BQ,Uy,ZA=C(()=>{Ne(),cc(),BQ=se(uc)(FQ||(FQ=H([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),Uy=BQ}),pc,UQ,VQ,jQ,zQ,HQ,GQ,$Q,WQ,KQ,cke=C(()=>{hn(),Fe(),pc=Q(Re()),Ne(),kQ(),yS(),ZA(),EQ(),VQ=se.div(UQ||(UQ=H([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),zQ=se.div(jQ||(jQ=H([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),GQ=se.div(HQ||(HQ=H([`
  display: flex;
  gap: 8px;
`]))),$Q=({projectId:i})=>{let s=$n(me().atomP.ephemeral.coreByProject[i].loadingState);return s&&s.type==="browserStateIsNotBasedOnDiskState"?pc.default.createElement(WQ,{loadingState:s,projectId:i}):null},WQ=({projectId:i,loadingState:s})=>{let a=()=>{me().transaction(({drafts:w,stateEditors:S})=>{S.coreByProject.historic.revisionHistory.add({projectId:i,revision:s.onDiskState.revisionHistory[0]}),S.coreByProject.historic.revisionHistory.add({projectId:i,revision:PQ()}),w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},c=()=>{me().transaction(({drafts:w})=>{w.historic.coreByProject[i]=s.onDiskState,w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},[h,f]=By({},()=>pc.default.createElement(Uy,null,"The browser's state will override the disk state.")),[g,y]=By({},()=>pc.default.createElement(Uy,null,"The disk's state will override the browser's state."));return pc.default.createElement(VQ,null,pc.default.createElement(zQ,null,"Browser state is not based on disk state."," ",pc.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),pc.default.createElement(GQ,null,h,pc.default.createElement(XA,{onClick:a,ref:f},"Use browser's state"),g,pc.default.createElement(XA,{onClick:c,ref:y},"Use disk state")))},KQ=$Q}),dke=K((i,s)=>{(function(a){typeof i=="object"&&typeof s<"u"?s.exports=a():(typeof window<"u"?window:typeof Ti<"u"?Ti:typeof self<"u"?self:this).JSZip=a()})(function(){return function a(c,h,f){function g(S,T){if(!h[S]){if(!c[S]){var I=typeof aD=="function"&&aD;if(!T&&I)return I(S,!0);if(y)return y(S,!0);var A=new Error("Cannot find module '"+S+"'");throw A.code="MODULE_NOT_FOUND",A}var k=h[S]={exports:{}};c[S][0].call(k.exports,function(D){var O=c[S][1][D];return g(O||D)},k,k.exports,a,c,h,f)}return h[S].exports}for(var y=typeof aD=="function"&&aD,w=0;w<f.length;w++)g(f[w]);return g}({1:[function(a,c,h){var f=a("./utils"),g=a("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(w){for(var S,T,I,A,k,D,O,F=[],V=0,$=w.length,X=$,re=f.getTypeOf(w)!=="string";V<w.length;)X=$-V,I=re?(S=w[V++],T=V<$?w[V++]:0,V<$?w[V++]:0):(S=w.charCodeAt(V++),T=V<$?w.charCodeAt(V++):0,V<$?w.charCodeAt(V++):0),A=S>>2,k=(3&S)<<4|T>>4,D=1<X?(15&T)<<2|I>>6:64,O=2<X?63&I:64,F.push(y.charAt(A)+y.charAt(k)+y.charAt(D)+y.charAt(O));return F.join("")},h.decode=function(w){var S,T,I,A,k,D,O=0,F=0,V="data:";if(w.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var $,X=3*(w=w.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(w.charAt(w.length-1)===y.charAt(64)&&X--,w.charAt(w.length-2)===y.charAt(64)&&X--,X%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=g.uint8array?new Uint8Array(0|X):new Array(0|X);O<w.length;)S=y.indexOf(w.charAt(O++))<<2|(A=y.indexOf(w.charAt(O++)))>>4,T=(15&A)<<4|(k=y.indexOf(w.charAt(O++)))>>2,I=(3&k)<<6|(D=y.indexOf(w.charAt(O++))),$[F++]=S,k!==64&&($[F++]=T),D!==64&&($[F++]=I);return $}},{"./support":30,"./utils":32}],2:[function(a,c,h){var f=a("./external"),g=a("./stream/DataWorker"),y=a("./stream/Crc32Probe"),w=a("./stream/DataLengthProbe");function S(T,I,A,k,D){this.compressedSize=T,this.uncompressedSize=I,this.crc32=A,this.compression=k,this.compressedContent=D}S.prototype={getContentWorker:function(){var T=new g(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new w("data_length")),I=this;return T.on("end",function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new g(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(T,I,A){return T.pipe(new y).pipe(new w("uncompressedSize")).pipe(I.compressWorker(A)).pipe(new w("compressedSize")).withStreamInfo("compression",I)},c.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,c,h){var f=a("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},h.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,c,h){var f=a("./utils"),g=function(){for(var y,w=[],S=0;S<256;S++){y=S;for(var T=0;T<8;T++)y=1&y?3988292384^y>>>1:y>>>1;w[S]=y}return w}();c.exports=function(y,w){return y!==void 0&&y.length?f.getTypeOf(y)!=="string"?function(S,T,I,A){var k=g,D=A+I;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^T[O])];return-1^S}(0|w,y,y.length,0):function(S,T,I,A){var k=g,D=A+I;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^T.charCodeAt(O))];return-1^S}(0|w,y,y.length,0):0}},{"./utils":32}],5:[function(a,c,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(a,c,h){var f=null;f=typeof Promise<"u"?Promise:a("lie"),c.exports={Promise:f}},{lie:37}],7:[function(a,c,h){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=a("pako"),y=a("./utils"),w=a("./stream/GenericWorker"),S=f?"uint8array":"array";function T(I,A){w.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=A,this.meta={}}h.magic="\b\0",y.inherits(T,w),T.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,I.data),!1)},T.prototype.flush=function(){w.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(A){I.push({data:A,meta:I.meta})}},h.compressWorker=function(I){return new T("Deflate",I)},h.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,c,h){function f(k,D){var O,F="";for(O=0;O<D;O++)F+=String.fromCharCode(255&k),k>>>=8;return F}function g(k,D,O,F,V,$){var X,re,ne=k.file,ae=k.compression,xe=$!==S.utf8encode,fe=y.transformTo("string",$(ne.name)),ge=y.transformTo("string",S.utf8encode(ne.name)),Ie=ne.comment,Qe=y.transformTo("string",$(Ie)),le=y.transformTo("string",S.utf8encode(Ie)),Ae=ge.length!==ne.name.length,Y=le.length!==Ie.length,Ue="",Tt="",ke="",Te=ne.dir,je=ne.date,wt={crc32:0,compressedSize:0,uncompressedSize:0};D&&!O||(wt.crc32=k.crc32,wt.compressedSize=k.compressedSize,wt.uncompressedSize=k.uncompressedSize);var ue=0;D&&(ue|=8),xe||!Ae&&!Y||(ue|=2048);var he=0,qe=0;Te&&(he|=16),V==="UNIX"?(qe=798,he|=function(ot,ze){var Yt=ot;return ot||(Yt=ze?16893:33204),(65535&Yt)<<16}(ne.unixPermissions,Te)):(qe=20,he|=function(ot){return 63&(ot||0)}(ne.dosPermissions)),X=je.getUTCHours(),X<<=6,X|=je.getUTCMinutes(),X<<=5,X|=je.getUTCSeconds()/2,re=je.getUTCFullYear()-1980,re<<=4,re|=je.getUTCMonth()+1,re<<=5,re|=je.getUTCDate(),Ae&&(Tt=f(1,1)+f(T(fe),4)+ge,Ue+="up"+f(Tt.length,2)+Tt),Y&&(ke=f(1,1)+f(T(Qe),4)+le,Ue+="uc"+f(ke.length,2)+ke);var Ze="";return Ze+=`
\0`,Ze+=f(ue,2),Ze+=ae.magic,Ze+=f(X,2),Ze+=f(re,2),Ze+=f(wt.crc32,4),Ze+=f(wt.compressedSize,4),Ze+=f(wt.uncompressedSize,4),Ze+=f(fe.length,2),Ze+=f(Ue.length,2),{fileRecord:I.LOCAL_FILE_HEADER+Ze+fe+Ue,dirRecord:I.CENTRAL_FILE_HEADER+f(qe,2)+Ze+f(Qe.length,2)+"\0\0\0\0"+f(he,4)+f(F,4)+fe+Ue+Qe}}var y=a("../utils"),w=a("../stream/GenericWorker"),S=a("../utf8"),T=a("../crc32"),I=a("../signature");function A(k,D,O,F){w.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=O,this.encodeFileName=F,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(A,w),A.prototype.push=function(k){var D=k.meta.percent||0,O=this.entriesCount,F=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,w.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:O?(D+100*(O-F-1))/O:100}}))},A.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var D=this.streamFiles&&!k.file.dir;if(D){var O=g(k,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:O.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(k){this.accumulate=!1;var D=this.streamFiles&&!k.file.dir,O=g(k,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(O.dirRecord),D)this.push({data:function(F){return I.DATA_DESCRIPTOR+f(F.crc32,4)+f(F.compressedSize,4)+f(F.uncompressedSize,4)}(k),meta:{percent:100}});else for(this.push({data:O.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var k=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var O=this.bytesWritten-k,F=function(V,$,X,re,ne){var ae=y.transformTo("string",ne(re));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(V,2)+f(V,2)+f($,4)+f(X,4)+f(ae.length,2)+ae}(this.dirRecords.length,O,k,this.zipComment,this.encodeFileName);this.push({data:F,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(k){this._sources.push(k);var D=this;return k.on("data",function(O){D.processChunk(O)}),k.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),k.on("error",function(O){D.error(O)}),this},A.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(k){var D=this._sources;if(!w.prototype.error.call(this,k))return!1;for(var O=0;O<D.length;O++)try{D[O].error(k)}catch{}return!0},A.prototype.lock=function(){w.prototype.lock.call(this);for(var k=this._sources,D=0;D<k.length;D++)k[D].lock()},c.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,c,h){var f=a("../compressions"),g=a("./ZipFileWorker");h.generateWorker=function(y,w,S){var T=new g(w.streamFiles,S,w.platform,w.encodeFileName),I=0;try{y.forEach(function(A,k){I++;var D=function($,X){var re=$||X,ne=f[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne}(k.options.compression,w.compression),O=k.options.compressionOptions||w.compressionOptions||{},F=k.dir,V=k.date;k._compressWorker(D,O).withStreamInfo("file",{name:A,dir:F,date:V,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(T)}),T.entriesCount=I}catch(A){T.error(A)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,c,h){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new f;for(var y in this)typeof this[y]!="function"&&(g[y]=this[y]);return g}}(f.prototype=a("./object")).loadAsync=a("./load"),f.support=a("./support"),f.defaults=a("./defaults"),f.version="3.10.1",f.loadAsync=function(g,y){return new f().loadAsync(g,y)},f.external=a("./external"),c.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,c,h){var f=a("./utils"),g=a("./external"),y=a("./utf8"),w=a("./zipEntries"),S=a("./stream/Crc32Probe"),T=a("./nodejsUtils");function I(A){return new g.Promise(function(k,D){var O=A.decompressed.getContentWorker().pipe(new S);O.on("error",function(F){D(F)}).on("end",function(){O.streamInfo.crc32!==A.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}c.exports=function(A,k){var D=this;return k=f.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),T.isNode&&T.isStream(A)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",A,!0,k.optimizedBinaryString,k.base64).then(function(O){var F=new w(k);return F.load(O),F}).then(function(O){var F=[g.Promise.resolve(O)],V=O.files;if(k.checkCRC32)for(var $=0;$<V.length;$++)F.push(I(V[$]));return g.Promise.all(F)}).then(function(O){for(var F=O.shift(),V=F.files,$=0;$<V.length;$++){var X=V[$],re=X.fileNameStr,ne=f.resolve(X.fileNameStr);D.file(ne,X.decompressed,{binary:!0,optimizedBinaryString:!0,date:X.date,dir:X.dir,comment:X.fileCommentStr.length?X.fileCommentStr:null,unixPermissions:X.unixPermissions,dosPermissions:X.dosPermissions,createFolders:k.createFolders}),X.dir||(D.file(ne).unsafeOriginalName=re)}return F.zipComment.length&&(D.comment=F.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,c,h){var f=a("../utils"),g=a("../stream/GenericWorker");function y(w,S){g.call(this,"Nodejs stream input adapter for "+w),this._upstreamEnded=!1,this._bindStream(S)}f.inherits(y,g),y.prototype._bindStream=function(w){var S=this;(this._stream=w).pause(),w.on("data",function(T){S.push({data:T,meta:{percent:0}})}).on("error",function(T){S.isPaused?this.generatedError=T:S.error(T)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},y.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},c.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,c,h){var f=a("readable-stream").Readable;function g(y,w,S){f.call(this,w),this._helper=y;var T=this;y.on("data",function(I,A){T.push(I)||T._helper.pause(),S&&S(A)}).on("error",function(I){T.emit("error",I)}).on("end",function(){T.push(null)})}a("../utils").inherits(g,f),g.prototype._read=function(){this._helper.resume()},c.exports=g},{"../utils":32,"readable-stream":16}],14:[function(a,c,h){c.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,g);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,g)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var g=new Buffer(f);return g.fill(0),g},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(a,c,h){function f(ne,ae,xe){var fe,ge=y.getTypeOf(ae),Ie=y.extend(xe||{},T);Ie.date=Ie.date||new Date,Ie.compression!==null&&(Ie.compression=Ie.compression.toUpperCase()),typeof Ie.unixPermissions=="string"&&(Ie.unixPermissions=parseInt(Ie.unixPermissions,8)),Ie.unixPermissions&&16384&Ie.unixPermissions&&(Ie.dir=!0),Ie.dosPermissions&&16&Ie.dosPermissions&&(Ie.dir=!0),Ie.dir&&(ne=V(ne)),Ie.createFolders&&(fe=F(ne))&&$.call(this,fe,!0);var Qe=ge==="string"&&Ie.binary===!1&&Ie.base64===!1;xe&&xe.binary!==void 0||(Ie.binary=!Qe),(ae instanceof I&&ae.uncompressedSize===0||Ie.dir||!ae||ae.length===0)&&(Ie.base64=!1,Ie.binary=!0,ae="",Ie.compression="STORE",ge="string");var le=null;le=ae instanceof I||ae instanceof w?ae:D.isNode&&D.isStream(ae)?new O(ne,ae):y.prepareContent(ne,ae,Ie.binary,Ie.optimizedBinaryString,Ie.base64);var Ae=new A(ne,le,Ie);this.files[ne]=Ae}var g=a("./utf8"),y=a("./utils"),w=a("./stream/GenericWorker"),S=a("./stream/StreamHelper"),T=a("./defaults"),I=a("./compressedObject"),A=a("./zipObject"),k=a("./generate"),D=a("./nodejsUtils"),O=a("./nodejs/NodejsStreamInputAdapter"),F=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var ae=ne.lastIndexOf("/");return 0<ae?ne.substring(0,ae):""},V=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},$=function(ne,ae){return ae=ae!==void 0?ae:T.createFolders,ne=V(ne),this.files[ne]||f.call(this,ne,null,{dir:!0,createFolders:ae}),this.files[ne]};function X(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var ae,xe,fe;for(ae in this.files)fe=this.files[ae],(xe=ae.slice(this.root.length,ae.length))&&ae.slice(0,this.root.length)===this.root&&ne(xe,fe)},filter:function(ne){var ae=[];return this.forEach(function(xe,fe){ne(xe,fe)&&ae.push(fe)}),ae},file:function(ne,ae,xe){if(arguments.length!==1)return ne=this.root+ne,f.call(this,ne,ae,xe),this;if(X(ne)){var fe=ne;return this.filter(function(Ie,Qe){return!Qe.dir&&fe.test(Ie)})}var ge=this.files[this.root+ne];return ge&&!ge.dir?ge:null},folder:function(ne){if(!ne)return this;if(X(ne))return this.filter(function(ge,Ie){return Ie.dir&&ne.test(ge)});var ae=this.root+ne,xe=$.call(this,ae),fe=this.clone();return fe.root=xe.name,fe},remove:function(ne){ne=this.root+ne;var ae=this.files[ne];if(ae||(ne.slice(-1)!=="/"&&(ne+="/"),ae=this.files[ne]),ae&&!ae.dir)delete this.files[ne];else for(var xe=this.filter(function(ge,Ie){return Ie.name.slice(0,ne.length)===ne}),fe=0;fe<xe.length;fe++)delete this.files[xe[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var ae,xe={};try{if((xe=y.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=xe.type.toLowerCase(),xe.compression=xe.compression.toUpperCase(),xe.type==="binarystring"&&(xe.type="string"),!xe.type)throw new Error("No output type specified.");y.checkSupport(xe.type),xe.platform!=="darwin"&&xe.platform!=="freebsd"&&xe.platform!=="linux"&&xe.platform!=="sunos"||(xe.platform="UNIX"),xe.platform==="win32"&&(xe.platform="DOS");var fe=xe.comment||this.comment||"";ae=k.generateWorker(this,xe,fe)}catch(ge){(ae=new w("error")).error(ge)}return new S(ae,xe.type||"string",xe.mimeType)},generateAsync:function(ne,ae){return this.generateInternalStream(ne).accumulate(ae)},generateNodeStream:function(ne,ae){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(ae)}};c.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,c,h){c.exports=a("stream")},{stream:void 0}],17:[function(a,c,h){var f=a("./DataReader");function g(y){f.call(this,y);for(var w=0;w<this.data.length;w++)y[w]=255&y[w]}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data[this.zero+y]},g.prototype.lastIndexOfSignature=function(y){for(var w=y.charCodeAt(0),S=y.charCodeAt(1),T=y.charCodeAt(2),I=y.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===w&&this.data[A+1]===S&&this.data[A+2]===T&&this.data[A+3]===I)return A-this.zero;return-1},g.prototype.readAndCheckSignature=function(y){var w=y.charCodeAt(0),S=y.charCodeAt(1),T=y.charCodeAt(2),I=y.charCodeAt(3),A=this.readData(4);return w===A[0]&&S===A[1]&&T===A[2]&&I===A[3]},g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],18:[function(a,c,h){var f=a("../utils");function g(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var w,S=0;for(this.checkOffset(y),w=this.index+y-1;w>=this.index;w--)S=(S<<8)+this.byteAt(w);return this.index+=y,S},readString:function(y){return f.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},c.exports=g},{"../utils":32}],19:[function(a,c,h){var f=a("./Uint8ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,c,h){var f=a("./DataReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},g.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},g.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],21:[function(a,c,h){var f=a("./ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var w=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(a,c,h){var f=a("../utils"),g=a("../support"),y=a("./ArrayReader"),w=a("./StringReader"),S=a("./NodeBufferReader"),T=a("./Uint8ArrayReader");c.exports=function(I){var A=f.getTypeOf(I);return f.checkSupport(A),A!=="string"||g.uint8array?A==="nodebuffer"?new S(I):g.uint8array?new T(f.transformTo("uint8array",I)):new y(f.transformTo("array",I)):new w(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,c,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,c,h){var f=a("./GenericWorker"),g=a("../utils");function y(w){f.call(this,"ConvertWorker to "+w),this.destType=w}g.inherits(y,f),y.prototype.processChunk=function(w){this.push({data:g.transformTo(this.destType,w.data),meta:w.meta})},c.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(a,c,h){var f=a("./GenericWorker"),g=a("../crc32");function y(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(y,f),y.prototype.processChunk=function(w){this.streamInfo.crc32=g(w.data,this.streamInfo.crc32||0),this.push(w)},c.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,c,h){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataLengthProbe for "+w),this.propName=w,this.withStreamInfo(w,0)}f.inherits(y,g),y.prototype.processChunk=function(w){if(w){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+w.data.length}g.prototype.processChunk.call(this,w)},c.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(a,c,h){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,w.then(function(T){S.dataIsReady=!0,S.data=T,S.max=T&&T.length||0,S.type=f.getTypeOf(T),S.isPaused||S._tickAndRepeat()},function(T){S.error(T)})}f.inherits(y,g),y.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var w=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":w=this.data.substring(this.index,S);break;case"uint8array":w=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":w=this.data.slice(this.index,S)}return this.index=S,this.push({data:w,meta:{percent:this.max?this.index/this.max*100:0}})},c.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(a,c,h){function f(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,y){return this._listeners[g].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,y){if(this._listeners[g])for(var w=0;w<this._listeners[g].length;w++)this._listeners[g][w].call(this,y)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var y=this;return g.on("data",function(w){y.processChunk(w)}),g.on("end",function(){y.end()}),g.on("error",function(w){y.error(w)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,y){return this.extraStreamInfo[g]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},c.exports=f},{}],29:[function(a,c,h){var f=a("../utils"),g=a("./ConvertWorker"),y=a("./GenericWorker"),w=a("../base64"),S=a("../support"),T=a("../external"),I=null;if(S.nodestream)try{I=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(D,O){return new T.Promise(function(F,V){var $=[],X=D._internalType,re=D._outputType,ne=D._mimeType;D.on("data",function(ae,xe){$.push(ae),O&&O(xe)}).on("error",function(ae){$=[],V(ae)}).on("end",function(){try{var ae=function(xe,fe,ge){switch(xe){case"blob":return f.newBlob(f.transformTo("arraybuffer",fe),ge);case"base64":return w.encode(fe);default:return f.transformTo(xe,fe)}}(re,function(xe,fe){var ge,Ie=0,Qe=null,le=0;for(ge=0;ge<fe.length;ge++)le+=fe[ge].length;switch(xe){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(Qe=new Uint8Array(le),ge=0;ge<fe.length;ge++)Qe.set(fe[ge],Ie),Ie+=fe[ge].length;return Qe;case"nodebuffer":return Buffer.concat(fe);default:throw new Error("concat : unsupported type '"+xe+"'")}}(X,$),ne);F(ae)}catch(xe){V(xe)}$=[]}).resume()})}function k(D,O,F){var V=O;switch(O){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=O,this._mimeType=F,f.checkSupport(V),this._worker=D.pipe(new g(V)),D.lock()}catch($){this._worker=new y("error"),this._worker.error($)}}k.prototype={accumulate:function(D){return A(this,D)},on:function(D,O){var F=this;return D==="data"?this._worker.on(D,function(V){O.call(F,V.data,V.meta)}):this._worker.on(D,function(){f.delay(O,arguments,F)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},D)}},c.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,c,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var f=new ArrayBuffer(0);try{h.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(f),h.blob=g.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!a("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(a,c,h){for(var f=a("./utils"),g=a("./support"),y=a("./nodejsUtils"),w=a("./stream/GenericWorker"),S=new Array(256),T=0;T<256;T++)S[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;S[254]=S[254]=1;function I(){w.call(this,"utf-8 decode"),this.leftOver=null}function A(){w.call(this,"utf-8 encode")}h.utf8encode=function(k){return g.nodebuffer?y.newBufferFrom(k,"utf-8"):function(D){var O,F,V,$,X,re=D.length,ne=0;for($=0;$<re;$++)(64512&(F=D.charCodeAt($)))==55296&&$+1<re&&(64512&(V=D.charCodeAt($+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),$++),ne+=F<128?1:F<2048?2:F<65536?3:4;for(O=g.uint8array?new Uint8Array(ne):new Array(ne),$=X=0;X<ne;$++)(64512&(F=D.charCodeAt($)))==55296&&$+1<re&&(64512&(V=D.charCodeAt($+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),$++),F<128?O[X++]=F:(F<2048?O[X++]=192|F>>>6:(F<65536?O[X++]=224|F>>>12:(O[X++]=240|F>>>18,O[X++]=128|F>>>12&63),O[X++]=128|F>>>6&63),O[X++]=128|63&F);return O}(k)},h.utf8decode=function(k){return g.nodebuffer?f.transformTo("nodebuffer",k).toString("utf-8"):function(D){var O,F,V,$,X=D.length,re=new Array(2*X);for(O=F=0;O<X;)if((V=D[O++])<128)re[F++]=V;else if(4<($=S[V]))re[F++]=65533,O+=$-1;else{for(V&=$===2?31:$===3?15:7;1<$&&O<X;)V=V<<6|63&D[O++],$--;1<$?re[F++]=65533:V<65536?re[F++]=V:(V-=65536,re[F++]=55296|V>>10&1023,re[F++]=56320|1023&V)}return re.length!==F&&(re.subarray?re=re.subarray(0,F):re.length=F),f.applyFromCharCode(re)}(k=f.transformTo(g.uint8array?"uint8array":"array",k))},f.inherits(I,w),I.prototype.processChunk=function(k){var D=f.transformTo(g.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var O=D;(D=new Uint8Array(O.length+this.leftOver.length)).set(this.leftOver,0),D.set(O,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var F=function($,X){var re;for((X=X||$.length)>$.length&&(X=$.length),re=X-1;0<=re&&(192&$[re])==128;)re--;return re<0||re===0?X:re+S[$[re]]>X?re:X}(D),V=D;F!==D.length&&(g.uint8array?(V=D.subarray(0,F),this.leftOver=D.subarray(F,D.length)):(V=D.slice(0,F),this.leftOver=D.slice(F,D.length))),this.push({data:h.utf8decode(V),meta:k.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=I,f.inherits(A,w),A.prototype.processChunk=function(k){this.push({data:h.utf8encode(k.data),meta:k.meta})},h.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,c,h){var f=a("./support"),g=a("./base64"),y=a("./nodejsUtils"),w=a("./external");function S(O){return O}function T(O,F){for(var V=0;V<O.length;++V)F[V]=255&O.charCodeAt(V);return F}a("setimmediate"),h.newBlob=function(O,F){h.checkSupport("blob");try{return new Blob([O],{type:F})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(O),V.getBlob(F)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(O,F,V){var $=[],X=0,re=O.length;if(re<=V)return String.fromCharCode.apply(null,O);for(;X<re;)F==="array"||F==="nodebuffer"?$.push(String.fromCharCode.apply(null,O.slice(X,Math.min(X+V,re)))):$.push(String.fromCharCode.apply(null,O.subarray(X,Math.min(X+V,re)))),X+=V;return $.join("")},stringifyByChar:function(O){for(var F="",V=0;V<O.length;V++)F+=String.fromCharCode(O[V]);return F},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function A(O){var F=65536,V=h.getTypeOf(O),$=!0;if(V==="uint8array"?$=I.applyCanBeUsed.uint8array:V==="nodebuffer"&&($=I.applyCanBeUsed.nodebuffer),$)for(;1<F;)try{return I.stringifyByChunk(O,V,F)}catch{F=Math.floor(F/2)}return I.stringifyByChar(O)}function k(O,F){for(var V=0;V<O.length;V++)F[V]=O[V];return F}h.applyFromCharCode=A;var D={};D.string={string:S,array:function(O){return T(O,new Array(O.length))},arraybuffer:function(O){return D.string.uint8array(O).buffer},uint8array:function(O){return T(O,new Uint8Array(O.length))},nodebuffer:function(O){return T(O,y.allocBuffer(O.length))}},D.array={string:A,array:S,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(O)}},D.arraybuffer={string:function(O){return A(new Uint8Array(O))},array:function(O){return k(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:S,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(new Uint8Array(O))}},D.uint8array={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:S,nodebuffer:function(O){return y.newBufferFrom(O)}},D.nodebuffer={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return D.nodebuffer.uint8array(O).buffer},uint8array:function(O){return k(O,new Uint8Array(O.length))},nodebuffer:S},h.transformTo=function(O,F){if(F=F||"",!O)return F;h.checkSupport(O);var V=h.getTypeOf(F);return D[V][O](F)},h.resolve=function(O){for(var F=O.split("/"),V=[],$=0;$<F.length;$++){var X=F[$];X==="."||X===""&&$!==0&&$!==F.length-1||(X===".."?V.pop():V.push(X))}return V.join("/")},h.getTypeOf=function(O){return typeof O=="string"?"string":Object.prototype.toString.call(O)==="[object Array]"?"array":f.nodebuffer&&y.isBuffer(O)?"nodebuffer":f.uint8array&&O instanceof Uint8Array?"uint8array":f.arraybuffer&&O instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(O){if(!f[O.toLowerCase()])throw new Error(O+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(O){var F,V,$="";for(V=0;V<(O||"").length;V++)$+="\\x"+((F=O.charCodeAt(V))<16?"0":"")+F.toString(16).toUpperCase();return $},h.delay=function(O,F,V){setImmediate(function(){O.apply(V||null,F||[])})},h.inherits=function(O,F){function V(){}V.prototype=F.prototype,O.prototype=new V},h.extend=function(){var O,F,V={};for(O=0;O<arguments.length;O++)for(F in arguments[O])Object.prototype.hasOwnProperty.call(arguments[O],F)&&V[F]===void 0&&(V[F]=arguments[O][F]);return V},h.prepareContent=function(O,F,V,$,X){return w.Promise.resolve(F).then(function(re){return f.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new w.Promise(function(ne,ae){var xe=new FileReader;xe.onload=function(fe){ne(fe.target.result)},xe.onerror=function(fe){ae(fe.target.error)},xe.readAsArrayBuffer(re)}):re}).then(function(re){var ne=h.getTypeOf(re);return ne?(ne==="arraybuffer"?re=h.transformTo("uint8array",re):ne==="string"&&(X?re=g.decode(re):V&&$!==!0&&(re=function(ae){return T(ae,f.uint8array?new Uint8Array(ae.length):new Array(ae.length))}(re))),re):w.Promise.reject(new Error("Can't read the data of '"+O+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,c,h){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./signature"),w=a("./zipEntry"),S=a("./support");function T(I){this.files=[],this.loadOptions=I}T.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(A)+", expected "+g.pretty(I)+")")}},isSignature:function(I,A){var k=this.reader.index;this.reader.setIndex(I);var D=this.reader.readString(4)===A;return this.reader.setIndex(k),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),A=S.uint8array?"uint8array":"array",k=g.transformTo(A,I);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,A,k,D=this.zip64EndOfCentralSize-44;0<D;)I=this.reader.readInt(2),A=this.reader.readInt(4),k=this.reader.readData(A),this.zip64ExtensibleData[I]={id:I,length:A,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,A;for(I=0;I<this.files.length;I++)A=this.files[I],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(I=new w({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var A=I;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var D=A-k;if(0<D)this.isSignature(A,y.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(I){this.reader=f(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},c.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,c,h){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./compressedObject"),w=a("./crc32"),S=a("./utf8"),T=a("./compressions"),I=a("./support");function A(k,D){this.options=k,this.loadOptions=D}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var D,O;if(k.skip(22),this.fileNameLength=k.readInt(2),O=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(O),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(F){for(var V in T)if(Object.prototype.hasOwnProperty.call(T,V)&&T[V].magic===F)return T[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,D,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var D=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(D),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=f(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var D,O,F,V=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<V;)D=k.readInt(2),O=k.readInt(2),F=k.readData(O),this.extraFields[D]={id:D,length:O,value:F};k.setIndex(V)},handleUTF8:function(){var k=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var O=g.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var F=this.findExtraFieldUnicodeComment();if(F!==null)this.fileCommentStr=F;else{var V=g.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileName)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileComment)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null}},c.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,c,h){function f(D,O,F){this.name=D,this.dir=F.dir,this.date=F.date,this.comment=F.comment,this.unixPermissions=F.unixPermissions,this.dosPermissions=F.dosPermissions,this._data=O,this._dataBinary=F.binary,this.options={compression:F.compression,compressionOptions:F.compressionOptions}}var g=a("./stream/StreamHelper"),y=a("./stream/DataWorker"),w=a("./utf8"),S=a("./compressedObject"),T=a("./stream/GenericWorker");f.prototype={internalStream:function(D){var O=null,F="string";try{if(!D)throw new Error("No output type specified.");var V=(F=D.toLowerCase())==="string"||F==="text";F!=="binarystring"&&F!=="text"||(F="string"),O=this._decompressWorker();var $=!this._dataBinary;$&&!V&&(O=O.pipe(new w.Utf8EncodeWorker)),!$&&V&&(O=O.pipe(new w.Utf8DecodeWorker))}catch(X){(O=new T("error")).error(X)}return new g(O,F,"")},async:function(D,O){return this.internalStream(D).accumulate(O)},nodeStream:function(D,O){return this.internalStream(D||"nodebuffer").toNodejsStream(O)},_compressWorker:function(D,O){if(this._data instanceof S&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var F=this._decompressWorker();return this._dataBinary||(F=F.pipe(new w.Utf8EncodeWorker)),S.createWorkerFrom(F,D,O)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof T?this._data:new y(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<I.length;k++)f.prototype[I[k]]=A;c.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,c,h){(function(f){var g,y,w=f.MutationObserver||f.WebKitMutationObserver;if(w){var S=0,T=new w(D),I=f.document.createTextNode("");T.observe(I,{characterData:!0}),g=function(){I.data=S=++S%2}}else if(f.setImmediate||f.MessageChannel===void 0)g="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var O=f.document.createElement("script");O.onreadystatechange=function(){D(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},f.document.documentElement.appendChild(O)}:function(){setTimeout(D,0)};else{var A=new f.MessageChannel;A.port1.onmessage=D,g=function(){A.port2.postMessage(0)}}var k=[];function D(){var O,F;y=!0;for(var V=k.length;V;){for(F=k,k=[],O=-1;++O<V;)F[O]();V=k.length}y=!1}c.exports=function(O){k.push(O)!==1||y||g()}}).call(this,typeof Ti<"u"?Ti:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,c,h){var f=a("immediate");function g(){}var y={},w=["REJECTED"],S=["FULFILLED"],T=["PENDING"];function I(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,V!==g&&O(this,V)}function A(V,$,X){this.promise=V,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof X=="function"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}function k(V,$,X){f(function(){var re;try{re=$(X)}catch(ne){return y.reject(V,ne)}re===V?y.reject(V,new TypeError("Cannot resolve promise with itself")):y.resolve(V,re)})}function D(V){var $=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof $=="function")return function(){$.apply(V,arguments)}}function O(V,$){var X=!1;function re(xe){X||(X=!0,y.reject(V,xe))}function ne(xe){X||(X=!0,y.resolve(V,xe))}var ae=F(function(){$(ne,re)});ae.status==="error"&&re(ae.value)}function F(V,$){var X={};try{X.value=V($),X.status="success"}catch(re){X.status="error",X.value=re}return X}(c.exports=I).prototype.finally=function(V){if(typeof V!="function")return this;var $=this.constructor;return this.then(function(X){return $.resolve(V()).then(function(){return X})},function(X){return $.resolve(V()).then(function(){throw X})})},I.prototype.catch=function(V){return this.then(null,V)},I.prototype.then=function(V,$){if(typeof V!="function"&&this.state===S||typeof $!="function"&&this.state===w)return this;var X=new this.constructor(g);return this.state!==T?k(X,this.state===S?V:$,this.outcome):this.queue.push(new A(X,V,$)),X},A.prototype.callFulfilled=function(V){y.resolve(this.promise,V)},A.prototype.otherCallFulfilled=function(V){k(this.promise,this.onFulfilled,V)},A.prototype.callRejected=function(V){y.reject(this.promise,V)},A.prototype.otherCallRejected=function(V){k(this.promise,this.onRejected,V)},y.resolve=function(V,$){var X=F(D,$);if(X.status==="error")return y.reject(V,X.value);var re=X.value;if(re)O(V,re);else{V.state=S,V.outcome=$;for(var ne=-1,ae=V.queue.length;++ne<ae;)V.queue[ne].callFulfilled($)}return V},y.reject=function(V,$){V.state=w,V.outcome=$;for(var X=-1,re=V.queue.length;++X<re;)V.queue[X].callRejected($);return V},I.resolve=function(V){return V instanceof this?V:y.resolve(new this(g),V)},I.reject=function(V){var $=new this(g);return y.reject($,V)},I.all=function(V){var $=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=new Array(X),ae=0,xe=-1,fe=new this(g);++xe<X;)ge(V[xe],xe);return fe;function ge(Ie,Qe){$.resolve(Ie).then(function(le){ne[Qe]=le,++ae!==X||re||(re=!0,y.resolve(fe,ne))},function(le){re||(re=!0,y.reject(fe,le))})}},I.race=function(V){var $=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=-1,ae=new this(g);++ne<X;)xe=V[ne],$.resolve(xe).then(function(fe){re||(re=!0,y.resolve(ae,fe))},function(fe){re||(re=!0,y.reject(ae,fe))});var xe;return ae}},{immediate:36}],38:[function(a,c,h){var f={};(0,a("./lib/utils/common").assign)(f,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),c.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,c,h){var f=a("./zlib/deflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/messages"),S=a("./zlib/zstream"),T=Object.prototype.toString,I=0,A=-1,k=0,D=8;function O(V){if(!(this instanceof O))return new O(V);this.options=g.assign({level:A,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},V||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var X=f.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(X!==I)throw new Error(w[X]);if($.header&&f.deflateSetHeader(this.strm,$.header),$.dictionary){var re;if(re=typeof $.dictionary=="string"?y.string2buf($.dictionary):T.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(X=f.deflateSetDictionary(this.strm,re))!==I)throw new Error(w[X]);this._dict_set=!0}}function F(V,$){var X=new O($);if(X.push(V,!0),X.err)throw X.msg||w[X.err];return X.result}O.prototype.push=function(V,$){var X,re,ne=this.strm,ae=this.options.chunkSize;if(this.ended)return!1;re=$===~~$?$:$===!0?4:0,typeof V=="string"?ne.input=y.string2buf(V):T.call(V)==="[object ArrayBuffer]"?ne.input=new Uint8Array(V):ne.input=V,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new g.Buf8(ae),ne.next_out=0,ne.avail_out=ae),(X=f.deflate(ne,re))!==1&&X!==I)return this.onEnd(X),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(g.shrinkBuf(ne.output,ne.next_out))):this.onData(g.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&X!==1);return re===4?(X=f.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===I):re!==2||(this.onEnd(I),!(ne.avail_out=0))},O.prototype.onData=function(V){this.chunks.push(V)},O.prototype.onEnd=function(V){V===I&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},h.Deflate=O,h.deflate=F,h.deflateRaw=function(V,$){return($=$||{}).raw=!0,F(V,$)},h.gzip=function(V,$){return($=$||{}).gzip=!0,F(V,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,c,h){var f=a("./zlib/inflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/constants"),S=a("./zlib/messages"),T=a("./zlib/zstream"),I=a("./zlib/gzheader"),A=Object.prototype.toString;function k(O){if(!(this instanceof k))return new k(O);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},O||{});var F=this.options;F.raw&&0<=F.windowBits&&F.windowBits<16&&(F.windowBits=-F.windowBits,F.windowBits===0&&(F.windowBits=-15)),!(0<=F.windowBits&&F.windowBits<16)||O&&O.windowBits||(F.windowBits+=32),15<F.windowBits&&F.windowBits<48&&!(15&F.windowBits)&&(F.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var V=f.inflateInit2(this.strm,F.windowBits);if(V!==w.Z_OK)throw new Error(S[V]);this.header=new I,f.inflateGetHeader(this.strm,this.header)}function D(O,F){var V=new k(F);if(V.push(O,!0),V.err)throw V.msg||S[V.err];return V.result}k.prototype.push=function(O,F){var V,$,X,re,ne,ae,xe=this.strm,fe=this.options.chunkSize,ge=this.options.dictionary,Ie=!1;if(this.ended)return!1;$=F===~~F?F:F===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof O=="string"?xe.input=y.binstring2buf(O):A.call(O)==="[object ArrayBuffer]"?xe.input=new Uint8Array(O):xe.input=O,xe.next_in=0,xe.avail_in=xe.input.length;do{if(xe.avail_out===0&&(xe.output=new g.Buf8(fe),xe.next_out=0,xe.avail_out=fe),(V=f.inflate(xe,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&ge&&(ae=typeof ge=="string"?y.string2buf(ge):A.call(ge)==="[object ArrayBuffer]"?new Uint8Array(ge):ge,V=f.inflateSetDictionary(this.strm,ae)),V===w.Z_BUF_ERROR&&Ie===!0&&(V=w.Z_OK,Ie=!1),V!==w.Z_STREAM_END&&V!==w.Z_OK)return this.onEnd(V),!(this.ended=!0);xe.next_out&&(xe.avail_out!==0&&V!==w.Z_STREAM_END&&(xe.avail_in!==0||$!==w.Z_FINISH&&$!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(X=y.utf8border(xe.output,xe.next_out),re=xe.next_out-X,ne=y.buf2string(xe.output,X),xe.next_out=re,xe.avail_out=fe-re,re&&g.arraySet(xe.output,xe.output,X,re,0),this.onData(ne)):this.onData(g.shrinkBuf(xe.output,xe.next_out)))),xe.avail_in===0&&xe.avail_out===0&&(Ie=!0)}while((0<xe.avail_in||xe.avail_out===0)&&V!==w.Z_STREAM_END);return V===w.Z_STREAM_END&&($=w.Z_FINISH),$===w.Z_FINISH?(V=f.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===w.Z_OK):$!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),!(xe.avail_out=0))},k.prototype.onData=function(O){this.chunks.push(O)},k.prototype.onEnd=function(O){O===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},h.Inflate=k,h.inflate=D,h.inflateRaw=function(O,F){return(F=F||{}).raw=!0,D(O,F)},h.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,c,h){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(w){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var T=S.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var I in T)T.hasOwnProperty(I)&&(w[I]=T[I])}}return w},h.shrinkBuf=function(w,S){return w.length===S?w:w.subarray?w.subarray(0,S):(w.length=S,w)};var g={arraySet:function(w,S,T,I,A){if(S.subarray&&w.subarray)w.set(S.subarray(T,T+I),A);else for(var k=0;k<I;k++)w[A+k]=S[T+k]},flattenChunks:function(w){var S,T,I,A,k,D;for(S=I=0,T=w.length;S<T;S++)I+=w[S].length;for(D=new Uint8Array(I),S=A=0,T=w.length;S<T;S++)k=w[S],D.set(k,A),A+=k.length;return D}},y={arraySet:function(w,S,T,I,A){for(var k=0;k<I;k++)w[A+k]=S[T+k]},flattenChunks:function(w){return[].concat.apply([],w)}};h.setTyped=function(w){w?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,g)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,y))},h.setTyped(f)},{}],42:[function(a,c,h){var f=a("./common"),g=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var w=new f.Buf8(256),S=0;S<256;S++)w[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function T(I,A){if(A<65537&&(I.subarray&&y||!I.subarray&&g))return String.fromCharCode.apply(null,f.shrinkBuf(I,A));for(var k="",D=0;D<A;D++)k+=String.fromCharCode(I[D]);return k}w[254]=w[254]=1,h.string2buf=function(I){var A,k,D,O,F,V=I.length,$=0;for(O=0;O<V;O++)(64512&(k=I.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=I.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),$+=k<128?1:k<2048?2:k<65536?3:4;for(A=new f.Buf8($),O=F=0;F<$;O++)(64512&(k=I.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=I.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),k<128?A[F++]=k:(k<2048?A[F++]=192|k>>>6:(k<65536?A[F++]=224|k>>>12:(A[F++]=240|k>>>18,A[F++]=128|k>>>12&63),A[F++]=128|k>>>6&63),A[F++]=128|63&k);return A},h.buf2binstring=function(I){return T(I,I.length)},h.binstring2buf=function(I){for(var A=new f.Buf8(I.length),k=0,D=A.length;k<D;k++)A[k]=I.charCodeAt(k);return A},h.buf2string=function(I,A){var k,D,O,F,V=A||I.length,$=new Array(2*V);for(k=D=0;k<V;)if((O=I[k++])<128)$[D++]=O;else if(4<(F=w[O]))$[D++]=65533,k+=F-1;else{for(O&=F===2?31:F===3?15:7;1<F&&k<V;)O=O<<6|63&I[k++],F--;1<F?$[D++]=65533:O<65536?$[D++]=O:(O-=65536,$[D++]=55296|O>>10&1023,$[D++]=56320|1023&O)}return T($,D)},h.utf8border=function(I,A){var k;for((A=A||I.length)>I.length&&(A=I.length),k=A-1;0<=k&&(192&I[k])==128;)k--;return k<0||k===0?A:k+w[I[k]]>A?k:A}},{"./common":41}],43:[function(a,c,h){c.exports=function(f,g,y,w){for(var S=65535&f|0,T=f>>>16&65535|0,I=0;y!==0;){for(y-=I=2e3<y?2e3:y;T=T+(S=S+g[w++]|0)|0,--I;);S%=65521,T%=65521}return S|T<<16|0}},{}],44:[function(a,c,h){c.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,c,h){var f=function(){for(var g,y=[],w=0;w<256;w++){g=w;for(var S=0;S<8;S++)g=1&g?3988292384^g>>>1:g>>>1;y[w]=g}return y}();c.exports=function(g,y,w,S){var T=f,I=S+w;g^=-1;for(var A=S;A<I;A++)g=g>>>8^T[255&(g^y[A])];return-1^g}},{}],46:[function(a,c,h){var f,g=a("../utils/common"),y=a("./trees"),w=a("./adler32"),S=a("./crc32"),T=a("./messages"),I=0,A=4,k=0,D=-2,O=-1,F=4,V=2,$=8,X=9,re=286,ne=30,ae=19,xe=2*re+1,fe=15,ge=3,Ie=258,Qe=Ie+ge+1,le=42,Ae=113,Y=1,Ue=2,Tt=3,ke=4;function Te(J,at){return J.msg=T[at],at}function je(J){return(J<<1)-(4<J?9:0)}function wt(J){for(var at=J.length;0<=--at;)J[at]=0}function ue(J){var at=J.state,st=at.pending;st>J.avail_out&&(st=J.avail_out),st!==0&&(g.arraySet(J.output,at.pending_buf,at.pending_out,st,J.next_out),J.next_out+=st,at.pending_out+=st,J.total_out+=st,J.avail_out-=st,at.pending-=st,at.pending===0&&(at.pending_out=0))}function he(J,at){y._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,at),J.block_start=J.strstart,ue(J.strm)}function qe(J,at){J.pending_buf[J.pending++]=at}function Ze(J,at){J.pending_buf[J.pending++]=at>>>8&255,J.pending_buf[J.pending++]=255&at}function ot(J,at){var st,we,be=J.max_chain_length,He=J.strstart,xt=J.prev_length,Ct=J.nice_match,Xe=J.strstart>J.w_size-Qe?J.strstart-(J.w_size-Qe):0,At=J.window,Et=J.w_mask,Pt=J.prev,_n=J.strstart+Ie,gr=At[He+xt-1],Hn=At[He+xt];J.prev_length>=J.good_match&&(be>>=2),Ct>J.lookahead&&(Ct=J.lookahead);do if(At[(st=at)+xt]===Hn&&At[st+xt-1]===gr&&At[st]===At[He]&&At[++st]===At[He+1]){He+=2,st++;do;while(At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&He<_n);if(we=Ie-(_n-He),He=_n-Ie,xt<we){if(J.match_start=at,Ct<=(xt=we))break;gr=At[He+xt-1],Hn=At[He+xt]}}while((at=Pt[at&Et])>Xe&&--be!=0);return xt<=J.lookahead?xt:J.lookahead}function ze(J){var at,st,we,be,He,xt,Ct,Xe,At,Et,Pt=J.w_size;do{if(be=J.window_size-J.lookahead-J.strstart,J.strstart>=Pt+(Pt-Qe)){for(g.arraySet(J.window,J.window,Pt,Pt,0),J.match_start-=Pt,J.strstart-=Pt,J.block_start-=Pt,at=st=J.hash_size;we=J.head[--at],J.head[at]=Pt<=we?we-Pt:0,--st;);for(at=st=Pt;we=J.prev[--at],J.prev[at]=Pt<=we?we-Pt:0,--st;);be+=Pt}if(J.strm.avail_in===0)break;if(xt=J.strm,Ct=J.window,Xe=J.strstart+J.lookahead,At=be,Et=void 0,Et=xt.avail_in,At<Et&&(Et=At),st=Et===0?0:(xt.avail_in-=Et,g.arraySet(Ct,xt.input,xt.next_in,Et,Xe),xt.state.wrap===1?xt.adler=w(xt.adler,Ct,Et,Xe):xt.state.wrap===2&&(xt.adler=S(xt.adler,Ct,Et,Xe)),xt.next_in+=Et,xt.total_in+=Et,Et),J.lookahead+=st,J.lookahead+J.insert>=ge)for(He=J.strstart-J.insert,J.ins_h=J.window[He],J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+ge-1])&J.hash_mask,J.prev[He&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=He,He++,J.insert--,!(J.lookahead+J.insert<ge)););}while(J.lookahead<Qe&&J.strm.avail_in!==0)}function Yt(J,at){for(var st,we;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===I)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),st!==0&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st)),J.match_length>=ge)if(we=y._tr_tally(J,J.strstart-J.match_start,J.match_length-ge),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=ge){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else we=y._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(we&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function bt(J,at){for(var st,we,be;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===I)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=ge-1,st!==0&&J.prev_length<J.max_lazy_match&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st),J.match_length<=5&&(J.strategy===1||J.match_length===ge&&4096<J.strstart-J.match_start)&&(J.match_length=ge-1)),J.prev_length>=ge&&J.match_length<=J.prev_length){for(be=J.strstart+J.lookahead-ge,we=y._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-ge),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=be&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=ge-1,J.strstart++,we&&(he(J,!1),J.strm.avail_out===0))return Y}else if(J.match_available){if((we=y._tr_tally(J,0,J.window[J.strstart-1]))&&he(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return Y}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(we=y._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function Wt(J,at,st,we,be){this.good_length=J,this.max_lazy=at,this.nice_length=st,this.max_chain=we,this.func=be}function cn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*xe),this.dyn_dtree=new g.Buf16(2*(2*ne+1)),this.bl_tree=new g.Buf16(2*(2*ae+1)),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(fe+1),this.heap=new g.Buf16(2*re+1),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*re+1),wt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function In(J){var at;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=V,(at=J.state).pending=0,at.pending_out=0,at.wrap<0&&(at.wrap=-at.wrap),at.status=at.wrap?le:Ae,J.adler=at.wrap===2?0:1,at.last_flush=I,y._tr_init(at),k):Te(J,D)}function Cn(J){var at=In(J);return at===k&&function(st){st.window_size=2*st.w_size,wt(st.head),st.max_lazy_match=f[st.level].max_lazy,st.good_match=f[st.level].good_length,st.nice_match=f[st.level].nice_length,st.max_chain_length=f[st.level].max_chain,st.strstart=0,st.block_start=0,st.lookahead=0,st.insert=0,st.match_length=st.prev_length=ge-1,st.match_available=0,st.ins_h=0}(J.state),at}function Er(J,at,st,we,be,He){if(!J)return D;var xt=1;if(at===O&&(at=6),we<0?(xt=0,we=-we):15<we&&(xt=2,we-=16),be<1||X<be||st!==$||we<8||15<we||at<0||9<at||He<0||F<He)return Te(J,D);we===8&&(we=9);var Ct=new cn;return(J.state=Ct).strm=J,Ct.wrap=xt,Ct.gzhead=null,Ct.w_bits=we,Ct.w_size=1<<Ct.w_bits,Ct.w_mask=Ct.w_size-1,Ct.hash_bits=be+7,Ct.hash_size=1<<Ct.hash_bits,Ct.hash_mask=Ct.hash_size-1,Ct.hash_shift=~~((Ct.hash_bits+ge-1)/ge),Ct.window=new g.Buf8(2*Ct.w_size),Ct.head=new g.Buf16(Ct.hash_size),Ct.prev=new g.Buf16(Ct.w_size),Ct.lit_bufsize=1<<be+6,Ct.pending_buf_size=4*Ct.lit_bufsize,Ct.pending_buf=new g.Buf8(Ct.pending_buf_size),Ct.d_buf=1*Ct.lit_bufsize,Ct.l_buf=3*Ct.lit_bufsize,Ct.level=at,Ct.strategy=He,Ct.method=st,Cn(J)}f=[new Wt(0,0,0,0,function(J,at){var st=65535;for(st>J.pending_buf_size-5&&(st=J.pending_buf_size-5);;){if(J.lookahead<=1){if(ze(J),J.lookahead===0&&at===I)return Y;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var we=J.block_start+st;if((J.strstart===0||J.strstart>=we)&&(J.lookahead=J.strstart-we,J.strstart=we,he(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-Qe&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=0,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):(J.strstart>J.block_start&&(he(J,!1),J.strm.avail_out),Y)}),new Wt(4,4,8,4,Yt),new Wt(4,5,16,8,Yt),new Wt(4,6,32,32,Yt),new Wt(4,4,16,16,bt),new Wt(8,16,32,32,bt),new Wt(8,16,128,128,bt),new Wt(8,32,128,256,bt),new Wt(32,128,258,1024,bt),new Wt(32,258,258,4096,bt)],h.deflateInit=function(J,at){return Er(J,at,$,15,8,0)},h.deflateInit2=Er,h.deflateReset=Cn,h.deflateResetKeep=In,h.deflateSetHeader=function(J,at){return J&&J.state?J.state.wrap!==2?D:(J.state.gzhead=at,k):D},h.deflate=function(J,at){var st,we,be,He;if(!J||!J.state||5<at||at<0)return J?Te(J,D):D;if(we=J.state,!J.output||!J.input&&J.avail_in!==0||we.status===666&&at!==A)return Te(J,J.avail_out===0?-5:D);if(we.strm=J,st=we.last_flush,we.last_flush=at,we.status===le)if(we.wrap===2)J.adler=0,qe(we,31),qe(we,139),qe(we,8),we.gzhead?(qe(we,(we.gzhead.text?1:0)+(we.gzhead.hcrc?2:0)+(we.gzhead.extra?4:0)+(we.gzhead.name?8:0)+(we.gzhead.comment?16:0)),qe(we,255&we.gzhead.time),qe(we,we.gzhead.time>>8&255),qe(we,we.gzhead.time>>16&255),qe(we,we.gzhead.time>>24&255),qe(we,we.level===9?2:2<=we.strategy||we.level<2?4:0),qe(we,255&we.gzhead.os),we.gzhead.extra&&we.gzhead.extra.length&&(qe(we,255&we.gzhead.extra.length),qe(we,we.gzhead.extra.length>>8&255)),we.gzhead.hcrc&&(J.adler=S(J.adler,we.pending_buf,we.pending,0)),we.gzindex=0,we.status=69):(qe(we,0),qe(we,0),qe(we,0),qe(we,0),qe(we,0),qe(we,we.level===9?2:2<=we.strategy||we.level<2?4:0),qe(we,3),we.status=Ae);else{var xt=$+(we.w_bits-8<<4)<<8;xt|=(2<=we.strategy||we.level<2?0:we.level<6?1:we.level===6?2:3)<<6,we.strstart!==0&&(xt|=32),xt+=31-xt%31,we.status=Ae,Ze(we,xt),we.strstart!==0&&(Ze(we,J.adler>>>16),Ze(we,65535&J.adler)),J.adler=1}if(we.status===69)if(we.gzhead.extra){for(be=we.pending;we.gzindex<(65535&we.gzhead.extra.length)&&(we.pending!==we.pending_buf_size||(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending!==we.pending_buf_size));)qe(we,255&we.gzhead.extra[we.gzindex]),we.gzindex++;we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),we.gzindex===we.gzhead.extra.length&&(we.gzindex=0,we.status=73)}else we.status=73;if(we.status===73)if(we.gzhead.name){be=we.pending;do{if(we.pending===we.pending_buf_size&&(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending===we.pending_buf_size)){He=1;break}He=we.gzindex<we.gzhead.name.length?255&we.gzhead.name.charCodeAt(we.gzindex++):0,qe(we,He)}while(He!==0);we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),He===0&&(we.gzindex=0,we.status=91)}else we.status=91;if(we.status===91)if(we.gzhead.comment){be=we.pending;do{if(we.pending===we.pending_buf_size&&(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending===we.pending_buf_size)){He=1;break}He=we.gzindex<we.gzhead.comment.length?255&we.gzhead.comment.charCodeAt(we.gzindex++):0,qe(we,He)}while(He!==0);we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),He===0&&(we.status=103)}else we.status=103;if(we.status===103&&(we.gzhead.hcrc?(we.pending+2>we.pending_buf_size&&ue(J),we.pending+2<=we.pending_buf_size&&(qe(we,255&J.adler),qe(we,J.adler>>8&255),J.adler=0,we.status=Ae)):we.status=Ae),we.pending!==0){if(ue(J),J.avail_out===0)return we.last_flush=-1,k}else if(J.avail_in===0&&je(at)<=je(st)&&at!==A)return Te(J,-5);if(we.status===666&&J.avail_in!==0)return Te(J,-5);if(J.avail_in!==0||we.lookahead!==0||at!==I&&we.status!==666){var Ct=we.strategy===2?function(Xe,At){for(var Et;;){if(Xe.lookahead===0&&(ze(Xe),Xe.lookahead===0)){if(At===I)return Y;break}if(Xe.match_length=0,Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++,Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(we,at):we.strategy===3?function(Xe,At){for(var Et,Pt,_n,gr,Hn=Xe.window;;){if(Xe.lookahead<=Ie){if(ze(Xe),Xe.lookahead<=Ie&&At===I)return Y;if(Xe.lookahead===0)break}if(Xe.match_length=0,Xe.lookahead>=ge&&0<Xe.strstart&&(Pt=Hn[_n=Xe.strstart-1])===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]){gr=Xe.strstart+Ie;do;while(Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&_n<gr);Xe.match_length=Ie-(gr-_n),Xe.match_length>Xe.lookahead&&(Xe.match_length=Xe.lookahead)}if(Xe.match_length>=ge?(Et=y._tr_tally(Xe,1,Xe.match_length-ge),Xe.lookahead-=Xe.match_length,Xe.strstart+=Xe.match_length,Xe.match_length=0):(Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++),Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(we,at):f[we.level].func(we,at);if(Ct!==Tt&&Ct!==ke||(we.status=666),Ct===Y||Ct===Tt)return J.avail_out===0&&(we.last_flush=-1),k;if(Ct===Ue&&(at===1?y._tr_align(we):at!==5&&(y._tr_stored_block(we,0,0,!1),at===3&&(wt(we.head),we.lookahead===0&&(we.strstart=0,we.block_start=0,we.insert=0))),ue(J),J.avail_out===0))return we.last_flush=-1,k}return at!==A?k:we.wrap<=0?1:(we.wrap===2?(qe(we,255&J.adler),qe(we,J.adler>>8&255),qe(we,J.adler>>16&255),qe(we,J.adler>>24&255),qe(we,255&J.total_in),qe(we,J.total_in>>8&255),qe(we,J.total_in>>16&255),qe(we,J.total_in>>24&255)):(Ze(we,J.adler>>>16),Ze(we,65535&J.adler)),ue(J),0<we.wrap&&(we.wrap=-we.wrap),we.pending!==0?k:1)},h.deflateEnd=function(J){var at;return J&&J.state?(at=J.state.status)!==le&&at!==69&&at!==73&&at!==91&&at!==103&&at!==Ae&&at!==666?Te(J,D):(J.state=null,at===Ae?Te(J,-3):k):D},h.deflateSetDictionary=function(J,at){var st,we,be,He,xt,Ct,Xe,At,Et=at.length;if(!J||!J.state||(He=(st=J.state).wrap)===2||He===1&&st.status!==le||st.lookahead)return D;for(He===1&&(J.adler=w(J.adler,at,Et,0)),st.wrap=0,Et>=st.w_size&&(He===0&&(wt(st.head),st.strstart=0,st.block_start=0,st.insert=0),At=new g.Buf8(st.w_size),g.arraySet(At,at,Et-st.w_size,st.w_size,0),at=At,Et=st.w_size),xt=J.avail_in,Ct=J.next_in,Xe=J.input,J.avail_in=Et,J.next_in=0,J.input=at,ze(st);st.lookahead>=ge;){for(we=st.strstart,be=st.lookahead-(ge-1);st.ins_h=(st.ins_h<<st.hash_shift^st.window[we+ge-1])&st.hash_mask,st.prev[we&st.w_mask]=st.head[st.ins_h],st.head[st.ins_h]=we,we++,--be;);st.strstart=we,st.lookahead=ge-1,ze(st)}return st.strstart+=st.lookahead,st.block_start=st.strstart,st.insert=st.lookahead,st.lookahead=0,st.match_length=st.prev_length=ge-1,st.match_available=0,J.next_in=Ct,J.input=Xe,J.avail_in=xt,st.wrap=He,k},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,c,h){c.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,c,h){c.exports=function(f,g){var y,w,S,T,I,A,k,D,O,F,V,$,X,re,ne,ae,xe,fe,ge,Ie,Qe,le,Ae,Y,Ue;y=f.state,w=f.next_in,Y=f.input,S=w+(f.avail_in-5),T=f.next_out,Ue=f.output,I=T-(g-f.avail_out),A=T+(f.avail_out-257),k=y.dmax,D=y.wsize,O=y.whave,F=y.wnext,V=y.window,$=y.hold,X=y.bits,re=y.lencode,ne=y.distcode,ae=(1<<y.lenbits)-1,xe=(1<<y.distbits)-1;e:do{X<15&&($+=Y[w++]<<X,X+=8,$+=Y[w++]<<X,X+=8),fe=re[$&ae];t:for(;;){if($>>>=ge=fe>>>24,X-=ge,(ge=fe>>>16&255)===0)Ue[T++]=65535&fe;else{if(!(16&ge)){if(!(64&ge)){fe=re[(65535&fe)+($&(1<<ge)-1)];continue t}if(32&ge){y.mode=12;break e}f.msg="invalid literal/length code",y.mode=30;break e}Ie=65535&fe,(ge&=15)&&(X<ge&&($+=Y[w++]<<X,X+=8),Ie+=$&(1<<ge)-1,$>>>=ge,X-=ge),X<15&&($+=Y[w++]<<X,X+=8,$+=Y[w++]<<X,X+=8),fe=ne[$&xe];n:for(;;){if($>>>=ge=fe>>>24,X-=ge,!(16&(ge=fe>>>16&255))){if(!(64&ge)){fe=ne[(65535&fe)+($&(1<<ge)-1)];continue n}f.msg="invalid distance code",y.mode=30;break e}if(Qe=65535&fe,X<(ge&=15)&&($+=Y[w++]<<X,(X+=8)<ge&&($+=Y[w++]<<X,X+=8)),k<(Qe+=$&(1<<ge)-1)){f.msg="invalid distance too far back",y.mode=30;break e}if($>>>=ge,X-=ge,(ge=T-I)<Qe){if(O<(ge=Qe-ge)&&y.sane){f.msg="invalid distance too far back",y.mode=30;break e}if(Ae=V,(le=0)===F){if(le+=D-ge,ge<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}}else if(F<ge){if(le+=D+F-ge,(ge-=F)<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);if(le=0,F<Ie){for(Ie-=ge=F;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}}}else if(le+=F-ge,ge<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}for(;2<Ie;)Ue[T++]=Ae[le++],Ue[T++]=Ae[le++],Ue[T++]=Ae[le++],Ie-=3;Ie&&(Ue[T++]=Ae[le++],1<Ie&&(Ue[T++]=Ae[le++]))}else{for(le=T-Qe;Ue[T++]=Ue[le++],Ue[T++]=Ue[le++],Ue[T++]=Ue[le++],2<(Ie-=3););Ie&&(Ue[T++]=Ue[le++],1<Ie&&(Ue[T++]=Ue[le++]))}break}}break}}while(w<S&&T<A);w-=Ie=X>>3,$&=(1<<(X-=Ie<<3))-1,f.next_in=w,f.next_out=T,f.avail_in=w<S?S-w+5:5-(w-S),f.avail_out=T<A?A-T+257:257-(T-A),y.hold=$,y.bits=X}},{}],49:[function(a,c,h){var f=a("../utils/common"),g=a("./adler32"),y=a("./crc32"),w=a("./inffast"),S=a("./inftrees"),T=1,I=2,A=0,k=-2,D=1,O=852,F=592;function V(le){return(le>>>24&255)+(le>>>8&65280)+((65280&le)<<8)+((255&le)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(le){var Ae;return le&&le.state?(Ae=le.state,le.total_in=le.total_out=Ae.total=0,le.msg="",Ae.wrap&&(le.adler=1&Ae.wrap),Ae.mode=D,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new f.Buf32(O),Ae.distcode=Ae.distdyn=new f.Buf32(F),Ae.sane=1,Ae.back=-1,A):k}function re(le){var Ae;return le&&le.state?((Ae=le.state).wsize=0,Ae.whave=0,Ae.wnext=0,X(le)):k}function ne(le,Ae){var Y,Ue;return le&&le.state?(Ue=le.state,Ae<0?(Y=0,Ae=-Ae):(Y=1+(Ae>>4),Ae<48&&(Ae&=15)),Ae&&(Ae<8||15<Ae)?k:(Ue.window!==null&&Ue.wbits!==Ae&&(Ue.window=null),Ue.wrap=Y,Ue.wbits=Ae,re(le))):k}function ae(le,Ae){var Y,Ue;return le?(Ue=new $,(le.state=Ue).window=null,(Y=ne(le,Ae))!==A&&(le.state=null),Y):k}var xe,fe,ge=!0;function Ie(le){if(ge){var Ae;for(xe=new f.Buf32(512),fe=new f.Buf32(32),Ae=0;Ae<144;)le.lens[Ae++]=8;for(;Ae<256;)le.lens[Ae++]=9;for(;Ae<280;)le.lens[Ae++]=7;for(;Ae<288;)le.lens[Ae++]=8;for(S(T,le.lens,0,288,xe,0,le.work,{bits:9}),Ae=0;Ae<32;)le.lens[Ae++]=5;S(I,le.lens,0,32,fe,0,le.work,{bits:5}),ge=!1}le.lencode=xe,le.lenbits=9,le.distcode=fe,le.distbits=5}function Qe(le,Ae,Y,Ue){var Tt,ke=le.state;return ke.window===null&&(ke.wsize=1<<ke.wbits,ke.wnext=0,ke.whave=0,ke.window=new f.Buf8(ke.wsize)),Ue>=ke.wsize?(f.arraySet(ke.window,Ae,Y-ke.wsize,ke.wsize,0),ke.wnext=0,ke.whave=ke.wsize):(Ue<(Tt=ke.wsize-ke.wnext)&&(Tt=Ue),f.arraySet(ke.window,Ae,Y-Ue,Tt,ke.wnext),(Ue-=Tt)?(f.arraySet(ke.window,Ae,Y-Ue,Ue,0),ke.wnext=Ue,ke.whave=ke.wsize):(ke.wnext+=Tt,ke.wnext===ke.wsize&&(ke.wnext=0),ke.whave<ke.wsize&&(ke.whave+=Tt))),0}h.inflateReset=re,h.inflateReset2=ne,h.inflateResetKeep=X,h.inflateInit=function(le){return ae(le,15)},h.inflateInit2=ae,h.inflate=function(le,Ae){var Y,Ue,Tt,ke,Te,je,wt,ue,he,qe,Ze,ot,ze,Yt,bt,Wt,cn,In,Cn,Er,J,at,st,we,be=0,He=new f.Buf8(4),xt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return k;(Y=le.state).mode===12&&(Y.mode=13),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,qe=je,Ze=wt,at=A;e:for(;;)switch(Y.mode){case D:if(Y.wrap===0){Y.mode=13;break}for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(2&Y.wrap&&ue===35615){He[Y.check=0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0),he=ue=0,Y.mode=2;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(1&Y.wrap)||(((255&ue)<<8)+(ue>>8))%31){le.msg="incorrect header check",Y.mode=30;break}if((15&ue)!=8){le.msg="unknown compression method",Y.mode=30;break}if(he-=4,J=8+(15&(ue>>>=4)),Y.wbits===0)Y.wbits=J;else if(J>Y.wbits){le.msg="invalid window size",Y.mode=30;break}Y.dmax=1<<J,le.adler=Y.check=1,Y.mode=512&ue?10:12,he=ue=0;break;case 2:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.flags=ue,(255&Y.flags)!=8){le.msg="unknown compression method",Y.mode=30;break}if(57344&Y.flags){le.msg="unknown header flags set",Y.mode=30;break}Y.head&&(Y.head.text=ue>>8&1),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=3;case 3:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.time=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,He[2]=ue>>>16&255,He[3]=ue>>>24&255,Y.check=y(Y.check,He,4,0)),he=ue=0,Y.mode=4;case 4:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.xflags=255&ue,Y.head.os=ue>>8),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=5;case 5:if(1024&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length=ue,Y.head&&(Y.head.extra_len=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0}else Y.head&&(Y.head.extra=null);Y.mode=6;case 6:if(1024&Y.flags&&(je<(ot=Y.length)&&(ot=je),ot&&(Y.head&&(J=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Array(Y.head.extra_len)),f.arraySet(Y.head.extra,Ue,ke,ot,J)),512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,Y.length-=ot),Y.length))break e;Y.length=0,Y.mode=7;case 7:if(2048&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.name+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=8;case 8:if(4096&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.comment=null);Y.mode=9;case 9:if(512&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(65535&Y.check)){le.msg="header crc mismatch",Y.mode=30;break}he=ue=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),le.adler=Y.check=0,Y.mode=12;break;case 10:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}le.adler=Y.check=V(ue),he=ue=0,Y.mode=11;case 11:if(Y.havedict===0)return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,2;le.adler=Y.check=1,Y.mode=12;case 12:if(Ae===5||Ae===6)break e;case 13:if(Y.last){ue>>>=7&he,he-=7&he,Y.mode=27;break}for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}switch(Y.last=1&ue,he-=1,3&(ue>>>=1)){case 0:Y.mode=14;break;case 1:if(Ie(Y),Y.mode=20,Ae!==6)break;ue>>>=2,he-=2;break e;case 2:Y.mode=17;break;case 3:le.msg="invalid block type",Y.mode=30}ue>>>=2,he-=2;break;case 14:for(ue>>>=7&he,he-=7&he;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if((65535&ue)!=(ue>>>16^65535)){le.msg="invalid stored block lengths",Y.mode=30;break}if(Y.length=65535&ue,he=ue=0,Y.mode=15,Ae===6)break e;case 15:Y.mode=16;case 16:if(ot=Y.length){if(je<ot&&(ot=je),wt<ot&&(ot=wt),ot===0)break e;f.arraySet(Tt,Ue,ke,ot,Te),je-=ot,ke+=ot,wt-=ot,Te+=ot,Y.length-=ot;break}Y.mode=12;break;case 17:for(;he<14;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.nlen=257+(31&ue),ue>>>=5,he-=5,Y.ndist=1+(31&ue),ue>>>=5,he-=5,Y.ncode=4+(15&ue),ue>>>=4,he-=4,286<Y.nlen||30<Y.ndist){le.msg="too many length or distance symbols",Y.mode=30;break}Y.have=0,Y.mode=18;case 18:for(;Y.have<Y.ncode;){for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.lens[xt[Y.have++]]=7&ue,ue>>>=3,he-=3}for(;Y.have<19;)Y.lens[xt[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,st={bits:Y.lenbits},at=S(0,Y.lens,0,19,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid code lengths set",Y.mode=30;break}Y.have=0,Y.mode=19;case 19:for(;Y.have<Y.nlen+Y.ndist;){for(;Wt=(be=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(cn<16)ue>>>=bt,he-=bt,Y.lens[Y.have++]=cn;else{if(cn===16){for(we=bt+2;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue>>>=bt,he-=bt,Y.have===0){le.msg="invalid bit length repeat",Y.mode=30;break}J=Y.lens[Y.have-1],ot=3+(3&ue),ue>>>=2,he-=2}else if(cn===17){for(we=bt+3;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=3+(7&(ue>>>=bt)),ue>>>=3,he-=3}else{for(we=bt+7;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=11+(127&(ue>>>=bt)),ue>>>=7,he-=7}if(Y.have+ot>Y.nlen+Y.ndist){le.msg="invalid bit length repeat",Y.mode=30;break}for(;ot--;)Y.lens[Y.have++]=J}}if(Y.mode===30)break;if(Y.lens[256]===0){le.msg="invalid code -- missing end-of-block",Y.mode=30;break}if(Y.lenbits=9,st={bits:Y.lenbits},at=S(T,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid literal/lengths set",Y.mode=30;break}if(Y.distbits=6,Y.distcode=Y.distdyn,st={bits:Y.distbits},at=S(I,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,st),Y.distbits=st.bits,at){le.msg="invalid distances set",Y.mode=30;break}if(Y.mode=20,Ae===6)break e;case 20:Y.mode=21;case 21:if(6<=je&&258<=wt){le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,w(le,Ze),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,Y.mode===12&&(Y.back=-1);break}for(Y.back=0;Wt=(be=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Wt&&!(240&Wt)){for(In=bt,Cn=Wt,Er=cn;Wt=(be=Y.lencode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&be,!(In+(bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,Y.length=cn,Wt===0){Y.mode=26;break}if(32&Wt){Y.back=-1,Y.mode=12;break}if(64&Wt){le.msg="invalid literal/length code",Y.mode=30;break}Y.extra=15&Wt,Y.mode=22;case 22:if(Y.extra){for(we=Y.extra;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=23;case 23:for(;Wt=(be=Y.distcode[ue&(1<<Y.distbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(!(240&Wt)){for(In=bt,Cn=Wt,Er=cn;Wt=(be=Y.distcode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&be,!(In+(bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,64&Wt){le.msg="invalid distance code",Y.mode=30;break}Y.offset=cn,Y.extra=15&Wt,Y.mode=24;case 24:if(Y.extra){for(we=Y.extra;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.offset+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){le.msg="invalid distance too far back",Y.mode=30;break}Y.mode=25;case 25:if(wt===0)break e;if(ot=Ze-wt,Y.offset>ot){if((ot=Y.offset-ot)>Y.whave&&Y.sane){le.msg="invalid distance too far back",Y.mode=30;break}ze=ot>Y.wnext?(ot-=Y.wnext,Y.wsize-ot):Y.wnext-ot,ot>Y.length&&(ot=Y.length),Yt=Y.window}else Yt=Tt,ze=Te-Y.offset,ot=Y.length;for(wt<ot&&(ot=wt),wt-=ot,Y.length-=ot;Tt[Te++]=Yt[ze++],--ot;);Y.length===0&&(Y.mode=21);break;case 26:if(wt===0)break e;Tt[Te++]=Y.length,wt--,Y.mode=21;break;case 27:if(Y.wrap){for(;he<32;){if(je===0)break e;je--,ue|=Ue[ke++]<<he,he+=8}if(Ze-=wt,le.total_out+=Ze,Y.total+=Ze,Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,Te-Ze):g(Y.check,Tt,Ze,Te-Ze)),Ze=wt,(Y.flags?ue:V(ue))!==Y.check){le.msg="incorrect data check",Y.mode=30;break}he=ue=0}Y.mode=28;case 28:if(Y.wrap&&Y.flags){for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(4294967295&Y.total)){le.msg="incorrect length check",Y.mode=30;break}he=ue=0}Y.mode=29;case 29:at=1;break e;case 30:at=-3;break e;case 31:return-4;case 32:default:return k}return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,(Y.wsize||Ze!==le.avail_out&&Y.mode<30&&(Y.mode<27||Ae!==4))&&Qe(le,le.output,le.next_out,Ze-le.avail_out)?(Y.mode=31,-4):(qe-=le.avail_in,Ze-=le.avail_out,le.total_in+=qe,le.total_out+=Ze,Y.total+=Ze,Y.wrap&&Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,le.next_out-Ze):g(Y.check,Tt,Ze,le.next_out-Ze)),le.data_type=Y.bits+(Y.last?64:0)+(Y.mode===12?128:0)+(Y.mode===20||Y.mode===15?256:0),(qe==0&&Ze===0||Ae===4)&&at===A&&(at=-5),at)},h.inflateEnd=function(le){if(!le||!le.state)return k;var Ae=le.state;return Ae.window&&(Ae.window=null),le.state=null,A},h.inflateGetHeader=function(le,Ae){var Y;return le&&le.state&&2&(Y=le.state).wrap?((Y.head=Ae).done=!1,A):k},h.inflateSetDictionary=function(le,Ae){var Y,Ue=Ae.length;return le&&le.state?(Y=le.state).wrap!==0&&Y.mode!==11?k:Y.mode===11&&g(1,Ae,Ue,0)!==Y.check?-3:Qe(le,Ae,Ue,Ue)?(Y.mode=31,-4):(Y.havedict=1,A):k},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,c,h){var f=a("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(T,I,A,k,D,O,F,V){var $,X,re,ne,ae,xe,fe,ge,Ie,Qe=V.bits,le=0,Ae=0,Y=0,Ue=0,Tt=0,ke=0,Te=0,je=0,wt=0,ue=0,he=null,qe=0,Ze=new f.Buf16(16),ot=new f.Buf16(16),ze=null,Yt=0;for(le=0;le<=15;le++)Ze[le]=0;for(Ae=0;Ae<k;Ae++)Ze[I[A+Ae]]++;for(Tt=Qe,Ue=15;1<=Ue&&Ze[Ue]===0;Ue--);if(Ue<Tt&&(Tt=Ue),Ue===0)return D[O++]=20971520,D[O++]=20971520,V.bits=1,0;for(Y=1;Y<Ue&&Ze[Y]===0;Y++);for(Tt<Y&&(Tt=Y),le=je=1;le<=15;le++)if(je<<=1,(je-=Ze[le])<0)return-1;if(0<je&&(T===0||Ue!==1))return-1;for(ot[1]=0,le=1;le<15;le++)ot[le+1]=ot[le]+Ze[le];for(Ae=0;Ae<k;Ae++)I[A+Ae]!==0&&(F[ot[I[A+Ae]]++]=Ae);if(xe=T===0?(he=ze=F,19):T===1?(he=g,qe-=257,ze=y,Yt-=257,256):(he=w,ze=S,-1),le=Y,ae=O,Te=Ae=ue=0,re=-1,ne=(wt=1<<(ke=Tt))-1,T===1&&852<wt||T===2&&592<wt)return 1;for(;;){for(fe=le-Te,Ie=F[Ae]<xe?(ge=0,F[Ae]):F[Ae]>xe?(ge=ze[Yt+F[Ae]],he[qe+F[Ae]]):(ge=96,0),$=1<<le-Te,Y=X=1<<ke;D[ae+(ue>>Te)+(X-=$)]=fe<<24|ge<<16|Ie|0,X!==0;);for($=1<<le-1;ue&$;)$>>=1;if($!==0?(ue&=$-1,ue+=$):ue=0,Ae++,--Ze[le]==0){if(le===Ue)break;le=I[A+F[Ae]]}if(Tt<le&&(ue&ne)!==re){for(Te===0&&(Te=Tt),ae+=Y,je=1<<(ke=le-Te);ke+Te<Ue&&!((je-=Ze[ke+Te])<=0);)ke++,je<<=1;if(wt+=1<<ke,T===1&&852<wt||T===2&&592<wt)return 1;D[re=ue&ne]=Tt<<24|ke<<16|ae-O|0}}return ue!==0&&(D[ae+ue]=le-Te<<24|64<<16|0),V.bits=Tt,0}},{"../utils/common":41}],51:[function(a,c,h){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,c,h){var f=a("../utils/common"),g=0,y=1;function w(be){for(var He=be.length;0<=--He;)be[He]=0}var S=0,T=29,I=256,A=I+1+T,k=30,D=19,O=2*A+1,F=15,V=16,$=7,X=256,re=16,ne=17,ae=18,xe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qe=new Array(2*(A+2));w(Qe);var le=new Array(2*k);w(le);var Ae=new Array(512);w(Ae);var Y=new Array(256);w(Y);var Ue=new Array(T);w(Ue);var Tt,ke,Te,je=new Array(k);function wt(be,He,xt,Ct,Xe){this.static_tree=be,this.extra_bits=He,this.extra_base=xt,this.elems=Ct,this.max_length=Xe,this.has_stree=be&&be.length}function ue(be,He){this.dyn_tree=be,this.max_code=0,this.stat_desc=He}function he(be){return be<256?Ae[be]:Ae[256+(be>>>7)]}function qe(be,He){be.pending_buf[be.pending++]=255&He,be.pending_buf[be.pending++]=He>>>8&255}function Ze(be,He,xt){be.bi_valid>V-xt?(be.bi_buf|=He<<be.bi_valid&65535,qe(be,be.bi_buf),be.bi_buf=He>>V-be.bi_valid,be.bi_valid+=xt-V):(be.bi_buf|=He<<be.bi_valid&65535,be.bi_valid+=xt)}function ot(be,He,xt){Ze(be,xt[2*He],xt[2*He+1])}function ze(be,He){for(var xt=0;xt|=1&be,be>>>=1,xt<<=1,0<--He;);return xt>>>1}function Yt(be,He,xt){var Ct,Xe,At=new Array(F+1),Et=0;for(Ct=1;Ct<=F;Ct++)At[Ct]=Et=Et+xt[Ct-1]<<1;for(Xe=0;Xe<=He;Xe++){var Pt=be[2*Xe+1];Pt!==0&&(be[2*Xe]=ze(At[Pt]++,Pt))}}function bt(be){var He;for(He=0;He<A;He++)be.dyn_ltree[2*He]=0;for(He=0;He<k;He++)be.dyn_dtree[2*He]=0;for(He=0;He<D;He++)be.bl_tree[2*He]=0;be.dyn_ltree[2*X]=1,be.opt_len=be.static_len=0,be.last_lit=be.matches=0}function Wt(be){8<be.bi_valid?qe(be,be.bi_buf):0<be.bi_valid&&(be.pending_buf[be.pending++]=be.bi_buf),be.bi_buf=0,be.bi_valid=0}function cn(be,He,xt,Ct){var Xe=2*He,At=2*xt;return be[Xe]<be[At]||be[Xe]===be[At]&&Ct[He]<=Ct[xt]}function In(be,He,xt){for(var Ct=be.heap[xt],Xe=xt<<1;Xe<=be.heap_len&&(Xe<be.heap_len&&cn(He,be.heap[Xe+1],be.heap[Xe],be.depth)&&Xe++,!cn(He,Ct,be.heap[Xe],be.depth));)be.heap[xt]=be.heap[Xe],xt=Xe,Xe<<=1;be.heap[xt]=Ct}function Cn(be,He,xt){var Ct,Xe,At,Et,Pt=0;if(be.last_lit!==0)for(;Ct=be.pending_buf[be.d_buf+2*Pt]<<8|be.pending_buf[be.d_buf+2*Pt+1],Xe=be.pending_buf[be.l_buf+Pt],Pt++,Ct===0?ot(be,Xe,He):(ot(be,(At=Y[Xe])+I+1,He),(Et=xe[At])!==0&&Ze(be,Xe-=Ue[At],Et),ot(be,At=he(--Ct),xt),(Et=fe[At])!==0&&Ze(be,Ct-=je[At],Et)),Pt<be.last_lit;);ot(be,X,He)}function Er(be,He){var xt,Ct,Xe,At=He.dyn_tree,Et=He.stat_desc.static_tree,Pt=He.stat_desc.has_stree,_n=He.stat_desc.elems,gr=-1;for(be.heap_len=0,be.heap_max=O,xt=0;xt<_n;xt++)At[2*xt]!==0?(be.heap[++be.heap_len]=gr=xt,be.depth[xt]=0):At[2*xt+1]=0;for(;be.heap_len<2;)At[2*(Xe=be.heap[++be.heap_len]=gr<2?++gr:0)]=1,be.depth[Xe]=0,be.opt_len--,Pt&&(be.static_len-=Et[2*Xe+1]);for(He.max_code=gr,xt=be.heap_len>>1;1<=xt;xt--)In(be,At,xt);for(Xe=_n;xt=be.heap[1],be.heap[1]=be.heap[be.heap_len--],In(be,At,1),Ct=be.heap[1],be.heap[--be.heap_max]=xt,be.heap[--be.heap_max]=Ct,At[2*Xe]=At[2*xt]+At[2*Ct],be.depth[Xe]=(be.depth[xt]>=be.depth[Ct]?be.depth[xt]:be.depth[Ct])+1,At[2*xt+1]=At[2*Ct+1]=Xe,be.heap[1]=Xe++,In(be,At,1),2<=be.heap_len;);be.heap[--be.heap_max]=be.heap[1],function(Hn,$o){var $p,as,vu,Ei,jv,ub,gu=$o.dyn_tree,cb=$o.max_code,sE=$o.stat_desc.static_tree,aE=$o.stat_desc.has_stree,lE=$o.stat_desc.extra_bits,db=$o.stat_desc.extra_base,gl=$o.stat_desc.max_length,yu=0;for(Ei=0;Ei<=F;Ei++)Hn.bl_count[Ei]=0;for(gu[2*Hn.heap[Hn.heap_max]+1]=0,$p=Hn.heap_max+1;$p<O;$p++)gl<(Ei=gu[2*gu[2*(as=Hn.heap[$p])+1]+1]+1)&&(Ei=gl,yu++),gu[2*as+1]=Ei,cb<as||(Hn.bl_count[Ei]++,jv=0,db<=as&&(jv=lE[as-db]),ub=gu[2*as],Hn.opt_len+=ub*(Ei+jv),aE&&(Hn.static_len+=ub*(sE[2*as+1]+jv)));if(yu!==0){do{for(Ei=gl-1;Hn.bl_count[Ei]===0;)Ei--;Hn.bl_count[Ei]--,Hn.bl_count[Ei+1]+=2,Hn.bl_count[gl]--,yu-=2}while(0<yu);for(Ei=gl;Ei!==0;Ei--)for(as=Hn.bl_count[Ei];as!==0;)cb<(vu=Hn.heap[--$p])||(gu[2*vu+1]!==Ei&&(Hn.opt_len+=(Ei-gu[2*vu+1])*gu[2*vu],gu[2*vu+1]=Ei),as--)}}(be,He),Yt(At,gr,be.bl_count)}function J(be,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),He[2*(xt+1)+1]=65535,Ct=0;Ct<=xt;Ct++)Xe=Et,Et=He[2*(Ct+1)+1],++Pt<_n&&Xe===Et||(Pt<gr?be.bl_tree[2*Xe]+=Pt:Xe!==0?(Xe!==At&&be.bl_tree[2*Xe]++,be.bl_tree[2*re]++):Pt<=10?be.bl_tree[2*ne]++:be.bl_tree[2*ae]++,At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4))}function at(be,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),Ct=0;Ct<=xt;Ct++)if(Xe=Et,Et=He[2*(Ct+1)+1],!(++Pt<_n&&Xe===Et)){if(Pt<gr)for(;ot(be,Xe,be.bl_tree),--Pt!=0;);else Xe!==0?(Xe!==At&&(ot(be,Xe,be.bl_tree),Pt--),ot(be,re,be.bl_tree),Ze(be,Pt-3,2)):Pt<=10?(ot(be,ne,be.bl_tree),Ze(be,Pt-3,3)):(ot(be,ae,be.bl_tree),Ze(be,Pt-11,7));At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4)}}w(je);var st=!1;function we(be,He,xt,Ct){Ze(be,(S<<1)+(Ct?1:0),3),function(Xe,At,Et,Pt){Wt(Xe),Pt&&(qe(Xe,Et),qe(Xe,~Et)),f.arraySet(Xe.pending_buf,Xe.window,At,Et,Xe.pending),Xe.pending+=Et}(be,He,xt,!0)}h._tr_init=function(be){st||(function(){var He,xt,Ct,Xe,At,Et=new Array(F+1);for(Xe=Ct=0;Xe<T-1;Xe++)for(Ue[Xe]=Ct,He=0;He<1<<xe[Xe];He++)Y[Ct++]=Xe;for(Y[Ct-1]=Xe,Xe=At=0;Xe<16;Xe++)for(je[Xe]=At,He=0;He<1<<fe[Xe];He++)Ae[At++]=Xe;for(At>>=7;Xe<k;Xe++)for(je[Xe]=At<<7,He=0;He<1<<fe[Xe]-7;He++)Ae[256+At++]=Xe;for(xt=0;xt<=F;xt++)Et[xt]=0;for(He=0;He<=143;)Qe[2*He+1]=8,He++,Et[8]++;for(;He<=255;)Qe[2*He+1]=9,He++,Et[9]++;for(;He<=279;)Qe[2*He+1]=7,He++,Et[7]++;for(;He<=287;)Qe[2*He+1]=8,He++,Et[8]++;for(Yt(Qe,A+1,Et),He=0;He<k;He++)le[2*He+1]=5,le[2*He]=ze(He,5);Tt=new wt(Qe,xe,I+1,A,F),ke=new wt(le,fe,0,k,F),Te=new wt(new Array(0),ge,0,D,$)}(),st=!0),be.l_desc=new ue(be.dyn_ltree,Tt),be.d_desc=new ue(be.dyn_dtree,ke),be.bl_desc=new ue(be.bl_tree,Te),be.bi_buf=0,be.bi_valid=0,bt(be)},h._tr_stored_block=we,h._tr_flush_block=function(be,He,xt,Ct){var Xe,At,Et=0;0<be.level?(be.strm.data_type===2&&(be.strm.data_type=function(Pt){var _n,gr=4093624447;for(_n=0;_n<=31;_n++,gr>>>=1)if(1&gr&&Pt.dyn_ltree[2*_n]!==0)return g;if(Pt.dyn_ltree[18]!==0||Pt.dyn_ltree[20]!==0||Pt.dyn_ltree[26]!==0)return y;for(_n=32;_n<I;_n++)if(Pt.dyn_ltree[2*_n]!==0)return y;return g}(be)),Er(be,be.l_desc),Er(be,be.d_desc),Et=function(Pt){var _n;for(J(Pt,Pt.dyn_ltree,Pt.l_desc.max_code),J(Pt,Pt.dyn_dtree,Pt.d_desc.max_code),Er(Pt,Pt.bl_desc),_n=D-1;3<=_n&&Pt.bl_tree[2*Ie[_n]+1]===0;_n--);return Pt.opt_len+=3*(_n+1)+5+5+4,_n}(be),Xe=be.opt_len+3+7>>>3,(At=be.static_len+3+7>>>3)<=Xe&&(Xe=At)):Xe=At=xt+5,xt+4<=Xe&&He!==-1?we(be,He,xt,Ct):be.strategy===4||At===Xe?(Ze(be,2+(Ct?1:0),3),Cn(be,Qe,le)):(Ze(be,4+(Ct?1:0),3),function(Pt,_n,gr,Hn){var $o;for(Ze(Pt,_n-257,5),Ze(Pt,gr-1,5),Ze(Pt,Hn-4,4),$o=0;$o<Hn;$o++)Ze(Pt,Pt.bl_tree[2*Ie[$o]+1],3);at(Pt,Pt.dyn_ltree,_n-1),at(Pt,Pt.dyn_dtree,gr-1)}(be,be.l_desc.max_code+1,be.d_desc.max_code+1,Et+1),Cn(be,be.dyn_ltree,be.dyn_dtree)),bt(be),Ct&&Wt(be)},h._tr_tally=function(be,He,xt){return be.pending_buf[be.d_buf+2*be.last_lit]=He>>>8&255,be.pending_buf[be.d_buf+2*be.last_lit+1]=255&He,be.pending_buf[be.l_buf+be.last_lit]=255&xt,be.last_lit++,He===0?be.dyn_ltree[2*xt]++:(be.matches++,He--,be.dyn_ltree[2*(Y[xt]+I+1)]++,be.dyn_dtree[2*he(He)]++),be.last_lit===be.lit_bufsize-1},h._tr_align=function(be){Ze(be,2,3),ot(be,X,Qe),function(He){He.bi_valid===16?(qe(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}(be)}},{"../utils/common":41}],53:[function(a,c,h){c.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,c,h){(function(f){(function(g,y){if(!g.setImmediate){var w,S,T,I,A=1,k={},D=!1,O=g.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(g);F=F&&F.setTimeout?F:g,w={}.toString.call(g.process)==="[object process]"?function(re){process.nextTick(function(){$(re)})}:function(){if(g.postMessage&&!g.importScripts){var re=!0,ne=g.onmessage;return g.onmessage=function(){re=!1},g.postMessage("","*"),g.onmessage=ne,re}}()?(I="setImmediate$"+Math.random()+"$",g.addEventListener?g.addEventListener("message",X,!1):g.attachEvent("onmessage",X),function(re){g.postMessage(I+re,"*")}):g.MessageChannel?((T=new MessageChannel).port1.onmessage=function(re){$(re.data)},function(re){T.port2.postMessage(re)}):O&&"onreadystatechange"in O.createElement("script")?(S=O.documentElement,function(re){var ne=O.createElement("script");ne.onreadystatechange=function(){$(re),ne.onreadystatechange=null,S.removeChild(ne),ne=null},S.appendChild(ne)}):function(re){setTimeout($,0,re)},F.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),ae=0;ae<ne.length;ae++)ne[ae]=arguments[ae+1];var xe={callback:re,args:ne};return k[A]=xe,w(A),A++},F.clearImmediate=V}function V(re){delete k[re]}function $(re){if(D)setTimeout($,0,re);else{var ne=k[re];if(ne){D=!0;try{(function(ae){var xe=ae.callback,fe=ae.args;switch(fe.length){case 0:xe();break;case 1:xe(fe[0]);break;case 2:xe(fe[0],fe[1]);break;case 3:xe(fe[0],fe[1],fe[2]);break;default:xe.apply(y,fe)}})(ne)}finally{V(re),D=!1}}}}function X(re){re.source===g&&typeof re.data=="string"&&re.data.indexOf(I)===0&&$(+re.data.slice(I.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,typeof Ti<"u"?Ti:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),wU,QA,qQ,xU,XQ,YQ,bS,ZQ,SU,QQ,JA,_S,wS,Tp,JQ,eJ,tJ,Vy,ea,nJ,rJ,EU,eI,hke=C(()=>{wU=Q(Re(),1),QA=Q(Re(),1),qQ=i=>typeof i=="function",xU=(i,s)=>qQ(i)?i(s):i,XQ=(()=>{let i=0;return()=>(++i).toString()})(),YQ=20,bS=new Map,ZQ=1e3,SU=i=>{if(bS.has(i))return;let s=setTimeout(()=>{bS.delete(i),Tp({type:4,toastId:i})},ZQ);bS.set(i,s)},QQ=i=>{let s=bS.get(i);s&&clearTimeout(s)},JA=(i,s)=>{switch(s.type){case 0:return z(j({},i),{toasts:[s.toast,...i.toasts].slice(0,YQ)});case 1:return s.toast.id&&QQ(s.toast.id),z(j({},i),{toasts:i.toasts.map(f=>f.id===s.toast.id?j(j({},f),s.toast):f)});case 2:let{toast:a}=s;return i.toasts.find(f=>f.id===a.id)?JA(i,{type:1,toast:a}):JA(i,{type:0,toast:a});case 3:let{toastId:c}=s;return c?SU(c):i.toasts.forEach(f=>{SU(f.id)}),z(j({},i),{toasts:i.toasts.map(f=>f.id===c||c===void 0?z(j({},f),{visible:!1}):f)});case 4:return s.toastId===void 0?z(j({},i),{toasts:[]}):z(j({},i),{toasts:i.toasts.filter(f=>f.id!==s.toastId)});case 5:return z(j({},i),{pausedAt:s.time});case 6:let h=s.time-(i.pausedAt||0);return z(j({},i),{pausedAt:void 0,toasts:i.toasts.map(f=>z(j({},f),{pauseDuration:f.pauseDuration+h}))})}},_S=[],wS={toasts:[],pausedAt:void 0},Tp=i=>{wS=JA(wS,i),_S.forEach(s=>{s(wS)})},JQ={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eJ=(i={})=>{let[s,a]=(0,wU.useState)(wS);(0,wU.useEffect)(()=>(_S.push(a),()=>{let h=_S.indexOf(a);h>-1&&_S.splice(h,1)}),[s]);let c=s.toasts.map(h=>{var f,g;return z(j(j(j({},i),i[h.type]),h),{duration:h.duration||((f=i[h.type])==null?void 0:f.duration)||(i==null?void 0:i.duration)||JQ[h.type],style:j(j(j({},i.style),(g=i[h.type])==null?void 0:g.style),h.style)})});return z(j({},s),{toasts:c})},tJ=(i,s="blank",a)=>z(j({createdAt:Date.now(),visible:!0,type:s,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0},a),{id:(a==null?void 0:a.id)||XQ()}),Vy=i=>(s,a)=>{let c=tJ(s,i,a);return Tp({type:2,toast:c}),c.id},ea=(i,s)=>Vy("blank")(i,s),ea.error=Vy("error"),ea.success=Vy("success"),ea.loading=Vy("loading"),ea.custom=Vy("custom"),ea.dismiss=i=>{Tp({type:3,toastId:i})},ea.remove=i=>Tp({type:4,toastId:i}),ea.promise=(i,s,a)=>{let c=ea.loading(s.loading,j(j({},a),a==null?void 0:a.loading));return i.then(h=>(ea.success(xU(s.success,h),j(j({id:c},a),a==null?void 0:a.success)),h)).catch(h=>{ea.error(xU(s.error,h),j(j({id:c},a),a==null?void 0:a.error))}),i},nJ=(i,s)=>{Tp({type:1,toast:{id:i,height:s}})},rJ=()=>{Tp({type:5,time:Date.now()})},EU=i=>{let{toasts:s,pausedAt:a}=eJ(i);(0,QA.useEffect)(()=>{if(a)return;let f=Date.now(),g=s.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(f-y.createdAt);if(w<0){y.visible&&ea.dismiss(y.id);return}return setTimeout(()=>ea.dismiss(y.id),w)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[s,a]);let c=(0,QA.useCallback)(()=>{a&&Tp({type:6,time:Date.now()})},[a]),h=(0,QA.useCallback)((f,g)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:S}=g||{},T=s.filter(k=>(k.position||S)===(f.position||S)&&k.height),I=T.findIndex(k=>k.id===f.id),A=T.filter((k,D)=>D<I&&k.visible).length;return T.filter(k=>k.visible).slice(...y?[A+1]:[0,A]).reduce((k,D)=>k+(D.height||0)+w,0)},[s]);return{toasts:s,handlers:{updateHeight:nJ,startPause:rJ,endPause:c,calculateOffset:h}}},eI=ea});function iJ(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function pke(i){cv=i}function So(i,s){if(s){if(hJ.test(i))return i.replace(pJ,CU)}else if(fJ.test(i))return i.replace(mJ,CU);return i}function oJ(i){return i.replace(gJ,(s,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}function Yr(i,s){i=typeof i=="string"?i:i.source,s=s||"";let a={replace:(c,h)=>(h=h.source||h,h=h.replace(yJ,"$1"),i=i.replace(c,h),a),getRegex:()=>new RegExp(i,s)};return a}function sJ(i,s,a){if(i){let c;try{c=decodeURIComponent(oJ(a)).replace(bJ,"").toLowerCase()}catch{return null}if(c.indexOf("javascript:")===0||c.indexOf("vbscript:")===0||c.indexOf("data:")===0)return null}s&&!_J.test(a)&&(a=fke(s,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}function fke(i,s){xS[" "+i]||(wJ.test(i)?xS[" "+i]=i+"/":xS[" "+i]=tI(i,"/",!0)),i=xS[" "+i];let a=i.indexOf(":")===-1;return s.substring(0,2)==="//"?a?s:i.replace(xJ,"$1")+s:s.charAt(0)==="/"?a?s:i.replace(SJ,"$1")+s:i+s}function lu(i){let s=1,a,c;for(;s<arguments.length;s++){a=arguments[s];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}function aJ(i,s){let a=i.replace(/\|/g,(f,g,y)=>{let w=!1,S=g;for(;--S>=0&&y[S]==="\\";)w=!w;return w?"|":" |"}),c=a.split(/ \|/),h=0;if(c[0].trim()||c.shift(),c.length>0&&!c[c.length-1].trim()&&c.pop(),c.length>s)c.splice(s);else for(;c.length<s;)c.push("");for(;h<c.length;h++)c[h]=c[h].trim().replace(/\\\|/g,"|");return c}function tI(i,s,a){let c=i.length;if(c===0)return"";let h=0;for(;h<c;){let f=i.charAt(c-h-1);if(f===s&&!a)h++;else if(f!==s&&a)h++;else break}return i.slice(0,c-h)}function mke(i,s){if(i.indexOf(s[1])===-1)return-1;let a=i.length,c=0,h=0;for(;h<a;h++)if(i[h]==="\\")h++;else if(i[h]===s[0])c++;else if(i[h]===s[1]&&(c--,c<0))return h;return-1}function lJ(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function uJ(i,s){if(s<1)return"";let a="";for(;s>1;)s&1&&(a+=i),s>>=1,i+=i;return a+i}function cJ(i,s,a,c){let h=s.href,f=s.title?So(s.title):null,g=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){c.state.inLink=!0;let y={type:"link",raw:a,href:h,title:f,text:g,tokens:c.inlineTokens(g)};return c.state.inLink=!1,y}return{type:"image",raw:a,href:h,title:f,text:So(g)}}function vke(i,s){let a=i.match(/^(\s+)(?:```)/);if(a===null)return s;let c=a[1];return s.split(`
`).map(h=>{let f=h.match(/^\s+/);if(f===null)return h;let[g]=f;return g.length>=c.length?h.slice(c.length):h}).join(`
`)}function gke(i){return i.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function dJ(i){let s="",a,c,h=i.length;for(a=0;a<h;a++)c=i.charCodeAt(a),Math.random()>.5&&(c="x"+c.toString(16)),s+="&#"+c+";";return s}function Vn(i,s,a){if(typeof i>"u"||i===null)throw new Error("marked(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");if(typeof s=="function"&&(a=s,s=null),s=lu({},Vn.defaults,s||{}),lJ(s),a){let h=s.highlight,f;try{f=dv.lex(i,s)}catch(w){return a(w)}let g=function(w){let S;if(!w)try{s.walkTokens&&Vn.walkTokens(f,s.walkTokens),S=Mp.parse(f,s)}catch(T){w=T}return s.highlight=h,w?a(w):a(null,S)};if(!h||h.length<3||(delete s.highlight,!f.length))return g();let y=0;Vn.walkTokens(f,function(w){w.type==="code"&&(y++,setTimeout(()=>{h(w.text,w.lang,function(S,T){if(S)return g(S);T!=null&&T!==w.text&&(w.text=T,w.escaped=!0),y--,y===0&&g()})},0))}),y===0&&g();return}function c(h){if(h.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+So(h.message+"",!0)+"</pre>";throw h}try{let h=dv.lex(i,s);if(s.walkTokens){if(s.async)return Promise.all(Vn.walkTokens(h,s.walkTokens)).then(()=>Mp.parse(h,s)).catch(c);Vn.walkTokens(h,s.walkTokens)}return Mp.parse(h,s)}catch(h){c(h)}}var cv,hJ,pJ,fJ,mJ,vJ,CU,gJ,yJ,bJ,_J,xS,wJ,xJ,SJ,SS,nI,An,sn,dv,rI,PU,kU,Mp,yke=C(()=>{cv=iJ(),hJ=/[&<>"']/,pJ=/[&<>"']/g,fJ=/[<>"']|&(?!#?\w+;)/,mJ=/[<>"']|&(?!#?\w+;)/g,vJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CU=i=>vJ[i],gJ=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,yJ=/(^|[^\[])\^/g,bJ=/[^\w:]/g,_J=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,xS={},wJ=/^[^:]+:\/*[^/]*$/,xJ=/^([^:]+:)[\s\S]*$/,SJ=/^([^:]+:\/*[^/]*)[\s\S]*$/,SS={exec:function(){}},nI=class{constructor(i){this.options=i||cv}space(i){let s=this.rules.block.newline.exec(i);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(i){let s=this.rules.block.code.exec(i);if(s){let a=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?a:tI(a,`
`)}}}fences(i){let s=this.rules.block.fences.exec(i);if(s){let a=s[0],c=vke(a,s[3]||"");return{type:"code",raw:a,lang:s[2]?s[2].trim():s[2],text:c}}}heading(i){let s=this.rules.block.heading.exec(i);if(s){let a=s[2].trim();if(/#$/.test(a)){let c=tI(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(i){let s=this.rules.block.hr.exec(i);if(s)return{type:"hr",raw:s[0]}}blockquote(i){let s=this.rules.block.blockquote.exec(i);if(s){let a=s[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:s[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(i){let s=this.rules.block.list.exec(i);if(s){let a,c,h,f,g,y,w,S,T,I,A,k,D=s[1].trim(),O=D.length>1,F={type:"list",raw:"",ordered:O,start:O?+D.slice(0,-1):"",loose:!1,items:[]};D=O?"\\d{1,9}\\".concat(D.slice(-1)):"\\".concat(D),this.options.pedantic&&(D=O?D:"[*+-]");let V=new RegExp("^( {0,3}".concat(D,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;i&&(k=!1,!(!(s=V.exec(i))||this.rules.block.hr.test(i)));){if(a=s[0],i=i.substring(a.length),S=s[2].split(`
`,1)[0],T=i.split(`
`,1)[0],this.options.pedantic?(f=2,A=S.trimLeft()):(f=s[2].search(/[^ ]/),f=f>4?1:f,A=S.slice(f),f+=s[1].length),y=!1,!S&&/^ *$/.test(T)&&(a+=T+`
`,i=i.substring(T.length+1),k=!0),!k){let X=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,f-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:```|~~~)")),ae=new RegExp("^ {0,".concat(Math.min(3,f-1),"}#"));for(;i&&(I=i.split(`
`,1)[0],S=I,this.options.pedantic&&(S=S.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(S)||ae.test(S)||X.test(S)||re.test(i)));){if(S.search(/[^ ]/)>=f||!S.trim())A+=`
`+S.slice(f);else if(!y)A+=`
`+S;else break;!y&&!S.trim()&&(y=!0),a+=I+`
`,i=i.substring(I.length+1)}}F.loose||(w?F.loose=!0:/\n *\n *$/.test(a)&&(w=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(A),c&&(h=c[0]!=="[ ] ",A=A.replace(/^\[[ xX]\] +/,""))),F.items.push({type:"list_item",raw:a,task:!!c,checked:h,loose:!1,text:A}),F.raw+=a}F.items[F.items.length-1].raw=a.trimRight(),F.items[F.items.length-1].text=A.trimRight(),F.raw=F.raw.trimRight();let $=F.items.length;for(g=0;g<$;g++){this.lexer.state.top=!1,F.items[g].tokens=this.lexer.blockTokens(F.items[g].text,[]);let X=F.items[g].tokens.filter(ne=>ne.type==="space"),re=X.every(ne=>{let ae=ne.raw.split(""),xe=0;for(let fe of ae)if(fe===`
`&&(xe+=1),xe>1)return!0;return!1});!F.loose&&X.length&&re&&(F.loose=!0,F.items[g].loose=!0)}return F}}html(i){let s=this.rules.block.html.exec(i);if(s){let a={type:"html",raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};if(this.options.sanitize){let c=this.options.sanitizer?this.options.sanitizer(s[0]):So(s[0]);a.type="paragraph",a.text=c,a.tokens=this.lexer.inline(c)}return a}}def(i){let s=this.rules.block.def.exec(i);if(s)return s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),{type:"def",tag:s[1].toLowerCase().replace(/\s+/g," "),raw:s[0],href:s[2],title:s[3]}}table(i){let s=this.rules.block.table.exec(i);if(s){let a={type:"table",header:aJ(s[1]).map(c=>({text:c})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=s[0];let c=a.align.length,h,f,g,y;for(h=0;h<c;h++)/^ *-+: *$/.test(a.align[h])?a.align[h]="right":/^ *:-+: *$/.test(a.align[h])?a.align[h]="center":/^ *:-+ *$/.test(a.align[h])?a.align[h]="left":a.align[h]=null;for(c=a.rows.length,h=0;h<c;h++)a.rows[h]=aJ(a.rows[h],a.header.length).map(w=>({text:w}));for(c=a.header.length,f=0;f<c;f++)a.header[f].tokens=this.lexer.inline(a.header[f].text);for(c=a.rows.length,f=0;f<c;f++)for(y=a.rows[f],g=0;g<y.length;g++)y[g].tokens=this.lexer.inline(y[g].text);return a}}}lheading(i){let s=this.rules.block.lheading.exec(i);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(i){let s=this.rules.block.paragraph.exec(i);if(s){let a=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:a,tokens:this.lexer.inline(a)}}}text(i){let s=this.rules.block.text.exec(i);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(i){let s=this.rules.inline.escape.exec(i);if(s)return{type:"escape",raw:s[0],text:So(s[1])}}tag(i){let s=this.rules.inline.tag.exec(i);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):So(s[0]):s[0]}}link(i){let s=this.rules.inline.link.exec(i);if(s){let a=s[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let f=tI(a.slice(0,-1),"\\");if((a.length-f.length)%2===0)return}else{let f=mke(s[2],"()");if(f>-1){let g=(s[0].indexOf("!")===0?5:4)+s[1].length+f;s[2]=s[2].substring(0,f),s[0]=s[0].substring(0,g).trim(),s[3]=""}}let c=s[2],h="";if(this.options.pedantic){let f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);f&&(c=f[1],h=f[3])}else h=s[3]?s[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(a)?c=c.slice(1):c=c.slice(1,-1)),cJ(s,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:h&&h.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(i,s){let a;if((a=this.rules.inline.reflink.exec(i))||(a=this.rules.inline.nolink.exec(i))){let c=(a[2]||a[1]).replace(/\s+/g," ");if(c=s[c.toLowerCase()],!c||!c.href){let h=a[0].charAt(0);return{type:"text",raw:h,text:h}}return cJ(a,c,a[0],this.lexer)}}emStrong(i,s,a=""){let c=this.rules.inline.emStrong.lDelim.exec(i);if(!c||c[3]&&a.match(/[\p{L}\p{N}]/u))return;let h=c[1]||c[2]||"";if(!h||h&&(a===""||this.rules.inline.punctuation.exec(a))){let f=c[0].length-1,g,y,w=f,S=0,T=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(T.lastIndex=0,s=s.slice(-1*i.length+f);(c=T.exec(s))!=null;){if(g=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!g)continue;if(y=g.length,c[3]||c[4]){w+=y;continue}else if((c[5]||c[6])&&f%3&&!((f+y)%3)){S+=y;continue}if(w-=y,w>0)continue;if(y=Math.min(y,y+w+S),Math.min(f,y)%2){let A=i.slice(1,f+c.index+y);return{type:"em",raw:i.slice(0,f+c.index+y+1),text:A,tokens:this.lexer.inlineTokens(A)}}let I=i.slice(2,f+c.index+y-1);return{type:"strong",raw:i.slice(0,f+c.index+y+1),text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(i){let s=this.rules.inline.code.exec(i);if(s){let a=s[2].replace(/\n/g," "),c=/[^ ]/.test(a),h=/^ /.test(a)&&/ $/.test(a);return c&&h&&(a=a.substring(1,a.length-1)),a=So(a,!0),{type:"codespan",raw:s[0],text:a}}}br(i){let s=this.rules.inline.br.exec(i);if(s)return{type:"br",raw:s[0]}}del(i){let s=this.rules.inline.del.exec(i);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(i,s){let a=this.rules.inline.autolink.exec(i);if(a){let c,h;return a[2]==="@"?(c=So(this.options.mangle?s(a[1]):a[1]),h="mailto:"+c):(c=So(a[1]),h=c),{type:"link",raw:a[0],text:c,href:h,tokens:[{type:"text",raw:c,text:c}]}}}url(i,s){let a;if(a=this.rules.inline.url.exec(i)){let c,h;if(a[2]==="@")c=So(this.options.mangle?s(a[0]):a[0]),h="mailto:"+c;else{let f;do f=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(f!==a[0]);c=So(a[0]),a[1]==="www."?h="http://"+c:h=c}return{type:"link",raw:a[0],text:c,href:h,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(i,s){let a=this.rules.inline.text.exec(i);if(a){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):So(a[0]):a[0]:c=So(this.options.smartypants?s(a[0]):a[0]),{type:"text",raw:a[0],text:c}}}},An={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:SS,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},An._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,An._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,An.def=Yr(An.def).replace("label",An._label).replace("title",An._title).getRegex(),An.bullet=/(?:[*+-]|\d{1,9}[.)])/,An.listItemStart=Yr(/^( *)(bull) */).replace("bull",An.bullet).getRegex(),An.list=Yr(An.list).replace(/bull/g,An.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+An.def.source+")").getRegex(),An._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",An._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,An.html=Yr(An.html,"i").replace("comment",An._comment).replace("tag",An._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),An.paragraph=Yr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.blockquote=Yr(An.blockquote).replace("paragraph",An.paragraph).getRegex(),An.normal=lu({},An),An.gfm=lu({},An.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),An.gfm.table=Yr(An.gfm.table).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.gfm.paragraph=Yr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",An.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.pedantic=lu({},An.normal,{html:Yr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",An._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:SS,paragraph:Yr(An.normal._paragraph).replace("hr",An.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",An.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),sn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:SS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:SS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},sn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",sn.punctuation=Yr(sn.punctuation).replace(/punctuation/g,sn._punctuation).getRegex(),sn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,sn.escapedEmSt=/\\\*|\\_/g,sn._comment=Yr(An._comment).replace("(?:-->|$)","-->").getRegex(),sn.emStrong.lDelim=Yr(sn.emStrong.lDelim).replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimAst=Yr(sn.emStrong.rDelimAst,"g").replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimUnd=Yr(sn.emStrong.rDelimUnd,"g").replace(/punct/g,sn._punctuation).getRegex(),sn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,sn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,sn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,sn.autolink=Yr(sn.autolink).replace("scheme",sn._scheme).replace("email",sn._email).getRegex(),sn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,sn.tag=Yr(sn.tag).replace("comment",sn._comment).replace("attribute",sn._attribute).getRegex(),sn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,sn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,sn.link=Yr(sn.link).replace("label",sn._label).replace("href",sn._href).replace("title",sn._title).getRegex(),sn.reflink=Yr(sn.reflink).replace("label",sn._label).replace("ref",An._label).getRegex(),sn.nolink=Yr(sn.nolink).replace("ref",An._label).getRegex(),sn.reflinkSearch=Yr(sn.reflinkSearch,"g").replace("reflink",sn.reflink).replace("nolink",sn.nolink).getRegex(),sn.normal=lu({},sn),sn.pedantic=lu({},sn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Yr(/^!?\[(label)\]\((.*?)\)/).replace("label",sn._label).getRegex(),reflink:Yr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sn._label).getRegex()}),sn.gfm=lu({},sn.normal,{escape:Yr(sn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),sn.gfm.url=Yr(sn.gfm.url,"i").replace("email",sn.gfm._extended_email).getRegex(),sn.breaks=lu({},sn.gfm,{br:Yr(sn.br).replace("{2,}","*").getRegex(),text:Yr(sn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),dv=class AH{constructor(s){this.tokens=[],this.tokens.links=Object.create(null),this.options=s||cv,this.options.tokenizer=this.options.tokenizer||new nI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={block:An.normal,inline:sn.normal};this.options.pedantic?(a.block=An.pedantic,a.inline=sn.pedantic):this.options.gfm&&(a.block=An.gfm,this.options.breaks?a.inline=sn.breaks:a.inline=sn.gfm),this.tokenizer.rules=a}static get rules(){return{block:An,inline:sn}}static lex(s,a){return new AH(a).lex(s)}static lexInline(s,a){return new AH(a).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,`
`),this.blockTokens(s,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(s,a=[]){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(y,w,S)=>w+"    ".repeat(S.length));let c,h,f,g;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(y=>(c=y.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.space(s)){s=s.substring(c.raw.length),c.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(c);continue}if(c=this.tokenizer.code(s)){s=s.substring(c.raw.length),h=a[a.length-1],h&&(h.type==="paragraph"||h.type==="text")?(h.raw+=`
`+c.raw,h.text+=`
`+c.text,this.inlineQueue[this.inlineQueue.length-1].src=h.text):a.push(c);continue}if(c=this.tokenizer.fences(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.heading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.hr(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.blockquote(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.list(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.html(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.def(s)){s=s.substring(c.raw.length),h=a[a.length-1],h&&(h.type==="paragraph"||h.type==="text")?(h.raw+=`
`+c.raw,h.text+=`
`+c.raw,this.inlineQueue[this.inlineQueue.length-1].src=h.text):this.tokens.links[c.tag]||(this.tokens.links[c.tag]={href:c.href,title:c.title});continue}if(c=this.tokenizer.table(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.lheading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startBlock){let y=1/0,w=s.slice(1),S;this.options.extensions.startBlock.forEach(function(T){S=T.call({lexer:this},w),typeof S=="number"&&S>=0&&(y=Math.min(y,S))}),y<1/0&&y>=0&&(f=s.substring(0,y+1))}if(this.state.top&&(c=this.tokenizer.paragraph(f))){h=a[a.length-1],g&&h.type==="paragraph"?(h.raw+=`
`+c.raw,h.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=h.text):a.push(c),g=f.length!==s.length,s=s.substring(c.raw.length);continue}if(c=this.tokenizer.text(s)){s=s.substring(c.raw.length),h=a[a.length-1],h&&h.type==="text"?(h.raw+=`
`+c.raw,h.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=h.text):a.push(c);continue}if(s){let y="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return this.state.top=!0,a}inline(s,a=[]){return this.inlineQueue.push({src:s,tokens:a}),a}inlineTokens(s,a=[]){let c,h,f,g=s,y,w,S;if(this.tokens.links){let T=Object.keys(this.tokens.links);if(T.length>0)for(;(y=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)T.includes(y[0].slice(y[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,y.index)+"["+uJ("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(y=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,y.index)+"["+uJ("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(y=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,y.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;s;)if(w||(S=""),w=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(T=>(c=T.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.escape(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.tag(s)){s=s.substring(c.raw.length),h=a[a.length-1],h&&c.type==="text"&&h.type==="text"?(h.raw+=c.raw,h.text+=c.text):a.push(c);continue}if(c=this.tokenizer.link(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(c.raw.length),h=a[a.length-1],h&&c.type==="text"&&h.type==="text"?(h.raw+=c.raw,h.text+=c.text):a.push(c);continue}if(c=this.tokenizer.emStrong(s,g,S)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.codespan(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.br(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.del(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.autolink(s,dJ)){s=s.substring(c.raw.length),a.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(s,dJ))){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startInline){let T=1/0,I=s.slice(1),A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},I),typeof A=="number"&&A>=0&&(T=Math.min(T,A))}),T<1/0&&T>=0&&(f=s.substring(0,T+1))}if(c=this.tokenizer.inlineText(f,gke)){s=s.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(S=c.raw.slice(-1)),w=!0,h=a[a.length-1],h&&h.type==="text"?(h.raw+=c.raw,h.text+=c.text):a.push(c);continue}if(s){let T="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(T);break}else throw new Error(T)}}return a}},rI=class{constructor(i){this.options=i||cv}code(i,s,a){let c=(s||"").match(/\S*/)[0];if(this.options.highlight){let h=this.options.highlight(i,c);h!=null&&h!==i&&(a=!0,i=h)}return i=i.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+So(c,!0)+'">'+(a?i:So(i,!0))+`</code></pre>
`:"<pre><code>"+(a?i:So(i,!0))+`</code></pre>
`}blockquote(i){return`<blockquote>
`.concat(i,`</blockquote>
`)}html(i){return i}heading(i,s,a,c){if(this.options.headerIds){let h=this.options.headerPrefix+c.slug(a);return"<h".concat(s,' id="').concat(h,'">').concat(i,"</h").concat(s,`>
`)}return"<h".concat(s,">").concat(i,"</h").concat(s,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(i,s,a){let c=s?"ol":"ul",h=s&&a!==1?' start="'+a+'"':"";return"<"+c+h+`>
`+i+"</"+c+`>
`}listitem(i){return"<li>".concat(i,`</li>
`)}checkbox(i){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(i){return"<p>".concat(i,`</p>
`)}table(i,s){return s&&(s="<tbody>".concat(s,"</tbody>")),`<table>
<thead>
`+i+`</thead>
`+s+`</table>
`}tablerow(i){return`<tr>
`.concat(i,`</tr>
`)}tablecell(i,s){let a=s.header?"th":"td";return(s.align?"<".concat(a,' align="').concat(s.align,'">'):"<".concat(a,">"))+i+"</".concat(a,`>
`)}strong(i){return"<strong>".concat(i,"</strong>")}em(i){return"<em>".concat(i,"</em>")}codespan(i){return"<code>".concat(i,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(i){return"<del>".concat(i,"</del>")}link(i,s,a){if(i=sJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<a href="'+So(i)+'"';return s&&(c+=' title="'+s+'"'),c+=">"+a+"</a>",c}image(i,s,a){if(i=sJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<img src="'.concat(i,'" alt="').concat(a,'"');return s&&(c+=' title="'.concat(s,'"')),c+=this.options.xhtml?"/>":">",c}text(i){return i}},PU=class{strong(i){return i}em(i){return i}codespan(i){return i}del(i){return i}html(i){return i}text(i){return i}link(i,s,a){return""+a}image(i,s,a){return""+a}br(){return""}},kU=class{constructor(){this.seen={}}serialize(i){return i.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(i,s){let a=i,c=0;if(this.seen.hasOwnProperty(a)){c=this.seen[i];do c++,a=i+"-"+c;while(this.seen.hasOwnProperty(a))}return s||(this.seen[i]=c,this.seen[a]=0),a}slug(i,s={}){let a=this.serialize(i);return this.getNextSafeSlug(a,s.dryrun)}},Mp=class IH{constructor(s){this.options=s||cv,this.options.renderer=this.options.renderer||new rI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new PU,this.slugger=new kU}static parse(s,a){return new IH(a).parse(s)}static parseInline(s,a){return new IH(a).parseInline(s)}parse(s,a=!0){let c="",h,f,g,y,w,S,T,I,A,k,D,O,F,V,$,X,re,ne,ae,xe=s.length;for(h=0;h<xe;h++){if(k=s[h],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(ae=this.options.extensions.renderers[k.type].call({parser:this},k),ae!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type))){c+=ae||"";continue}switch(k.type){case"space":continue;case"hr":{c+=this.renderer.hr();continue}case"heading":{c+=this.renderer.heading(this.parseInline(k.tokens),k.depth,oJ(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue}case"code":{c+=this.renderer.code(k.text,k.lang,k.escaped);continue}case"table":{for(I="",T="",y=k.header.length,f=0;f<y;f++)T+=this.renderer.tablecell(this.parseInline(k.header[f].tokens),{header:!0,align:k.align[f]});for(I+=this.renderer.tablerow(T),A="",y=k.rows.length,f=0;f<y;f++){for(S=k.rows[f],T="",w=S.length,g=0;g<w;g++)T+=this.renderer.tablecell(this.parseInline(S[g].tokens),{header:!1,align:k.align[g]});A+=this.renderer.tablerow(T)}c+=this.renderer.table(I,A);continue}case"blockquote":{A=this.parse(k.tokens),c+=this.renderer.blockquote(A);continue}case"list":{for(D=k.ordered,O=k.start,F=k.loose,y=k.items.length,A="",f=0;f<y;f++)$=k.items[f],X=$.checked,re=$.task,V="",$.task&&(ne=this.renderer.checkbox(X),F?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=ne+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=ne+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:ne}):V+=ne),V+=this.parse($.tokens,F),A+=this.renderer.listitem(V,re,X);c+=this.renderer.list(A,D,O);continue}case"html":{c+=this.renderer.html(k.text);continue}case"paragraph":{c+=this.renderer.paragraph(this.parseInline(k.tokens));continue}case"text":{for(A=k.tokens?this.parseInline(k.tokens):k.text;h+1<xe&&s[h+1].type==="text";)k=s[++h],A+=`
`+(k.tokens?this.parseInline(k.tokens):k.text);c+=a?this.renderer.paragraph(A):A;continue}default:{let fe='Token with "'+k.type+'" type was not found.';if(this.options.silent){console.error(fe);return}else throw new Error(fe)}}}return c}parseInline(s,a){a=a||this.renderer;let c="",h,f,g,y=s.length;for(h=0;h<y;h++){if(f=s[h],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(g=this.options.extensions.renderers[f.type].call({parser:this},f),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type))){c+=g||"";continue}switch(f.type){case"escape":{c+=a.text(f.text);break}case"html":{c+=a.html(f.text);break}case"link":{c+=a.link(f.href,f.title,this.parseInline(f.tokens,a));break}case"image":{c+=a.image(f.href,f.title,f.text);break}case"strong":{c+=a.strong(this.parseInline(f.tokens,a));break}case"em":{c+=a.em(this.parseInline(f.tokens,a));break}case"codespan":{c+=a.codespan(f.text);break}case"br":{c+=a.br();break}case"del":{c+=a.del(this.parseInline(f.tokens,a));break}case"text":{c+=a.text(f.text);break}default:{let w='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return c}},Vn.options=Vn.setOptions=function(i){return lu(Vn.defaults,i),pke(Vn.defaults),Vn},Vn.getDefaults=iJ,Vn.defaults=cv,Vn.use=function(...i){let s=lu({},...i),a=Vn.defaults.extensions||{renderers:{},childTokens:{}},c;i.forEach(h=>{if(h.extensions&&(c=!0,h.extensions.forEach(f=>{if(!f.name)throw new Error("extension name required");if(f.renderer){let g=a.renderers?a.renderers[f.name]:null;g?a.renderers[f.name]=function(...y){let w=f.renderer.apply(this,y);return w===!1&&(w=g.apply(this,y)),w}:a.renderers[f.name]=f.renderer}if(f.tokenizer){if(!f.level||f.level!=="block"&&f.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[f.level]?a[f.level].unshift(f.tokenizer):a[f.level]=[f.tokenizer],f.start&&(f.level==="block"?a.startBlock?a.startBlock.push(f.start):a.startBlock=[f.start]:f.level==="inline"&&(a.startInline?a.startInline.push(f.start):a.startInline=[f.start]))}f.childTokens&&(a.childTokens[f.name]=f.childTokens)})),h.renderer){let f=Vn.defaults.renderer||new rI;for(let g in h.renderer){let y=f[g];f[g]=(...w)=>{let S=h.renderer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.renderer=f}if(h.tokenizer){let f=Vn.defaults.tokenizer||new nI;for(let g in h.tokenizer){let y=f[g];f[g]=(...w)=>{let S=h.tokenizer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.tokenizer=f}if(h.walkTokens){let f=Vn.defaults.walkTokens;s.walkTokens=function(g){let y=[];return y.push(h.walkTokens.call(this,g)),f&&(y=y.concat(f.call(this,g))),y}}c&&(s.extensions=a),Vn.setOptions(s)})},Vn.walkTokens=function(i,s){let a=[];for(let c of i)switch(a=a.concat(s.call(Vn,c)),c.type){case"table":{for(let h of c.header)a=a.concat(Vn.walkTokens(h.tokens,s));for(let h of c.rows)for(let f of h)a=a.concat(Vn.walkTokens(f.tokens,s));break}case"list":{a=a.concat(Vn.walkTokens(c.items,s));break}default:Vn.defaults.extensions&&Vn.defaults.extensions.childTokens&&Vn.defaults.extensions.childTokens[c.type]?Vn.defaults.extensions.childTokens[c.type].forEach(function(h){a=a.concat(Vn.walkTokens(c[h],s))}):c.tokens&&(a=a.concat(Vn.walkTokens(c.tokens,s)))}return a},Vn.parseInline=function(i,s){if(typeof i>"u"||i===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");s=lu({},Vn.defaults,s||{}),lJ(s);try{let a=dv.lexInline(i,s);return s.walkTokens&&Vn.walkTokens(a,s.walkTokens),Mp.parseInline(a,s)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+So(a.message+"",!0)+"</pre>";throw a}},Vn.Parser=Mp,Vn.parser=Mp.parse,Vn.Renderer=rI,Vn.TextRenderer=PU,Vn.Lexer=dv,Vn.lexer=dv.lex,Vn.Tokenizer=nI,Vn.Slugger=kU,Vn.parse=Vn,Vn.options,Vn.setOptions,Vn.use,Vn.walkTokens,Vn.parseInline,Mp.parse,dv.lex}),EJ,CJ,TU,PJ=C(()=>{Ne(),ZA(),CJ=se(Uy)(EJ||(EJ=H([`
  padding: 6px;
`]))),TU=CJ}),qi,iI,ES,oI,kJ,TJ,MJ,MU,AJ,IJ,RJ,AU,OJ,DJ,LJ,NJ,FJ,CS,PS,BJ,UJ,VJ,jJ,zJ,HJ,GJ,$J,WJ,KJ,qJ,XJ,IU,kS=C(()=>{qi=Q(Re()),hke(),Ne(),vr(),hn(),Fe(),yke(),yS(),PJ(),iI=({title:i,message:s})=>"".concat(i," ").concat(s),ES=(()=>{let i=new Map;return{add:s=>{let a=iI(s);i.has(a)?i.set(a,i.get(a)+1):i.set(a,1)},delete:s=>{let a=iI(s);i.has(a)&&i.get(a)>1?i.set(a,i.get(a)-1):i.delete(a)},clear:()=>{i.clear()},check:s=>i.has(iI(s))}})(),oI=(()=>{let i=new Map;return{add:s=>{i.has(s)?i.set(s,i.get(s)+1):i.set(s,1)},delete:s=>{i.has(s)&&i.get(s)>1?i.set(s,i.get(s)-1):i.delete(s)},clear:()=>{i.clear()},check:s=>i.has(s),get types(){return Array.of(...i.keys())}}})(),TJ=se.div(kJ||(kJ=H([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),MU=se.div(MJ||(MJ=H([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),IJ=se.div(AJ||(AJ=H([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),AU=se.div(RJ||(RJ=H([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),DJ=se.button(OJ||(OJ=H([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),LJ={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},FJ=se.div(NJ||(NJ=H([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:i})=>LJ[i]),CS=i=>(s,a,c=[],h=!1)=>{(h||!ES.check({title:s,message:a}))&&(ES.add({title:s,message:a}),oI.add(i),eI.custom(f=>qi.default.createElement(TJ,null,qi.default.createElement(FJ,{type:i}),qi.default.createElement(IJ,null,qi.default.createElement(MU,null,s),qi.default.createElement(AU,{dangerouslySetInnerHTML:{__html:Vn.parse(a)}}),c.length>0&&qi.default.createElement(AU,null,qi.default.createElement("span",null,"Docs:"," ",c.map((g,y)=>qi.default.createElement(qi.Fragment,{key:y},y>0&&", ",qi.default.createElement("a",{target:"_blank",href:g.url},g.title)))))),qi.default.createElement(DJ,{onClick:()=>{eI.remove(f.id),ES.delete({title:s,message:a}),oI.delete(i)}},"Close")),{duration:1/0}))},PS={warning:CS("warning"),success:CS("success"),info:CS("info"),error:CS("error")},UJ=se.div(BJ||(BJ=H([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:i})=>i==="center"?"center":"flex-end"),jJ=se.button(VJ||(VJ=H([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,({danger:i})=>i?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),HJ=se.div(zJ||(zJ=H([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),$J=se.div(GJ||(GJ=H([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),KJ=se.div(WJ||(WJ=H([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),qJ=()=>{let{hasNotifications:i}=IU();return By({enabled:!i},()=>qi.default.createElement(TU,null,qi.default.createElement(KJ,null,qi.default.createElement(MU,null,"No notifications"),"Notifications will appear here when you get them.")))},XJ=()=>{var i;let{toasts:s,handlers:a}=EU(),{startPause:c,endPause:h}=a,f=(i=$n(me().atomP.ahistoric.pinNotifications))!=null?i:!1;return qi.default.createElement(HJ,null,f?s.length>0&&qi.default.createElement($J,{onMouseEnter:c,onMouseLeave:h},qi.default.createElement("div",null,s.map(g=>qi.default.createElement("div",{key:g.id},g.message(g))))):null,qi.default.createElement(UJ,{align:"side"},f&&s.length>0&&qi.default.createElement(jJ,{onClick:()=>{oI.clear(),ES.clear(),eI.remove()},danger:!0},"Clear")))},IU=()=>{let{toasts:i}=EU();return{hasNotifications:i.length>0}}});function RU(i,s){var a;let c=Object.values((a=(0,YJ.val)(i.pointers.historic.sheetsById))!=null?a:{}),h=c.flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.staticOverrides.byObject)!=null?y:{})}).flatMap(g=>Object.values(g??{})),f=[...c.flatMap(g=>{var y,w;return Object.values((w=(y=g==null?void 0:g.sequence)==null?void 0:y.tracksByObject)!=null?w:{})}).flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.trackData)!=null?y:{})}).flatMap(g=>g==null?void 0:g.keyframes).map(g=>g==null?void 0:g.value)];return h.forEach(g=>{vt(g,y=>{f.push(y)},[])}),f.filter(g=>(g==null?void 0:g.type)&&(s?(g==null?void 0:g.type)==s:typeof(g==null?void 0:g.type)=="string")).map(g=>g.id).filter((g,y,w)=>g!==null&&g!==""&&w.indexOf(g)===y)}var YJ,ZJ=C(()=>{YJ=Mt,Je()});function QJ(i,s){let a=new File([i],s),c=URL.createObjectURL(a),h=Object.assign(document.createElement("a"),{href:c,target:"_blank",rel:"noopener"});h.setAttribute("download",s),h.click(),setTimeout(()=>{URL.revokeObjectURL(c)},4e4)}var Ca,JJ,eee,tee,nee,ree,iee,oee,see,aee,bke=C(()=>{Fe(),cc(),lc(),Ca=Q(Re()),Ne(),EQ(),cke(),JJ=Q(dke()),kS(),ZJ(),tee=se.div(eee||(eee=H([""]))),ree=se.div(nee||(nee=H([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),oee=se(uc)(iee||(iee=H([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),see=({projects:i})=>{let s=i[0],a=s.address.projectId,c=a.replace(/[^\w\d'_\-]+/g," ").trim(),h="".concat(c,".theatre-project-state.json"),[f,g]=(0,Ca.useState)(!1),y=(0,Ca.useCallback)(()=>ye(void 0,null,function*(){var S,T;let I=RU(s),A=new Map;try{yield Promise.all(I.map(D=>ye(void 0,null,function*(){let O=s.assetStorage.getAssetUrl(D),F=yield fetch(O);F.ok&&A.set(D,yield F.blob())})))}catch{PS.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((T=(S=s.config.assets)==null?void 0:S.baseUrl)!=null?T:"/",". This is likely due to a CORS issue."));return}if(A.size>0){let D=new JJ.default;for(let[F,V]of A)D.file(F,V);let O=yield D.generateAsync({type:"blob"});QJ(O,"".concat(c,".assets.zip"))}let k=JSON.stringify(me().createContentOfSaveFile(s.address.projectId),null,2);QJ(k,h),g(!0),setTimeout(()=>{g(!1)},2e3)}),[s,h]),w=ac({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>Ca.default.createElement(oee,null,Ca.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),Ca.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),Ca.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return Ca.default.createElement(Ca.default.Fragment,null,w.node,Ca.default.createElement(tee,null,Ca.default.createElement(KQ,{projectId:a}),Ca.default.createElement(ree,null,Ca.default.createElement(XA,{onMouseEnter:S=>w.open(S,S.target),onClick:f?void 0:y,disabled:f},f?"(Exported)":"Export ".concat(a," to JSON")))))},aee=see}),Ap,lee,uee,cee,dee,hee,pee,fee,mee,vee,gee,_ke=C(()=>{Ap=Q(Re()),Ne(),zx(),uee=se.div(lee||(lee=H([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),dee=se.div(cee||(cee=H([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),pee=se.div(hee||(hee=H([`
  color: rgba(145, 145, 145, 0.8);
`]))),mee=se.a(fee||(fee=H([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),vee=()=>Ap.default.createElement(uee,null,Ap.default.createElement(dee,null,Ap.default.createElement(pee,null,Ap.default.createElement(YF,null)),Ap.default.createElement("div",null,"Please select an object from the ",Ap.default.createElement("u",null,"Outline Menu")," to see its properties.")),Ap.default.createElement(mee,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),gee=vee});function yee(){let[i,s]=(0,OU.useState)(!1),a=(0,OU.useMemo)(()=>{let c=new Set;return()=>{let h=()=>{c.delete(h),s(c.size>0)};return c.add(h),s(!0),h}},[]);return[i,a]}var OU,bee=C(()=>{OU=Q(Re())}),Jr,jy,_ee,wee,sI,xee,DU,See,LU,Eee,NU,TS,Cee,Pee,aI,hv,FU=C(()=>{_p(),hn(),Jr=Q(Re()),Ne(),Wn(),Td(),vr(),ake(),bke(),Fe(),cK(),jy=Mt,_ke(),bee(),lv(),_ee="32px",sI=se.div(wee||(wee=H([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,xy.propsPanel,({pin:i})=>i?"block":"none"),DU=se.div(xee||(xee=H([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),hr),LU=se.div(See||(See=H([`
  height: `,`;
  display: flex;
  align-items: center;
`])),_ee),NU=se.div(Eee||(Eee=H([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),hr),TS=(0,Jr.createContext)([!1,()=>()=>{}]),Cee=i=>{let s=$n(me().atomP.ahistoric.pinDetails)!==!1,a=uK("right");(0,Jr.useLayoutEffect)(()=>{aI.set(a)},[a]),(0,Jr.useEffect)(()=>()=>{hv.set(!1),aI.set(!1)},[]);let[c]=(0,Jr.useContext)(TS),h=s||a||c,[f,g]=(0,Jr.useState)(null);return KY(f),Un(()=>{let y=bp(),w=y.find(Dt);if(w)return Jr.default.createElement(sI,{"data-testid":"DetailPanel-Object",pin:h,ref:g,onMouseEnter:()=>{hv.set(!0)},onMouseLeave:()=>{hv.set(!1)}},Jr.default.createElement(LU,null,Jr.default.createElement(DU,{title:"".concat(w.sheet.address.sheetId,": ").concat(w.sheet.address.sheetInstanceId," > ").concat(w.address.objectKey)},Jr.default.createElement(yp,null,w.sheet.address.sheetId," "),Jr.default.createElement(jx,null,":"," "),Jr.default.createElement(yp,null,w.sheet.address.sheetInstanceId," "),Jr.default.createElement(jx,null," → "),Jr.default.createElement(yp,null,w.address.objectKey))),Jr.default.createElement(NU,null,Jr.default.createElement(wQ,{objects:[w]})));let S=y.find(nt);return S?Jr.default.createElement(sI,{pin:h},Jr.default.createElement(LU,null,Jr.default.createElement(DU,{title:"".concat(S.address.projectId)},Jr.default.createElement(yp,null,S.address.projectId," "))),Jr.default.createElement(NU,null,Jr.default.createElement(aee,{projects:[S]}))):Jr.default.createElement(sI,{pin:h,onMouseEnter:()=>{hv.set(!0)},onMouseLeave:()=>{hv.set(!1)}},Jr.default.createElement(gee,null))},[h])},Pee=()=>{let i=yee();return Jr.default.createElement(TS.Provider,{value:i},Jr.default.createElement(Cee,null))},aI=new jy.Atom(!1),hv=new jy.Atom(!1),(0,jy.prism)(()=>{let i=(0,jy.val)(hv.prism),s=(0,jy.val)(aI.prism);return i||s})}),BU,lI,uI,UU,zy,kee,VU,Hy=C(()=>{BU=Mt,hn(),Fe(),bee(),lI=Q(Re()),zB(),uI=(i,s)=>{let a=i.left/s.width,c=(i.left+i.width)/s.width,h=i.top/s.height,f=(i.height+i.top)/s.height;return{edges:{left:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},right:c<=.5?{from:"screenLeft",distance:c}:{from:"screenRight",distance:1-c},top:h<=.5?{from:"screenTop",distance:h}:{from:"screenBottom",distance:1-h},bottom:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f}}}},UU=lI.default.createContext(null),zy=()=>(0,lI.useContext)(UU),kee=({panelId:i,children:s,defaultPosition:a,minDims:c})=>{let h=TA(800,200),[f,g]=yee(),{stuff:y}=Un(()=>{var w;let{edges:S}=(w=(0,BU.val)(me().atomP.historic.panelPositions[i]))!=null?w:a,T=Math.floor(h.width*(S.left.from==="screenLeft"?S.left.distance:1-S.left.distance)),I=Math.floor(h.width*(S.right.from==="screenLeft"?S.right.distance:1-S.right.distance)),A=Math.floor(h.height*(S.top.from==="screenTop"?S.top.distance:1-S.top.distance)),k=Math.floor(h.height*(S.bottom.from==="screenTop"?S.bottom.distance:1-S.bottom.distance)),D=Math.max(I-T,c.width),O=Math.max(k-A,c.height);return{stuff:{dims:BU.prism.memo("dims",()=>({width:D,left:T,top:A,height:O}),[D,T,A,O]),panelId:i,minDims:c,boundsHighlighted:f,addBoundsHighlightLock:g}}},[i,h,f,g]);return lI.default.createElement(UU.Provider,{value:y},s)},VU=kee}),MS,Tee,Mee,Aee,jU,Iee=C(()=>{mr(),Fe(),no(),MS=Q(Re()),Ne(),Hy(),Ea(),Qr(),Td(),Mee=se.div(Tee||(Tee=H([`
  cursor: move;
`]))),Aee=i=>{let s=zy(),a=(0,MS.useRef)(s);a.current=s;let[c,h]=sr(null),f=(0,MS.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let S=a.current,T,I=s.addBoundsHighlightLock();return{onDrag(A,k){let D=z(j({},S.dims),{top:ai(S.dims.top+k,0,window.innerHeight-rc),left:ai(S.dims.left+A,-S.dims.width+rc,window.innerWidth-rc)}),O=uI(D,{width:window.innerWidth,height:window.innerHeight});T==null||T.discard(),T=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:S.panelId})})},onDragEnd(A){I(),A?T==null||T.commit():T==null||T.discard()}}}}),[]),[g]=xi(h,f);ul(g,"dragging","move");let[y,w]=(0,MS.useMemo)(()=>{let S;return[function(){if(S){let T=S;S=void 0,T()}S=s.addBoundsHighlightLock()},function(){if(S){let T=S;S=void 0,T()}}]},[]);return MS.default.createElement(Mee,z(j({},i),{ref:c,onMouseEnter:y,onMouseLeave:w}))},jU=Aee}),cI,Ree,zU,Oee,HU,Dee,GU,Lee,Nee,Fee,Bee,Uee,$U,Vee,jee,zee,Hee,Gee,AS,$ee,Wee,Kee,qee,Xee,Yee,Zee,Qee,Jee,WU,ete,Fd,wke=C(()=>{mr(),Fe(),no(),Sa(),cI=Q(Re()),Ne(),Hy(),vr(),Qr(),Td(),zU=se.div(Ree||(Ree=H([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),hr,fy(.2,"#478698")),HU=se(zU)(Oee||(Oee=H([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),GU=se(HU)(Dee||(Dee=H([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),Nee=se(GU)(Lee||(Lee=H([`
  top: -1px;
`]))),Bee=se(GU)(Fee||(Fee=H([`
  bottom: -1px;
`]))),$U=se(HU)(Uee||(Uee=H([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),jee=se($U)(Vee||(Vee=H([`
  left: -1px;
`]))),Hee=se($U)(zee||(zee=H([`
  right: -1px;
`]))),AS=se(zU)(Gee||(Gee=H([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),Wee=se(AS)($ee||($ee=H([`
  top: 0;
  left: 0;
`]))),qee=se(AS)(Kee||(Kee=H([`
  top: 0;
  right: 0;
`]))),Yee=se(AS)(Xee||(Xee=H([`
  bottom: 0;
  left: 0;
`]))),Qee=se(AS)(Zee||(Zee=H([`
  bottom: 0;
  right: 0;
`]))),Jee={Top:Nee,TopLeft:Wee,TopRight:qee,Bottom:Bee,BottomLeft:Yee,BottomRight:Qee,Left:jee,Right:Hee},WU={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},ete=({which:i})=>{let s=zy(),a=(0,cI.useRef)(s);a.current=s;let[c,h]=sr(null),f=(0,cI.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:WU[i],onDragStart(){let S,T=a.current,I=s.addBoundsHighlightLock();return{onDrag(A,k){let D=j({},T.dims);if(i.startsWith("Bottom"))D.height=Math.max(D.height+k,T.minDims.height);else if(i.startsWith("Top")){let F=D.top+D.height,V=ai(D.top+k,0,Math.min(F-T.minDims.height,window.innerHeight-rc)),$=F-V;D.height=$,D.top=V}if(i.endsWith("Left")){let F=D.left+D.width,V=Math.min(D.left+A,Math.min(F-T.minDims.width,window.innerWidth-rc)),$=F-V;D.width=$,D.left=V}else i.endsWith("Right")&&(D.width=Math.max(D.width+A,Math.max(T.minDims.width,rc-T.dims.left)));let O=uI(D,{width:window.innerWidth,height:window.innerHeight});S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:T.panelId})})},onDragEnd(A){I(),A?S==null||S.commit():S==null||S.discard()}}}}),[i]),[g]=xi(h,f),y=Jee[i],w=i.length<=6;return cI.default.createElement(y,{ref:c,className:[g?"isDragging":"",s.boundsHighlighted&&w?"isHighlighted":""].join(" "),style:{cursor:WU[i]}})},Fd=ete}),uu,tte,nte,xke=C(()=>{uu=Q(Re()),wke(),tte=i=>uu.default.createElement(uu.default.Fragment,null,uu.default.createElement(Fd,{which:"Bottom"}),uu.default.createElement(Fd,{which:"Top"}),uu.default.createElement(Fd,{which:"Left"}),uu.default.createElement(Fd,{which:"Right"}),uu.default.createElement(Fd,{which:"TopLeft"}),uu.default.createElement(Fd,{which:"TopRight"}),uu.default.createElement(Fd,{which:"BottomLeft"}),uu.default.createElement(Fd,{which:"BottomRight"})),nte=tte}),dI,rte,ite,ote,KU,ste=C(()=>{vr(),dI=Q(Re()),Ne(),Hy(),xke(),ite=se.div(rte||(rte=H([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),hr),ote=dI.default.forwardRef((i,s)=>{let a=zy(),c=i,{style:h,children:f}=c,g=U(c,["style","children"]);return dI.default.createElement(ite,z(j({ref:s},g),{style:j({width:a.dims.width+"px",height:a.dims.height+"px",top:a.dims.top+"px",left:a.dims.left+"px"},h??{})}),dI.default.createElement(nte,null),f)}),KU=ote}),Ske=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s<"u"?c(i,Re()):(a=typeof globalThis<"u"?globalThis:a||self,c(a.ReactErrorBoundary={},a.React))})(i,function(a,c){function h(k){if(k&&k.__esModule)return k;var D=Object.create(null);return k&&Object.keys(k).forEach(function(O){if(O!=="default"){var F=Object.getOwnPropertyDescriptor(k,O);Object.defineProperty(D,O,F.get?F:{enumerable:!0,get:function(){return k[O]}})}}),D.default=k,Object.freeze(D)}var f=h(c);function g(k,D){return g=Object.setPrototypeOf||function(O,F){return O.__proto__=F,O},g(k,D)}function y(k,D){k.prototype=Object.create(D.prototype),k.prototype.constructor=k,g(k,D)}var w=function(k,D){return k===void 0&&(k=[]),D===void 0&&(D=[]),k.length!==D.length||k.some(function(O,F){return!Object.is(O,D[F])})},S={error:null},T=function(k){y(D,k);function D(){for(var F,V=arguments.length,$=new Array(V),X=0;X<V;X++)$[X]=arguments[X];return F=k.call.apply(k,[this].concat($))||this,F.state=S,F.updatedWithError=!1,F.resetErrorBoundary=function(){for(var re,ne=arguments.length,ae=new Array(ne),xe=0;xe<ne;xe++)ae[xe]=arguments[xe];F.props.onReset==null||(re=F.props).onReset.apply(re,ae),F.reset()},F}D.getDerivedStateFromError=function(F){return{error:F}};var O=D.prototype;return O.reset=function(){this.updatedWithError=!1,this.setState(S)},O.componentDidCatch=function(F,V){var $,X;($=(X=this.props).onError)==null||$.call(X,F,V)},O.componentDidMount=function(){var F=this.state.error;F!==null&&(this.updatedWithError=!0)},O.componentDidUpdate=function(F){var V=this.state.error,$=this.props.resetKeys;if(V!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(V!==null&&w(F.resetKeys,$)){var X,re;(X=(re=this.props).onResetKeysChange)==null||X.call(re,F.resetKeys,$),this.reset()}},O.render=function(){var F=this.state.error,V=this.props,$=V.fallbackRender,X=V.FallbackComponent,re=V.fallback;if(F!==null){var ne={error:F,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(re))return re;if(typeof $=="function")return $(ne);if(X)return f.createElement(X,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},D}(f.Component);function I(k,D){var O=function(V){return f.createElement(T,D,f.createElement(k,V))},F=k.displayName||k.name||"Unknown";return O.displayName="withErrorBoundary("+F+")",O}function A(k){var D=f.useState(null),O=D[0],F=D[1];if(k!=null)throw k;if(O!=null)throw O;return F}a.ErrorBoundary=T,a.useErrorHandler=A,a.withErrorBoundary=I,Object.defineProperty(a,"__esModule",{value:!0})})}),Bo,ate,lte,ute,cte,dte,hte,pte,fte,mte,vte,gte,yte,bte,_te,wte,xte,Ste,Ete,Cte,Eke=C(()=>{Bo=Q(Re()),Ne(),Td(),Hy(),Iee(),ste(),ate=Q(Ske()),Ay(),Fe(),Td(),lte={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},ute={width:300,height:300},cte=({paneInstance:i})=>Bo.default.createElement(VU,{panelId:"pane-".concat(i.instanceId),defaultPosition:lte,minDims:ute},Bo.default.createElement(Ete,{paneInstance:i})),hte=se(KU)(dte||(dte=H([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),xy.pluginPanes),fte=se.div(pte||(pte=H([`
  width: 100%;
`]))),vte=se.div(mte||(mte=H([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),yte=se.button(gte||(gte=H([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),_te=se(l7)(bte||(bte=H([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),xte=se.div(wte||(wte=H([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),Ste=i=>Bo.default.createElement(xte,null,"An Error occurred rendering this pane. Open the console for more info.",Bo.default.createElement("pre",null,JSON.stringify({message:i.error.message,stack:i.error.stack},null,2))),Ete=({paneInstance:i})=>{let[s,a]=(0,Bo.useState)(null),c=i.definition.mount;(0,Bo.useLayoutEffect)(()=>{if(!s)return;let f=c({paneId:i.instanceId,node:s});if(typeof f=="function")return f},[s,c,i.instanceId]);let h=(0,Bo.useCallback)(()=>{me().paneManager.destroyPane(i.instanceId)},[i]);return Bo.default.createElement(hte,{"data-testid":"theatre-pane-wrapper-".concat(i.instanceId)},Bo.default.createElement(jU,null,Bo.default.createElement(qF,null,Bo.default.createElement(vte,null,Bo.default.createElement(yte,{onClick:h,title:"Close Pane"},Bo.default.createElement(kCe,null))),Bo.default.createElement(fte,null,i.instanceId))),Bo.default.createElement(ate.ErrorBoundary,{FallbackComponent:Ste},Bo.default.createElement(_te,{"data-testid":"theatre-pane-content-".concat(i.instanceId),ref:a})))},Cte=cte}),qU,XU,Pte=C(()=>{qU=Mt,XU=(i,s)=>{let a=qU.prism.memo(i,()=>new qU.Atom(s),[]);return a.set(s),a}});function kte(i,s){(0,Tte.useLayoutEffect)(()=>{if(!i||s.type!=="propWithChildren"&&s.type!=="primitiveProp"&&s.type!=="sheetObject")return;let a=null,c=z(j({},s.sheetObject.address),{pathToProp:s.type==="sheetObject"?[]:s.pathToProp});function h(){a=GA.replaceLock(c,()=>{})}function f(){a==null||a()}return i.addEventListener("mouseenter",h),i.addEventListener("mouseleave",f),()=>{a==null||a(),i.removeEventListener("mouseenter",h),i.removeEventListener("mouseleave",f)}},[i])}var Tte,Mte=C(()=>{Tte=Q(Re()),pU()}),Ip,Ate,YU,Ite,ZU,Rte,QU,Ote,Dte,Lte,Nte,Fte,Bte,Ute,hI,pI=C(()=>{vr(),Ip=Q(Re()),Ay(),Ne(),sv(),Mte(),YU=se.li(Ate||(Ate=H([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),i=>i.depth),ZU=se.div(Ite||(Ite=H([`
  border-bottom: 1px solid #7695b705;
`]))),QU=se(ZU)(Rte||(Rte=H([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),wy.panel.body.compoudThing.label.color,i=>i.isSelected&&"background: blue"),Dte=se.span(Ote||(Ote=H([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),Cp,QU),Nte=se.span(Lte||(Lte=H([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>i.isCollapsed?15:75),Bte=se.ul(Fte||(Fte=H([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Ute=({leaf:i,label:s,children:a,isSelectable:c,isSelected:h,toggleSelect:f,toggleCollapsed:g,isCollapsed:y})=>{let w=Array.isArray(a)&&a.length>0,S=(0,Ip.useRef)(null);return kte(S.current,i),i.shouldRender?Ip.default.createElement(YU,{depth:i.depth},Ip.default.createElement(QU,{ref:S,style:{height:i.nodeHeight+"px"},isSelectable:c===!0,isSelected:h===!0,onClick:f,isEven:i.n%2===0},Ip.default.createElement(Nte,{isCollapsed:y,onClick:g},Ip.default.createElement(tq,null)),Ip.default.createElement(Dte,null,s)),w&&Ip.default.createElement(Bte,null,a)):null},hI=Ute});function Cke(i,s){return s.every((a,c)=>a===i[c])}function Pke(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;a++)if(i[a]!==s[a])return!1;return!0}function fI(i){var s;let a=[];for(;;){let c=a.length,h=(s=i[0])==null?void 0:s[c];if(h===void 0)return a;for(let f of i)if(h!==f[c])return a;a.push(h)}}var fc,mI,mc=C(()=>{IA(),fc=tS(i=>JSON.stringify(i)),mI=i=>JSON.parse(i)});function kke(i,s){let a=(0,JU.useRef)({combo:i,listener:s});a.current={combo:i,listener:s},(0,JU.useEffect)(()=>{function c(g){g.key===a.current.combo&&a.current.listener({down:!0,event:g})}function h(g){g.key===a.current.combo&&a.current.listener({down:!1,event:g})}function f(g){a.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",c),document.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",h),window.removeEventListener("blur",f)}},[])}var JU,Tke=C(()=>{JU=Q(Re())});function Vte(i){let[s,a]=(0,jte.useState)(!1);return kke(i,({down:c})=>{a(c)}),s}var jte,zte=C(()=>{jte=Q(Re()),Tke()});function Mke(i){let s=(0,eV.useMemo)(()=>new Hte.Atom(i),[]);return(0,eV.useLayoutEffect)(()=>{s.set(i)},[i]),s}var Hte,eV,Ake=C(()=>{Hte=Mt,eV=Q(Re())});function Gte(i,s,a){let c=(0,tV.pointer)({root:{},path:[]}),h=s(c);lp(i,(0,tV.getPointerParts)(h).path,a)}var tV,Ike=C(()=>{tV=Mt,X0()}),vI,$te,As,cu=C(()=>{vI="data-pos",$te={checkIfMouseEventSnapToPos(i,s){let a=i.composedPath().find(c=>c instanceof Element&&c!==(s==null?void 0:s.ignore)&&c.hasAttribute(vI));if(a){let c=parseFloat(a.getAttribute(vI));if(isFinite(c))return c}return null},includePositionSnapAttrs(i){return{[vI]:i}}},As=$te});function gI(i){let s=i.type==="sheet"?Oke(i):nV(i);return{byPosition:Rke(s),tracks:s}}function Rke(i){let s=new Map;for(let a of i)for(let c of a.data.keyframes){let h=s.get(c.position);h||(h=[],s.set(c.position,h)),h.push({kf:c,track:a,itemKey:co.forTrackKeyframe(a.sheetObject,a.id,c.id)})}return s}function Oke(i){return i.children.flatMap(nV)}function nV(i){return i.children.flatMap(s=>s.type==="propWithChildren"?nV(s):Dke(s))}function Dke(i){let s=i.sheetObject,a=s.address.projectId,c=me().atomP.historic.coreByProject[a].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey],h=(0,yI.val)(c.trackIdByPropPath[fc(i.pathToProp)]);if(!h)return[];let f=(0,yI.val)(c.trackData[h]);return f?[{id:h,data:f,sheetObject:s}]:[]}function Lke(i,s){return ns(i.children.flatMap(a=>rV(a,s)))}function rV(i,s){return ns(i.children.flatMap(a=>a.type==="propWithChildren"?rV(a,s):Nke(a,s)))}function Nke(i,s){var a,c;let h=i.sheetObject,f=h.address.projectId,g=me().atomP.historic.coreByProject[f].sheetsById[h.address.sheetId].sequence.tracksByObject[h.address.objectKey],y=(0,yI.val)(g.trackIdByPropPath[fc(i.pathToProp)]);return y?(c=(a=s[h.address.objectKey])==null?void 0:a[y])!=null?c:[]:[]}var yI,Gy=C(()=>{Fe(),yI=Mt,Ld(),mc(),Qr()});function Fke(i,s){let[a,c]=sr(null),h=wp("useCaptureSelection");return xi(s,(0,$y.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(f){if(!f.shiftKey||f.target instanceof HTMLInputElement)return!1;let g=s.getBoundingClientRect(),y=f.clientX-g.left-(0,dl.val)(i.scaledSpace.leftPadding),w=(0,dl.val)(i.scaledSpace.toUnitSpace)(y);return a.current={h:[w,w],v:[f.clientY-g.top,f.clientY-g.top]},(0,dl.val)(i.selectionAtom).set({current:void 0}),{onDrag(S,T,I){let A=s.getBoundingClientRect(),k=I.clientX-A.left-(0,dl.val)(i.scaledSpace.leftPadding),D=(0,dl.val)(i.scaledSpace.toUnitSpace)(k);a.current={h:[a.current.h[0],D],v:[a.current.v[0],I.clientY-A.top]};let O=iV.boundsToSelection(h,(0,dl.val)(i),a.current);(0,dl.val)(i.selectionAtom).set({current:O})},onDragEnd(S){a.current=null}}}}),[i,s,a])),c}var dl,$y,Rp,Wte,Kte,qte,iV,Xte,Yte,oV,Zte,Qte,Bke=C(()=>{Fe(),no(),zte(),Ake(),Ike(),mr(),hn(),dl=Mt,$y=Q(Re()),Ne(),cu(),Gy(),xp(),Rp=5,Kte=se.div(Wte||(Wte=H([`
  cursor: `,`;
`])),i=>i.isShiftDown?"cell":"default"),qte=({layoutP:i,children:s,height:a})=>{let[c,h]=sr(null),f=Vte("Shift"),g=Fke(i,h),y=(0,$y.useRef)(g);return y.current=g,$y.default.createElement(Kte,{style:{height:a+"px"},ref:c,isShiftDown:f,className:"selectionview"},g&&$y.default.createElement(Zte,{state:g,layoutP:i}),s)},(i=>{let s=(g,y,w,S,T)=>{let I=gI(w);if(w.top+w.nodeHeight/2+Rp>S.v[0]&&w.top+w.nodeHeight/2-Rp<S.v[1])for(let[A,k]of I.byPosition){let D=y.scaledSpace.toUnitSpace(Rp);if(!(A+D<=S.h[0]||A-D>=S.h[1]))for(let O of k)Gte(T,F=>F[O.track.sheetObject.address.objectKey].byTrackId[O.track.id].byKeyframeId[O.kf.id],!0)}c(g,y,w,S,T)},a={sheet(g,y,w,S,T){s(g,y,w,S,T)},propWithChildren(g,y,w,S,T){s(g,y,w,S,T)},sheetObject(g,y,w,S,T){s(g,y,w,S,T)},primitiveProp(g,y,w,S,T){let{sheetObject:I,trackId:A}=w,k=(0,dl.val)(me().atomP.historic.coreByProject[I.address.projectId].sheetsById[I.address.sheetId].sequence.tracksByObject[I.address.objectKey].trackData[A]);if(!(S.v[0]>w.top+w.heightIncludingChildren/2+Rp||w.top+w.heightIncludingChildren/2-Rp>S.v[1])){for(let D of k.keyframes)if(!(D.position+y.scaledSpace.toUnitSpace(Rp)<=S.h[0])){if(D.position-y.scaledSpace.toUnitSpace(Rp)>=S.h[1])break;Gte(T,O=>O[I.address.objectKey].byTrackId[A].byKeyframeId[D.id],!0)}}}},c=(g,y,w,S,T)=>{if("children"in w)for(let I of w.children)h(g,y,I,S,T)};function h(g,y,w,S,T){if(!w.shouldRender||S.v[0]>w.top+w.heightIncludingChildren||w.top>S.v[1])return;let I=a[w.type];I?I(g,y,w,S,T):c(g,y,w,S,T)}function f(g,y,w){let S={};w=oV(w);let T=y.tree;h(g.utilFor.internal(),y,T,w,S);let I=y.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:S,getDragHandlers(A){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let k,D=y.scaledSpace.toUnitSpace;return{onDrag(O,F,V){k&&(k.discard(),k=void 0);let $=As.checkIfMouseEventSnapToPos(V,{ignore:A.domNode}),X=$!=null?$-A.positionAtStartOfDrag:D(O);k=me().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ae of Object.keys(S)){let{byTrackId:xe}=S[ae];for(let fe of Object.keys(xe)){let{byKeyframeId:ge}=xe[fe];ne({trackId:fe,keyframeIds:Object.keys(ge),translate:X,scale:1,origin:0,snappingFunction:I.getSequence().closestGridPosition,objectKey:ae,projectId:A.projectId,sheetId:A.sheetId})}}})},onDragEnd(O){O?k==null||k.commit():k==null||k.discard()}}}}},delete(){me().transaction(({stateEditors:A})=>{let k=A.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let D of Object.keys(S)){let{byTrackId:O}=S[D];for(let F of Object.keys(O)){let{byKeyframeId:V}=O[F];k(z(j({},I.address),{objectKey:D,trackId:F,keyframeIds:Object.keys(V)}))}}})}}}i.boundsToSelection=f})(iV||(iV={})),Yte=se.div(Xte||(Xte=H([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),oV=i=>({h:[...i.h].sort((s,a)=>s-a),v:[...i.v].sort((s,a)=>s-a)}),Zte=({state:i,layoutP:s})=>{let a=Mke(i);return Un(()=>{let c=(0,dl.val)(a.pointer),h=oV(c),f=(0,dl.val)(s.scaledSpace.fromUnitSpace),g=(0,dl.val)(s.scaledSpace.leftPadding),y=h.h.map(f).map(A=>A+g),w=h.v[0],S=h.v[1]-h.v[0],T=y[0],I=y[1]-y[0];return $y.default.createElement(Yte,{style:{top:w+"px",height:S+"px",left:T+"px",width:I+"px"}})},[s,a])},Qte=qte}),pv,Jte,ene,sV,tne,nne,rne,ine=C(()=>{Sy(),pv=Q(Re()),Ne(),$d(),ene=se.div(Jte||(Jte=H([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>Cc.scrollableArea),sV=(0,pv.createContext)(ru),tne=()=>(0,pv.useContext)(sV),nne=i=>{let s=(0,pv.useRef)(null),a=(0,pv.useCallback)(c=>{s.current.scrollBy(0,c.deltaY)},[]);return pv.default.createElement(sV.Provider,{value:a},pv.default.createElement(ene,{ref:s},i.children))},rne=nne}),one,Uke=C(()=>{one='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),hl,bI=C(()=>{hl=(i,s=i)=>`
  left: `.concat(i*-.5,`px;
  top: `).concat(s*-.5,`px;
  width: `).concat(i,`px;
  height: `).concat(s,`px;
`)}),_I,sne,ane,Vke=C(()=>{_I=Mt,sne=(0,_I.prism)(()=>{let[i,s]=_I.prism.state("pos",null);return _I.prism.effect("setupListeners",()=>{let a=c=>{s(c)};return document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)}},[]),i}),ane=sne}),Bd,Is,IS,lne,une,cne,dne,Ud,vc,wI,hne,pne,Uo=C(()=>{Bd=Mt,Vke(),Qr(),Is=Q(Re()),IS=(0,Is.createContext)(null),lne=0,une=({children:i,layoutP:s})=>{let a=(0,Is.useMemo)(()=>new Bd.Atom([]),[]),c=(0,Is.useMemo)(()=>(0,Bd.prism)(()=>{let g=Bd.prism.memo("p",()=>hne(s),[s]).getValue(),y=(0,Bd.val)(a.pointer);return y.length>0?gd(y).position:g}),[s]),h=(0,Is.useCallback)(()=>{let g=lne++;return a.reduce(y=>[...y,{id:g,position:[-1,0]}]),{set:y=>{a.reduce(w=>{let S=w.findIndex(I=>I.id===g);if(S===-1)return console.warn("Lock is already freed. This is a bug."),w;let T=[...w];return T.splice(S,1,{id:g,position:[y,y===-1?0:1]}),T})},unlock:()=>{a.reduce(y=>y.filter(w=>w.id!==g))}}},[]),f={currentD:c,getLock:h};return Is.default.createElement(IS.Provider,{value:f},i)},cne=()=>(0,Is.useContext)(IS).currentD,dne=()=>{let{getLock:i}=(0,Is.useContext)(IS),s=(0,Is.useRef)();return(0,Is.useLayoutEffect)(()=>()=>{var a;(a=s.current)==null||a.unlock()},[]),(0,Is.useMemo)(()=>{let a;return(c,h)=>{var f,g;(a==null?void 0:a.shouldLock)!==c&&(c?s.current=i():(f=s.current)==null||f.unlock()),(a==null?void 0:a.pos)!==h&&c&&((g=s.current)==null||g.set(h)),a={shouldLock:c,pos:h}}},[i])},Ud=(i,s)=>{let{getLock:a}=(0,Is.useContext)(IS),c=(0,Is.useRef)();(0,Is.useLayoutEffect)(()=>{if(i)return c.current=a(),()=>{c.current.unlock()}},[i,a]),(0,Is.useLayoutEffect)(()=>{i&&c.current.set(s)},[s,i])},vc=i=>({[wI]:i==="hide"?i:i.toFixed(3)}),wI="data-theatre-lock-framestamp-to",hne=i=>(0,Bd.prism)(()=>{let s=(0,Bd.val)(i.rightDims),a=(0,Bd.val)(i.clippedSpace.toUnitSpace),c=(0,Bd.val)(ane);if(!c)return[-1,0];for(let T of c.composedPath()){if(!(T instanceof HTMLElement||T instanceof SVGElement))break;if(T.hasAttribute(wI)){let I=T.getAttribute(wI);if(typeof I!="string")continue;if(I==="hide")return[-1,0];let A=parseFloat(I);if(isFinite(A)&&A>=0)return[A,2]}}let{clientX:h,clientY:f}=c,{screenX:g,screenY:y,width:w,height:S}=s;if(nx(h,g,g+w)&&nx(f,y+16,y+S)){let T=h-g;return[a(T),3]}else return[-1,0]}),pne=une}),fne,RS,aV,mne,vne,gc,gne=C(()=>{vr(),Ea(),Ne(),Uke(),bI(),cu(),Uo(),fne=12,RS=34,aV="beingDragged",gc={BEING_DRAGGED_CLASS:aV,CSS:Do(mne||(mne=H([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),hl(fne),hr,aV),CSS_WHEN_SOMETHING_DRAGGING:Do(vne||(vne=H([`
    pointer-events: auto;
    cursor: var(`,`);

    // ⸢⸤⸣⸥ thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),Ad,RS/2,RS/2,RS,RS,one),reactProps(i){return z(j(j({},vc(i.position)),As.includePositionSnapAttrs(i.position)),{className:i.isDragging?gc.BEING_DRAGGED_CLASS:""})}}});function lV(){DS.set({mode:"snapToAll"})}function fv(){DS.set({mode:"snapToNone"})}function yne(i){DS.set({mode:"snapToSome",positions:i})}function bne(i,s){return Object.fromEntries(Object.entries(i).map(([a,c])=>[a,Object.fromEntries(Object.entries(c.trackData).map(([h,f])=>[h,f.keyframes.filter(g=>s(g,{trackId:h,trackData:f,objectKey:a})).map(g=>g.position)]))]))}var _ne,wne,uV,xne,Sne,Ene,Cne,Pne,OS,DS,cV,mv=C(()=>{_ne=Mt,wne=Mt,uV=Q(Re()),Ne(),gne(),Sne=se.div(xne||(xne=H([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),gc.CSS,gc.CSS_WHEN_SOMETHING_DRAGGING),Cne=se.div(Ene||(Ene=H([`
  position: absolute;
`]))),Pne=i=>uV.default.createElement(Cne,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,wne.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(i.position,"px))")}},uV.default.createElement(Sne,j({},gc.reactProps({isDragging:!1,position:i.position})))),OS=Pne,DS=new _ne.Atom({mode:"snapToNone"}),cV=DS.prism});function jke(i,s){let a=(0,vv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(h){if(h.target instanceof HTMLInputElement||h.shiftKey||h.altKey||h.ctrlKey||h.metaKey||h.composedPath().some(I=>I instanceof HTMLElement&&I.draggable===!0))return!1;let f=h.clientX-s.getBoundingClientRect().left,g=ai((0,Si.val)(i.clippedSpace.toUnitSpace)(f),0,1/0),y=(0,Si.val)(i.seeker.setIsSeeking),w=(0,Si.val)(i.sheet).getSequence();w.position=g;let S=g,T=(0,Si.val)(i.scaledSpace.toUnitSpace);return y(!0),lV(),{onDrag(I,A,k){let D=T(I),O=ai(S+D,0,w.length),F=As.checkIfMouseEventSnapToPos(k,{});F!=null&&(O=F),w.position=O},onDragEnd(){y(!1),fv()}}}}),[i,s]),[c]=xi(s,a);ul(c,"draggingPositionInSequenceEditor","ew-resize")}function zke(i,s){let a=tne();(0,vv.useLayoutEffect)(()=>{if(!s)return;let c=f=>{if(f.ctrlKey){f.preventDefault(),f.stopPropagation();let g=f.clientX-s.getBoundingClientRect().left,y=(0,Si.val)(i.clippedSpace.toUnitSpace)(g),w=(0,Si.val)(i.clippedSpace.range),S=1+dV(f.deltaY,[-50,50])*.03,T=yd(w,k=>(k-y)*S+y),I=(0,Si.val)(i.sheet).getSequence().length,A=I+I*.25;(0,Si.val)(i.clippedSpace.setRange)(Hke(T,[0,A]));return}else if(f.shiftKey){f.preventDefault(),f.stopPropagation();let g=(0,Si.val)(i.sheet).getSequence().length,y=(0,Si.val)(i.clippedSpace.range),w=(y.end-y.start)/g,S=dV(f.deltaY||f.deltaX,[-50,50])*.05*w,T=yd(y,I=>I+S);(0,Si.val)(i.clippedSpace.setRange)(T);return}else{a(f),f.preventDefault(),f.stopPropagation();let g=(0,Si.val)(i.scaledSpace.toUnitSpace)(f.deltaX*1),y=(0,Si.val)(i.clippedSpace.range),w=yd(y,S=>S+g);(0,Si.val)(i.clippedSpace.setRange)(w);return}},h={capture:!0,passive:!1};return s.addEventListener("wheel",c,h),()=>{s.removeEventListener("wheel",c,h)}},[s,i]),xi(s,(0,vv.useMemo)(()=>({onDragStart(c){let h=(0,Si.val)(i.clippedSpace.range),f=(0,Si.val)(i.clippedSpace.setRange),g=(0,Si.val)(i.scaledSpace.toUnitSpace);return c.preventDefault(),c.stopPropagation(),{onDrag(y,w,S,T,I){a({deltaY:-I});let A=-g(y),k=yd(h,D=>D+A);f(k)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[i]))}function dV(i,[s,a]){return Math.max(Math.min(i,a),s)}function Hke(i,s){return yd(i,a=>dV(a,s))}function Gke(i,s){(0,vv.useLayoutEffect)(()=>{if(!s)return;let a=(0,Si.prism)(()=>{let g=(0,Si.val)(i.clippedSpace.range);return(0,Si.val)(i.scaledSpace.fromUnitSpace)(g.start)}),c=()=>{let g=a.getValue();s.scrollLeft=g},h=a.onStale(c);c();let f=setTimeout(c,100);return()=>{clearTimeout(f),h()}},[i,s])}var Si,vv,kne,Tne,Mne,hV,Ane=C(()=>{no(),mr(),hn(),Si=Mt,Qr(),vv=Q(Re()),Ne(),ine(),vr(),Ea(),cu(),mv(),Tne=se.div(kne||(kne=H([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),hr),Mne=vv.default.memo(({layoutP:i,children:s,height:a})=>{let{width:c,unitSpaceToScaledSpaceMultiplier:h}=Un(()=>({width:(0,Si.val)(i.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Si.val)(i.scaledSpace.fromUnitSpace)(1)}),[i]),[f,g]=sr(null);return zke(i,g),jke(i,g),Gke(i,g),vv.default.createElement(Tne,{ref:f,style:{width:c+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":h}},s)}),hV=Mne}),xI,Ine,Rne,One,Dne,Lne,Nne,Fne,Wy,SI=C(()=>{xI=Q(Re()),Ne(),Rne=se.li(Ine||(Ine=H([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),Dne=se.div(One||(One=H([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),i=>i.isEven?"transparent":"#6b8fb505"),Nne=se.ul(Lne||(Lne=H([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Fne=({leaf:i,children:s,node:a,isCollapsed:c})=>{let h=Array.isArray(s)&&s.length>0;return i.shouldRender?xI.default.createElement(Rne,null,xI.default.createElement(Dne,{style:{height:i.nodeHeight+"px"},isEven:i.n%2===0},a),h&&xI.default.createElement(Nne,null,s)):null},Wy=Fne}),$ke=K((i,s)=>{(function(){var a=this,c={};typeof i<"u"?s.exports=c:a.fuzzy=c,c.simpleFilter=function(h,f){return f.filter(function(g){return c.test(h,g)})},c.test=function(h,f){return c.match(h,f)!==null},c.match=function(h,f,g){g=g||{};var y=0,w=[],S=f.length,T=0,I=0,A=g.pre||"",k=g.post||"",D=g.caseSensitive&&f||f.toLowerCase(),O;h=g.caseSensitive&&h||h.toLowerCase();for(var F=0;F<S;F++)O=f[F],D[F]===h[y]?(O=A+O+k,y+=1,I+=1+I):I=0,T+=I,w[w.length]=O;return y===h.length?(T=D===h?1/0:T,{rendered:w.join(""),score:T}):null},c.filter=function(h,f,g){return!f||f.length===0?[]:typeof h!="string"?f:(g=g||{},f.reduce(function(y,w,S,T){var I=w;g.extract&&(I=g.extract(w));var A=c.match(h,I,g);return A!=null&&(y[y.length]={string:A.rendered,score:A.score,index:S,original:w}),y},[]).sort(function(y,w){var S=w.score-y.score;return S||y.index-w.index}))}})()});function Wke(i,s){let[a,c]=(0,EI.useState)(!1),h=(0,EI.useRef)(s);return a||(h.current=s),(0,EI.useMemo)(()=>i(c),h.current)}var EI,Kke=C(()=>{EI=Q(Re())}),pV,Op,CI=C(()=>{pV="rgba(26, 28, 30, 0.97);",Op="#272B2F"});function Bne(i,s,a,c){let h=Wke(f=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return f(!0),{onDrag(g,y){i&&a.onCurveChange(c(g,y))},onDragEnd(g){f(!1),a.onCancelCurveChange()}}}}),[i,a.onCurveChange,a.onCancelCurveChange]);xi(s,h)}var ur,PI,LS,Ky,Une,NS,Vne,kI,jne,zne,Hne,qy,Gne,gv,$ne,Wne,fV,Kne,TI,qne,mV,Xne,Yne,qke=C(()=>{ur=Q(Re()),no(),mr(),L0(),Ne(),vr(),Kke(),CI(),PI=.12,LS=1+PI*2,Ky=.01,Une=8,NS=(1-Ky)/(Une-1),Vne="#3EAAA4",kI="#3EAAA4",jne="#3EAAA4",zne="#3EAAA4",Hne="#3EAAA4",qy="#3EAAA4",Gne="#3EAAA4",gv="#B3B3B3",$ne="#3eaaa4",Wne="#67dfd8",fV=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],TI=se.circle(Kne||(Kne=H([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),$ne),mV=se.circle(qne||(qne=H([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),hr,TI,Wne),Xne=i=>{let{curveConnection:{left:s,right:a},backgroundConnections:c}=i,h=Math.min(0,1-a.handles[1],1-s.handles[3]),f=Math.max(1,1-a.handles[1],1-s.handles[3]),g=Math.max(1,f-h),y=V=>(V-h)/g,[w,S]=sr(null),T=LS/((S==null?void 0:S.clientWidth)||1),I=LS/((S==null?void 0:S.clientHeight)||1),[A,k]=sr(null);Bne(S,k,i,(V,$)=>{let X=ai(s.handles[2]+V*T,0,1),re=s.handles[3]-$*I;return[X,re,a.handles[0],a.handles[1]]});let[D,O]=sr(null);Bne(S,O,i,(V,$)=>{let X=ai(a.handles[0]+V*T,0,1),re=a.handles[1]-$*I;return[s.handles[2],s.handles[3],X,re]});let F=V=>"M0 ".concat(y(1)," C").concat(V.left.handles[2]," ").concat(y(1-V.left.handles[3])," ").concat(V.right.handles[0]," ").concat(y(1-V.right.handles[1])," 1 ").concat(y(0));return ur.default.createElement("svg",{height:"100%",width:"100%",ref:w,viewBox:"".concat(-PI," ").concat(-PI," ").concat(LS," ").concat(LS),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},ur.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},ur.default.createElement("stop",{offset:y(-1),stopColor:Gne}),ur.default.createElement("stop",{offset:y(0),stopColor:qy}),ur.default.createElement("stop",{offset:y(.3),stopColor:Hne}),ur.default.createElement("stop",{offset:y(.5),stopColor:zne}),ur.default.createElement("stop",{offset:y(.7),stopColor:jne}),ur.default.createElement("stop",{offset:y(1),stopColor:kI}),ur.default.createElement("stop",{offset:y(2),stopColor:Vne})),ur.default.createElement("pattern",{id:"dot-background-pattern-1",width:NS,height:NS/g,y:-h/g},ur.default.createElement("rect",{width:Ky,height:Ky,fill:gv,opacity:.3})),ur.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),ur.default.createElement("pattern",{id:"dot-background-pattern-2",width:NS,height:NS},ur.default.createElement("rect",{width:Ky,height:Ky,fill:gv})),ur.default.createElement("rect",{x:0,y:y(0),width:"1",height:y(1)-y(0),fill:"url(#dot-background-pattern-2)"}),!s.type||s.type==="bezier"?ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:s.handles[2],y2:y(1-s.handles[3]),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(0),x2:a.handles[0],y2:y(1-a.handles[1]),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),c.map((V,$)=>ur.default.createElement("path",{key:V.objectKey+"/"+V.left.id,d:F(V),stroke:fV[$%fV.length],opacity:.6,strokeWidth:"0.01"})),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),ur.default.createElement("circle",{cx:0,cy:y(1),r:"0.025",stroke:kI,strokeWidth:"0.02",fill:Op}),ur.default.createElement("circle",{cx:1,cy:y(0),r:"0.025",stroke:qy,strokeWidth:"0.02",fill:Op}),ur.default.createElement(mV,{ref:A,cx:s.handles[2],cy:y(1-s.handles[3]),fill:kI,opacity:.2}),ur.default.createElement(TI,{cx:s.handles[2],cy:y(1-s.handles[3])}),ur.default.createElement(mV,{ref:D,cx:a.handles[0],cy:y(1-a.handles[1]),fill:qy,opacity:.2}),ur.default.createElement(TI,{cx:a.handles[0],cy:y(1-a.handles[1])})):ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:1,y2:y(1),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(1),x2:1,y2:0,stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:qy,strokeWidth:"0.02",fill:Op}),ur.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:qy,strokeWidth:"0.02",fill:Op})))},Yne=Xne});function MI(i){return i.map(s=>s.toFixed(3)).join(", ")}function AI(i){if(!i||(i==null?void 0:i.length)>Zne)return null;let s=i.split(",");if(s.length!==4)return null;let a=s.map(c=>Number(c.trim()));return!a.every(c=>isFinite(c))||a[0]<0||a[0]>1||a[2]<0||a[2]>1?null:a}function Xke(i,s,a={threshold:.02}){if(!i||!s)return!1;let c=0;for(let h=0;h<4;h++)c+=Math.abs(i[h]-s[h]);return c<a.threshold}var Zne,II,Qne=C(()=>{Zne=128,II=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),ss,RI,yv,vV,Jne,ere,FS,gV,yV,tre,nre,Yke=C(()=>{ss=Q(Re()),RI=.75,yv=.1,vV=1+RI*2,Jne="#F5F5F5",ere="#888888",FS="#4f4f4f",gV="rgba(255, 255, 255, 0.1)",yV=i=>1-i,tre=i=>{let{easing:s,isSelected:a}=i,c=a?Jne:ere,h="".concat(-RI," ").concat(-RI," ").concat(vV," ").concat(vV);if(s){let f=[s[0],yV(s[1])],g=[s[2],yV(s[3])];return ss.default.createElement("svg",{height:"100%",width:"100%",viewBox:h,fill:"none",xmlns:"http://www.w3.org/2000/svg"},ss.default.createElement("line",{x1:"0",y1:"1",x2:f[0],y2:f[1],stroke:FS,strokeWidth:"0.1"}),ss.default.createElement("line",{x1:"1",y1:"0",x2:g[0],y2:g[1],stroke:FS,strokeWidth:"0.1"}),ss.default.createElement("circle",{cx:f[0],cy:f[1],r:.1,fill:gV}),ss.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:gV}),ss.default.createElement("circle",{cx:f[0],cy:f[1],r:yv,fill:FS}),ss.default.createElement("circle",{cx:g[0],cy:g[1],r:yv,fill:FS}),ss.default.createElement("path",{d:"M0 1 C".concat(f[0]," ").concat(f[1]," ").concat(g[0],` 
        `).concat(g[1]," 1 0"),stroke:c,strokeWidth:"0.08"}),ss.default.createElement("circle",{cx:0,cy:1,r:yv,fill:c}),ss.default.createElement("circle",{cx:1,cy:0,r:yv,fill:c}))}return ss.default.createElement("svg",{height:"100%",width:"100%",viewBox:h,fill:"none",xmlns:"http://www.w3.org/2000/svg"},ss.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),ss.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),ss.default.createElement("circle",{cx:0,cy:1,r:yv,fill:c}),ss.default.createElement("circle",{cx:1,cy:0,r:yv,fill:c}))},nre=tre}),BS,rre,ire,ore,sre,are,lre,ure,Zke=C(()=>{yS(),BS=Q(Re()),Ne(),Qne(),Yke(),dA(),CI(),cc(),ore=se.div(ire||(ire=H([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),Op,({isSelected:i})=>i&&Do(rre||(rre=H([`
      background-color: #383d42;
    `])))),are=se(uc)(sre||(sre=H([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),lre=BS.default.forwardRef((i,s)=>{let[a,c]=By({enabled:!0,verticalPlacement:i.tooltipPlacement,verticalGap:0},()=>BS.default.createElement(are,{showPopoverEdgeTriangle:!1},i.easing.label));return BS.default.createElement(ore,j({ref:cA([c,s])},i),a,BS.default.createElement(nre,{easing:AI(i.easing.value),isSelected:i.isSelected}))}),ure=lre});function Qke(i){var s;let[a,c]=(0,cre.useState)(null),h=g=>{if(a===null){i.items.length>0&&c(0);return}let y=a+g*i.uiColumns,w=y<0,S=y>i.items.length-1;if(w||S){if(i.canVerticleExit&&i.canVerticleExit(w?"top":"bottom")){c(null);return}return}c(y)},f=g=>{a===null?c(nTe(g,i.items.length)):a+g<0?c(null):c(Math.min(a+g,i.items.length-1))};return{focusFirstItem(){c(0)},onParentEltKeyDown:g=>{if(g.key==="ArrowRight")f(1);else if(g.key==="ArrowLeft")f(-1);else if(g.key==="ArrowUp")h(-1);else if(g.key==="ArrowDown")h(1);else return 0;return 1},gridItems:i.items.map((g,y)=>i.renderItem({isSelected:y===a,item:g,select(w){c(y),i.onSelectItem(g)===1&&(w==null||w.preventDefault(),w==null||w.stopPropagation())}})),currentSelection:(s=i.items[a??-1])!=null?s:null}}var cre,Jke=C(()=>{cre=Q(Re()),DI()});function dre(i,s,a){var c;(c=i.current)==null||c.discard(),i.current=null;let h=AI(a);h===null?i.current=tTe(s):i.current=eTe(s,h)}function hre(i){var s;(s=i.current)==null||s.discard(),i.current=null}function eTe(i,s){return me().tempTransaction(({stateEditors:a})=>{let{setHandlesForKeyframe:c,setKeyframeType:h}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:f,sheetId:g,objectKey:y,trackId:w,left:S,right:T}of i)c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,start:[s[0],s[1]]}),c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:T.id,end:[s[2],s[3]]}),h({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,keyframeType:"bezier"})})}function tTe(i){return me().tempTransaction(({stateEditors:s})=>{let{setKeyframeType:a}=s.coreByProject.historic.sheetsById.sequence;for(let{projectId:c,sheetId:h,objectKey:f,trackId:g,left:y}of i)a({projectId:c,sheetId:h,objectKey:f,trackId:g,keyframeId:y.id,keyframeType:"hold"})})}function nTe(i,s){return(i%s+s)%s}function rTe(i,s){return()=>setTimeout(i,s)}function iTe({left:i,right:s}){return({left:a,right:c})=>i.handles[2]!==a.handles[2]||i.handles[3]!==a.handles[3]||s.handles[0]!==c.handles[0]||s.handles[1]!==c.handles[1]}var OI,ui,pre,bV,_V,fre,mre,vre,gre,yre,bre,_re,wre,xre,Sre,Ere,Cre,wV,oTe,xV,Pre,DI=C(()=>{OI=Mt,ui=Q(Re()),Ne(),pre=Q($ke()),Fe(),qke(),Zke(),Qne(),CI(),mr(),Jke(),bV=3,_V=53,fre=25,vre=se.div(mre||(mre=H([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),pV,bV*_V),yre=se.div(gre||(gre=H([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),bV),_re=se.input.attrs({type:"text"})(bre||(bre=H([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),Op),xre=se.div(wre||(wre=H([`
  grid-area: tween;
  background: `,`;
`])),Op),Ere=se.div(Sre||(Sre=H([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),Cre=i=>{let s=(0,ui.useMemo)(()=>[i.curveConnection,...i.additionalConnections],[i.curveConnection,...i.additionalConnections]),a=(0,ui.useRef)(null);(0,ui.useEffect)(()=>{let le=Pre(s);return()=>{var Ae;le(),(Ae=a.current)==null||Ae.commit()}},[a]);let c=[i.curveConnection.left.handles[2],i.curveConnection.left.handles[3],i.curveConnection.right.handles[0],i.curveConnection.right.handles[1]],h=(0,ui.useRef)(null);(0,ui.useLayoutEffect)(()=>{var le,Ae;(le=h.current)==null||le.select(),(Ae=h.current)==null||Ae.focus()},[h.current]);let[f,g]=(0,ui.useState)(MI(c)),y=le=>{le!==void 0&&(T(1),g(le.target.value),AI(le.target.value)&&A(le.target.value))},w=le=>{var Ae,Y;T(1),(le.key==="ArrowDown"||le.key==="ArrowUp")&&le.preventDefault(),le.key==="ArrowDown"?(Qe.focusFirstItem(),(Y=(Ae=ae.current[V[0].label])==null?void 0:Ae.current)==null||Y.focus()):le.key==="Escape"?(hre(a),i.onRequestClose("key Escape")):le.key==="Enter"&&i.onRequestClose("key Enter")},[S,T]=(0,ui.useState)(0);(0,ui.useEffect)(()=>{S===2?g(MI(c)):S===3&&f!==""&&g("")},s);let[I,A]=(0,ui.useState)(MI(c)),[k,D]=(0,ui.useState)(null);(0,ui.useEffect)(()=>{var le;S!==0&&S!==3&&dre(a,s,(le=k??I)!=null?le:"")},[k,I,S]),s.some(iTe(i.curveConnection))&&S===0&&T(3);let O=le=>{var Ae,Y;T(2);let Ue=MI(le);g(Ue),A(Ue),(Ae=h.current)==null||Ae.select(),(Y=h.current)==null||Y.focus()},F=()=>{},V=(0,ui.useMemo)(()=>/^[A-Za-z]/.test(f)?pre.default.filter(f,II,{extract:le=>le.label}).map(le=>le.original):II,[f]);(0,ui.useEffect)(()=>{S===1&&V[0]&&A(V[0].value)},[V]);let $=le=>{le.key==="Escape"?(hre(a),i.onRequestClose("key Escape"),le.stopPropagation()):le.key==="Enter"&&(i.onRequestClose("key Enter"),le.stopPropagation())},X=le=>{S===0&&T(2),D(le.value)},re=()=>D(null),ne=le=>(dre(a,s,le.value),i.onRequestClose("selected easing option"),1),ae=(0,ui.useRef)(II.reduce((le,Ae)=>(le[Ae.label]={current:null},le),{})),[xe,fe]=sr(null),[ge,Ie]=(0,ui.useState)(0);(0,ui.useEffect)(()=>{let le=()=>{var Ae;Ie((Ae=fe==null?void 0:fe.scrollTop)!=null?Ae:0)};return fe==null||fe.addEventListener("scroll",le),()=>fe==null?void 0:fe.removeEventListener("scroll",le)},[fe]);let Qe=Qke({items:V,uiColumns:3,onSelectItem:ne,canVerticleExit(le){var Ae,Y;return le==="top"?((Ae=h.current)==null||Ae.select(),(Y=h.current)==null||Y.focus(),1):0},renderItem:({item:le,select:Ae})=>{var Y,Ue;return ui.default.createElement(ure,{key:le.label,easing:le,tabIndex:0,onKeyDown:$,ref:ae.current[le.label],onMouseOver:()=>X(le),onMouseOut:re,onClick:Ae,tooltipPlacement:((Ue=(Y=ae.current[le.label].current)==null?void 0:Y.offsetTop)!=null?Ue:0)-(ge??0)<_V+fre?"bottom":"top",isSelected:Xke(c,AI(le.value))})}});return(0,ui.useLayoutEffect)(()=>{var le,Ae;if(Qe.currentSelection!==null&&document.activeElement!==h.current){let Y=(Ae=(le=ae.current)==null?void 0:le[Qe.currentSelection.label])==null?void 0:Ae.current;Y==null||Y.focus(),A(Qe.currentSelection.value),/^[A-Za-z]/.test(f)||g(Qe.currentSelection.value)}},[Qe.currentSelection]),ui.default.createElement(vre,null,ui.default.createElement(_re,{value:f,placeholder:S===3?"Multiple easings selected":"Search presets...",onPaste:rTe(y),onChange:y,ref:h,onKeyDown:w}),ui.default.createElement(yre,{ref:xe,onKeyDown:le=>Qe.onParentEltKeyDown(le)},Qe.gridItems,Qe.gridItems.length===0?ui.default.createElement(Ere,null,"No results found"):void 0),ui.default.createElement(xre,{onClick:()=>{var le;return(le=h.current)==null?void 0:le.focus()}},ui.default.createElement(Yne,{curveConnection:i.curveConnection,backgroundConnections:i.additionalConnections,onCurveChange:O,onCancelCurveChange:F})))},wV=Cre,{isCurveEditorOpenD:oTe,isConnectionEditingInCurvePopover:xV,getLock:Pre}=(()=>{let i=new OI.Atom([]);return{getLock(s){return i.set(s),function(){i.set([])}},isCurveEditorOpenD:(0,OI.prism)(()=>i.prism.getValue().length>0),isConnectionEditingInCurvePopover(s){return OI.prism.ensurePrism(),i.prism.getValue().some(({left:a,right:c})=>s.left.id===a.id&&s.right.id===c.id)}}})()});function sTe(i,s){for(let{keyframeId:a}of uTe(s))if(i.left.id===a)return!0;return!1}function kre(i,s,a){return(0,NI.prism)(()=>{if(a===void 0)return[];let c=[];for(let{objectKey:h,trackId:f}of Tre(a)){let g=(0,NI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[h].trackData[f]);g&&(c=c.concat(lTe(g.keyframes).filter(y=>sTe(y,a)).map(({left:y,right:w})=>({left:y,right:w,trackId:f,objectKey:h,sheetId:s,projectId:i}))))}return c})}function LI(i,s,a){var c;if(a===void 0)return[];let h=[];for(let{objectKey:g,trackId:y,keyframeIds:w}of Tre(a))h=h.concat((c=SV({projectId:i,sheetId:s,objectKey:g,trackId:y,keyframeIds:w}))!=null?c:[]);let f=fI(h.map(g=>g.pathToProp));return h.map(({keyframe:g,pathToProp:y})=>({keyframe:g,pathToProp:y.slice(f.length)}))}function SV({projectId:i,sheetId:s,objectKey:a,trackId:c,keyframeIds:h}){let f=(0,NI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[a]),g=f==null?void 0:f.trackData[c];if(!g)return null;let y=aTe((f==null?void 0:f.trackIdByPropPath)||{})[c];if(!y)return null;let w=[a,...mI(y)];return h.map(S=>({keyframe:g.keyframes.find(T=>T.id===S),pathToProp:w})).filter(({keyframe:S})=>S!==void 0)}function aTe(i){let s={};for(let[a,c]of Object.entries(i))s[c]=a;return s}function lTe(i){return i.map((s,a)=>({left:s,right:i[a+1]})).slice(0,-1)}function uTe(i){var s,a,c;let h=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))for(let S of Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{}))h.push({objectKey:f,trackId:y,keyframeId:S});return h}function Tre(i){var s,a,c;let h=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))h.push({objectKey:f,trackId:y,keyframeIds:Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{})});return h}var NI,Xy=C(()=>{NI=Mt,Fe(),mc()});function cTe(i,s){return(0,Mre.useMemo)(()=>dTe(i,s),[])}function dTe(i,s){let a=null,c=g=>me().tempTransaction(y=>i(y,g));function h(){a==null||a.discard(),a=null}let f={createAsset:s.sheet.project.assetStorage.createAsset,getAssetUrl:g=>g.id?s.sheet.project.assetStorage.getAssetUrl(g.id):void 0};return j({temporarilySetValue(g){h(),a=c(g)},discardTemporaryValue:h,permanentlySetValue(g){h(),c(g).commit()}},f)}var Mre,hTe=C(()=>{Fe(),Mre=Q(Re())});function EV(i){var s;if(i.type==="sheetObject")return Vo.default.createElement(Vo.default.Fragment,null,Vo.default.createElement(FI,{style:{paddingLeft:"".concat(i.indent*BI,"px")}},i.sheetObject.address.objectKey),i.children.map((a,c)=>Vo.default.createElement(EV,z(j({key:c},a),{autoFocusInput:i.autoFocusInput&&c===0,indent:i.indent+1}))));if(i.type==="propWithChildren"){let a=(s=i.propConfig.label)!=null?s:gd(i.pathToProp);return Vo.default.createElement(Vo.default.Fragment,null,Vo.default.createElement(FI,{style:{paddingLeft:"".concat(i.indent*BI,"px")}},a),i.children.map((c,h)=>Vo.default.createElement(EV,z(j({key:h},c),{autoFocusInput:i.autoFocusInput&&h===0,indent:i.indent+1}))))}else return Vo.default.createElement(pTe,z(j({},i),{autoFocusInput:i.autoFocusInput,indent:i.indent}))}function pTe(i){var s;let a=(s=i.propConfig.label)!=null?s:gd(i.pathToProp),c=fTe(i);if(i.propConfig.type==="enum")return Vo.default.createElement(Vo.default.Fragment,null);{let h=JB[i.propConfig.type];return Vo.default.createElement(Ire,null,Vo.default.createElement(FI,null,Vo.default.createElement("span",{style:{paddingLeft:"".concat(i.indent*BI,"px")}},a)),Vo.default.createElement(Dre,null,Vo.default.createElement(h,{editingTools:c,propConfig:i.propConfig,value:OA(i.keyframe.value,i.propConfig),autoFocus:i.autoFocusInput})))}}function fTe(i){let s=i.sheetObject;return cTe(({stateEditors:a},c)=>{let h=z(j({},i.keyframe),{value:c});a.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},s.address),{trackId:i.trackId,keyframes:[h],snappingFunction:s.sheet.getSequence().closestGridPosition}))},s)}var Vo,Are,Ire,Rre,FI,BI,Ore,Dre,mTe=C(()=>{Vo=Q(Re()),Ne(),_Y(),$0(),hTe(),Ep(),Ire=se.div(Are||(Are=H([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),FI=se.div(Rre||(Rre=H([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),BI=10,Dre=se.div(Ore||(Ore=H([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function UI(i){return ac({debugName:"useKeyframeInlineEditorPopover"},()=>VI.default.createElement(uc,{showPopoverEdgeTriangle:!0},VI.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(i)?i.map((s,a)=>VI.default.createElement(EV,z(j({key:a},s),{autoFocusInput:a===0,indent:0}))):void 0)))}var VI,jI=C(()=>{VI=Q(Re()),lc(),cc(),mTe()});function vTe(i,s,a){return Ts(i,{displayName:"Keyframe",menuItems:()=>{let c=LI(a.leaf.sheetObject.address.projectId,a.leaf.sheetObject.address.sheetId,a.selection);return[{label:c.length>0?"Copy (selection)":"Copy",callback:()=>{c.length>0?me().transaction(h=>{h.stateEditors.studio.ahistoric.setClipboardKeyframes(c)}):me().transaction(h=>{h.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a.keyframe,pathToProp:a.leaf.pathToProp}])})}},{label:a.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{a.selection?a.selection.delete():me().transaction(({stateEditors:h})=>{h.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},a.leaf.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.leaf.trackId}))})}}]},onOpen(){s._debug("Show keyframe",a)}})}function gTe(i,s,a){let c=(0,Dp.useRef)(s);c.current=s;let{onClickFromDrag:h}=a,f=(0,Dp.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(y){let w=c.current,S=(0,zI.val)(me().atomP.historic.coreByProject[w.leaf.sheetObject.address.projectId].sheetsById[w.leaf.sheetObject.address.sheetId].sequence.tracksByObject),T=bne(S,function(D,{trackId:O,objectKey:F}){var V,$;return D.id!==w.keyframe.id&&!(w.selection&&($=(V=w.selection.byObjectKey[F])==null?void 0:V.byTrackId[O])!=null&&$.byKeyframeId[D.id])});if(yne(T),w.selection){let{selection:D,leaf:O}=w,{sheetObject:F}=O,V=D.getDragHandlers(z(j({},F.address),{domNode:i,positionAtStartOfDrag:w.track.data.keyframes[w.index].position})).onDragStart(y);return V&&z(j({},V),{onClick:h,onDragEnd:(...$)=>{var X;(X=V.onDragEnd)==null||X.call(V,...$),fv()}})}let I=w,A=(0,zI.val)(I.layoutP.scaledSpace.toUnitSpace),k;return{onDrag(D,O,F){var V;let $=I.track.data.keyframes[I.index],X=Math.max((V=As.checkIfMouseEventSnapToPos(F,{ignore:i}))!=null?V:$.position+A(D),0);k==null||k.discard(),k=void 0,k=me().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},I.leaf.sheetObject.address),{trackId:I.leaf.trackId,keyframes:[z(j({},$),{position:X})],snappingFunction:(0,zI.val)(I.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(D){D?k==null||k.commit():k==null||k.discard(),fv()},onClick(D){h(D)}}}}),[h]),[g]=xi(i,f);return Ud(g,s.keyframe.position),ul(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Dp,zI,US,CV,VS,PV,Lre,HI,Nre,Fre,Bre,Ure,Vre,jre,zre=C(()=>{Dp=Q(Re()),Ne(),Fe(),Ms(),no(),mr(),zI=Mt,Uo(),Ea(),cu(),bI(),xp(),Xy(),vr(),mv(),jI(),lv(),US=6,CV=US+2,VS={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},PV=({isSelected:i,isInlineEditorPopoverOpen:s})=>i&&s?VS.inlineEditorOpenColor:i?VS.selectedColor:s?VS.selectedAndInlineEditorOpenColor:VS.normalColor,HI=se.div(Lre||(Lre=H([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),hl(US),i=>PV(i),i=>i.flag===2?"outline: 2px solid white;":""),Fre=se.div(Nre||(Nre=H([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),hl(US*1.5),i=>PV(i),i=>i.flag===2?"outline: 2px solid white;":""),Ure=se.div(Bre||(Bre=H([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),hl(12),hr,HI,i=>i.isInlineEditorPopoverOpen?hl(CV):"",HI,hl(CV)),Vre=i=>{let s=wp("SingleKeyframeDot",i.keyframe.id),a=av(i.itemKey),[c,h]=sr(null),[f]=vTe(h,s,i),{node:g,toggle:y,isOpen:w}=UI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.leaf.pathToProp,propConfig:i.leaf.propConf,sheetObject:i.leaf.sheetObject,trackId:i.leaf.trackId}]);gTe(h,i,{onClickFromDrag(T){y(T,c.current)}});let S=!i.keyframe.type||i.keyframe.type==="bezier";return Dp.default.createElement(Dp.default.Fragment,null,Dp.default.createElement(Ure,j({ref:c,isInlineEditorPopoverOpen:w},a.attrs)),S?Dp.default.createElement(HI,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}):Dp.default.createElement(Fre,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}),g,f)},jre=Vre}),kV,TV,MV,bv,Hre,Gre,AV,$re=C(()=>{Sa(),kV=Q(Re()),Ne(),zre(),TV=US/2+1,MV=1e3,bv={normalColor:"#365b59",selectedColor:"#8A7842",barColor:i=>{let s=i.isSelected?bv.selectedColor:bv.normalColor;return i.isPopoverOpen?Y2(.2,fy(.2,s)):s},hoverColor:i=>{let s=i.isSelected?bv.selectedColor:bv.normalColor;return i.isPopoverOpen?Y2(.2,fy(.2,s)):Y2(.1,fy(.1,s))}},Gre=se.div(Hre||(Hre=H([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),bv.barColor,TV,MV,TV/2,bv.hoverColor),AV=kV.default.forwardRef((i,s)=>{let a={isPopoverOpen:i.isPopoverOpen,isSelected:i.isSelected};return kV.default.createElement(Gre,z(j({},a),{ref:s,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i.connectorLengthInUnitSpace/MV,"))")},onClick:c=>{var h;(h=i.openPopover)==null||h.call(i,c)}}),i.children)})});function yTe(i,s){let a=(0,IV.useRef)(s);a.current=s;let c=(0,IV.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(h){let f=a.current,g;if(f.selection){let{selection:T,leaf:I}=f,{sheetObject:A}=I;return T.getDragHandlers(z(j({},A.address),{domNode:i,positionAtStartOfDrag:f.track.data.keyframes[f.index].position})).onDragStart(h)}let y=f,w=(0,GI.val)(y.layoutP.sheet).getSequence(),S=(0,GI.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(T,I,A){let k=S(T);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:D})=>{D.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},y.leaf.sheetObject.address),{trackId:y.leaf.trackId,keyframeIds:[y.keyframe.id,y.track.data.keyframes[y.index+1].id],translate:k,scale:1,origin:0,snappingFunction:w.closestGridPosition}))})},onDragEnd(T){T?g&&g.commit():g&&g.discard()}}}}),[]);xi(i,c)}function bTe(i,s,a,c){return Ts(s,{displayName:"Tween",menuItems:()=>{let h=LI(i.leaf.sheetObject.address.projectId,i.leaf.sheetObject.address.sheetId,i.selection);return[{label:h.length>0?"Copy (selection)":"Copy",callback:()=>{h.length>0?me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(h)}):me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a,pathToProp:i.leaf.pathToProp},{keyframe:c,pathToProp:i.leaf.pathToProp}])})}},{label:i.selection?"Delete (selection)":"Delete",callback:()=>{i.selection?i.selection.delete():me().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},i.leaf.sheetObject.address),{keyframeIds:[a.id,c.id],trackId:i.leaf.trackId}))})}}]}})}var GI,Lp,IV,RV,Wre,Kre,qre,Xre,Yre,_Te=C(()=>{Fe(),Ms(),no(),mr(),GI=Mt,Lp=Q(Re()),IV=Q(Re()),lc(),cc(),DI(),$re(),CI(),hn(),Xy(),Xy(),Ne(),RV=5,Kre=se(uc)(Wre||(Wre=H([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),pV),qre=i=>{let{index:s,track:a}=i,c=a.data.keyframes[s],h=a.data.keyframes[s+1],[f,g]=sr(null),{node:y,toggle:w,close:S}=ac(()=>{let k=(0,GI.val)(i.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:k.screenX+RV,maxX:k.screenX+k.width-RV}}},()=>Lp.default.createElement(Yre,z(j({},i),{closePopover:S}))),[T]=bTe(i,g,c,h);yTe(g,i);let I=h.position-c.position,A={isPopoverOpen:Un(()=>xV(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,left:c,right:h})),[i.leaf.sheetObject.address,i.leaf.trackId,c,h]),isSelected:i.selection!==void 0};return Lp.default.createElement(Lp.default.Fragment,null,Lp.default.createElement(AV,z(j({ref:f,connectorLengthInUnitSpace:I},A),{openPopover:k=>{g&&w(k,g)}}),y),T)},Xre=qre,Yre=Lp.default.forwardRef((i,s)=>{let{index:a,track:{data:c},selection:h}=i,f=c.keyframes[a],g=c.keyframes[a+1],y=i.leaf.trackId,w=i.leaf.sheetObject.address,S=Un(()=>kre(w.projectId,w.sheetId,h).getValue(),[w,h]),T=j({left:f,right:g,trackId:y},w);return Lp.default.createElement(Kre,{showPopoverEdgeTriangle:!1,ref:s},Lp.default.createElement(wV,{curveConnection:T,additionalConnections:S,onRequestClose:i.closePopover}))})}),Zre,_v,Qre,Jre,eie,tie,nie,wTe=C(()=>{Zre=Mt,_v=Q(Re()),Ne(),_Te(),zre(),Jre=se.div(Qre||(Qre=H([`
  position: absolute;
`]))),eie=_v.default.createElement(_v.default.Fragment,null),tie=_v.default.memo(i=>{let{index:s,track:{data:a}}=i,c=a.keyframes[s],h=a.keyframes[s+1],f=c.connectedRight&&!!h;return _v.default.createElement(Jre,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Zre.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(c.position,"px))")}},_v.default.createElement(jre,z(j({},i),{itemKey:i.itemKey})),f?_v.default.createElement(Xre,j({},i)):eie)}),nie=tie});function xTe(i,s){return Ts(i,{displayName:"Keyframe Track",menuItems:()=>{var a;let c=(a=(0,Yy.val)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?a:[];return[STe(s,c)]}})}function STe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{var a;let c=(0,Yy.val)(i.layoutP.sheet).getSequence(),h=(a=s[0])==null?void 0:a.pathToProp,f=s.filter(({keyframe:g,pathToProp:y})=>Pke(h,y)).map(({keyframe:g,pathToProp:y})=>g);me().transaction(({stateEditors:g})=>{var y;c.position=c.closestGridPosition(c.position);let w=(y=ETe(f))==null?void 0:y.position;for(let S of f)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,position:c.position+S.position-w,handles:S.handles,value:S.value,snappingFunction:c.closestGridPosition,type:S.type}))})}}}function ETe(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}var Yy,Vd,rie,iie,OV,oie,CTe=C(()=>{hn(),Yy=Mt,Vd=Q(Re()),Ne(),wTe(),Ms(),mr(),Fe(),mc(),mv(),Ld(),iie=se.div(rie||(rie=H([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),OV=Vd.default.memo(i=>{var s;let{layoutP:a,trackData:c,leaf:h}=i,[f,g]=sr(null),{selectedKeyframeIds:y,selection:w}=Un(()=>{let X=(0,Yy.val)(a.selectionAtom),re=(0,Yy.val)(X.pointer.current.byObjectKey[h.sheetObject.address.objectKey].byTrackId[h.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Yy.val)(X.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[a,h.trackId]),[S,T,I]=xTe(g,i),A=$n(cV),k=A.mode==="snapToSome"?(s=A.positions[h.sheetObject.address.objectKey])==null?void 0:s[h.trackId]:[],D=A.mode==="snapToAll",O=(0,Vd.useMemo)(()=>({data:c,id:h.trackId,sheetObject:i.leaf.sheetObject}),[c,h.trackId]),F=c.keyframes.map((X,re)=>Vd.default.createElement(nie,{key:"keyframe-"+X.id,itemKey:co.forTrackKeyframe(h.sheetObject,h.trackId,X.id),keyframe:X,index:re,track:O,layoutP:a,leaf:h,selection:y[X.id]===!0?w:void 0})),V=k.map(X=>Vd.default.createElement(OS,{key:"snap-target-"+X,layoutP:a,leaf:h,position:X})),$=D?c.keyframes.map(X=>Vd.default.createElement(OS,{key:"additionalSnapTarget-".concat(X.id),layoutP:a,leaf:h,position:X.position})):null;return Vd.default.createElement(iie,{ref:f,style:{background:I?"#444850 ":"unset"}},F,V,Vd.default.createElement(Vd.default.Fragment,null,$),S)}),OV.displayName="BasicKeyframedTrack",oie=OV}),sie,jS,aie,lie,PTe=C(()=>{Fe(),hn(),sie=Mt,jS=Q(Re()),SI(),CTe(),xp(),aie=({leaf:i,layoutP:s})=>{let a=wp("PrimitivePropRow",i.pathToProp.join());return Un(()=>{let{sheetObject:c}=i,{trackId:h}=i,f=(0,sie.val)(me().atomP.historic.coreByProject[c.address.projectId].sheetsById[c.address.sheetId].sequence.tracksByObject[c.address.objectKey].trackData[h]);return(f==null?void 0:f.type)!=="BasicKeyframedTrack"?(a.errorDev("trackData type ".concat(f==null?void 0:f.type," is not yet supported on the sequence editor")),jS.default.createElement(Wy,{leaf:i,isCollapsed:!1,node:jS.default.createElement("div",null)})):jS.default.createElement(Wy,{leaf:i,isCollapsed:!1,node:jS.default.createElement(oie,{layoutP:s,trackData:f,leaf:i})})},[i,s])},lie=aie});function kTe(i){return i()}var TTe=C(()=>{});function uie(i){let{index:s,aggregateKeyframes:a,selection:c}=i;return Un(cie(i),[s,a,c,i.viewModel])}function cie(i){let{index:s,aggregateKeyframes:a,selection:c}=i,{projectId:h,sheetId:f}=i.viewModel.type==="sheet"?i.viewModel.sheet.address:i.viewModel.sheetObject.address;return()=>{let g=a[s],y=a[s+1],w=y&&g.keyframes.length===y.keyframes.length&&g.keyframes.every(({track:A},k)=>y.keyframes[k].track===A)?{length:y.position-g.position,selected:g.selected===0&&y.selected===0}:null,S=w?g.keyframes.map(({kf:A,track:k},D)=>z(j({},k.sheetObject.address),{trackId:k.id,left:A,right:y.keyframes[D].kf})):[],T=kTe(()=>{let A=DV.prism.memo("selectedConnections",()=>kre(h,f,c),[h,f,c]).getValue();return[...S,...A]}),I=S.every(A=>xV(A));return{itemKey:DV.prism.memo("itemKey",()=>i.viewModel.type==="sheet"?co.forSheetAggregateKeyframe(i.viewModel.sheet,g.position):i.viewModel.type==="sheetObject"?co.forSheetObjectAggregateKeyframe(i.viewModel.sheetObject,g.position):co.forCompoundPropAggregateKeyframe(i.viewModel.sheetObject,i.viewModel.pathToProp,g.position),[i.viewModel,g.position]),cur:g,connected:w,isAggregateEditingInCurvePopover:I,allConnections:T}}}var DV,LV=C(()=>{DV=Mt,Ld(),DI(),hn(),Xy(),TTe()});function MTe(i,s){let a=(0,pl.useRef)(s);a.current=s;let c=(0,pl.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(h){let f=a.current,g,y=f.aggregateKeyframes[f.index].keyframes,{selection:w,viewModel:S}=f,T=S.type==="sheet"?S.sheet.address:S.sheetObject.address;if(w&&f.aggregateKeyframes[f.index].selected===0)return w.getDragHandlers(z(j({},T),{domNode:i,positionAtStartOfDrag:f.aggregateKeyframes[f.index].position})).onDragStart(h);let I=f,A=(0,$I.val)(I.layoutP.sheet).getSequence(),k=(0,$I.val)(I.layoutP.scaledSpace.toUnitSpace);return{onDrag(D,O,F){let V=k(D);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:$})=>{for(let X of y)$.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},X.track.sheetObject.address),{trackId:X.track.id,keyframeIds:[X.kf.id,X.track.data.keyframes[X.track.data.keyframes.indexOf(X.kf)+1].id],translate:V,scale:1,origin:0,snappingFunction:A.closestGridPosition}))})},onDragEnd(D){D?g&&g.commit():g&&g.discard()}}}}),[]);return xi(i,c)}function ATe(i,s){return Ts(s,{displayName:"Aggregate Tween",menuItems:()=>{let a=i.utils.allConnections.reduce((y,w)=>{var S;return y.concat((S=SV(z(j({},w),{keyframeIds:[w.left.id,w.right.id]})))!=null?S:[])},[]),c=fI(a.map(y=>y.pathToProp)),h=a.map(({keyframe:y,pathToProp:w})=>({keyframe:y,pathToProp:w.slice(c.length)})),f=i.editorProps.viewModel,g=f.type==="sheet"?f.sheet.address:f.sheetObject.address;return[{label:"Copy",callback:()=>{if(i.editorProps.selection){let y=LI(g.projectId,g.sheetId,i.editorProps.selection);me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}else me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(h)})}},{label:"Delete",callback:()=>{i.editorProps.selection?i.editorProps.selection.delete():me().transaction(({stateEditors:y})=>{for(let w of i.utils.allConnections)y.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},g),{objectKey:w.objectKey,keyframeIds:[w.left.id,w.right.id],trackId:w.trackId}))})}}]}})}var $I,pl,NV,die,hie,pie,fie,ITe=C(()=>{$I=Mt,pl=Q(Re()),$re(),lc(),mr(),Fe(),no(),DI(),LV(),Ne(),cc(),Xy(),Ms(),mc(),NV=5,hie=se(uc)(die||(die=H([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),pie=pl.default.forwardRef((i,s)=>{let{allConnections:a}=uie(i);return pl.default.createElement(hie,{showPopoverEdgeTriangle:!1,ref:s},pl.default.createElement(wV,{curveConnection:a[0],additionalConnections:a,onRequestClose:i.closePopover}))}),fie=i=>{let[s,a]=sr(null),{editorProps:c}=i,[h]=ATe(i,a),[f]=MTe(a,i.editorProps),{node:g,toggle:y,close:w}=ac(()=>{let I=(0,$I.val)(c.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:I.screenX+NV,maxX:I.screenX+I.width-NV}}},()=>pl.default.createElement(pie,z(j({},c),{closePopover:w}))),{connected:S,isAggregateEditingInCurvePopover:T}=i.utils;return S||f?pl.default.createElement(pl.default.Fragment,null,pl.default.createElement(AV,{ref:s,connectorLengthInUnitSpace:S?S.length:0,isSelected:S?S.selected:!1,isPopoverOpen:T,openPopover:I=>{a&&y(I,a)}}),g,h):pl.default.createElement(pl.default.Fragment,null)}});function RTe(i){let s={isSelected:i.isSelected,flag:i.flag};return jd.default.createElement(WI,null,i.isAllHere?jd.default.createElement(_ie,j({},s)):jd.default.createElement(wie,j({},s)))}var jd,FV,mie,vie,WI,gie,yie,BV,UV,VV,jV,bie,_ie,wie,OTe=C(()=>{jd=Q(Re()),Ne(),bI(),vr(),FV=16,mie=FV+2,WI=se.div(vie||(vie=H([`
  position: absolute;
  `,`
  z-index: 1;
`])),hl(FV)),yie=se.div(gie||(gie=H([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),hl(12),hr,WI,WI,hl(mie)),BV="#F2C95C",UV="#40AAA4",VV="#45747C",jV=i=>i.isSelected===0?BV:i.isSelected===1?UV:VV,bie=i=>i.isSelected===0?BV:i.isSelected===1?UV:VV,_ie=i=>jd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jd.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:bie(i)}),jd.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:jV(i),stroke:i.flag===2?"white":void 0,strokeWidth:i.flag===2?"2px":void 0})),wie=i=>jd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jd.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:i.flag===2?"white":jV(i),strokeWidth:i.flag===2?"2px":void 0}))});function DTe(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?zV(c,s):xie(c,s)).filter(HV);return a.length===0?null:{type:"sheetObject",sheetObject:i.sheetObject,children:a}}function zV(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?zV(c,s):xie(c,s)).filter(HV);return a.length===0?null:{type:"propWithChildren",pathToProp:i.pathToProp,propConfig:i.propConf,children:a}}function xie(i,s){let a=s.find(c=>c.track.id===i.trackId);return a?{type:"primitiveProp",keyframe:a.kf,pathToProp:i.pathToProp,propConfig:i.propConf,sheetObject:i.sheetObject,trackId:i.trackId}:null}function LTe(i){var s,a,c,h;let{cur:f}=i.utils,g=UI(i.editorProps.viewModel.type==="sheet"?null:i.editorProps.viewModel.type==="sheetObject"?(a=(s=DTe(i.editorProps.viewModel,f.keyframes))==null?void 0:s.children)!=null?a:null:(h=(c=zV(i.editorProps.viewModel,f.keyframes))==null?void 0:c.children)!=null?h:null),y=av(i.utils.itemKey);y.useRelations(()=>f.keyframes.map(I=>({affects:I.itemKey,flag:2})),[f.keyframes.map(I=>I.track.id).join("-")]);let[w,S]=sr(null),[T]=NTe(i,S);return zS.default.createElement(zS.default.Fragment,null,zS.default.createElement(yie,z(j(j({ref:w},y.attrs),As.includePositionSnapAttrs(f.position)),{onClick:I=>i.editorProps.viewModel.type!=="sheet"?g.open(I,w.current):null})),zS.default.createElement(RTe,{flag:y.flag,isAllHere:f.allHere,isSelected:f.selected}),T,g.node)}function NTe(i,s){return Ts(s,{displayName:"Aggregate Keyframe",menuItems:()=>{let a=i.editorProps.viewModel,c=i.editorProps.selection;return[{label:c?"Copy (selection)":"Copy",callback:()=>{if(c){let{projectId:h,sheetId:f}=a.type==="sheet"?a.sheet.address:a.sheetObject.address,g=LI(h,f,c);me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(g)})}else{let h=i.utils.cur.keyframes.flatMap(w=>{var S;return(S=SV(z(j({},w.track.sheetObject.address),{trackId:w.track.id,keyframeIds:[w.kf.id]})))!=null?S:[]}),f=a.type==="sheet"?[]:a.type==="sheetObject"?[a.sheetObject.address.objectKey]:a.type==="propWithChildren"?[a.sheetObject.address.objectKey,...a.pathToProp]:[],g=fI([f,...h.map(w=>w.pathToProp)]),y=h.map(({keyframe:w,pathToProp:S})=>({keyframe:w,pathToProp:S.slice(g.length)}));me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}}},{label:c?"Delete (selection)":"Delete",callback:()=>{c?c.delete():me().transaction(({stateEditors:h})=>{for(let f of i.utils.cur.keyframes)h.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},f.track.sheetObject.address),{keyframeIds:[f.kf.id],trackId:f.track.id}))})}}]}})}var zS,HV,FTe=C(()=>{zS=Q(Re()),mr(),lv(),Ms(),OTe(),Fe(),Xy(),mc(),cu(),jI(),HV=i=>i!==null}),Sie,HS,Eie,Cie,Pie,kie,BTe=C(()=>{Sie=Mt,HS=Q(Re()),Ne(),ITe(),LV(),FTe(),Cie=se.div(Eie||(Eie=H([`
  position: absolute;
`]))),Pie=HS.default.memo(i=>{let s=uie(i);return HS.default.createElement(Cie,{style:{top:"".concat(i.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,Sie.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.cur.position,"px))")}},HS.default.createElement(LTe,{editorProps:i,utils:s}),HS.default.createElement(fie,{editorProps:i,utils:s}))}),kie=Pie});function UTe(i){let{layoutP:s,aggregatedKeyframes:a,viewModel:c}=i,h=wp("AggregatedKeyframeTrack"),[f,g]=sr(null),{selectedPositions:y,selection:w}=VTe(s,a),[S,T,I]=HTe(g,i,()=>h._debug("see aggregatedKeyframes",i.aggregatedKeyframes)),A=(0,fl.useMemo)(()=>[...a.byPosition.entries()].sort((X,re)=>X[0]-re[0]).map(([X,re])=>({position:X,keyframes:re,selected:y.get(X),allHere:re.length===a.tracks.length})),[a,y]),k=$n(cV),D=k.mode==="snapToAll",O=k.mode==="snapToSome"?k.positions:hU,F=(0,fl.useMemo)(()=>c.type==="sheet"?Lke(c,O):rV(c,O),[O]).map(X=>fl.default.createElement(OS,{key:"snap-target-"+X,layoutP:s,leaf:c,position:X})),V=(0,fl.useMemo)(()=>A.map(({position:X,keyframes:re},ne)=>({position:X,editorProps:{index:ne,layoutP:s,viewModel:c,aggregateKeyframes:A,selection:y.has(X)?w:void 0}})),[A,c,y]);KTe(g,X=>{var re;return(re=V.find(ne=>ne.position===X))==null?void 0:re.editorProps},{onClickFromDrag(X){}});let $=V.map((X,re)=>fl.default.createElement(fl.Fragment,{key:"agg-"+A[re].keyframes[0].kf.id},D&&fl.default.createElement(OS,{layoutP:s,leaf:c,position:X.position}),fl.default.createElement(kie,j({},X.editorProps))));return fl.default.createElement(Iie,{ref:f,style:{background:I?"#444850 ":"unset"}},$,F,S)}function VTe(i,s){return Un(()=>(0,Rs.val)(jTe(i,s)),[i,s])}function jTe(i,s){return(0,Rs.prism)(()=>{let a=(0,Rs.val)(i.selectionAtom),c=(0,Rs.val)(a.pointer.current);if(!c)return Rie;let h=new Map;for(let[f,g]of s.byPosition){let y=zTe(g,c);y!==void 0&&y!==qI&&h.set(f,y)}return{selectedPositions:h,selection:(0,Rs.val)(a.pointer.current)}})}function zTe(i,s){var a,c,h;let f;for(let{track:g,kf:y}of i){let w=((h=(c=(a=s.byObjectKey[g.sheetObject.address.objectKey])==null?void 0:a.byTrackId[g.id])==null?void 0:c.byKeyframeId)==null?void 0:h[y.id])===!0;f===void 0?w?f=WV:f=qI:w?f===qI&&(f=KV):f===WV&&(f=KV)}return f}function HTe(i,s,a){return Ts(i,{onOpen:a,displayName:"Aggregate Keyframe Track",menuItems:()=>{var c;let h=(c=(0,Rs.pointerToPrism)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?c:[];return[GTe(s,h)]}})}function GTe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{let a=(0,Rs.val)(i.layoutP.sheet).getSequence();i.viewModel.type==="sheet"?$Te(i.viewModel,s,a):WTe(i.viewModel,s,a)}}}function $Te(i,s,a){var c;let{projectId:h,sheetId:f,sheetInstanceId:g}=i.sheet.address;if(s.every(({pathToProp:y})=>y.length===0))for(let y of i.children.map(w=>w.sheetObject)){let w=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[h].sheetsById[f].sequence.tracksByObject[y.address.objectKey]).getValue(),S=Object.keys((c=w==null?void 0:w.trackData)!=null?c:{});GV(y.address,S,s,a)}else{let y=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[h].sheetsById[f].sequence.tracksByObject).getValue(),w=s.map(({keyframe:S,pathToProp:T})=>{var I,A;let k=T[0],D=T.slice(1),O=fc([...D]),F=((A=(I=y==null?void 0:y[k])==null?void 0:I.trackIdByPropPath)!=null?A:{})[O];return F?{keyframe:S,trackId:F,address:{objectKey:k,projectId:h,sheetId:f,sheetInstanceId:g}}:null}).filter(S=>S!==null);Tie(w,a)}}function WTe(i,s,a){var c;let{projectId:h,sheetId:f,objectKey:g}=i.sheetObject.address,y=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[h].sheetsById[f].sequence.tracksByObject[g]).getValue();if(s.every(({pathToProp:w})=>w.length===0)){let w=Object.keys((c=y==null?void 0:y.trackData)!=null?c:{});if(i.type==="sheetObject")GV(i.sheetObject.address,w,s,a);else{let S=(y==null?void 0:y.trackIdByPropPath)||{},T=Object.entries(S).filter(([I,A])=>A!==void 0&&Cke(mI(I),i.pathToProp)).map(([I,A])=>A);GV(i.sheetObject.address,T,s,a)}}else{let w=(y==null?void 0:y.trackIdByPropPath)||{},S=i.type==="propWithChildren"?i.pathToProp:[],T=s.map(({keyframe:I,pathToProp:A})=>{let k=fc([...S,...A]),D=w[k];return D?{keyframe:I,trackId:D,address:i.sheetObject.address}:null}).filter(I=>I!==null);Tie(T,a)}}function GV(i,s,a,c){var h;c.position=c.closestGridPosition(c.position);let f=(h=Mie(a.map(({keyframe:g})=>g)))==null?void 0:h.position;me().transaction(({stateEditors:g})=>{for(let y of s)for(let{keyframe:w}of a)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i),{trackId:y,position:c.position+w.position-f,handles:w.handles,value:w.value,snappingFunction:c.closestGridPosition,type:w.type}))})}function Tie(i,s){var a;s.position=s.closestGridPosition(s.position);let c=(a=Mie(i.map(({keyframe:h})=>h)))==null?void 0:a.position;me().transaction(({stateEditors:h})=>{for(let{keyframe:f,trackId:g,address:y}of i)h.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},y),{trackId:g,position:s.position+f.position-c,handles:f.handles,value:f.value,snappingFunction:s.closestGridPosition,type:f.type}))})}function Mie(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}function KTe(i,s,a){let c=wp("useDragForAggregateKeyframeDot"),h=dne(),f=(0,fl.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(y){c._debug("onDragStart",{target:y.target});let w=Number(y.target.dataset.pos),S=s(w);if(!S)return c._debug("no props found for ",{positionToFind:w}),!1;h(!0,w);let T=(0,Rs.prism)(cie(S)).getValue().cur.keyframes,I=S.viewModel.type==="sheet"?S.viewModel.sheet.address:S.viewModel.sheetObject.address,A=(0,Rs.val)(me().atomP.historic.coreByProject[I.projectId].sheetsById[I.sheetId].sequence.tracksByObject),k=bne(A,function(V,{trackId:$,objectKey:X}){var re,ne;return T.every(ae=>V.id!==ae.kf.id)&&!(S.selection&&(ne=(re=S.selection.byObjectKey[X])==null?void 0:re.byTrackId[$])!=null&&ne.byKeyframeId[V.id])});if(yne(k),S.selection&&S.aggregateKeyframes[S.index].selected===0){let{selection:V,viewModel:$}=S,X=V.getDragHandlers(z(j({},I),{domNode:i,positionAtStartOfDrag:T[0].kf.position})).onDragStart(y);return X&&z(j({},X),{onClick:a.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=X.onDragEnd)==null||ne.call(X,...re),fv()}})}let D=S,O=(0,Rs.val)(D.layoutP.scaledSpace.toUnitSpace),F;return{onDrag(V,$,X){var re;let ne=Math.max((re=As.checkIfMouseEventSnapToPos(X,{}))!=null?re:T[0].kf.position+O(V),0);h(!0,ne),F==null||F.discard(),F=void 0,F=me().tempTransaction(({stateEditors:ae})=>{for(let xe of T){let fe=xe.kf;ae.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},xe.track.sheetObject.address),{trackId:xe.track.id,keyframes:[z(j({},fe),{position:ne})],snappingFunction:(0,Rs.val)(D.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(V){h(!1,-1),V?F==null||F.commit():(F==null||F.discard(),a.onClickFromDrag(y)),fv()},onClick(V){a.onClickFromDrag(V)}}}}),[s,a.onClickFromDrag]),[g]=xi(i,f);return ul(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Rs,fl,Aie,Iie,Rie,Oie,KI,$V,WV,KV,qI,qV=C(()=>{hn(),Rs=Mt,fl=Q(Re()),Ne(),Ms(),mr(),BTe(),Gy(),xp(),LV(),cu(),no(),Uo(),Ea(),Fe(),mc(),mv(),wZ(),mv(),Gy(),Iie=se.div(Aie||(Aie=H([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),Rie=Object.freeze({selectedPositions:new Map,selection:void 0}),Oie=fl.default.memo(UTe),KI=Oie,$V=(i=>(i[i.AllSelected=0]="AllSelected",i[i.AtLeastOneUnselected=1]="AtLeastOneUnselected",i[i.NoneSelected=2]="NoneSelected",i))($V||{}),{AllSelected:WV,AtLeastOneUnselected:KV,NoneSelected:qI}=$V}),Zy,XV,Die,qTe=C(()=>{hn(),Zy=Q(Re()),PTe(),SI(),qV(),Gy(),xp(),XV=(i,s)=>i.type==="propWithChildren"?Zy.default.createElement(Die,{layoutP:s,viewModel:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}):Zy.default.createElement(lie,{layoutP:s,leaf:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}),Die=({viewModel:i,layoutP:s})=>{let a=wp("RightPropWithChildrenRow",i.pathToProp.join());return Un(()=>{let c=gI(i);return Zy.default.createElement(AK,{logger:a},Zy.default.createElement(Wy,{leaf:i,node:Zy.default.createElement(KI,{layoutP:s,aggregatedKeyframes:c,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(h=>XV(h,s))))},[i,s])}}),YV,Lie,Nie,XTe=C(()=>{hn(),YV=Q(Re()),qTe(),SI(),Gy(),qV(),Lie=({leaf:i,layoutP:s})=>Un(()=>{let a=gI(i);return YV.default.createElement(Wy,{leaf:i,node:YV.default.createElement(KI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>XV(c,s)))},[i,s]),Nie=Lie}),XI,Fie,Bie,YTe=C(()=>{hn(),XI=Q(Re()),XTe(),SI(),Gy(),qV(),Fie=({leaf:i,layoutP:s})=>Un(()=>{let a=gI(i);return XI.default.createElement(Wy,{leaf:i,node:XI.default.createElement(KI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>XI.default.createElement(Nie,{layoutP:s,key:"sheetObject-"+c.sheetObject.address.objectKey,leaf:c})))},[i,s]),Bie=Fie}),GS,wv,YI,Uie,Vie,jie,zie,Hie=C(()=>{hn(),GS=Mt,wv=Q(Re()),Ne(),Bke(),Ane(),YTe(),YI=1e6,Vie=se.ul(Uie||(Uie=H([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),YI),jie=({layoutP:i})=>Un(()=>{let s=(0,GS.val)(i.tree),a=(0,GS.val)(i.tree.top)+Math.max((0,GS.val)(i.tree.heightIncludingChildren),(0,GS.val)(i.dopeSheetDims.height));return wv.default.createElement(wv.default.Fragment,null,wv.default.createElement(hV,{layoutP:i,height:a},wv.default.createElement(Qte,{layoutP:i,height:a},wv.default.createElement(Vie,{style:{top:s.top+"px"}},wv.default.createElement(Bie,{leaf:s,layoutP:i})))))},[i]),zie=jie});function ZV(i,s,a,c){let h="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i,"px)"),f="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(s,") * 1px)");a===0&&(a=1e-4);let g="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(a,")");c===0&&(c=.001);let y="calc(var(--graphEditorVerticalSpace) * ".concat(c*-1,")");return"translate(".concat(h,", ").concat(f,") scale(").concat(g,", ").concat(y,")")}function ZTe(i,s){let{index:a,trackData:c}=s,h=c.keyframes[a],f=c.keyframes[a+1];return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:g})=>{let{deleteKeyframes:y}=g.coreByProject.historic.sheetsById.sequence;y(z(j({},s.sheetObject.address),{trackId:s.trackId,keyframeIds:[h.id,f.id]}))})}}]})}var ZI,Gie,$ie,Wie,Kie,qie,QV=C(()=>{Ep(),Fe(),Ms(),mr(),ZI=Q(Re()),Ne(),$ie=se.path(Gie||(Gie=H([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Wie="M 0 0 L 1 0 L 1 1",Kie=i=>{let{index:s,trackData:a}=i,c=a.keyframes[s],h=a.keyframes[s+1],f=h.position-c.position,[g,y]=sr(null),[w]=ZTe(y,i),S=i.isScalar?OA(c.value,i.propConfig):0,T=i.isScalar?OA(h.value,i.propConfig):1,I=i.extremumSpace.fromValueSpace(S),A=i.extremumSpace.fromValueSpace(T)-I,k=ZV(c.position,I,f,A),D=c.handles[2],O=c.handles[3],F=h.handles[0],V=h.handles[1],$="M 0 0 C ".concat(D," ").concat(O," ").concat(F," ").concat(V," 1 1");return ZI.default.createElement(ZI.default.Fragment,null,ZI.default.createElement($ie,{ref:g,d:!c.type||c.type==="bezier"?$:Wie,style:{transform:k}}),w)},qie=Kie});function QTe(i,s){let a=(0,xv.useRef)(s);a.current=s;let c=(0,xv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let h,f=a.current,g=(0,$S.val)(f.layoutP.scaledSpace.toUnitSpace),y=(0,$S.val)(f.layoutP.graphEditorVerticalSpace.toExtremumSpace),w=f.extremumSpace.lock();return{onDrag(S,T){h&&(h.discard(),h=void 0);let{index:I,trackData:A}=f,k=A.keyframes[I],D=A.keyframes[I+1],O=g(S)/(D.position-k.position),F=-T,V=y(F),$=f.extremumSpace.deltaToValueSpace(V),X=s.isScalar?k.value:0,re=s.isScalar?D.value:1,ne=$/(re-X);if(f.which==="left"){let ae=ai(k.handles[2]+O,0,1),xe=k.handles[3]+ne;h=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{snappingFunction:(0,$S.val)(f.layoutP.sheet).getSequence().closestGridPosition,trackId:f.trackId,keyframes:[z(j({},k),{handles:[k.handles[0],k.handles[1],ae,xe]})]}))})}else{let ae=ai(D.handles[0]+O,0,1),xe=D.handles[1]+ne;h=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{trackId:f.trackId,snappingFunction:(0,$S.val)(f.layoutP.sheet).getSequence().closestGridPosition,keyframes:[z(j({},D),{handles:[ae,xe,D.handles[2],D.handles[3]]})]}))})}},onDragEnd(S){w(),S?h&&h.commit():h&&h.discard()}}}}),[]);xi(i,c)}function JTe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var $S,xv,Xie,JV,Yie,Zie,Qie,Jie,eoe,e4,eMe=C(()=>{Fe(),Ms(),no(),mr(),$S=Mt,Qr(),xv=Q(Re()),Ne(),QV(),vr(),JV=se.circle(Xie||(Xie=H([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),Zie=se.circle(Yie||(Yie=H([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),hr,JV),Jie=se.path(Qie||(Qie=H([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),eoe=i=>{let[s,a]=sr(null),{index:c,trackData:h}=i,f=h.keyframes[c],g=h.keyframes[c+1],[y]=JTe(a,i);QTe(a,i);let w=i.which==="left"?f.handles[2]:g.handles[0],S=f.position+(g.position-f.position)*w,T=i.which==="left"?f.handles[3]:g.handles[1],I=i.isScalar?f.value:0,A=i.isScalar?g.value:1,k=I+(A-I)*T,D=i.extremumSpace.fromValueSpace(k),O=D-i.extremumSpace.fromValueSpace(i.which==="left"?I:A),F=ZV(i.which==="left"?f.position:g.position,i.extremumSpace.fromValueSpace(i.which==="left"?I:A),S-(i.which==="left"?f.position:g.position),O);return xv.default.createElement("g",null,xv.default.createElement(Zie,{ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),xv.default.createElement(JV,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),xv.default.createElement(Jie,{d:"M 0 0 L 1 1",style:{transform:F}}),y)},e4=eoe});function tMe(i){let[s,a]=(0,Np.useState)(!1);Ud(s,i.props.keyframe.position);let c=(0,Np.useRef)(i.props);c.current=i.props;let h=(0,Np.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(f){a(!0);let g=!!f.altKey,y=c.current,w=(0,QI.val)(y.layoutP.scaledSpace.toUnitSpace),S=(0,QI.val)(y.layoutP.graphEditorVerticalSpace.toExtremumSpace),T=y.extremumSpace.lock(),I;return{onDrag(A,k){let D=y.trackData.keyframes[y.index],O=w(A),F=-k,V=S(F),$=y.extremumSpace.deltaToValueSpace(V),X=[],re=z(j({},D),{position:D.position+O,value:D.value+$,handles:[...D.handles]});if(X.push(re),g){let ne=y.trackData.keyframes[y.index-1];if(ne&&Math.abs(D.value-ne.value)>0){let xe=z(j({},ne),{handles:[...ne.handles]});X.push(xe),xe.handles[3]=rMe(ne.handles[3],ne.value,ne.value,D.value,re.value)}let ae=y.trackData.keyframes[y.index+1];if(ae&&Math.abs(D.value-ae.value)>0){let xe=z(j({},ae),{handles:[...ae.handles]});X.push(xe),xe.handles[1]=iMe(xe.handles[1],xe.value,xe.value,D.value,re.value)}}I==null||I.discard(),I=me().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},y.sheetObject.address),{trackId:y.trackId,keyframes:X,snappingFunction:(0,QI.val)(y.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){a(!1),T(),A?I==null||I.commit():(I==null||I.discard(),i.onDetectedClick(f))}}}}),[]);return xi(i.node,h),ul(s,"draggingPositionInSequenceEditor","move"),s}function nMe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}function rMe(i,s,a,c,h){return(c-s)*i/(h-a)}function iMe(i,s,a,c,h){return((s-c)*i+c-s+a-h)/(a-h)}var QI,Np,toe,t4,noe,roe,ioe,ooe,oMe=C(()=>{Fe(),Ms(),no(),mr(),QI=Mt,Np=Q(Re()),Ne(),Uo(),Uo(),vr(),Ea(),cu(),jI(),lv(),t4=se.circle(toe||(toe=H([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),roe=se.circle(noe||(noe=H([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,t4,Ad),ioe=i=>{let[s,a]=sr(null),{index:c,trackData:h}=i,f=h.keyframes[c],[g]=nMe(a,i),y=av(i.itemKey),w=f.value,S=i.extremumSpace.fromValueSpace(w),T=UI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),I=tMe({node:a,props:i,onDetectedClick:A=>T.toggle(A,A.target instanceof Element?A.target:a)});return Np.default.createElement(Np.default.Fragment,null,Np.default.createElement(roe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)")}},vc(f.position)),As.includePositionSnapAttrs(f.position)),y.attrs),{className:I?"beingDragged":""})),Np.default.createElement(t4,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)"),fill:y.flag===2?"white":void 0}}),T.node,g)},ooe=ioe});function sMe(i){let[s,a]=(0,Fp.useState)(!1);Ud(s,i.props.keyframe.position);let c=(0,Fp.useRef)(i.props);c.current=i.props;let h=(0,Fp.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){a(!0);let g=c.current,y=(0,n4.val)(g.layoutP.scaledSpace.toUnitSpace),w=g.extremumSpace.lock(),S;return{onDrag(T,I){let A=g.trackData.keyframes[g.index],k=y(T),D=[],O=z(j({},A),{position:A.position+k,value:A.value,handles:[...A.handles]});D.push(O),S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},g.sheetObject.address),{trackId:g.trackId,keyframes:D,snappingFunction:(0,n4.val)(g.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(T){a(!1),w(),T?S==null||S.commit():(S==null||S.discard(),i.onDetectedClick(f))}}}}),[]);return xi(i.node,h),ul(s,"draggingPositionInSequenceEditor","ew-resize"),s}function aMe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var n4,Fp,soe,r4,aoe,loe,uoe,i4,lMe=C(()=>{Fe(),Ms(),no(),mr(),n4=Mt,Fp=Q(Re()),Ne(),Uo(),Uo(),vr(),Ea(),cu(),jI(),lv(),r4=se.circle(soe||(soe=H([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),loe=se.circle(aoe||(aoe=H([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,r4,Ad),uoe=i=>{let[s,a]=sr(null),{index:c,trackData:h,itemKey:f}=i,g=h.keyframes[c],[y]=aMe(a,i),w=av(f),S=i.which==="left"?0:1,T=UI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),I=sMe({node:a,props:i,onDetectedClick:k=>T.toggle(k,k.target instanceof Element?k.target:a)}),A=i.extremumSpace.fromValueSpace(S);return Fp.default.createElement(Fp.default.Fragment,null,Fp.default.createElement(loe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}},w.attrs),vc(g.position)),As.includePositionSnapAttrs(g.position)),{className:I?"beingDragged":""})),Fp.default.createElement(r4,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)"),fill:w.flag===2?"white":void 0}}),T.node,y)},i4=uoe}),JI,coe,doe,hoe,poe,uMe=C(()=>{JI=Q(Re()),Ne(),QV(),doe=se.path(coe||(coe=H([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),hoe=i=>{let{index:s,trackData:a}=i,c="M 0 0 L 1 1",h=ZV(a.keyframes[s].position,i.extremumSpace.fromValueSpace(0),0,i.extremumSpace.fromValueSpace(1)-i.extremumSpace.fromValueSpace(0));return JI.default.createElement(JI.default.Fragment,null,JI.default.createElement(doe,{d:c,style:{transform:h}}))},poe=hoe}),jo,foe,moe,voe,goe,yoe,cMe=C(()=>{jo=Q(Re()),Ne(),QV(),eMe(),oMe(),lMe(),uMe(),moe=se.g(foe||(foe=H([`
  /* position: absolute; */
`]))),voe=jo.default.createElement(jo.default.Fragment,null),goe=i=>{let{index:s,trackData:a,isScalar:c}=i,h=a.keyframes[s],f=a.keyframes[s+1],g=h.connectedRight&&!!f&&f.value!==h.value;return jo.default.createElement(moe,null,g?jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(qie,j({},i)),!h.type||h.type==="bezier"&&jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(e4,z(j({},i),{which:"left"})),jo.default.createElement(e4,z(j({},i),{which:"right"})))):voe,c?jo.default.createElement(ooe,j({},i)):jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(i4,z(j({},i),{which:"left"})),jo.default.createElement(i4,z(j({},i),{which:"right"})),jo.default.createElement(poe,j({},i))))},yoe=goe});function dMe(i,s){let a=1/0,c=-1/0;function h(f){a=Math.min(f,a),c=Math.max(f,c)}return i.forEach((f,g)=>{let y=OA(f.value,s);if(h(y),!f.connectedRight)return;let w=i[g+1];if(!w)return;let S=(typeof w.value=="number"?w.value:1)-y;h(y+f.handles[3]*S),h(y+w.handles[1]*S)}),[a,c]}function hMe(i){let s=0,a=1;function c(h){s=Math.min(h,s),a=Math.max(h,a)}return i.forEach((h,f)=>{if(!h.connectedRight)return;let g=i[f+1];g&&(c(h.handles[3]),c(g.handles[1]))}),[s,a]}var yc,boe,_oe,pMe=C(()=>{Ld(),yc=Q(Re()),tR(),cMe(),Ep(),hn(),boe=yc.default.memo(({layoutP:i,trackData:s,sheetObject:a,trackId:c,color:h,pathToProp:f})=>{let g=RA($n(a.template.configPointer),f);if(hc(g))return console.error("Composite prop types cannot be keyframed"),yc.default.createElement(yc.default.Fragment,null);let[y,w]=(0,yc.useState)(!1),S=(0,yc.useMemo)(()=>{let k=new Set;return function(){let D=k.size===0;k.add(O),D&&w(!0);function O(){let F=k.size>0;k.delete(O),F&&k.size===0&&w(!1)}return O}},[]),T=(0,yc.useMemo)(()=>{let k=g.type==="number"?dMe(s.keyframes,g):hMe(s.keyframes),D=V=>(V-k[0])/(k[1]-k[0]),O=V=>k[0]+F(V),F=V=>V*(k[1]-k[0]);return{fromValueSpace:D,toValueSpace:O,deltaToValueSpace:F,lock:S}},[s.keyframes]),I=(0,yc.useRef)(void 0);y||(I.current=T);let A=s.keyframes.map((k,D)=>yc.default.createElement(yoe,{pathToProp:f,propConfig:g,itemKey:co.forTrackKeyframe(a,c,k.id),keyframe:k,index:D,trackData:s,layoutP:i,sheetObject:a,trackId:c,isScalar:g.type==="number",key:k.id,extremumSpace:I.current,color:h}));return yc.default.createElement("g",{style:{"--main-color":WS[h].iconColor}},A)}),_oe=boe}),woe,eR,xoe,Soe,fMe=C(()=>{Fe(),hn(),woe=Mt,eR=Q(Re()),pMe(),xoe=i=>Un(()=>{let{sheetObject:s,trackId:a}=i,c=(0,woe.val)(me().atomP.historic.coreByProject[s.address.projectId].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[a]);return(c==null?void 0:c.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(c==null?void 0:c.type," is not yet supported on the graph editor")),eR.default.createElement(eR.default.Fragment,null)):eR.default.createElement(_oe,z(j({},i),{trackData:c}))},[i.trackId,i.layoutP]),Soe=xoe});function Eoe({clippedSpaceRange:i,clippedSpaceWidth:s,fps:a,gapWidth:c=120},h){let f=1/a,g=i.end-i.start,y=s/(a*g),w=Math.floor(c/y),S=(w<a?Coe(a).find(A=>A>=w):a*Math.floor(w/a))*f,T=Math.floor(i.start/S),I=Math.ceil(i.end/S);for(let A=T;A<=I;A++){let k=A*S,D=k%1===0;h(k,D)}}var Coe,Poe=C(()=>{Qr(),Coe=l1(i=>{let s=[];for(let a=1;a<=i;a++)i%a===0&&s.push(a);return s})});function mMe(i){let{clippedSpaceWidth:s,height:a,ctx:c,unitSpaceToClippedSpace:h,snapToGrid:f}=i;c.clearRect(0,0,s,a),Eoe(i,(g,y)=>{let w=f(g),S=Math.floor(h(w));c.strokeStyle=y?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",c.beginPath(),c.moveTo(S,0),c.lineTo(S,a),c.stroke(),c.closePath()})}var Sv,Ev,koe,Toe,Moe,Aoe,Ioe,Roe,Ooe,Doe,o4,Loe=C(()=>{Sv=Mt,Ev=Q(Re()),Ne(),Poe(),Fe(),Toe=se.div(koe||(koe=H([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Aoe=se.canvas(Moe||(Moe=H([`
  position: relative;
  left: 0;
`]))),Ioe=i=>{let s=i;return s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1},Roe=()=>window.devicePixelRatio||1,Ooe=i=>Roe()/Ioe(i),Doe=({layoutP:i,width:s,height:a})=>{let c=(0,Ev.useRef)(null),[h,f]=(0,Ev.useState)(null),{ctx:g,ratio:y}=(0,Ev.useMemo)(()=>{if(!h)return{};let w=h.getContext("2d"),S=Ooe(w);return{ctx:w,ratio:S}},[h]);return(0,Ev.useLayoutEffect)(()=>{if(!g)return;h.width=s*y,h.height=a*y;let w=(0,Sv.prism)(()=>{let S=(0,Sv.val)(i.sheet).getSequence();return{ctx:g,clippedSpaceRange:(0,Sv.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Sv.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Sv.val)(i.clippedSpace.fromUnitSpace),height:a,leftPadding:(0,Sv.val)(i.scaledSpace.leftPadding),fps:S.subUnitsPerUnit,snapToGrid:T=>S.closestGridPosition(T)}}).onChange(me().ticker,S=>{g.save(),g.scale(y,y),mMe(S),g.restore()},!0);return()=>{w()}},[g,s,a,i]),Ev.default.createElement(Toe,{ref:c,style:{width:s+"px"}},Ev.default.createElement(Aoe,{ref:f,style:{width:s+"px",height:a+"px"}}))},o4=Doe}),bc,Cv,WS,Noe,Foe,Boe,Uoe,Voe,joe,tR=C(()=>{Fe(),mc(),FA(),hn(),bc=Mt,Cv=Q(Re()),Ne(),Hie(),Ane(),fMe(),Loe(),Sa(),WS={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},Foe=se.div(Noe||(Noe=H([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),nu(.03,"#1a1c1e")),Uoe=se.svg(Boe||(Boe=H([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),Voe=({layoutP:i})=>Un(()=>{let s=(0,bc.val)(i.sheet),a=(0,bc.val)(me().atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequenceEditor.selectedPropsByObject),c=(0,bc.val)(i.graphEditorDims.height),h=(0,bc.val)(i.scaledSpace.fromUnitSpace)(1),f=[];if(a)for(let[y,w]of Object.entries(a)){let S=s.getObject(y);if(!S)continue;let T=(0,bc.val)(S.template.getMapOfValidSequenceTracks_forStudio());for(let[I,A]of Object.entries(w)){let k=mI(I),D=Pp(T,k);D&&f.push(Cv.default.createElement(Soe,{key:"graph-".concat(y,"-").concat(I),sheetObject:S,pathToProp:k,layoutP:i,trackId:D,color:A}))}}let g=(0,bc.val)(i.rightDims.width);return Cv.default.createElement(Foe,{style:{width:g+"px",height:c+"px","--unitSpaceToScaledSpaceMultiplier":h,"--graphEditorVerticalSpace":"".concat((0,bc.val)(i.graphEditorVerticalSpace.space))}},Cv.default.createElement(o4,{layoutP:i,width:g,height:c}),Cv.default.createElement(hV,{layoutP:i,height:c},Cv.default.createElement(Uoe,{width:YI,height:c,viewBox:"0 0 ".concat(YI," ").concat(c)},Cv.default.createElement("g",{style:{transform:"translate(".concat((0,bc.val)(i.scaledSpace.leftPadding),"px, ").concat((0,bc.val)(i.graphEditorDims.padding.top),"px)")}},f))))},[i]),joe=Voe}),zoe,ml,Hoe,Goe,$oe,Woe,s4,Koe,qoe,Xoe,Yoe,Zoe,Qoe,Joe,vMe=C(()=>{Fe(),mc(),BA(),hn(),zoe=Mt,ml=Q(Re()),Ne(),vU(),zA(),tR(),pI(),sv(),Mte(),Hoe={label:{color:"#9a9a9a"}},$oe=se(YU)(Goe||(Goe=H([""]))),s4=se(ZU)(Woe||(Woe=H([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),Hoe.label.color),qoe=se.button(Koe||(Koe=H([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),i=>i.isSelected?WS[i.graphEditorColor].iconColor:kp.offColor),Xoe=()=>ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},ml.default.createElement("g",{transform:"translate(0 100)"},ml.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),Zoe=se.span(Yoe||(Yoe=H([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),Cp,s4),Qoe=({leaf:i})=>{var s;let a=sS(i.sheetObject.propsP,i.pathToProp),c=i.sheetObject,{controlIndicators:h}=mU(a,c,i.propConf),f=Un(()=>{let A=i.sheetObject.address,k=fc(i.pathToProp);return(0,zoe.val)(me().atomP.historic.projects.stateByProjectId[A.projectId].stateBySheetId[A.sheetId].sequenceEditor.selectedPropsByObject[A.objectKey][k])},[i]),g=(0,ml.useRef)(!1),y=typeof f=="string";g.current=y;let w=(0,ml.useCallback)(()=>{let A=i.sheetObject.address;me().transaction(({stateEditors:k})=>{g.current?k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(z(j({},A),{pathToProp:i.pathToProp})):(k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(z(j({},A),{pathToProp:i.pathToProp})),k.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[i]),S=(s=i.propConf.label)!=null?s:i.pathToProp[i.pathToProp.length-1],T=!0,I=(0,ml.useRef)(null);return kte(I.current,i),ml.default.createElement($oe,{depth:i.depth},ml.default.createElement(s4,{ref:I,isEven:i.n%2===0,style:{height:i.nodeHeight+"px"},isSelected:y===!0},ml.default.createElement(Zoe,null,S),h,ml.default.createElement(qoe,{onClick:w,isSelected:y===!0,graphEditorColor:f??"1",style:{opacity:1},disabled:!T},ml.default.createElement(Xoe,null))))},Joe=Qoe});function a4(i,s){me().transaction(({stateEditors:a})=>{a.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(z(j({},s.sheetAddress),{studioSheetItemKey:s.sheetItemKey,isCollapsed:i}))})}var l4=C(()=>{Fe()}),Qy,u4,ese,gMe=C(()=>{Qy=Q(Re()),pI(),vMe(),l4(),u4=i=>{let s="prop"+i.pathToProp[i.pathToProp.length-1];return i.shouldRender?i.type==="propWithChildren"?Qy.default.createElement(ese,{leaf:i,key:s}):Qy.default.createElement(Joe,{leaf:i,key:s}):Qy.default.createElement(Qy.default.Fragment,{key:s})},ese=({leaf:i})=>Qy.default.createElement(hI,{leaf:i,label:i.pathToProp[i.pathToProp.length-1],isCollapsed:i.isCollapsed,toggleCollapsed:()=>a4(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>u4(s)))}),tse,nse,rse,yMe=C(()=>{tse=Q(Re()),pI(),gMe(),l4(),Fe(),nse=({leaf:i})=>tse.default.createElement(hI,{leaf:i,label:i.sheetObject.address.objectKey,isCollapsed:i.isCollapsed,toggleSelect:()=>{me().transaction(({stateEditors:s})=>{s.studio.historic.panels.outline.selection.set([i.sheetObject])})},toggleCollapsed:()=>a4(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>u4(s))),rse=nse}),c4,ise,ose,bMe=C(()=>{hn(),c4=Q(Re()),yMe(),pI(),l4(),mQ(),ise=({leaf:i})=>Un(()=>c4.default.createElement(hI,{leaf:i,label:i.sheet.address.sheetId,isCollapsed:i.isCollapsed,toggleCollapsed:()=>{a4(!i.isCollapsed,{sheetAddress:i.sheet.address,sheetItemKey:i.sheetItemKey})}},i.children.map(s=>c4.default.createElement(rse,{key:"sheetObject-"+pQ(s.sheetObject),leaf:s}))),[i]),ose=ise}),d4,nR,sse,ase,lse,use,cse,dse,_Me=C(()=>{hn(),d4=Mt,nR=Q(Re()),Ne(),bMe(),ase=se.div(sse||(sse=H([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),use=se.ul(lse||(lse=H([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),cse=({layoutP:i})=>Un(()=>{let s=(0,d4.val)(i.tree),a=(0,d4.val)(i.leftDims.width);return nR.default.createElement(ase,{style:{width:a+"px",top:s.top+"px"}},nR.default.createElement(use,null,nR.default.createElement(ose,{leaf:s})))},[i]),dse=cse}),h4,hse,pse,fse,mse,wMe=C(()=>{vr(),$d(),hn(),Sa(),h4=Q(Re()),Ne(),Loe(),pse=se.div(hse||(hse=H([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>Cc.rightBackground,nu(.01,Dx(1*.03,wy.panel.bg))),fse=({layoutP:i})=>{let s=$n(i.rightDims.width),a=$n(i.panelDims.height);return h4.default.createElement(pse,{style:{width:s+"px"}},h4.default.createElement(o4,{width:s,height:a,layoutP:i}))},mse=fse}),Jy,vse,gse,yse,bse,xMe=C(()=>{hn(),Jy=Q(Re()),Ne(),_Me(),wMe(),Hie(),ine(),gse=se.div(vse||(vse=H([`
  position: absolute;
  left: 0;
  right: 0;
`]))),yse=({layoutP:i})=>{let s=$n(i.dopeSheetDims.height);return Jy.default.createElement(gse,{style:{height:s+"px"}},Jy.default.createElement(mse,{layoutP:i}),Jy.default.createElement(rne,null,Jy.default.createElement(dse,{layoutP:i}),Jy.default.createElement(zie,{layoutP:i})))},bse=yse});function SMe(i,s,a){return p4.prism.memo(i,()=>(0,p4.prism)(s),a).getValue()}var p4,EMe=C(()=>{p4=Mt});function ei(i){return function(s,a){return i(s,a())}}function Pa(i){return Object.freeze({audience:Pv(i,8)?"internal":Pv(i,16)?"dev":"public",category:Pv(i,4)?"troubleshooting":Pv(i,2)?"todo":"general",level:Pv(i,512)?512:Pv(i,256)?256:Pv(i,128)?128:64})}function Pv(i,s){return(i&s)===s}function ti(i,s){return((s&32)===32?!0:(s&16)===16?i.dev:(s&8)===8?i.internal:!1)&&i.min<=s}function _se(i=console,s={}){let a=z(j({},_c),{includes:j({},_c.includes)}),c={styled:kMe.bind(a,i),noStyle:MMe.bind(a,i)},h=PMe.bind(a);function f(){return a.loggingConsoleStyle&&a.loggerConsoleStyle?c.styled:c.noStyle}return a.create=f(),{configureLogger(g){var y;g==="console"?(a.loggerConsoleStyle=_c.loggerConsoleStyle,a.create=f()):g.type==="console"?(a.loggerConsoleStyle=(y=g.style)!=null?y:_c.loggerConsoleStyle,a.create=f()):g.type==="keyed"?(a.creatExt=w=>g.keyed(w.names),a.create=h):g.type==="named"&&(a.creatExt=CMe.bind(null,g.named),a.create=h)},configureLogging(g){var y,w,S,T,I;a.includes.dev=(y=g.dev)!=null?y:_c.includes.dev,a.includes.internal=(w=g.internal)!=null?w:_c.includes.internal,a.includes.min=(S=g.min)!=null?S:_c.includes.min,a.include=(T=g.include)!=null?T:_c.include,a.loggingConsoleStyle=(I=g.consoleStyle)!=null?I:_c.loggingConsoleStyle,a.create=f()},getLogger(){return a.create({names:[]})}}}function CMe(i,s){let a=[];for(let{name:c,key:h}of s.names)a.push(h==null?c:"".concat(c," (").concat(h,")"));return i(a)}function PMe(i){let s=j(j({},this.includes),this.include(i)),a=this.filtered,c=this.named.bind(this,i),h=this.creatExt(i),f=ti(s,524),g=ti(s,522),y=ti(s,521),w=ti(s,529),S=ti(s,545),T=ti(s,265),I=ti(s,268),A=ti(s,273),k=ti(s,289),D=ti(s,137),O=ti(s,145),F=ti(s,73),V=ti(s,81),$=f?h.error.bind(h,ta._hmm):a.bind(i,524),X=g?h.error.bind(h,ta._todo):a.bind(i,522),re=y?h.error.bind(h,ta._error):a.bind(i,521),ne=w?h.error.bind(h,ta.errorDev):a.bind(i,529),ae=S?h.error.bind(h,ta.errorPublic):a.bind(i,545),xe=I?h.warn.bind(h,ta._kapow):a.bind(i,268),fe=T?h.warn.bind(h,ta._warn):a.bind(i,265),ge=A?h.warn.bind(h,ta.warnDev):a.bind(i,273),Ie=k?h.warn.bind(h,ta.warnPublic):a.bind(i,273),Qe=D?h.debug.bind(h,ta._debug):a.bind(i,137),le=O?h.debug.bind(h,ta.debugDev):a.bind(i,145),Ae=F?h.trace.bind(h,ta._trace):a.bind(i,73),Y=V?h.trace.bind(h,ta.traceDev):a.bind(i,81),Ue={_hmm:$,_todo:X,_error:re,errorDev:ne,errorPublic:ae,_kapow:xe,_warn:fe,warnDev:ge,warnPublic:Ie,_debug:Qe,debugDev:le,_trace:Ae,traceDev:Y,lazy:{_hmm:f?ei($):$,_todo:g?ei(X):X,_error:y?ei(re):re,errorDev:w?ei(ne):ne,errorPublic:S?ei(ae):ae,_kapow:I?ei(xe):xe,_warn:T?ei(fe):fe,warnDev:A?ei(ge):ge,warnPublic:k?ei(Ie):Ie,_debug:D?ei(Qe):Qe,debugDev:O?ei(le):le,_trace:F?ei(Ae):Ae,traceDev:V?ei(Y):Y},named:c,utilFor:{internal(){return{debug:Ue._debug,error:Ue._error,warn:Ue._warn,trace:Ue._trace,named(Tt,ke){return Ue.named(Tt,ke).utilFor.internal()}}},dev(){return{debug:Ue.debugDev,error:Ue.errorDev,warn:Ue.warnDev,trace:Ue.traceDev,named(Tt,ke){return Ue.named(Tt,ke).utilFor.dev()}}},public(){return{error:Ue.errorPublic,warn:Ue.warnPublic,debug(Tt,ke){Ue._warn('(public "debug" filtered out) '.concat(Tt),ke)},trace(Tt,ke){Ue._warn('(public "trace" filtered out) '.concat(Tt),ke)},named(Tt,ke){return Ue.named(Tt,ke).utilFor.public()}}}}};return Ue}function kMe(i,s){let a=j(j({},this.includes),this.include(s)),c=[],h="";for(let w=0;w<s.names.length;w++){let{name:S,key:T}=s.names[w];if(h+=" %c".concat(S),c.push(this.style.css(S)),T!=null){let I="%c#".concat(T);h+=I,c.push(this.style.css(I))}}let f=this.filtered,g=this.named.bind(this,s),y=[h,...c];return wse(f,s,a,i,y,TMe(y),g)}function TMe(i){let s=i.slice(0);for(let a=1;a<s.length;a++)s[a]+=";background-color:#e0005a;padding:2px;color:white";return s}function MMe(i,s){let a=j(j({},this.includes),this.include(s)),c="";for(let y=0;y<s.names.length;y++){let{name:w,key:S}=s.names[y];c+=" ".concat(w),S!=null&&(c+="#".concat(S))}let h=this.filtered,f=this.named.bind(this,s),g=[c];return wse(h,s,a,i,g,g,f)}function wse(i,s,a,c,h,f,g){let y=ti(a,524),w=ti(a,522),S=ti(a,521),T=ti(a,529),I=ti(a,545),A=ti(a,265),k=ti(a,268),D=ti(a,273),O=ti(a,289),F=ti(a,137),V=ti(a,145),$=ti(a,73),X=ti(a,81),re=y?c.error.bind(c,...h):i.bind(s,524),ne=w?c.error.bind(c,...h):i.bind(s,522),ae=S?c.error.bind(c,...h):i.bind(s,521),xe=T?c.error.bind(c,...h):i.bind(s,529),fe=I?c.error.bind(c,...h):i.bind(s,545),ge=k?c.warn.bind(c,...f):i.bind(s,268),Ie=A?c.warn.bind(c,...h):i.bind(s,265),Qe=D?c.warn.bind(c,...h):i.bind(s,273),le=O?c.warn.bind(c,...h):i.bind(s,273),Ae=F?c.info.bind(c,...h):i.bind(s,137),Y=V?c.info.bind(c,...h):i.bind(s,145),Ue=$?c.debug.bind(c,...h):i.bind(s,73),Tt=X?c.debug.bind(c,...h):i.bind(s,81),ke={_hmm:re,_todo:ne,_error:ae,errorDev:xe,errorPublic:fe,_kapow:ge,_warn:Ie,warnDev:Qe,warnPublic:le,_debug:Ae,debugDev:Y,_trace:Ue,traceDev:Tt,lazy:{_hmm:y?ei(re):re,_todo:w?ei(ne):ne,_error:S?ei(ae):ae,errorDev:T?ei(xe):xe,errorPublic:I?ei(fe):fe,_kapow:k?ei(ge):ge,_warn:A?ei(Ie):Ie,warnDev:D?ei(Qe):Qe,warnPublic:O?ei(le):le,_debug:F?ei(Ae):Ae,debugDev:V?ei(Y):Y,_trace:$?ei(Ue):Ue,traceDev:X?ei(Tt):Tt},named:g,utilFor:{internal(){return{debug:ke._debug,error:ke._error,warn:ke._warn,trace:ke._trace,named(Te,je){return ke.named(Te,je).utilFor.internal()}}},dev(){return{debug:ke.debugDev,error:ke.errorDev,warn:ke.warnDev,trace:ke.traceDev,named(Te,je){return ke.named(Te,je).utilFor.dev()}}},public(){return{error:ke.errorPublic,warn:ke.warnPublic,debug(Te,je){ke._warn('(public "debug" filtered out) '.concat(Te),je)},trace(Te,je){ke._warn('(public "trace" filtered out) '.concat(Te),je)},named(Te,je){return ke.named(Te,je).utilFor.public()}}}}};return ke}var ta,_c,xse=C(()=>{ta={_hmm:Pa(524),_todo:Pa(522),_error:Pa(521),errorDev:Pa(529),errorPublic:Pa(545),_kapow:Pa(268),_warn:Pa(265),warnDev:Pa(273),warnPublic:Pa(289),_debug:Pa(137),debugDev:Pa(145),_trace:Pa(73),traceDev:Pa(81)},_c={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(i,s,a){return this.create({names:[...i.names,{name:s,key:a}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(i){if(i.length<5)return i;let s=i.replace(this.collapseOnRE,"");return this.cssMemo.has(s)||this.cssMemo.set(s,this.css(i)),s},css(i){var s,a,c,h;let f=this.cssMemo.get(i);if(f)return f;let g="color:".concat((a=(s=this.color)==null?void 0:s.call(this,i))!=null?a:"hsl(".concat((i.charCodeAt(0)+i.charCodeAt(i.length-1))%360,", 100%, 60%)"));return(c=this.bold)!=null&&c.test(i)&&(g+=";font-weight:600"),(h=this.italic)!=null&&h.test(i)&&(g+=";font-style:italic"),this.cssMemo.set(i,g),g}}}}),f4,rR,iR=C(()=>{xse(),xse(),f4=_se(console,{_debug:function(){},_error:function(){}}),f4.configureLogging({dev:!0,min:64}),rR=f4.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),Bp,kv,Sse,AMe=C(()=>{Ld(),Bp=Mt,iR(),Td(),kv=28,Sse=(i,s)=>{var a;Bp.prism.ensurePrism();let c=!0,h=iA+kv,f=0,g=s.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].sequence.collapsableItems,y=g.byId[co.forSheet()].isCollapsed,w=(a=(0,Bp.pointerToPrism)(y).getValue())!=null?a:!1,S={type:"sheet",isCollapsed:w,sheet:i,children:[],sheetItemKey:co.forSheet(),shouldRender:c,top:iA,depth:0,n:f,nodeHeight:c?kv:0,heightIncludingChildren:-1};f+=1;for(let O of Object.values((0,Bp.val)(i.objectsP)))O&&T(O,S.children,S.depth+1,!w);S.heightIncludingChildren=h-S.top;function T(O,F,V,$){var X;let re=(0,Bp.val)(O.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,Bp.val)(O.template.configPointer);if(Object.keys(re).length===0)return;let ae=g.byId[co.forSheetObject(O)].isCollapsed,xe=(X=(0,Bp.pointerToPrism)(ae).getValue())!=null?X:!1,fe={type:"sheetObject",isCollapsed:xe,sheetItemKey:co.forSheetObject(O),shouldRender:$,top:h,children:[],depth:V,n:f,sheetObject:O,nodeHeight:$?kv:0,heightIncludingChildren:-1};F.push(fe),$&&(f+=1,h+=fe.nodeHeight),I(O,re,[],ne,fe.children,V+1,$&&!xe),fe.heightIncludingChildren=h-fe.top}function I(O,F,V,$,X,re,ne){for(let[ae,xe]of Object.entries(F)){let fe=$.props[ae];A(O,xe,[...V,ae],fe,X,re,ne)}}function A(O,F,V,$,X,re,ne){$.type==="compound"?k(O,F,$,V,$,X,re,ne):$.type==="enum"?rR.warn("Prop type enum is not yet supported in the sequence editor"):D(O,F,V,$,X,re,ne)}function k(O,F,V,$,X,re,ne,ae){var xe;let fe=g.byId[co.forSheetObjectProp(O,$)].isCollapsed,ge=(xe=(0,Bp.pointerToPrism)(fe).getValue())!=null?xe:!1,Ie={type:"propWithChildren",isCollapsed:ge,propConf:V,pathToProp:$,sheetItemKey:co.forSheetObjectProp(O,$),sheetObject:O,shouldRender:ae,top:h,children:[],nodeHeight:ae?kv:0,heightIncludingChildren:-1,depth:ne,trackMapping:F,n:f};re.push(Ie),ae&&(h+=Ie.nodeHeight,f+=1),I(O,F,$,X,Ie.children,ne+1,ae&&!ge),Ie.heightIncludingChildren=h-Ie.top}function D(O,F,V,$,X,re,ne){let ae={type:"primitiveProp",propConf:$,depth:re,sheetItemKey:co.forSheetObjectProp(O,V),sheetObject:O,pathToProp:V,shouldRender:ne,top:h,nodeHeight:ne?kv:0,heightIncludingChildren:ne?kv:0,trackId:F,n:f};X.push(ae),f+=1,h+=ae.nodeHeight}return S}});function IMe(i,s){let a=me(),c=a.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId],h=a.atomP.historic.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId];return(0,na.prism)(()=>{var f;let g=SMe("tree",()=>Sse(i,a),[]),y=(0,na.val)(s),w=(0,na.val)(a.atomP.historic.panels.sequenceEditor.graphEditor),S=(0,na.val)(h.sequenceEditor.selectedPropsByObject),T=!!S&&Object.keys(S).length>0,{leftDims:I,rightDims:A,graphEditorDims:k,dopeSheetDims:D,horizontalScrollbarDims:O}=na.prism.memo("leftDims",()=>{var Ie;let Qe={width:Math.floor(y.width*Ese),height:y.height,screenX:y.screenX,screenY:y.screenY},le={width:y.width-Qe.width,height:y.height,screenX:y.screenX+Qe.width,screenY:y.screenY},Ae=T&&(w==null?void 0:w.isOpen)===!0,Y=Math.floor((Ae?ai((Ie=w==null?void 0:w.height)!=null?Ie:.5,.1,.7):0)*y.heightWithoutBorder),Ue=0+Y,Tt=y.height-Ue,ke={width:y.width,height:Tt,screenX:y.screenX,screenY:y.screenY},Te={isAvailable:T,isOpen:Ae,width:le.width,height:Y,screenX:y.screenX,screenY:y.screenY+Tt,padding:{top:20,bottom:20}};return{leftDims:Qe,rightDims:le,graphEditorDims:Te,dopeSheetDims:ke,horizontalScrollbarDims:{bottom:0}}},[y,w,T]),F=na.prism.memo("graphEditorVerticalSpace",()=>{let Ie=k.height-k.padding.top-k.padding.bottom;return{space:Ie,fromExtremumSpace(Qe){return Qe*Ie},toExtremumSpace(Qe){return Qe/Ie}}},[k]),[V,$]=na.prism.state("isSeeking",!1),X={isSeeking:V,setIsSeeking:$},re={},ne=(f=(0,na.val)(c.sequence.clippedSpaceRange))!=null?f:Cse,ae=na.prism.memo("scaledSpace",()=>{let Ie=ne.end-ne.start,Qe=A.width,le=Ie/Qe,Ae=Qe/Ie;return{fromUnitSpace(Y){return Y*Ae},toUnitSpace(Y){return Y*le},leftPadding:10}},[ne,A.width]),xe=na.prism.memo("setClippedSpaceRange",()=>function(Ie){a.transaction(({stateEditors:Qe})=>{let le=j({},Ie);if(le.end<=le.start&&(le.end=le.start+1),le.start<0){let Ae=le.end-le.start;le.start=0,le.end=Ae}Qe.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(z(j({},i.address),{range:le}))})},[]),fe=na.prism.memo("clippedSpace",()=>({range:ne,width:A.width,fromUnitSpace(Ie){return ae.fromUnitSpace(Ie-ne.start)+ae.leftPadding},toUnitSpace(Ie){return ae.toUnitSpace(Ie-ae.leftPadding)+ne.start},setRange:xe}),[ne,A.width,ae,xe]),ge=na.prism.memo("selection.current",()=>new na.Atom({}),[]);return XU("finalAtom",{sheet:i,tree:g,panelDims:y,leftDims:I,rightDims:A,dopeSheetDims:D,horizontalScrollbarDims:O,seeker:X,unitSpace:re,scaledSpace:ae,clippedSpace:fe,graphEditorDims:k,graphEditorVerticalSpace:F,selectionAtom:ge}).pointer})}var na,Ese,Cse,RMe=C(()=>{Fe(),EMe(),Pte(),na=Mt,AMe(),Qr(),Ese=.2,Cse={start:0,end:10}});function OMe(i){let{fullSecondStampsContainer:s,sequencePositionFormatter:a,snapToGrid:c,unitSpaceToClippedSpace:h}=i,f="";Eoe(i,(g,y)=>{let w=c(g),S=h(w);y?f+=Pse(a.formatFullUnitForGrid(w),S,"full-unit"):f+=Pse(a.formatSubUnitForGrid(w),S,"sub-unit")}),s.innerHTML=f}function Pse(i,s,a){return'<span class="'.concat(a,'" style="transform: translate3d(').concat(s.toFixed(1),'px, -50%, 0);">').concat(i,"</span>")}var Tv,Mv,kse,Tse,Up,Mse,Ase,Ise,Rse,Ose,Dse,Lse=C(()=>{Tv=Mt,Sa(),Mv=Q(Re()),Ne(),Poe(),Fe(),Tse=se.div(kse||(kse=H([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Up={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Dx(.2,Up.fullUnitStampColor)}},Ase=se.div(Mse||(Mse=H([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),Rse=se.div(Ise||(Ise=H([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Up.fullUnitStampColor,Up.stampFontSize,Up.fullUnitStampColor,Up.subUnitStampColor),Ose=({layoutP:i,width:s})=>{let a=(0,Mv.useRef)(null),[c,h]=(0,Mv.useState)(null);return(0,Mv.useLayoutEffect)(()=>{if(c)return(0,Tv.prism)(()=>{let f=(0,Tv.val)(i.sheet).getSequence();return{fullSecondStampsContainer:c,clippedSpaceRange:(0,Tv.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Tv.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Tv.val)(i.clippedSpace.fromUnitSpace),leftPadding:(0,Tv.val)(i.scaledSpace.leftPadding),fps:f.subUnitsPerUnit,sequencePositionFormatter:f.positionFormatter,snapToGrid:g=>f.closestGridPosition(g)}}).onChange(me().ticker,OMe,!0)},[c,s,i]),Mv.default.createElement(Tse,{ref:a,style:{width:s+"px"}},Mv.default.createElement(Ase,{style:{width:s+"px"}},Mv.default.createElement(Rse,{ref:h})))},Dse=Ose});function DMe(i){let[s,a]=(0,m4.useState)(!1);return(0,m4.useEffect)(()=>{if(a(!1),!i)return;let c=f=>{f.target===i?a(!0):a(!1)},h=()=>{a(!1)};return i.addEventListener("mouseenter",c),i.addEventListener("mousemove",c),i.addEventListener("mouseleave",h),()=>{a(!1),i.removeEventListener("mouseenter",c),i.removeEventListener("mousemove",c),i.removeEventListener("mouseleave",h)}},[i]),s}var m4,LMe=C(()=>{m4=Q(Re())});function NMe(i,s){let a=0,[c,h]=i,[f,g]=s;return h-c>g-f?[f,g]:(c<f&&(a=0-c),h>g&&(a=g-h),[c+a,h+a])}var wc,Vp,ro,v4,Nse,oR,Fse,Bse,Use=C(()=>{wc=Mt,hn(),vr(),Fe(),Iv(),Ms(),no(),mr(),Vp=Q(Re()),Ne(),Uo(),ro={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},v4=1e3,oR=se.div(Nse||(Nse=H([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>Sc-1,i=>i.enabled?ro.enabled.backgroundColor:ro.disabled.backgroundColor,v4,ro.hover.backgroundColor,ro.dragging.backgroundColor,hr),Fse=({layoutP:i})=>{let s=(0,Vp.useMemo)(()=>(0,wc.prism)(()=>{let{projectId:S,sheetId:T}=(0,wc.val)(i.sheet).address;return(0,wc.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[T].sequence.focusRange)}),[i]),[a,c]=sr(null),[h]=Ts(c,{menuItems:()=>{let S=(0,wc.val)(i.sheet),T=s.getValue();return[{label:"Delete focus range",callback:()=>{me().tempTransaction(({stateEditors:I})=>{I.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(j({},S.address))}).commit()}},{label:T!=null&&T.enabled?"Disable focus range":"Enable focus range",callback:()=>{T!==void 0&&me().tempTransaction(({stateEditors:I})=>{I.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},S.address),{range:T.range,enabled:!T.enabled}))}).commit()}}]}}),f=$n(i.scaledSpace.toUnitSpace),g=$n(i.sheet),y=(0,Vp.useMemo)(()=>{let S,T;return{debugName:"FocusRangeStrip",onDragStart(I){let A,k=s.getValue();if(!k)return!1;let D=k.range.start,O=k.range.end,F=!1,V=(0,wc.val)(i.sheet).getSequence();return{onDrag($){if(k=s.getValue(),k){F=!0;let X=f($),re=D+X,ne=O+X;ne<re&&(ne=re),[S,T]=NMe([re,ne],[0,V.length]).map(ae=>V.closestGridPosition(ae)),A&&A.discard(),A=me().tempTransaction(({stateEditors:ae})=>{var xe;ae.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},g.address),{range:{start:S,end:T},enabled:(xe=k==null?void 0:k.enabled)!=null?xe:!0}))})}},onDragEnd(){k&&(F&&A!==void 0?A.commit():A&&A.discard())}}},lockCSSCursorTo:"grabbing"}},[g,f]),[w]=xi(c,y);return Ud(w,-1),Un(()=>{let S=s.getValue(),T=(S==null?void 0:S.range)||{start:0,end:0},I=(0,wc.val)(i.clippedSpace.fromUnitSpace)(T.start),A=(0,wc.val)(i.clippedSpace.fromUnitSpace)(T.end),k,D;return I<0&&(I=0),A>(0,wc.val)(i.clippedSpace.width)&&(A=(0,wc.val)(i.clippedSpace.width)),I>A?(D=0,k=0):(D=I,k=(A-I)/v4),S?Vp.default.createElement(Vp.default.Fragment,null,h,Vp.default.createElement(oR,{id:"range-strip",enabled:S.enabled,className:"".concat(w?"dragging":""," ").concat(S.enabled?"enabled":""),ref:a,style:{transform:"translateX(".concat(D,"px) scale(").concat(k,", 1)")}})):Vp.default.createElement(Vp.default.Fragment,null)},[i,a,s,h,w])},Bse=Fse}),jp,zd,Vse,jse,zse,Hse,Gse,$se,Wse,g4,FMe=C(()=>{jp=Mt,hn(),Fe(),Iv(),Ea(),no(),mr(),zd=Q(Re()),Ne(),Uo(),Use(),cu(),jse=se.div(Vse||(Vse=H([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),i=>i.type==="start"?0:-ro.thumbWidth,ro.thumbWidth,()=>Sc-1,({enabled:i})=>i?ro.enabled.backgroundColor:ro.disabled.backgroundColor,ro.enabled.stroke,i=>i.type==="start"?"w-resize":"e-resize",Ad,()=>oR,ro.hover.backgroundColor,ro.hover.stroke,()=>oR,ro.dragging.backgroundColor,ro.dragging.stroke,ro.dragging.backgroundColor),Hse=se.div(zse||(zse=H([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?90:-90,i=>i.type==="start"?ro.thumbWidth:-ro.thumbWidth+1),$se=se.div(Gse||(Gse=H([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?-90:90,()=>KS.backgroundColor,i=>i.type==="start"?-12:ro.thumbWidth),Wse=({layoutP:i,thumbType:s})=>{var a;let[c,h]=sr(null),f=(0,zd.useMemo)(()=>(0,jp.prism)(()=>{let{projectId:S,sheetId:T}=(0,jp.val)(i.sheet).address;return(0,jp.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[T].sequence.focusRange)}),[i]),g=(0,zd.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let S,T,I=(0,jp.val)(i.sheet),A={start:0,end:I.getSequence().length},k=f.getValue()||{range:A,enabled:!1},D=k.enabled,O=k.range[s],F=(0,jp.val)(i.scaledSpace.toUnitSpace),V=F(ro.rangeStripMinWidth);return{onDrag($,X,re){var ne;let ae,xe=As.checkIfMouseEventSnapToPos(re,{ignore:h});if(xe==null){let ge=F($);ae=O+ge}else ae=xe;T=((ne=f.getValue())==null?void 0:ne.range)||A,s==="start"?ae=Math.max(Math.min(ae,T.end-V),0):ae=Math.min(Math.max(ae,T.start+V),I.getSequence().length);let fe=I.getSequence().closestGridPosition(ae);S!==void 0&&S.discard(),S=me().tempTransaction(({stateEditors:ge})=>{ge.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},I.address),{range:z(j({},T),{[s]:fe}),enabled:D}))})},onDragEnd($){$?S==null||S.commit():S==null||S.discard()}}}}),[i]),[y]=xi(h,g);ul(y,"draggingPositionInSequenceEditor",s==="start"?"w-resize":"e-resize");let w=$n(f);return Ud(y,(a=w==null?void 0:w.range[s])!=null?a:0),Un(()=>{let S=f.getValue();if(!S)return null;let{enabled:T}=S,I=S.range[s],A=(0,jp.val)(i.clippedSpace.fromUnitSpace)(I);return(A<0||(0,jp.val)(i.clippedSpace.width)<A)&&(A=-1e4),zd.default.createElement(jse,z(j(j({ref:c},As.includePositionSnapAttrs(I)),vc(I)),{className:"".concat(y&&"dragging"," ").concat(T&&"enabled"),enabled:T,type:s,style:{transform:"translate3d(".concat(A,"px, 0, 0)")}}),zd.default.createElement(Hse,{type:s,enabled:T}),zd.default.createElement($se,{type:s}),zd.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},zd.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),zd.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[i,c,f,y])},g4=Wse});function BMe(i,s){let[a,c]=(0,xc.useState)("none");return ul(a!=="none","dragging",a==="creating"?"ew-resize":"move"),(0,xc.useMemo)(()=>{let h=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(g){let y,w=(0,Av.val)(i.clippedSpace.toUnitSpace),S=(0,Av.val)(i.scaledSpace.toUnitSpace),T=(0,Av.val)(i.sheet),I=T.getSequence(),A=g.target.getBoundingClientRect(),k=w(g.clientX-A.left),D=S(ro.rangeStripMinWidth);return{onDrag(O){let F=S(O),V=k,$=k+F;[V,$]=[ai(V,0,I.length),ai($,0,I.length)].map(X=>I.closestGridPosition(X)),$<V?[V,$]=[Math.max(Math.min($,V-D),0),V]:O>0&&($=Math.min(Math.max($,V+D),I.length)),y&&y.discard(),y=me().tempTransaction(({stateEditors:X})=>{X.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},T.address),{range:{start:V,end:$},enabled:!0}))})},onDragEnd(O){O&&y!==void 0?y.commit():y&&y.discard()}}},lockCSSCursorTo:"ew-resize"}),f=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let g,y=s.current,w=s.current.addBoundsHighlightLock();return{onDrag(S,T){let I=z(j({},y.dims),{top:ai(y.dims.top+T,0,window.innerHeight-rc),left:ai(y.dims.left+S,-y.dims.width+rc,window.innerWidth-rc)}),A=uI(I,{width:window.innerWidth,height:window.innerHeight});g==null||g.discard(),g=me().tempTransaction(({stateEditors:k})=>{k.studio.historic.panelPositions.setPanelPosition({position:A,panelId:y.panelId})})},onDragEnd(S){w(),S?g==null||g.commit():g==null||g.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(g){let[y,w]=g.shiftKey?["creating",h().onDragStart(g)]:["moving-panel",f().onDragStart(g)];return c(y),w===!1?!1:{onDrag(S,T,I,A,k){w.onDrag(S,T,I,A,k)},onDragEnd(S){var T;c("none"),(T=w.onDragEnd)==null||T.call(w,S)}}}}},[i,s])}var Av,xc,Kse,qse,Xse,Yse,UMe=C(()=>{Av=Mt,hn(),Fe(),Hy(),Iv(),Ea(),no(),LMe(),zte(),mr(),Qr(),xc=Q(Re()),Ne(),Use(),FMe(),Td(),qse=se.div(Kse||(Kse=H([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>Sc,i=>i.isShiftDown?"ew-resize":"move"),Xse=({layoutP:i})=>{let[s,a]=sr(null),c=zy(),h=(0,xc.useRef)(c);h.current=c;let f=(0,xc.useMemo)(()=>(0,Av.prism)(()=>{let{projectId:w,sheetId:S}=(0,Av.val)(i.sheet).address;return(0,Av.val)(me().atomP.ahistoric.projects.stateByProjectId[w].stateBySheetId[S].sequence.focusRange)}),[i]);xi(a,BMe(i,h));let g=Vte("Shift"),y=DMe(a);return(0,xc.useEffect)(()=>{if(!g&&y)return h.current.addBoundsHighlightLock()},[!g&&y]),Un(()=>xc.default.createElement(qse,{ref:s,isShiftDown:g},xc.default.createElement(Bse,{layoutP:i}),xc.default.createElement(g4,{thumbType:"start",layoutP:i}),xc.default.createElement(g4,{thumbType:"end",layoutP:i})),[i,f,g])},Yse=Xse}),eb,Sc,KS,Zse,Qse,Jse,eae,Iv=C(()=>{hn(),eb=Q(Re()),Ne(),Lse(),Uo(),vr(),UMe(),Sc=18,KS={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},Qse=se.div(Zse||(Zse=H([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),Sc,KS.backgroundColor,KS.borderColor,hr),Jse=({layoutP:i})=>{let s=$n(i.rightDims.width);return eb.default.createElement(eb.default.Fragment,null,eb.default.createElement(Qse,j({},vc("hide")),eb.default.createElement(Dse,{layoutP:i,width:s,height:Sc}),eb.default.createElement(Yse,{layoutP:i})))},eae=Jse}),Rv,tae,nae,rae,iae,oae,sae,aae,lae,VMe=C(()=>{Rv=Q(Re()),Ne(),hn(),Fe(),wB(),sv(),tae=i=>isFinite(i)&&i>0,rae=se.div(nae||(nae=H([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),oae=se.div(iae||(iae=H([`
  `,`;
  white-space: nowrap;
`])),Cp),sae=({deltaX:i})=>i*.25,aae=({layoutP:i})=>{let s=$n(i.sheet),a=(0,Rv.useMemo)(()=>{let h;return{temporarilySetValue(f){h&&(h.discard(),h=void 0),h=me().tempTransaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})},discardTemporaryValue(){h&&(h.discard(),h=void 0)},permanentlySetValue(f){h&&(h.discard(),h=void 0),me().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})}}},[i,s]),c=(0,Rv.useRef)(null);return(0,Rv.useLayoutEffect)(()=>{c.current.focus()},[]),Un(()=>{let h=s.getSequence().length;return Rv.default.createElement(rae,null,Rv.default.createElement(oae,null,"Sequence length"),Rv.default.createElement(pA,z(j({value:h},a),{isValid:tae,inputRef:c,nudge:sae})))},[s,a,c])},lae=aae});function jMe(i,s){let a=(0,ra.useRef)(s);a.current=s;let c=(0,ra.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(f){let g,y=a.current,w=(0,Ov.val)(a.current.layoutP.sheet),S=w.getSequence().length,T=(0,Ov.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,A,k){let D=T(I);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:O})=>{O.coreByProject.historic.sheetsById.sequence.setLength(z(j({},w.address),{length:S+D}))})},onDragEnd(I){I?g&&g.commit():g&&g.discard()}}}}),[]),[h]=xi(i,c);return Ud(h,-1),[h]}var Ov,ra,y4,qS,uae,zp,cae,dae,hae,pae,fae,mae,vae,gae,yae,bae,_ae,zMe=C(()=>{hn(),Ov=Mt,ra=Q(Re()),Ne(),$d(),Iv(),mr(),no(),Fe(),lc(),Uo(),Ay(),VMe(),vr(),cc(),y4=1e3,qS={stripNormal:"#0000006c",stripActive:"#000000"},zp=se.div(uae||(uae=H([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>Cc.lengthIndicatorStrip,Sc,qS.stripNormal,qS.stripActive),dae=se.div(cae||(cae=H([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),Sc-15),pae=se.div(hae||(hae=H([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),hr,zp,zp,qS.stripActive),mae=se.div(fae||(fae=H([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),hr,zp,zp,qS.stripActive),gae=se.div(vae||(vae=H([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),y4,()=>Cc.lengthIndicatorCover,zp,zp),yae=-1e4,bae=({layoutP:i})=>{let[s,a]=sr(null),[c]=jMe(a,{layoutP:i}),{node:h,toggle:f,close:g}=ac({debugName:"LengthIndicator"},()=>ra.default.createElement(uc,null,ra.default.createElement(lae,{layoutP:i,onRequestClose:g})));return Un(()=>{let y=(0,Ov.val)(i.sheet),w=(0,Ov.val)(i.rightDims.height),S=y.getSequence(),T=S.length,I=T,A=(0,Ov.val)(i.clippedSpace.fromUnitSpace)(I),k=(0,Ov.val)(i.clippedSpace.width),D,O;return A>k?(O=0,D=0):(A<0&&(A=0),O=A,D=(k-A)/y4),ra.default.createElement(ra.default.Fragment,null,h,ra.default.createElement(zp,{style:{height:w+"px",transform:"translateX(".concat(O===0?yae:O,"px)")},className:c?"dragging":""},ra.default.createElement(dae,null,ra.default.createElement(mae,j({ref:s,onClick:F=>{f(F,a)}},vc("hide")),ra.default.createElement(ICe,null),ra.default.createElement(RCe,null)),ra.default.createElement(pae,null,"Sequence length:"," ",S.positionFormatter.formatBasic(T)))),ra.default.createElement(gae,{title:"Length",style:{height:w+"px",transform:"translateX(".concat(O,"px) scale(").concat(D,", 1)")}}))},[i,s,c,h])},_ae=bae}),b4,Hd,wae,xae,Sae,Eae,Cae,Pae,kae,Tae,HMe=C(()=>{hn(),b4=Mt,Hd=Q(Re()),Ne(),Lse(),$d(),Iv(),Uo(),xae=se.div(wae||(wae=H([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Eae=se.div(Sae||(Sae=H([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Up.stampFontSize,Up.fullUnitStampColor,KS.backgroundColor,()=>Cc.currentFrameStamp),Pae=se.div(Cae||(Cae=H([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),kae=Hd.default.memo(({layoutP:i})=>{let[s,a]=$n(cne()),c=$n(i.clippedSpace.fromUnitSpace),{sequence:h,formatter:f,clippedSpaceWidth:g}=Un(()=>{let T=(0,b4.val)(i.sheet).getSequence(),I=(0,b4.val)(i.clippedSpace.width);return{sequence:T,formatter:T.positionFormatter,clippedSpaceWidth:I}},[i]);if(s==-1)return Hd.default.createElement(Hd.default.Fragment,null);let y=a===3?h.closestGridPosition(s):s,w=c(y),S=w>=0&&w<=g;return Hd.default.createElement(Hd.default.Fragment,null,Hd.default.createElement(xae,null,Hd.default.createElement(Eae,{style:{opacity:S?1:0,transform:"translate3d(calc(".concat(w,"px - 50%), 0, 0)")}},f.formatForPlayhead(y)),Hd.default.createElement(Pae,{posType:a,style:{opacity:S?1:0,transform:"translate3d(".concat(w,"px, 0, 0)")}}))," ")}),Tae=kae}),du,Os,Mae,Aae,Iae,Rae,Oae,sR,Dae,_4,Lae,aR,Nae,lR,Fae,w4,Bae,Uae,GMe=C(()=>{hn(),du=Mt,a2(),Sa(),Os=Q(Re()),Ne(),$d(),Uo(),vr(),no(),Aae=se.div(Mae||(Mae=H([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>Cc.horizontalScrollbar,hr),Rae=se.div(Iae||(Iae=H([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),sR=se.div(Oae||(Oae=H([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),CF("absolute","-4px")),_4=se.div(Dae||(Dae=H([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),CF("absolute","0"),CF("absolute","-4px")),aR=se(_4)(Lae||(Lae=H([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),lR=se(_4)(Nae||(Nae=H([`
  cursor: e-resize;
  left: 0px;
`]))),w4=se.div(Fae||(Fae=H([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),i=>i.active?"block":"none",aR,lR,sR,aR,sR,lR),Bae=({layoutP:i})=>{let s=(0,Os.useCallback)(F=>F.toFixed(2),[]),a=(0,Os.useMemo)(()=>(0,du.prism)(()=>{let F=(0,du.val)(i.rightDims.width)-25,V=(0,du.val)(i.clippedSpace.range),$=(0,du.val)(i.sheet).getSequence().length,X=Math.max(V.end,$),re=V.start/X*F,ne=V.end/X*F;return{rightWidth:F,clippedSpaceRange:V,sequenceLength:$,assumedLengthOfSequence:X,rangeStartX:re,rangeEndX:ne,bottom:(0,du.val)(i.horizontalScrollbarDims.bottom)}}),[i]),{rangeStartX:c,rangeEndX:h,clippedSpaceRange:f,bottom:g}=$n(a),[y,w]=(0,Os.useState)("nothing"),S=(0,Os.useMemo)(()=>{let F=(0,du.val)(a),V=()=>{F=(0,du.val)(a)},$=X=>X/F.rightWidth*F.assumedLengthOfSequence;return{onRangeDragStart(){return V(),{onDrag(X){w("both");let re=$(X),ne=yd(F.clippedSpaceRange,ae=>ae+re);(0,du.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeStartDragStart(){return V(),{onDrag(X){w("start");let re=$(X),ne={start:F.clippedSpaceRange.start+re,end:F.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,du.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeEndDragStart(){return V(),{onDrag(X){w("end");let re=$(X),ne={start:F.clippedSpaceRange.start,end:F.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=F.assumedLengthOfSequence&&(ne.end=F.assumedLengthOfSequence),(0,du.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}}}},[i,a]),[T,I]=(0,Os.useState)(null);xi(T,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:S.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[A,k]=(0,Os.useState)(null);xi(A,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:S.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[D,O]=(0,Os.useState)(null);return xi(D,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:S.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),Os.default.createElement(Aae,j({style:{bottom:g+8+"px"}},vc("hide")),Os.default.createElement(Rae,null,Os.default.createElement(sR,{ref:I,style:{width:"".concat(h-c,"px"),transform:"translate3d(".concat(c,"px, 0, 0)")}}),Os.default.createElement(aR,{ref:k,style:{transform:"translate3d(".concat(c,"px, 0, 0)")}},Os.default.createElement(w4,{active:y==="both"||y==="start"},s(f.start))),Os.default.createElement(lR,{ref:O,style:{transform:"translate3d(".concat(h,"px, 0, 0)")}},Os.default.createElement(w4,{active:y==="both"||y==="end"},s(f.end)))))},Uae=Bae}),Vae,jae,zae,Hae,Gae,$Me=C(()=>{Vae=Q(Re()),Ne(),zae=se.div(jae||(jae=H([`
  position: absolute;
  inset: `,`px;
`])),i=>i.room*-1),Hae=i=>Vae.default.createElement(zae,{room:i.room}),Gae=Hae}),uR,cR,x4,$ae,Wae,Kae,qae,Xae,Yae,Zae,Qae,WMe=C(()=>{Ne(),hn(),wB(),sv(),uR=Q(Re()),cR=Q(Re()),x4=Mt,L0(),$ae=i=>isFinite(i)&&i>=0,Kae=se.div(Wae||(Wae=H([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Xae=se.div(qae||(qae=H([`
  `,`;
  white-space: nowrap;
`])),Cp),Yae=({deltaX:i})=>i*.25,Zae=({layoutP:i,onRequestClose:s})=>{let a=(0,x4.val)(i.sheet),c=a.getSequence(),h=(0,uR.useMemo)(()=>{let g,y=c.position;return{temporarilySetValue(w){g&&(g=void 0),g=ai(w,0,c.length),c.position=g},discardTemporaryValue(){g&&(g=void 0,c.position=y,s("discardTemporaryValue"))},permanentlySetValue(w){g&&(g=void 0),c.position=ai(w,0,c.length),s("permanentlySetValue")}}},[i,c]),f=(0,uR.useRef)(null);return(0,uR.useLayoutEffect)(()=>{f.current.focus()},[]),Un(()=>{let g=a.getSequence(),y=Number((0,x4.val)(g.pointer.position).toFixed(3));return cR.default.createElement(Kae,null,cR.default.createElement(Xae,null,"Sequence position"),cR.default.createElement(pA,z(j({value:y},h),{isValid:$ae,inputRef:f,nudge:Yae})))},[a,h,f])},Qae=Zae}),Jae,KMe=C(()=>{Jae=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),ele,qMe=C(()=>{KMe(),ele=i=>Jae?i.metaKey===!0:i.ctrlKey===!0});function XMe(){dR=!1}function YMe(){dR=!0}function ZMe(){let i=me();(0,tle.useEffect)(()=>{let s=a=>{let c=a.composedPath()[0];if(!(c&&(c.tagName==="INPUT"||c.tagName==="TEXTAREA"))){if(a.key==="z"||a.key==="Z"||a.code==="KeyZ")if(ele(a))a.shiftKey===!0?i.redo():i.undo();else return;else if(a.code==="Space"&&!a.shiftKey&&!a.metaKey&&!a.altKey&&!a.ctrlKey){if(!dR)return;let h=eCe();if(h)if(h.playing)h.pause();else{let{projectId:f,sheetId:g}=h.address,y=(0,hu.prism)(()=>{let T=(0,hu.val)(me().atomP.ahistoric.projects.stateByProjectId[f].stateBySheetId[g].sequence.focusRange);return hu.prism.memo("shouldFollowFocusRange",()=>{let I=h.position;if(T){let A=I>=T.range.start&&I<=T.range.end;return T.enabled?!!A:!0}else return!0},[])&&T&&T.enabled?{range:[T.range.start,T.range.end],isFollowingARange:!0}:{range:[0,(0,hu.val)(h.pointer.length)],isFollowingARange:!1}}),w=h.playDynamicRange((0,hu.prism)(()=>(0,hu.val)(y).range),me().ticker),S=S4(h);w.finally(()=>{S.set(void 0)}),S.set(y)}else return}else if(a.altKey&&(a.key==="\\"||a.code==="Backslash"||a.code==="IntlBackslash"))i.transaction(({stateEditors:h,drafts:f})=>{h.studio.ahistoric.setVisibilityState(f.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;a.preventDefault(),a.stopPropagation()}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[])}var tle,hu,dR,S4,nle,E4=C(()=>{tle=Q(Re()),Fe(),qMe(),_p(),hu=Mt,IA(),dR=!0,S4=tS(i=>new hu.Atom(void 0)),nle=tS(i=>(0,hu.prism)(()=>{let s=S4(i).prism.getValue();if(s)return s.getValue().isFollowingARange;{let{projectId:a,sheetId:c}=i.address,h=(0,hu.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange);if(!h||!h.enabled)return!1;let f=(0,hu.val)(i.pointer.position);return f>=h.range.start&&f<=h.range.end}}))});function QMe(i,s){return Ts(i,{menuItems(){return[{label:"Place marker",callback:()=>{me().transaction(({stateEditors:a})=>{let c=(0,Ec.val)(s.layoutP.sheet),h=c.getSequence();a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:c.address,markers:[{id:BPe(),position:h.position}],snappingFunction:h.closestGridPosition})})}}]}})}var Ec,vl,rle,Dv,ile,ole,sle,C4,ale,lle,ule,cle,dle,hle,JMe=C(()=>{$Me(),no(),mr(),hn(),Ec=Mt,L0(),vl=Q(Re()),Ne(),$d(),Uo(),vr(),lc(),cc(),WMe(),E4(),Ea(),Ms(),Fe(),Ld(),cu(),mv(),Dv=se.div(rle||(rle=H([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>Cc.playhead,i=>i.isVisible?"block":"none"),ole=se.div(ile||(ile=H([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),Ad),C4=se.div(sle||(sle=H([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),hr,Dv,Dv,Ad,Dv),lle=se.div(ale||(ale=H([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Dv),cle=se.div(ule||(ule=H([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),C4,Dv),dle=({layoutP:i})=>{let[s,a]=sr(null),{node:c,toggle:h,close:f}=ac({debugName:"Playhead"},()=>vl.default.createElement(uc,null,vl.default.createElement(Qae,{layoutP:i,onRequestClose:f}))),g=(0,vl.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let S=(0,Ec.val)(i.sheet).getSequence(),T=S.position,I=(0,Ec.val)(i.scaledSpace.toUnitSpace),A=(0,Ec.val)(i.seeker.setIsSeeking);return A(!0),lV(),{onDrag(k,D,O){var F;let V=I(k);S.position=(F=As.checkIfMouseEventSnapToPos(O,{ignore:a}))!=null?F:ai(T+V,0,S.length)},onDragEnd(k){A(!1),fv()},onClick(k){h(k,s.current)}}}}),[i,a]),[y]=xi(a,g);ul(y,"draggingPositionInSequenceEditor","ew-resize"),Ud($n(i.seeker.isSeeking)||y,-1);let[w]=QMe(a,{layoutP:i});return Un(()=>{let S=(0,Ec.val)(i.seeker.isSeeking),T=(0,Ec.val)(i.sheet).getSequence(),I=(0,Ec.val)(nle(T)),A=T.positionPrism.getValue(),k=(0,Ec.val)(i.clippedSpace.fromUnitSpace)(A),D=k>=0&&k<=(0,Ec.val)(i.clippedSpace.width);return vl.default.createElement(vl.default.Fragment,null,w,c,vl.default.createElement(Dv,j({isVisible:D,style:{transform:"translate3d(".concat(k,"px, 0, 0)")},className:"".concat(S&&"seeking"," ").concat(I&&"playheadattachedtofocusrange")},vc("hide")),vl.default.createElement(C4,j({ref:s},As.includePositionSnapAttrs(A)),vl.default.createElement(Gae,{room:8}),vl.default.createElement(lle,null),vl.default.createElement(cle,null,T.positionFormatter.formatForPlayhead(T.closestGridPosition(A)))),vl.default.createElement(ole,z(j({},As.includePositionSnapAttrs(A)),{className:S?"seeking":""}))))},[i,s,c])},hle=dle}),Lv,XS,hR,ple,fle,mle,vle,e2e=C(()=>{Lv=Mt,hn(),Fe(),Iv(),XS=Q(Re()),Ne(),hR=1e3,fle=se.div(ple||(ple=H([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),Sc,hR,i=>i.enabled?"#000000":"transparent"),mle=({layoutP:i})=>{let s=(0,XS.useMemo)(()=>(0,Lv.prism)(()=>{let{projectId:a,sheetId:c}=(0,Lv.val)(i.sheet).address;return(0,Lv.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange)}),[i]);return Un(()=>{let a=s.getValue();if(!a||!a.enabled)return null;let c=(0,Lv.val)(i.rightDims.height)-Sc,h=(0,Lv.val)(i.clippedSpace.fromUnitSpace),f=(0,Lv.val)(i.clippedSpace.width),g=[];{let y=0,w=h(a.range.start),S,T;y>w?(T=0,S=0):(w>f&&(w=f),T=y,S=(w-y)/hR),g.push({translateX:T,scaleX:S})}{let y=h(a.range.end),w=f,S,T;y>w?(T=0,S=0):(y<0&&(y=0),T=y,S=(w-y)/hR),g.push({translateX:T,scaleX:S})}return XS.default.createElement(XS.default.Fragment,null,g.map(({translateX:y,scaleX:w},S)=>XS.default.createElement(fle,{key:"curtain-".concat(S),enabled:!0,style:{height:"".concat(c,"px"),transform:"translateX(".concat(y,"px) scaleX(").concat(w,")")}})))},[i,s])},vle=mle}),tb,gle,yle,ble,_le,wle,t2e=C(()=>{tb=Q(Re()),Ne(),hn(),Fe(),sv(),TB(),yle=se.div(gle||(gle=H([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),se.div(ble||(ble=H([`
  `,`;
  white-space: nowrap;
`])),Cp),_le=({layoutP:i,marker:s})=>{var a;let c=$n(i.sheet),h=(0,tb.useMemo)(()=>{let g;return{temporarilySetValue(y){g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})},discardTemporaryValue(){g&&(g.discard(),g=void 0)},permanentlySetValue(y){g&&(g.discard(),g=void 0),me().transaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})}}},[i,c]),f=(0,tb.useRef)(null);return(0,tb.useLayoutEffect)(()=>{f.current.focus()},[]),tb.default.createElement(yle,null,tb.default.createElement(mA,z(j({value:(a=s.label)!=null?a:""},h),{isValid:()=>!0,inputRef:f})))},wle=_le});function n2e(i,s){return Ts(i,{menuItems(){return[{label:"Remove marker",callback:()=>{me().transaction(({stateEditors:a})=>{a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:s.sheetAddress,markerId:s.markerId})})}}]}})}function r2e(i,s){let a=(0,Ds.useRef)(s);a.current=s;let c=(0,Ds.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(s.marker.id,")"),onDragStart(f){let g=a.current.marker,y=(0,pR.val)(s.layoutP.scaledSpace.toUnitSpace),w;return lV(),{onDrag(S,T,I){var A;let k=g,D=Math.max((A=As.checkIfMouseEventSnapToPos(I,{ignore:i}))!=null?A:k.position+y(S),0);w==null||w.discard(),w=me().tempTransaction(({stateEditors:O})=>{O.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,pR.val)(s.layoutP.sheet.address),markers:[z(j({},k),{position:D})],snappingFunction:(0,pR.val)(s.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(S){S?w==null||w.commit():w==null||w.discard(),fv()}}}}),[]),[h]=xi(i,c);return Ud(h,s.marker.position),ul(h,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[h]}var pR,Ds,P4,k4,xle,Sle,Ele,Cle,Ple,fR,kle,Tle,Mle,Ale,Ile,Rle,i2e=C(()=>{pR=Mt,hn(),Fe(),Ea(),Ms(),mr(),Ds=Q(Re()),Ne(),Uo(),no(),$d(),cu(),bI(),gne(),mv(),lc(),cc(),t2e(),P4=12,k4=12,xle=P4*2,Sle=k4*2,Cle=se.div(Ele||(Ele=H([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>Cc.marker),fR=se.div(Ple||(Ple=H([`
  position: absolute;
  `,`
  pointer-events: none;
`])),hl(P4,k4)),kle=Ds.default.memo(()=>Ds.default.createElement(fR,{children:Ds.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ds.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),Mle=se.div(Tle||(Tle=H([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),gc.CSS,gc.CSS_WHEN_SOMETHING_DRAGGING,gc.BEING_DRAGGED_CLASS,Ad,fR,gc.BEING_DRAGGED_CLASS,fR,hl(xle,Sle)),Ale=({layoutP:i,markerId:s})=>{let a=$n(i.sheet.address),c=$n(me().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet.byId[s]);if(!c)return null;let h=$n(i.clippedSpace.width),f=$n(i.clippedSpace.fromUnitSpace)(c.position),g=f<=0||f>h,y=g?-1e4:f,w=g?0:1;return Ds.default.createElement(Cle,{style:{transform:"translateX(".concat(y,"px) scale(").concat(w,")")}},Ds.default.createElement(Rle,{marker:c,layoutP:i}))},Ile=Ale,Rle=({layoutP:i,marker:s})=>{let a=$n(i.sheet.address),[c,h]=sr(null),[f]=n2e(h,{sheetAddress:a,markerId:s.id}),[g]=r2e(h,{layoutP:i,marker:s}),{node:y,toggle:w,close:S}=ac({debugName:"MarkerPopover"},()=>Ds.default.createElement(uc,null,Ds.default.createElement(wle,{marker:s,layoutP:i,onRequestClose:S})));return Ds.default.createElement(Ds.default.Fragment,null,f,y,Ds.default.createElement(Mle,j({title:s.label?"Marker: ".concat(s.label):"Marker",ref:c,onClick:T=>{w(T,c.current)}},gc.reactProps({isDragging:g,position:s.position}))),Ds.default.createElement(kle,null))}}),mR,Ole,Dle,o2e=C(()=>{hn(),Fe(),mR=Q(Re()),i2e(),Ole=({layoutP:i})=>{let s=$n(i.sheet.address),a=me().atomP.historic.projects.stateByProjectId[s.projectId].stateBySheetId[s.sheetId].sequenceEditor.markerSet,c=$n(a.allIds);return mR.default.createElement(mR.default.Fragment,null,c&&Object.keys(c).map(h=>mR.default.createElement(Ile,{key:h,layoutP:i,markerId:h})))},Dle=Ole}),Lle,Gd,Nle,Fle,Ble,Ule,s2e=C(()=>{$d(),hn(),Lle=Mt,Gd=Q(Re()),Ne(),zMe(),HMe(),GMe(),JMe(),Iv(),e2e(),o2e(),Fle=se.div(Nle||(Nle=H([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>Cc.rightOverlay),Ble=({layoutP:i})=>Un(()=>{let s=(0,Lle.val)(i.rightDims.width);return Gd.default.createElement(Fle,{style:{width:s+"px"}},Gd.default.createElement(hle,{layoutP:i}),Gd.default.createElement(Uae,{layoutP:i}),Gd.default.createElement(Tae,{layoutP:i}),Gd.default.createElement(eae,{layoutP:i}),Gd.default.createElement(Dle,{layoutP:i}),Gd.default.createElement(_ae,{layoutP:i}),Gd.default.createElement(vle,{layoutP:i}))},[i]),Ule=Ble}),Vle,vR,jle,zle,Hle,Gle,a2e=C(()=>{Vle=Mt,hn(),Fe(),vR=Q(Re()),Ne(),Ay(),Uo(),zle=se.button(jle||(jle=H([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),Hle=({layoutP:i})=>{let s=$n(i.graphEditorDims.isOpen),a=(0,vR.useCallback)(()=>{let c=(0,Vle.val)(i.graphEditorDims.isOpen);me().transaction(({stateEditors:h})=>{h.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!c})})},[i]);return vR.default.createElement(zle,j({onClick:a,title:"Toggle graph editor",className:s?"open":""},vc("hide")),vR.default.createElement(XCe,null))},Gle=Hle}),pu,ci,$le,Wle,Kle,qle,Cc,Xle,Yle,Zle,Qle,Jle,eue,tue,nue,rue,$d=C(()=>{_p(),hn(),Pte(),pu=Mt,ci=Q(Re()),Ne(),xMe(),tR(),RMe(),s2e(),Hy(),Iee(),ste(),Uo(),Wn(),Qr(),a2e(),Td(),lv(),Wle=se(KU)($le||($le=H([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),xy.sequenceEditorPanel),qle=se.div(Kle||(Kle=H([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),Cc=(()=>{let i={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},s=-1;for(let a of Object.keys(i))i[a]=s,s++;return i})(),Yle=se(jU)(Xle||(Xle=H([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),Zle={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Qle={width:800,height:200},Jle=i=>ci.default.createElement(VU,{panelId:"sequenceEditor",defaultPosition:Zle,minDims:Qle},ci.default.createElement(eue,null)),eue=()=>{let{dims:i}=zy(),[s,a]=(0,ci.useState)(null);return KY(s),Un(()=>{let c=pu.prism.memo("panelSize",()=>{let A=i.width,k=i.height;return{width:A,height:k,widthWithoutBorder:A-2,heightWithoutBorder:k-4,screenX:i.left,screenY:i.top}},[i]),h=ns(bp().filter(A=>Gt(A)||Dt(A)).map(A=>Dt(A)?A.sheet:A));if(ns(h.map(A=>A.template)).length!==1)return ci.default.createElement(ci.default.Fragment,null);let f=h[0];if(!f)return ci.default.createElement(ci.default.Fragment,null);let g=XU("panelSizeP",c).pointer,y=pu.prism.memo("key",()=>JSON.stringify(f.address),[f]),w=pu.prism.memo("layout",()=>IMe(f,g),[f,g]).getValue();if((0,pu.val)(w.tree.children).length===0)return ci.default.createElement(ci.default.Fragment,null);let S=pu.prism.memo("containerRef",rue,[]),T=(0,pu.val)(w.graphEditorDims.isAvailable),I=(0,pu.val)(w.graphEditorDims.isOpen);return ci.default.createElement(Wle,{ref:A=>{S(A),A!==s&&a(A)}},ci.default.createElement(qle,{style:{width:"".concat((0,pu.val)(w.leftDims.width),"px")}}),ci.default.createElement(pne,{layoutP:w},ci.default.createElement(tue,{layoutP:w}),ci.default.createElement(bse,{key:y+"-dopeSheet",layoutP:w}),I&&ci.default.createElement(joe,{key:y+"-graphEditor",layoutP:w}),T&&ci.default.createElement(Gle,{layoutP:w}),ci.default.createElement(Ule,{layoutP:w})))},[i,s])},tue=({layoutP:i})=>Un(()=>{let s=(0,pu.val)(i.sheet);return ci.default.createElement(Yle,{style:{width:(0,pu.val)(i.leftDims.width)}},ci.default.createElement(qF,null,ci.default.createElement(yp,null,s.address.sheetId," "),ci.default.createElement(jx,null,":"," "),ci.default.createElement(yp,null,s.address.sheetInstanceId," "),ci.default.createElement(jx,null," ",">"," "),ci.default.createElement(yp,null,"Sequence")))},[i]),nue=Jle,rue=()=>{let i=null,s={passive:!1,capture:!1},a=c=>{Math.abs(c.deltaY)<Math.abs(c.deltaX)&&(c.preventDefault(),c.stopPropagation())};return c=>{i!==c&&i&&i.removeEventListener("wheel",a,s),i=c,c&&c.addEventListener("wheel",a,s)}}}),Nv,iue,oue,l2e=C(()=>{cCe(),FU(),Nv=Q(Re()),Fe(),hn(),Eke(),$d(),iue=()=>{let i=$n(me().paneManager.allPanesD),s=Object.entries(i).map(([a,c])=>Nv.default.createElement(Cte,{key:"pane-".concat(a),paneInstance:c}));return Nv.default.createElement(Nv.default.Fragment,null,s,Nv.default.createElement(fK,null),Nv.default.createElement(Pee,null),Nv.default.createElement(nue,null))},oue=iue}),sue,aue,lue,u2e=C(()=>{Ne(),ZA(),aue=se(Uy)(sue||(sue=H([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),lue=aue}),c2e=K((i,s)=>{var a,c;a=[],c=[];function h(f,g,y){var w,S,T,I,A,k,D,O;if(f===g)return 0;if(w=f.length,S=g.length,w===0)return S;if(S===0)return w;for(y&&(f=f.toLowerCase(),g=g.toLowerCase()),D=0;D<w;)c[D]=f.charCodeAt(D),a[D]=++D;for(O=0;O<S;)for(T=g.charCodeAt(O),I=A=O++,D=-1;++D<w;)k=T===c[D]?A:A+1,A=a[D],a[D]=I=A>I?k>I?I+1:k:k>A?A+1:k;return I}s.exports=h}),d2e=K((i,s)=>{var a=c2e();function c(){var h,f,g,y,w,S=0,T=arguments[0],I=arguments[1],A=I.length,k=arguments[2];k&&(y=k.threshold,w=k.ignoreCase),y===void 0&&(y=0);for(var D=0;D<A;++D)w?f=a(T,I[D],!0):f=a(T,I[D]),f>T.length?h=1-f/I[D].length:h=1-f/T.length,h>S&&(S=h,g=I[D]);return S>=y?g:null}s.exports=c});function h2e(i,s,a="Did you mean ",c="?"){let h=(0,uue.default)(i,s,{threshold:.7});return h?a+JSON.stringify(h)+c:""}var uue,p2e=C(()=>{uue=Q(d2e())});function cue(i,s){return i.length<=s?i:i.substr(0,s-3)+"..."}var f2e=C(()=>{}),due,T4,hue=C(()=>{f2e(),due=i=>typeof i=="string"?'string("'.concat(cue(i,10),'")'):typeof i=="number"?"number(".concat(cue(String(i),10),")"):i===null?"null":i===void 0?"undefined":typeof i=="boolean"?String(i):Array.isArray(i)?"array":typeof i=="object"?"object":"unknown",T4=due}),pue,fue,M4,mue=C(()=>{Ne(),rv(),fue=se(YW)(pue||(pue=H([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),M4=fue}),nb,vue,gue,yue,rb,YS=C(()=>{Ne(),vr(),nb=Q(Re()),yS(),dA(),PJ(),mue(),gue=se.button(vue||(vue=H([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,M4),yue=nb.default.forwardRef((i,s)=>{var a=i,{title:c}=a,h=U(a,["title"]);let[f,g]=By({enabled:typeof c=="string"},()=>nb.default.createElement(TU,null,c));return nb.default.createElement(nb.default.Fragment,null,f,nb.default.createElement(gue,j({ref:cA([g,s])},h))," ")}),rb=yue}),bue,_ue,wue,xue,Sue,m2e=C(()=>{bue=Q(Re()),YS(),Ne(),vr(),wue=se(rb)(_ue||(_ue=H([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),xue=({config:i,testId:s})=>{var a;return bue.default.createElement(wue,{onClick:i.onClick,"data-testid":s,title:i.title,dangerouslySetInnerHTML:{__html:(a=i.svgSource)!=null?a:""}})},Sue=xue});function v2e({value:i,label:s,icon:a,onClick:c,isSelected:h}){return ib.default.createElement(ib.default.Fragment,null,ib.default.createElement(rb,{forwardedAs:KW,className:h?"selected":void 0,"aria-label":s,onClick:c,title:s},a))}var ib,Eue,Cue,g2e=C(()=>{ib=Q(Re()),rv(),YS(),mue(),Eue=({value:i,onChange:s,options:a})=>ib.default.createElement(M4,null,a.map(({label:c,icon:h,value:f})=>ib.default.createElement(v2e,{key:f,value:f,isSelected:i===f,label:c,icon:h,onClick:()=>s(f)}))),Cue=Eue}),A4,Pue,kue,Tue,Mue,y2e=C(()=>{A4=Q(Re()),Ne(),vr(),g2e(),kue=se.div(Pue||(Pue=H([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Tue=({config:i})=>A4.default.createElement(Cue,{onChange:i.onChange,options:i.options.map(({label:s,value:a,svgSource:c})=>({label:s,value:a,icon:A4.default.createElement(kue,{dangerouslySetInnerHTML:{__html:c}})})),value:i.value}),Mue=Tue}),ZS,Aue,Iue,Rue,Oue,b2e=C(()=>{ZS=Q(Re()),Ne(),vr(),YS(),FY(),lc(),Iue=se.div(Aue||(Aue=H([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Rue=({config:i})=>{let s=(0,ZS.useRef)(null),a=ac(()=>{let c=s.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+i.label,constraints:{maxX:c.right,maxY:8,minX:c.left,minY:8},verticalGap:2}},()=>ZS.default.createElement(rU,{items:i.items.map((c,h)=>({label:c.label,callback:()=>{var f;try{(f=c.onClick)==null||f.call(c)}catch(g){console.error(g)}}})),onRequestClose:()=>{a.close("clicked")}}));return ZS.default.createElement(Iue,null,a.node,ZS.default.createElement(rb,{ref:s,onClick:c=>{a.open(c,s.current)}},i.label))},Oue=Rue});function _2e(i){return I4[i]}var QS,Due,I4,Lue,Nue,w2e=C(()=>{p2e(),hue(),QS=Q(Re()),m2e(),y2e(),b2e(),Due=i=>QS.default.createElement(QS.default.Fragment,null,i.config.map((s,a)=>QS.default.createElement(Lue,{config:s,key:a}))),I4={Icon:Sue,Switch:Mue,Flyout:Oue},Lue=({config:i})=>{let s=_2e(i.type);if(!s)throw new Error("No tool with tool.type ".concat(T4(i.type)," exists. Did you mean ").concat(h2e(i.type,Object.keys(I4))));return QS.default.createElement(s,{config:i})},Nue=Due}),Fue,Pc,Bue,Uue,Vue,R4,jue,zue,O4,Hue=C(()=>{Fue=Mt,hn(),Fe(),Pc=Q(Re()),Ne(),w2e(),Uue=se.div(Bue||(Bue=H([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),R4=se.div(Vue||(Vue=H([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),jue=({extension:i,toolbarId:s})=>{var a;let c=(0,Pc.useMemo)(()=>new Fue.Atom([]),[]),h=(a=i.toolbars)==null?void 0:a[s];(0,Pc.useLayoutEffect)(()=>{let g=h==null?void 0:h(c.set.bind(c),me().publicApi);if(typeof g=="function")return g},[i,s,h]);let f=$n(c.prism);return Pc.default.createElement(Nue,{config:f})},zue=({toolbarId:i,showLeftDivider:s})=>{var a;let c=[],h=$n(me().atomP.ephemeral.extensions.byId),f=!1;for(let[,g]of Object.entries(h))!g||!((a=g.toolbars)!=null&&a[i])||(c.push(Pc.default.createElement(Pc.default.Fragment,{key:"extensionToolbar-"+g.id},f?Pc.default.createElement(R4,null):void 0,Pc.default.createElement(jue,{extension:g,toolbarId:i}))),f=!0);return c.length===0?null:Pc.default.createElement(Uue,{"data-testid":"theatre-extensionToolbar-".concat(i)},s?Pc.default.createElement(R4,null):void 0,c)},O4=zue}),JS,Gue,$ue,Wue,gR,x2e=C(()=>{Ne(),JS=Q(Re()),YS(),$ue=se(rb)(Gue||(Gue=H([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:i})=>i?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:i})=>i?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),Wue=(0,JS.forwardRef)((i,s)=>{var a=i,{children:c,hint:h,pinned:f,icon:g,pinHintIcon:y,unpinHintIcon:w}=a,S=U(a,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[T,I]=(0,JS.useState)(!1),A=T||h;return JS.default.createElement($ue,z(j({},S),{pinned:f,ref:s,onMouseOver:()=>I(!0),onMouseOut:()=>I(!1)}),JS.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},A&&!f?y:A&&f?w:g),c)}),gR=Wue});function S2e(i){return D4.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),D4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var D4,L4,E2e=C(()=>{D4=Q(Re()),L4=S2e});function C2e(i){return N4.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),N4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var N4,F4,P2e=C(()=>{N4=Q(Re()),F4=C2e}),io,Kue,que,Xue,B4,Yue,Hp,Zue,Que,Jue,ece,tce,nce,rce,ice,oce,yR,sce,ace,U4,V4,lce,uce,k2e=C(()=>{hn(),Fe(),io=Q(Re()),Ne(),que=se.div(Kue||(Kue=H([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),B4=se.div(Xue||(Xue=H([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Hp=se(B4)(Yue||(Yue=H([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),Que=se(B4)(Zue||(Zue=H([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),ece=se.div(Jue||(Jue=H([`
  font-weight: 600;
`]))),nce=se.div(tce||(tce=H([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),ice=se.div(rce||(rce=H([`
  margin-left: 2px;
`]))),yR=se.div(oce||(oce=H([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),ace=se.div(sce||(sce=H([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),U4="0.7.0",V4=U4.match(/^[^\-]+/)[0],lce=io.default.forwardRef((i,s)=>{let a=$n(me().atomP.ahistoric.updateChecker.result.hasUpdates);return io.default.createElement(que,{ref:s},io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),io.default.createElement(yR,null),io.default.createElement(Hp,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),io.default.createElement(Hp,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),io.default.createElement(Hp,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),io.default.createElement(yR,null),io.default.createElement(Que,null,io.default.createElement(ece,null,"Version"),io.default.createElement(nce,null,io.default.createElement(ice,null,U4," ",a===!0?"(outdated)":a===!1?"(latest)":""))),a===!0&&io.default.createElement(io.default.Fragment,null,io.default.createElement(yR,null),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(V4)),className:"",target:"_blank"},"Update",io.default.createElement(ace,null)),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(V4)),className:"",target:"_blank"},"What's new?")))}),uce=lce}),Fr,cce,dce,hce,pce,fce,mce,j4,vce,z4,gce,H4,yce,bce,T2e=C(()=>{hn(),Fe(),Fr=Q(Re()),Ne(),yS(),u2e(),ZA(),cce=Mt,Hue(),x2e(),zx(),E2e(),P2e(),YS(),lc(),k2e(),kS(),hce=se.div(dce||(dce=H([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),fce=se.div(pce||(pce=H([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),j4=se.div(mce||(mce=H([`
  display: flex;
  gap: 8px;
`]))),z4=se.div(vce||(vce=H([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:i})=>i==="info"?"#40aaa4":"#f59e0b"),se.div(gce||(gce=H([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),H4=!1,yce=()=>{var i,s,a;let c=Un(()=>{let O=(0,cce.val)(me().atomP.ephemeral.coreByProject);return Object.entries(O).map(([F,V])=>({projectId:F,state:V})).filter(({state:F})=>F.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[h,f]=By({enabled:c.length>0,enterDelay:c.length>0?0:200},()=>c.length>0?Fr.default.createElement(lue,null,c.length===1?'There is a state conflict in project "'.concat(c[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(c.length," projects that have state conflicts. They are highlighted in the outline below. ")):Fr.default.createElement(Uy,null,Fr.default.createElement(Fr.default.Fragment,null,"Outline"))),g=(i=$n(me().atomP.ahistoric.pinOutline))!=null?i:!0,y=(s=$n(me().atomP.ahistoric.pinDetails))!=null?s:!0,w=$n(me().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,S=ac(()=>{let O=T.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:O.right,maxY:8,minX:O.left-140,minY:8},verticalGap:2}},()=>Fr.default.createElement(uce,null)),T=(0,Fr.useRef)(null),I=(0,Fr.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(H4||(H4=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),w||window.__IS_VISUAL_REGRESSION_TESTING?!0:w),[w]),{hasNotifications:A}=IU(),[k,D]=qJ();return Fr.default.createElement(hce,null,Fr.default.createElement(j4,null,h,Fr.default.createElement(gR,{ref:f,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinOutline(!((V=F.ahistoric.pinOutline)==null||V))})},icon:Fr.default.createElement(YF,null),pinHintIcon:Fr.default.createElement(F4,null),unpinHintIcon:Fr.default.createElement(L4,null),pinned:g}),c.length>0?Fr.default.createElement(fce,null,c.length):null,Fr.default.createElement(O4,{showLeftDivider:!0,toolbarId:"global"})),Fr.default.createElement(j4,null,k,Fr.default.createElement(gR,{ref:D,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinNotifications(!((V=F.ahistoric.pinNotifications)!=null&&V))})},icon:Fr.default.createElement(oA,null),pinHintIcon:Fr.default.createElement(oA,null),unpinHintIcon:Fr.default.createElement(oA,null),pinned:(a=$n(me().atomP.ahistoric.pinNotifications))!=null?a:!1},A&&Fr.default.createElement(z4,{type:"warning"})),S.node,Fr.default.createElement(rb,{ref:T,onClick:O=>{S.toggle(O,T.current)}},Fr.default.createElement(p7,null),I&&Fr.default.createElement(z4,{type:"info"})),Fr.default.createElement(gR,{ref:f,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinDetails(!((V=F.ahistoric.pinDetails)==null||V))})},icon:Fr.default.createElement(h7,null),pinHintIcon:Fr.default.createElement(L4,null),unpinHintIcon:Fr.default.createElement(F4,null),pinned:y})))},bce=yce}),_ce,eE,wce,tE,xce,Sce,Ece,Cce,Pce=C(()=>{_ce=Mt,hn(),eE=Q(Re()),wce=Q(ql()),tE=new _ce.Atom({set:{},byId:{}}),xce=1,Sce=()=>{let i=xce++;function s(c,h,f){tE.reduce(g=>({byId:z(j({},g.byId),{[i]:{comp:c,props:h,portalNode:f}}),set:z(j({},g.set),{[i]:!0})}))}function a(){tE.reduce(c=>{let h=j({},c.set),f=j({},c.byId);return delete h[i],{byId:f,set:h}})}return{mountOrRender:s,unmount:a}},Ece=()=>{let i=Object.keys($n(tE.pointer.set));return eE.default.createElement(eE.default.Fragment,null,i.map(s=>eE.default.createElement(Cce,{key:"id-"+s,id:s})))},Cce=({id:i})=>{let{comp:s,portalNode:a,props:c}=$n(tE.pointer.byId[i]);return(0,wce.createPortal)(eE.default.createElement(s,j({},c)),a)}});function M2e(i){let s=me(),[a,c]=sr(void 0),h=_se();h.configureLogging({min:128,dev:$4,internal:$4});let f=h.getLogger().named("Theatre.js UIRoot");ZMe();let g=$n(s.atomP.ahistoric.visibilityState);return(0,zo.useEffect)(()=>(g==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[g]),Un(()=>{let y=(0,G4.val)(s.atomP.ahistoric.visibilityState);return(0,G4.val)(s.atomP.ephemeral.initialised)?zo.default.createElement(AK,{logger:f},zo.default.createElement(RQ,null,zo.default.createElement(mCe,null,zo.default.createElement(Rce,null),zo.default.createElement(_y.Provider,{value:c},zo.default.createElement(KF,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:i.containerShadow},zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(Tce,null),zo.default.createElement(Ace,{className:y==="everythingIsHidden"?"invisible":""},zo.default.createElement(WF,{ref:a}),zo.default.createElement(bce,null),zo.default.createElement(oue,null),zo.default.createElement(XJ,null)))))))):null},[s,a,c])}var G4,zo,kce,Tce,Mce,Ace,Ice,$4,Rce,A2e=C(()=>{Fe(),hn(),G4=Mt,zo=Q(Re()),Ne(),l2e(),T2e(),mr(),rv(),E4(),Ea(),OQ(),yB(),Pce(),vr(),iR(),xp(),kS(),Tce=typeof window<"u"?il(kce||(kce=H([`
  :host {
    contain: strict;
  }
`]))):{},Ace=se(MK)(Mce||(Mce=H([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),$4=/Playground.+Theatre\.js/.test((Ice=typeof document<"u"?document==null?void 0:document.title:null)!=null?Ice:""),Rce=()=>zo.default.createElement(Ece,null)}),I2e=K(i=>{var s=ql();i.createRoot=s.createRoot,i.hydrateRoot=s.hydrateRoot}),Oce={};te(Oce,{default:()=>Nce});var Dce,Lce,Nce,R2e=C(()=>{A2e(),Dce=Q(Re()),Lce=Q(I2e()),Pce(),vr(),Hue(),Nce=class{constructor(){Pe(this,"containerEl",document.createElement("div")),Pe(this,"_renderTimeout"),Pe(this,"_documentBodyUIIsRenderedIn"),Pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let i=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let s=document.createElement("div");return s.id="theatrejs-faux-shadow-root",document.body.appendChild(s),s}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=i()}render(){let i=()=>{if(!document.body){this._renderTimeout=setTimeout(i,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),Lce.default.createRoot(this.containerShadow).render(Dce.default.createElement(M2e,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(i,10)}renderToolset(i,s){let a=Sce();return a.mountOrRender(FEe(O4),{toolbarId:i},s),a.unmount}}}),O2e=K(i=>{i.compare=h,i.reduce=f;var s,a,c;i.REMOVE=s=-1,i.ADD=a=1,i.EQUAL=c=0;function h(T,I){var A=T.length,k=I.length,D=g(T,I),O=D<A&&D<k?y(T,I):0,F=O+D-1;A-=F,k-=F;for(var V=S(A,k),$=A-1;$>=0;--$)for(var X=k-1;X>=0;--X)V[X][$]=w(V,T,I,D,$,X);return{prefix:D,matrix:V,suffix:O}}function f(T,I,A){var k,D,O,F,V=A.matrix,$=A.prefix;for(k=0;k<$;++k)I=T(I,c,k,k);for(O=k,$=V.length,k=0,D=0;k<$;)switch(F=V[k][D].type,I=T(I,F,k+O,D+O),F){case c:++k,++D;break;case s:++D;break;case a:++k;break}for(k+=O,D+=O,$=A.suffix,O=0;O<$;++O)I=T(I,c,k+O,D+O);return I}function g(T,I){for(var A=0,k=Math.min(T.length,I.length);A<k&&T[A]===I[A];)++A;return A}function y(T,I){for(var A=T.length-1,k=I.length-1,D=Math.min(A,k),O=0;O<D&&T[A-O]===I[k-O];)++O;return O}function w(T,I,A,k,D,O){return I[D+k]===A[O+k]?{value:T[O+1][D+1].value,type:c}:T[O][D+1].value<T[O+1][D].value?{value:T[O][D+1].value+1,type:s}:{value:T[O+1][D].value+1,type:a}}function S(T,I){var A=[],k,D,O;for(O=A[I]=[],D=0;D<T;++D)O[D]={value:T-D,type:s};for(k=0;k<I;++k)A[k]=[],A[k][T]={value:I-k,type:a};return A[I][T]={value:0,type:c},A}}),Fce=K(i=>{i.cons=s,i.tail=a,i.map=c;function s(h,f){var g=f.length,y=new Array(g+1);y[0]=h;for(var w=0;w<g;++w)y[w+1]=f[w];return y}function a(h){for(var f=h.length-1,g=new Array(f),y=0;y<f;++y)g[y]=h[y+1];return g}function c(h,f){for(var g=new Array(f.length),y=0;y<f.length;++y)g[y]=h(f[y]);return g}}),D2e=K((i,s)=>{s.exports=g;var a=/\/|~1|~0/g,c="/",h="~",f="~1";function g(y,w){var S,T,I,A;for(S=y.charAt(0)===c?1:0,T="",a.lastIndex=S;I=a.exec(y);)if(A=I[0],T+=y.slice(S,a.lastIndex-A.length),S=a.lastIndex,A===c){if(w(T)===!1)return y;T=""}else T+=A===f?c:h;return T+=y.slice(S),w(T),y}}),W4=K(i=>{var s=D2e();i.find=T,i.join=A,i.absolute=I,i.parse=k,i.contains=D,i.encodeSegment=F,i.decodeSegment=O,i.parseArrayIndex=X,i.isValidArrayIndex=$;var a="/",c=/\//g,h="~1",f=/~1/g,g="~",y=/~/g,w="~0",S=/~0/g;function T(ne,ae,xe,fe){if(typeof ae=="string"){if(ae==="")return{target:ne,key:void 0};if(ae===a)return{target:ne,key:""};var ge=ne,Ie,Qe=fe!==void 0;return s(ae,function(le){if(ne==null)return ge=null,!1;Array.isArray(ne)?Ie=Qe?re(xe,X(le),ne,fe):le==="-"?le:X(le):Ie=le,ge=ne,ne=ne[Ie]}),ge===null?void 0:{target:ge,key:Ie}}}function I(ne){return ne[0]===a?ne:a+ne}function A(ne){return ne.join(a)}function k(ne){var ae=[];return s(ne,ae.push.bind(ae)),ae}function D(ne,ae){return ae.indexOf(ne)===0&&ae[ne.length]===a}function O(ne){return ne.replace(f,a).replace(S,g)}function F(ne){return ne.replace(y,w).replace(c,h)}var V=/^(0|[1-9]\d*)$/;function $(ne){return V.test(ne)}function X(ne){if($(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,ae,xe,fe){var ge=ae;if(ge<0)throw new Error("array index out of bounds "+ge);if(fe!==void 0&&typeof ne=="function"&&(ge=ne(ae,xe,fe),ge<0))throw new Error("could not find patch context "+fe);return ge}}),Bce=K((i,s)=>{s.exports=a;function a(f){return f==null||typeof f!="object"?f:Array.isArray(f)?c(f):h(f)}function c(f){for(var g=f.length,y=new Array(g),w=0;w<g;++w)y[w]=a(f[w]);return y}function h(f){for(var g=Object.keys(f),y={},w,S=0,T=g.length;S<T;++S)w=g[S],y[w]=a(f[w]);return y}}),L2e=K((i,s)=>{s.exports=a;function a(f,g){return f===g?!0:Array.isArray(f)&&Array.isArray(g)?c(f,g):typeof f=="object"&&typeof g=="object"?h(f,g):!1}function c(f,g){if(f.length!==g.length)return!1;for(var y=0;y<f.length;++y)if(!a(f[y],g[y]))return!1;return!0}function h(f,g){if(f===null&&g!==null||f!==null&&g===null)return!1;var y=Object.keys(f),w=Object.keys(g);if(y.length!==w.length)return!1;for(var S=0,T;S<y.length;++S)if(T=y[S],!(T in g&&a(f[T],g[T])))return!1;return!0}}),N2e=K((i,s)=>{var a=W4();s.exports=function(T,I){var A=a.parse(T.path),k=a.parse(I.path),D=w(A,k),O=f(A,k,D.length),F=S(T),V=S(I);return D.length===0&&!O?[V,F]:O?h(F,A,V,k):c(F,A,V)};function c(T,I,A,k){if(T.path===A.path)throw new TypeError("cannot commute "+T.op+","+A.op+" with identical object paths");return[A,T]}function h(T,I,A,k){return I.length===k.length?g(T,I,A,k):(I.length>k.length?(I=y(A,k,T,I,-1),T.path=a.absolute(a.join(I))):(k=y(T,I,A,k,1),A.path=a.absolute(a.join(k))),[A,T])}function f(T,I,A){return a.isValidArrayIndex(T[A])&&a.isValidArrayIndex(I[A])}function g(T,I,A,k){var D=I.length-1,O=+I[D],F=+k[D],V;return O<F?T.op==="add"||T.op==="copy"?(V=k.slice(),V[D]=Math.max(0,F-1),A.path=a.absolute(a.join(V))):T.op==="remove"&&(V=k.slice(),V[D]=F+1,A.path=a.absolute(a.join(V))):A.op==="add"||A.op==="copy"?(V=I.slice(),V[D]=O+1,T.path=a.absolute(a.join(V))):O>F&&A.op==="remove"&&(V=I.slice(),V[D]=Math.max(0,O-1),T.path=a.absolute(a.join(V))),[A,T]}function y(T,I,A,k,D){var O=I.length-1,F=+I[O],V=+k[O],$=k.slice();return F>V||(T.op==="add"||T.op==="copy"?$[O]=Math.max(0,V-D):T.op==="remove"&&($[O]=Math.max(0,V+D))),$}function w(T,I){var A=T.length,k=I.length;if(A===0||k===0||A<2&&k<2)return[];for(var D=A===k?A-1:Math.min(A,k),O=0;O<D&&T[O]===I[O];)++O;return T.slice(0,O)}function S(T){return T.op==="remove"?{op:T.op,path:T.path}:T.op==="copy"||T.op==="move"?{op:T.op,path:T.path,from:T.from}:{op:T.op,path:T.path,value:T.value}}}),Uce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),K4=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),Vce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),jce=K(i=>{var s=W4(),a=Bce(),c=L2e(),h=N2e(),f=Fce(),g=Uce(),y=K4(),w=Vce(),S=s.find,T=s.parseArrayIndex;i.test={apply:I,inverse:A,commute:k},i.add={apply:D,inverse:F,commute:V},i.remove={apply:ne,inverse:xe,commute:fe},i.replace={apply:$,inverse:X,commute:re},i.move={apply:ge,inverse:Ie,commute:Qe},i.copy={apply:le,inverse:Ae,commute:V};function I(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=wt.target,he,qe;if(Array.isArray(ue)?(he=T(wt.key),qe=ue[he]):qe=wt.key===void 0?wt.target:wt.target[wt.key],!c(qe,Te.value))throw new g("test failed "+JSON.stringify(Te));return ke}function A(ke,Te){return ke.push(Te),1}function k(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:h(ke,Te)}function D(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);return wt.key===void 0?ue:(O(wt,ue),ke)}function O(ke,Te){var je=ke.target;if(Array.isArray(je))if(ke.key==="-")je.push(Te);else{if(ke.key>je.length)throw new y("target of add outside of array bounds");je.splice(ke.key,0,Te)}else if(Tt(je))je[ke.key]=Te;else throw new y("target of add must be an object or array "+ke.key)}function F(ke,Te){var je=Te.context;return je!==void 0&&(je={before:je.before,after:f.cons(Te.value,je.after)}),ke.push({op:"test",path:Te.path,value:Te.value,context:je}),ke.push({op:"remove",path:Te.path,context:je}),1}function V(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return h(ke,Te)}function $(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||Ue(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);if(wt.key===void 0)return ue;var he=wt.target;return Array.isArray(he)?he[T(wt.key)]=ue:he[wt.key]=ue,ke}function X(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert replace w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.cons(ue.value,f.tail(he.after))}),ke.push({op:"test",path:ue.path,value:Te.value}),ke.push({op:"replace",path:ue.path,value:ue.value}),2}function re(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:h(ke,Te)}function ne(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||wt.target[wt.key]===void 0)throw new y("path does not exist "+Te.path);return ae(wt),ke}function ae(ke){var Te=ke.target,je;if(Array.isArray(Te))return je=Te.splice(T(ke.key),1),je[0];if(Tt(Te))return je=Te[ke.key],delete Te[ke.key],je;throw new y("target of remove must be an object or array")}function xe(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert remove w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.tail(he.after)}),ke.push({op:"add",path:ue.path,value:ue.value,context:he}),2}function fe(ke,Te){return ke.path===Te.path&&Te.op==="remove"?[Te,ke]:h(ke,Te)}function ge(ke,Te,je){if(s.contains(Te.path,Te.from))throw new y("move.from cannot be ancestor of move.path");var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);return O(wt,ae(ue)),ke}function Ie(ke,Te){return ke.push({op:"move",path:Te.from,context:Te.fromContext,from:Te.path,fromContext:Te.context}),1}function Qe(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return h(ke,Te)}function le(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);if(Y(ue)||Ue(ue))throw new y("copy.from must exist");var he=ue.target,qe;return Array.isArray(he)?qe=he[T(ue.key)]:qe=he[ue.key],O(wt,a(qe)),ke}function Ae(ke,Te){throw new w("cannot invert "+Te.op)}function Y(ke){return ke===void 0||ke.target==null&&ke.key!==void 0}function Ue(ke){return ke.key!==void 0&&ke.target[ke.key]===void 0}function Tt(ke){return ke!==null&&typeof ke=="object"}}),F2e=K(i=>{var s=jce(),a=Bce(),c=K4();i.apply=f,i.applyInPlace=g,i.clone=a,i.isValidObject=w,i.defaultHash=y;var h={};function f(T,I,A){return g(T,a(I),A)}function g(T,I,A){if(A||(A=h),!Array.isArray(T))return I;for(var k,D,O=0;O<T.length;++O){if(D=T[O],k=s[D.op],k===void 0)throw new c("invalid op "+JSON.stringify(D));I=k.apply(I,D,A)}return I}function y(T){return w(T)||S(T)?JSON.stringify(T):T}function w(T){return T!==null&&Object.prototype.toString.call(T)==="[object Object]"}function S(T){return Object.prototype.toString.call(T)==="[object Array]"}}),B2e=K((i,s)=>{var a=jce();s.exports=function(h){var f=[],g,y;for(g=h.length-1;g>=0;g-=y)y=c(f,h[g],g,h);return f};function c(h,f,g,y){var w=a[f.op];return w!==void 0&&typeof w.inverse=="function"?w.inverse(h,f,g,y):1}}),U2e=K(i=>{var s=O2e(),a=Fce(),c=F2e(),h=B2e(),f=W4(),g=f.encodeSegment;i.diff=S,i.patch=c.apply,i.patchInPlace=c.applyInPlace,i.inverse=h,i.clone=c.clone,i.InvalidPatchOperationError=K4(),i.TestFailedError=Uce(),i.PatchNotInvertibleError=Vce();var y=c.isValidObject,w=c.defaultHash;function S(X,re,ne){return I(X,re,"",T(ne,[])).patch}function T(X,re){return typeof X=="object"?{patch:re,hash:F($,X.hash,w),makeContext:F($,X.makeContext,V),invertible:X.invertible!==!1}:{patch:re,hash:F($,X,w),makeContext:V,invertible:!0}}function I(X,re,ne,ae){return Array.isArray(X)&&Array.isArray(re)?k(X,re,ne,ae):y(X)&&y(re)?A(X,re,ne,ae):O(X,re,ne,ae)}function A(X,re,ne,ae){var xe=Object.keys(re),fe=ae.patch,ge,Ie;for(ge=xe.length-1;ge>=0;--ge){Ie=xe[ge];var Qe=ne+"/"+g(Ie);X[Ie]!==void 0?I(X[Ie],re[Ie],Qe,ae):fe.push({op:"add",path:Qe,value:re[Ie]})}for(xe=Object.keys(X),ge=xe.length-1;ge>=0;--ge)if(Ie=xe[ge],re[Ie]===void 0){var le=ne+"/"+g(Ie);ae.invertible&&fe.push({op:"test",path:le,value:X[Ie]}),fe.push({op:"remove",path:le})}return ae}function k(X,re,ne,ae){var xe=a.map(ae.hash,X),fe=a.map(ae.hash,re),ge=s.compare(xe,fe);return D(X,re,ne,ae,ge)}function D(X,re,ne,ae,xe){var fe=0;return s.reduce(function(ge,Ie,Qe,le){var Ae,Y,Ue=ge.patch,Tt=ne+"/"+(le+fe);return Ie===s.REMOVE?(Ae=Ue[Ue.length-1],Y=ge.makeContext(le,X),ge.invertible&&Ue.push({op:"test",path:Tt,value:X[le],context:Y}),Ae!==void 0&&Ae.op==="add"&&Ae.path===Tt?(Ae.op="replace",Ae.context=Y):Ue.push({op:"remove",path:Tt,context:Y}),fe-=1):Ie===s.ADD?(Ue.push({op:"add",path:Tt,value:re[Qe],context:ge.makeContext(le,X)}),fe+=1):I(X[le],re[Qe],Tt,ge),ge},ae,xe)}function O(X,re,ne,ae){return X!==re&&(ae.invertible&&ae.patch.push({op:"test",path:ne,value:X}),ae.patch.push({op:"replace",path:ne,value:re})),ae}function F(X,re,ne){return X(re)?re:ne}function V(){}function $(X){return typeof X=="function"}}),Fv=K((i,s)=>{function a(c,h){for(var f=0,g=h.length-1;f<g;f++){if(!c[h[f]])return null;c=c[h[f]]}return c}s.exports=a}),Gp=K((i,s)=>{function a(h){return h==="~0"?"~":"/"}function c(h){var f=h.split("/");if(h.indexOf("~")===-1)return f;for(var g=0,y=f.length;g<y;g++)f[g].indexOf("~")!==-1&&(f[g]=f[g].replace(/~[01]/g,a));return f}s.exports=c}),V2e=K((i,s)=>{var a=Fv(),c=Gp();function h(f,g){var y=c(g),w=y[y.length-1],S=a(f,y);return S?S[w]:void 0}s.exports=h}),bR=K((i,s)=>{function a(c,h){if(c===h)return!0;if(!(c&&h)||typeof c!="object"||typeof h!="object"||c.length!==h.length)return!1;if(Array.isArray(c)){if(!Array.isArray(h))return!1;for(var f=0,g=c.length;f<g;f++)if(!a(c[f],h[f]))return!1;return!0}var y=Object.keys(c);if(y.length!==Object.keys(h).length)return!1;for(var w=0,S=y.length;w<S;w++){var T=y[w];if(!a(c[T],h[T]))return!1}return!0}s.exports=a}),_R=K((i,s)=>{function a(c,h){if(h==="-")return c.length;for(var f=0,g=h.length;f<g;f++){var y=h.charCodeAt(f);if(57<y||y<48)return 1/0}return+h}s.exports=a}),wR=K((i,s)=>{var a=bR(),c=Fv(),h=_R(),f=Gp();function g(y,w,S,T){if(typeof S>"u")return"[op:add] require value, but got undefined";var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:add] path not found: "+w;if(Array.isArray(k)){var D=h(k,A);if(k.length<D)return"[op:add] invalid array index: "+w;T(y,I).splice(D,0,S)}else a(k[A],S)||(T(y,I)[A]=S)}s.exports=g}),zce=K((i,s)=>{var a=Fv(),c=_R(),h=Gp();function f(g,y,w){var S=h(y),T=S[S.length-1],I=a(g,S);if(I===null)return"[op:remove] path not found: "+y;if(Array.isArray(I)){var A=c(I,T);if(I.length<=A)return"[op:remove] invalid array index: "+y;w(g,S).splice(A,1)}else delete w(g,S)[T]}s.exports=f}),Hce=K((i,s)=>{var a=bR(),c=Fv(),h=_R(),f=Gp();function g(y,w,S,T){if(typeof S>"u")return"[op:replace] require value, but got undefined";var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:replace] path not found: "+w;if(Array.isArray(k)){var D=h(k,A);if(k.length<=D)return"[op:replace] invalid array index: "+w;a(k[D],S)||T(y,I).splice(D,1,S)}else a(k[A],S)||(T(y,I)[A]=S)}s.exports=g}),Gce=K((i,s)=>{var a=wR(),c=Fv(),h=_R(),f=Gp();function g(y,w,S,T){if(S!==w){var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:move] path not found: "+w;var D=void 0;if(Array.isArray(k)){var O=h(k,A);if(k.length<=O)return"[op:move] invalid array index: "+S;D=k[O],T(y,I).splice(O,1)}else D=k[A],delete T(y,I)[A];return a(y,S,D,T)}}s.exports=g}),$ce=K((i,s)=>{var a=Fv(),c=Gp(),h=wR();function f(g,y,w,S){var T=c(y),I=T[T.length-1],A=a(g,T);return A===null?"[op:copy] path not found: "+y:h(g,w,A[I],S)}s.exports=f}),Wce=K((i,s)=>{var a=bR(),c=Fv(),h=Gp();function f(g,y,w){var S=h(y),T=S[S.length-1],I=c(g,S);if(I===null)return"[op:test] path not found: "+y;if(!a(I[T],w)){var A=JSON.stringify(I[T]),k=JSON.stringify(w);return"[op:test] not matched: "+A+" "+k}}s.exports=f}),q4=K((i,s)=>{function a(c){if(!c||typeof c!="object")return c;if(Array.isArray(c)){for(var h=c.length,f=new Array(h),g=0;g<h;g++)f[g]=c[g];return f}for(var y=Object.keys(c),w={},S=0,T=y.length;S<T;S++){var I=y[S];w[I]=c[I]}return w}s.exports=a}),j2e=K((i,s)=>{var a=V2e(),c=wR(),h=zce(),f=Hce(),g=Gce(),y=$ce(),w=Wce(),S=bR(),T=q4(),I=Gp();function A(k,D){return{get:function(O){return a(k,O)},add:function(O,F){return c(k,O,F,D)},remove:function(O){return h(k,O,D)},replace:function(O,F){return f(k,O,F,D)},move:function(O,F){return g(k,O,F,D)},copy:function(O,F){return y(k,O,F,D)},test:function(O,F){return w(k,O,F)},deepEqual:S,shallowCopy:T,toKeys:I}}s.exports=A}),z2e=K((i,s)=>{function a(c,h,f,g){return g.error=f,g.partial?h[""]:c}s.exports=a}),H2e=K((i,s)=>{function a(c){return!!c}s.exports=a}),G2e=K((i,s)=>{function a(c){if(c)throw new TypeError(c)}s.exports=a}),$2e=K((i,s)=>{var a=q4();function c(h,f){for(var g=0,y=f.length-1;g<y;g++)h=h[f[g]]=a(h[f[g]]);return h}s.exports=c}),W2e=K((i,s)=>{var a=q4();function c(f,g,y){var w=f[g];return y.has(w)||(w=a(w),y.add(w)),w}function h(f,g,y){for(var w=0,S=g.length-1;w<S;w++)f=f[g[w]]=c(f,g[w],y);return f}s.exports=h}),K2e=K((i,s)=>{var a=j2e(),c=z2e(),h=H2e(),f=G2e(),g=$2e(),y=W2e(),w=wR(),S=zce(),T=Hce(),I=Gce(),A=$ce(),k=Wce(),D=Set||function(){var F=[];return F.has=function(V){return this.indexOf(V)!==-1},F.add=function(V){this.push(V)},F};function O(F,V,$){if(V.length===0)return F;$=$||{};for(var X=$.strict?f:h,re=V.length===1?g:function(Ie){return function(Qe,le){return y(Qe,le,Ie)}}(new D),ne={"":F},ae,xe=0,fe=V.length;xe<fe;xe++){var ge=V[xe];switch(ge.op){case"add":if(X(w(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,$);break;case"remove":if(X(S(ne,""+ge.path,re)))return c(F,ne,ge,$);break;case"replace":if(X(T(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,$);break;case"move":if(X(I(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,$);break;case"copy":if(X(A(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,$);break;case"test":if(X(k(ne,""+ge.path,ge.value)))return c(F,ne,ge,$);break;default:if($.custom&&$.custom[ge.op]){if(ae=ae||a(ne,re),X($.custom[ge.op](ae,ge,xe,V)))return c(F,ne,ge,$)}else return X("[op:"+ge.op+"] unknown"),c(F,ne,ge,$);break}}return ne[""]}s.exports=O}),q2e=K((i,s)=>{s.exports=K2e()}),X2e=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s=="object"?s.exports=c():typeof i=="object"?i.blobCompare=c():a.blobCompare=c()})(window,function(){return function(a){var c={};function h(f){if(c[f])return c[f].exports;var g=c[f]={i:f,l:!1,exports:{}};return a[f].call(g.exports,g,g.exports,h),g.l=!0,g.exports}return h.m=a,h.c=c,h.d=function(f,g,y){h.o(f,g)||Object.defineProperty(f,g,{enumerable:!0,get:y})},h.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},h.t=function(f,g){if(1&g&&(f=h(f)),8&g||4&g&&typeof f=="object"&&f&&f.__esModule)return f;var y=Object.create(null);if(h.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:f}),2&g&&typeof f!="string")for(var w in f)h.d(y,w,(function(S){return f[S]}).bind(null,w));return y},h.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return h.d(g,"a",g),g},h.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},h.p="",h(h.s=4)}([function(a,c,h){var f=function(T,I){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return function(A,k){var D=[],O=!0,F=!1,V=void 0;try{for(var $,X=A[Symbol.iterator]();!(O=($=X.next()).done)&&(D.push($.value),!k||D.length!==k);O=!0);}catch(re){F=!0,V=re}finally{try{!O&&X.return&&X.return()}finally{if(F)throw V}}return D}(T,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function T(I,A){for(var k=0;k<A.length;k++){var D=A[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}return function(I,A,k){return A&&T(I.prototype,A),k&&T(I,k),I}}();function y(T){if(Array.isArray(T)){for(var I=0,A=Array(T.length);I<T.length;I++)A[I]=T[I];return A}return Array.from(T)}var w=h(2),S=function(T){function I(A){(function(D,O){if(!(D instanceof O))throw new TypeError("Cannot call a class as a function")})(this,I);var k=function(D,O){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?D:O}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));return k._messageId=1,k._messages=new Map,k._worker=A,k._worker.onmessage=k._onMessage.bind(k),k._id=Math.ceil(1e7*Math.random()),k}return function(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}(I,T),g(I,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,D=this,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],F=arguments[3];return new Promise(function(V,$){var X=D._messageId++;D._messages.set(X,[V,$,F]),D._worker.postMessage([X,k,A],O||[])})}},{key:"postMessage",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,k=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O=arguments[2];return new Promise(function(F,V){var $=k._messageId++;k._messages.set($,[F,V,O]),k._worker.postMessage([$,A],D||[])})}},{key:"emit",value:function(A){for(var k=arguments.length,D=Array(k>1?k-1:0),O=1;O<k;O++)D[O-1]=arguments[O];this._worker.postMessage({eventName:A,args:D})}},{key:"_onMessage",value:function(A){var k;if(!Array.isArray(A.data)&&A.data.eventName)return(k=function $(X,re,ne){X===null&&(X=Function.prototype);var ae=Object.getOwnPropertyDescriptor(X,re);if(ae===void 0){var xe=Object.getPrototypeOf(X);return xe===null?void 0:$(xe,re,ne)}if("value"in ae)return ae.value;var fe=ae.get;return fe!==void 0?fe.call(ne):void 0}(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"emit",this)).call.apply(k,[this,A.data.eventName].concat(y(A.data.args)));var D,O=(D=A.data,Array.isArray(D)?D:Array.from(D)),F=O[0],V=O.slice(1);if(F===1)this._onEvent.apply(this,y(V));else{if(F!==0)throw new Error("Wrong message type '"+F+"'");this._onResult.apply(this,y(V))}}},{key:"_onResult",value:function(A,k,D){var O=this._messages.get(A),F=f(O,2),V=F[0],$=F[1];return this._messages.delete(A),k===1?V(D):$(D)}},{key:"_onEvent",value:function(A,k,D){var O=this._messages.get(A),F=f(O,3)[2];F&&F(k,D)}}]),I}(w);a.exports=S},function(a,c,h){a.exports=function(){return h(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(a,c,h){var f=function(){function y(w,S){for(var T=0;T<S.length;T++){var I=S[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(w,I.key,I)}}return function(w,S,T){return S&&y(w.prototype,S),T&&y(w,T),w}}(),g=function(){function y(){(function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")})(this,y),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return f(y,[{key:"emit",value:function(w){if(!this.__listeners[w])return this;for(var S=arguments.length,T=Array(S>1?S-1:0),I=1;I<S;I++)T[I-1]=arguments[I];var A=!0,k=!1,D=void 0;try{for(var O,F=this.__listeners[w][Symbol.iterator]();!(A=(O=F.next()).done);A=!0){var V=O.value;V.apply(void 0,T)}}catch($){k=!0,D=$}finally{try{!A&&F.return&&F.return()}finally{if(k)throw D}}return this}},{key:"once",value:function(w,S){var T=this,I=function A(){T.off(w,A),S.apply(void 0,arguments)};return this.on(w,I)}},{key:"on",value:function(w,S){return this.__listeners[w]||(this.__listeners[w]=[]),this.__listeners[w].push(S),this}},{key:"off",value:function(w,S){return this.__listeners[w]=S?this.__listeners[w].filter(function(T){return T!==S}):[],this}}]),y}();a.exports=g},function(a,c,h){var f=window.URL||window.webkitURL;a.exports=function(g,y){try{try{var w;try{(w=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(g),w=w.getBlob()}catch{w=new Blob([g])}return new Worker(f.createObjectURL(w))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(g))}}catch{if(!y)throw Error("Inline worker is not supported");return new Worker(y)}}},function(a,c,h){h.r(c);var f=h(0),g=h.n(f),y=h(1),w=h.n(y);h.d(c,"workersEnabled",function(){return S}),h.d(c,"default",function(){return T});let S=!!window.Worker;class T{static toBinaryStringWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("binary",{blob:A,chunk:k});return D.terminate(),O})}static toBinaryStringWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let $=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);$.onload=()=>F($.result),$.onerror=V,$.readAsBinaryString(re)})}(A,k)}static toBinaryString(A,k,D=!0){return D&&S?this.toBinaryStringWithWorker(A,k):this.toBinaryStringWithoutWorker(A,k)}static toArrayBufferWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("buffer",{blob:A,chunk:k});return D.terminate(),O})}static toArrayBufferWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let $=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);$.onload=()=>F($.result),$.onerror=V,$.readAsArrayBuffer(re)})}(A,k)}static toArrayBuffer(A,k,D=!0){return D&&S?this.toArrayBufferWithWorker(A,k):this.toArrayBufferWithoutWorker(A,k)}static compareBuffersWithWorker(A,k){return ye(this,null,function*(){if(A===k)return!0;let D=new g.a(new w.a),O=yield D.exec("compare",{buf1:A,buf2:k},[A,k]);return D.terminate(),O})}static compareBuffersWithoutWorker(A,k){return function(D,O){if(D===O)return!0;if(D.byteLength!==O.byteLength)return!1;let F=new DataView(D),V=new DataView(O);for(var $=D.byteLength;$--;)if(F.getUint8($)!==V.getUint8($))return!1;return!0}(A,k)}static compareBuffers(A,k,D=!0){return D&&S?this.compareBuffersWithWorker(A,k):this.compareBuffersWithoutWorker(A,k)}static sizeEqual(A,k){return A.size===k.size}static typeEqual(A,k){return A.type===k.type}static magicNumbersEqual(A,k,D=!0){return ye(this,null,function*(){if(A===k)return!0;let O=[24,16,14,12,8,6,4],[F,V]=yield Promise.all([this.toBinaryString(A,24,D),this.toBinaryString(k,24,D)]);for(let $ of O)if(F.substring(0,$)===V.substring(0,$))return!0;return!1})}static bytesEqualWithBinaryString(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toBinaryString(A,D,O),this.toBinaryString(k,D,O)]);return F===V})}static bytesEqualWithArrayBuffer(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toArrayBuffer(A,D,O),this.toArrayBuffer(k,D,O)]);return this.compareBuffers(F,V,O)})}static isEqual(A,k){return ye(this,arguments,function*(D,O,{methods:F=["size","type","magic","byte"],byte:V="buffer",partial:$=!1,chunks:X=null,worker:re=!0}={}){let ne=null;for(let ae of F){if(ne===!1||$&&ne===!0)break;switch(ae){case"byte":case"bytes":case"content":X=X instanceof Array?X:[D.size],ne=!0;for(let xe of X){let fe=!1;fe=V==="buffer"?yield this.bytesEqualWithArrayBuffer(D,O,xe,re):yield this.bytesEqualWithBinaryString(D,O,xe,re),fe||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(D,O,re);break;case"size":case"sizes":ne=this.sizeEqual(D,O);break;case"type":case"types":ne=this.typeEqual(D,O);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),Kce={};te(Kce,{ToolbarDropdownSelect:()=>pIe,default:()=>mIe}),t.exports=Se(Kce),Fe(),Je();var qce=Mt;Wn();var Y2e=0,Z2e=class{constructor(i){this._studio=i,Pe(this,"_id"),Pe(this,"_state",{type:"Ready"}),this._id=String(Y2e++)}get status(){return this._state.type}reset(){let{_state:i}=this;if(i.type!=="Ready")if(i.type==="Captured")this._state={type:"Ready"},i.transaction.discard(),i.flagsTransaction.discard();else throw i.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:i}=this;if(i.type==="Captured")i.transaction.commit(),i.flagsTransaction.discard(),this._state={type:"Committed"};else if(i.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw i.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(i){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let s=!0;try{this._state=j({type:"Captured"},this._capture(i)),s=!1}finally{s&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(i){let s=[],a=this._studio.tempTransaction(h=>{let f=!0,g={set:(y,w)=>{if(!f)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:S,path:T}=(0,qce.getPointerParts)(y);if(!Dt(S))throw new Error("We can only scrub props of Sheet Objects for now");h.set(y,w),s.push(y)}};try{i(g)}finally{f=!1}}),c=this._studio.tempTransaction(({stateEditors:h})=>{s.forEach(f=>{let{root:g,path:y}=(0,qce.getPointerParts)(f);if(!Dt(g))return;let w=g.template.getDefaultsAtPointer(f);vt(w,(S,T)=>{h.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(z(j({},g.address),{pathToProp:T}))},y)})});return{transaction:a,flagsTransaction:c}}discard(){let{_state:i}=this;if(i.type==="Captured"||i.type==="Ready")i.type==="Captured"&&(i.transaction.discard(),i.flagsTransaction.discard()),this._state={type:"Discarded"};else throw i.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},Q2e=Mt,Xce=typeof window<"u"?Promise.resolve().then(()=>(R2e(),Oce)).then(i=>i.default):null,J2e=class{constructor(i){this.studio=i,Pe(this,"_rendered",!1),Pe(this,"_nonSSRBits",Xce?Xce.then(s=>new s):Promise.reject()),Pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(i=>{i.render()}).catch(i=>{throw console.error(i),i}))}hide(){this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,Q2e.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(i,s){let a=!1,c=null;return this._nonSSRBits.then(h=>{a||(c=h.renderToolset(i,s))}).catch(h=>{console.error(h)}),()=>{if(c){c();return}a||(a=!0)}}},xR=Mt;function eAe(i){return i}var tAe=(i,s=eAe)=>{let a=c=>({type:i,payload:s(c)});return a.type=i,a.is=c=>c&&c.type&&c.type===i,a},kc=tAe,Yce=Q(U2e()),Zce=Q(q2e());$0();var SR,nAe=new Uint8Array(16);function rAe(){if(!SR&&(SR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!SR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SR(nAe)}var iAe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function oAe(i){return typeof i=="string"&&iAe.test(i)}var sAe=oAe,Ho=[];for(ER=0;ER<256;++ER)Ho.push((ER+256).toString(16).substr(1));var ER;function aAe(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(Ho[i[s+0]]+Ho[i[s+1]]+Ho[i[s+2]]+Ho[i[s+3]]+"-"+Ho[i[s+4]]+Ho[i[s+5]]+"-"+Ho[i[s+6]]+Ho[i[s+7]]+"-"+Ho[i[s+8]]+Ho[i[s+9]]+"-"+Ho[i[s+10]]+Ho[i[s+11]]+Ho[i[s+12]]+Ho[i[s+13]]+Ho[i[s+14]]+Ho[i[s+15]]).toLowerCase();if(!sAe(a))throw TypeError("Stringified UUID is invalid");return a}var lAe=aAe;function uAe(i,s,a){i=i||{};var c=i.random||(i.rng||rAe)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){a=a||0;for(var h=0;h<16;++h)s[a+h]=c[h];return s}return lAe(c)}var cAe=uAe,nE={replaceHistory:kc("@history/replaceHistory"),startHistoryFromScratch:kc("@history/startHistoryFromScratch"),undo:kc("@history/undo"),redo:kc("@history/redo")},dAe={type:"@history/unknownAction",payload:""},hAe={maxNumberOfCommits:100},pAe=(i,s=hAe)=>{let a=X4(i(void 0,dAe));return function(c,h){return nE.startHistoryFromScratch.is(h)?X4(i(void 0,h.payload)):nE.replaceHistory.is(h)?h.payload:nE.undo.is(h)?c?vAe(c):a:nE.redo.is(h)?c?gAe(c):a:c?fAe(c,i(c.innerState,h),s):X4(i(void 0,h))}};function X4(i){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:i}}function fAe(i,s,a){if(s===i.innerState)return i;let c=mAe(i.innerState,s);if(c.forwardDiff.length===0)return i;let h=gd(i.listOfCommitHashes),f={currentCommitHash:c.hash,commitsByHash:j({},i.commitsByHash),listOfCommitHashes:[...i.listOfCommitHashes],innerState:s};if(i.currentCommitHash!==h){let g=i.listOfCommitHashes.findIndex(y=>y===i.currentCommitHash);i.listOfCommitHashes.slice(g+1).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(g+1,f.listOfCommitHashes.length)}if(f.listOfCommitHashes.push(c.hash),f.commitsByHash[c.hash]=c,f.listOfCommitHashes.length>a.maxNumberOfCommits){let g=f.listOfCommitHashes.length-a.maxNumberOfCommits;f.listOfCommitHashes.slice(0,g).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(0,g)}return f}function mAe(i,s){let a=Yce.default.diff(i,s,{invertible:!1}),c=Yce.default.diff(s,i,{invertible:!1}),h=Date.now(),f=cAe();return{forwardDiff:a,backwardDiff:c,timestamp:h,hash:f}}function vAe(i){if(i.currentCommitHash===void 0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===-1)throw new Error("This should never happen");let a=i.commitsByHash[i.currentCommitHash],c=(0,Zce.default)(i.innerState,a.backwardDiff),h=s-1,f=h===-1?void 0:i.listOfCommitHashes[h];return z(j({},i),{currentCommitHash:f,innerState:c})}function gAe(i){if(i.listOfCommitHashes.length===0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===i.listOfCommitHashes.length-1)return i;let a=s+1,c=i.listOfCommitHashes[a],h=i.commitsByHash[c],f=(0,Zce.default)(i.innerState,h.forwardDiff);return z(j({},i),{currentCommitHash:c,innerState:f})}iR();var CR={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},Qce=kc("@storeBundle/replacePersistentState",i=>i),Jce=kc("@storeBundle/reduceParts",i=>i),ob={historic:nE,replacePersistentState:Qce,reduceParts:Jce},ede=kc("@storeBundle/setInnerHistoricState",i=>i),yAe=(i=CR.historic,s)=>ede.is(s)?s.payload:i,Y4=pAe(yAe),tde=(i,s)=>{if(Qce.is(s)){let{historic:a,ahistoric:c}=s.payload,h=(i==null?void 0:i.ephemeral)||CR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:h}}else if(i){let{historic:a,ahistoric:c}=i.$persistent,{ephemeral:h}=i;if(Jce.is(s)){let f={historic:i.$persistent.historic.innerState,ahistoric:i.$persistent.ahistoric,ephemeral:i.ephemeral},g=s.payload(f);if(g===f)return i;a.innerState!==g.historic&&(a=Y4(a,ede(g.historic))),c=g.ahistoric,h=g.ephemeral}else{let f=Y4(a,s);if(f===a)return i;a=f}return{$persistent:a===i.$persistent.historic&&c===i.$persistent.ahistoric?i.$persistent:{historic:a,ahistoric:c},ephemeral:h}}else{let a=Y4(void 0,{}),c=CR.ahistoric,h=CR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:h}}},nde=kc("@history/pushTempAction",i=>i),rde=kc("@history/discardTempAction",i=>i),ide=kc("@history/commitTempAction",i=>i),bAe=0,_Ae=()=>{let i=bAe++;return{push:s=>nde({id:i,originalAction:s}),discard:()=>rde(i),commit:()=>ide(i)}},wAe=(i,s)=>{if(i){let{tempActions:a,permanent:c}=i.$temps,h;if(nde.is(s))a=[...a,s];else if(ide.is(s)){let g=a.find(y=>y.payload.id===s.payload);g?(h=g.payload.originalAction,a=a.filter(y=>y.payload.id!==s.payload)):rR.error("Comitting temp action group ".concat(s.payload," isn't possible as this group doesn't exist"))}else rde.is(s)?a=a.filter(g=>g.payload.id!==s.payload):h=s;h&&(c=tde(i.$temps.permanent,h));let f={historic:c.$persistent.historic.innerState,ahistoric:c.$persistent.ahistoric,ephemeral:c.ephemeral};for(let g of a)f=g.payload.originalAction.payload(f);return j({$temps:{tempActions:a,permanent:c},$persistent:c.$persistent},f)}else{let a=tde(void 0,s);return{$temps:{permanent:a,tempActions:[]},$persistent:a.$persistent,historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral}}};mc(),mc(),Ld();function ode(i,s){if(typeof i!="object"||i===null)return;if(s.length===0){for(let g of Object.keys(i))delete i[g];return}let a=s.slice(0,s.length-1),c=i,h=new WeakMap;for(let g of a){let y=c,w=y[g];if(typeof w!="object"||w===null)return;h.set(w,y),c=w}let f=s.slice().reverse();for(let g of f){if(delete c[g],Object.keys(c).length>0)return;c=h.get(c)}}function xAe(i,{scale:s,origin:a,translate:c}){let h=a+(i-a)*s;return c+h}function fu(i){for(var s=arguments.length,a=Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw Error("[Immer] minified error nr: "+i+(a.length?" "+a.map(function(h){return"'"+h+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sb(i){return!!i&&!!i[ka]}function Bv(i){return!!i&&(function(s){if(!s||typeof s!="object")return!1;var a=Object.getPrototypeOf(s);if(a===null)return!0;var c=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===MAe}(i)||Array.isArray(i)||!!i[mde]||!!i.constructor[mde]||Q4(i)||J4(i))}function rE(i,s,a){a===void 0&&(a=!1),ab(i)===0?(a?Object.keys:dj)(i).forEach(function(c){a&&typeof c=="symbol"||s(c,i[c],i)}):i.forEach(function(c,h){return s(h,c,i)})}function ab(i){var s=i[ka];return s?s.i>3?s.i-4:s.i:Array.isArray(i)?1:Q4(i)?2:J4(i)?3:0}function Z4(i,s){return ab(i)===2?i.has(s):Object.prototype.hasOwnProperty.call(i,s)}function SAe(i,s){return ab(i)===2?i.get(s):i[s]}function sde(i,s,a){var c=ab(i);c===2?i.set(s,a):c===3?(i.delete(s),i.add(a)):i[s]=a}function EAe(i,s){return i===s?i!==0||1/i==1/s:i!=i&&s!=s}function Q4(i){return kAe&&i instanceof Map}function J4(i){return TAe&&i instanceof Set}function Uv(i){return i.o||i.t}function ej(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var s=AAe(i);delete s[ka];for(var a=dj(s),c=0;c<a.length;c++){var h=a[c],f=s[h];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[h]={configurable:!0,writable:!0,enumerable:f.enumerable,value:i[h]})}return Object.create(Object.getPrototypeOf(i),s)}function tj(i,s){return s===void 0&&(s=!1),nj(i)||sb(i)||!Bv(i)||(ab(i)>1&&(i.set=i.add=i.clear=i.delete=CAe),Object.freeze(i),s&&rE(i,function(a,c){return tj(c,!0)},!0)),i}function CAe(){fu(2)}function nj(i){return i==null||typeof i!="object"||Object.isFrozen(i)}function Wd(i){var s=IAe[i];return s||fu(18,i),s}function ade(){return iE}function rj(i,s){s&&(Wd("Patches"),i.u=[],i.s=[],i.v=s)}function PR(i){ij(i),i.p.forEach(PAe),i.p=null}function ij(i){i===iE&&(iE=i.l)}function lde(i){return iE={p:[],l:iE,h:i,m:!0,_:0}}function PAe(i){var s=i[ka];s.i===0||s.i===1?s.j():s.O=!0}function oj(i,s){s._=s.p.length;var a=s.p[0],c=i!==void 0&&i!==a;return s.h.g||Wd("ES5").S(s,i,c),c?(a[ka].P&&(PR(s),fu(4)),Bv(i)&&(i=kR(s,i),s.l||TR(s,i)),s.u&&Wd("Patches").M(a[ka],i,s.u,s.s)):i=kR(s,a,[]),PR(s),s.u&&s.v(s.u,s.s),i!==fde?i:void 0}function kR(i,s,a){if(nj(s))return s;var c=s[ka];if(!c)return rE(s,function(f,g){return ude(i,c,s,f,g,a)},!0),s;if(c.A!==i)return s;if(!c.P)return TR(i,c.t,!0),c.t;if(!c.I){c.I=!0,c.A._--;var h=c.i===4||c.i===5?c.o=ej(c.k):c.o;rE(c.i===3?new Set(h):h,function(f,g){return ude(i,c,h,f,g,a)}),TR(i,h,!1),a&&i.u&&Wd("Patches").R(c,a,i.u,i.s)}return c.o}function ude(i,s,a,c,h,f){if(sb(h)){var g=kR(i,h,f&&s&&s.i!==3&&!Z4(s.D,c)?f.concat(c):void 0);if(sde(a,c,g),!sb(g))return;i.m=!1}if(Bv(h)&&!nj(h)){if(!i.h.F&&i._<1)return;kR(i,h),s&&s.A.l||TR(i,h)}}function TR(i,s,a){a===void 0&&(a=!1),i.h.F&&i.m&&tj(s,a)}function sj(i,s){var a=i[ka];return(a?Uv(a):i)[s]}function cde(i,s){if(s in i)for(var a=Object.getPrototypeOf(i);a;){var c=Object.getOwnPropertyDescriptor(a,s);if(c)return c;a=Object.getPrototypeOf(a)}}function aj(i){i.P||(i.P=!0,i.l&&aj(i.l))}function lj(i){i.o||(i.o=ej(i.t))}function uj(i,s,a){var c=Q4(s)?Wd("MapSet").N(s,a):J4(s)?Wd("MapSet").T(s,a):i.g?function(h,f){var g=Array.isArray(h),y={i:g?1:0,A:f?f.A:ade(),P:!1,I:!1,D:{},l:f,t:h,k:null,o:null,j:null,C:!1},w=y,S=AR;g&&(w=[y],S=IR);var T=Proxy.revocable(w,S),I=T.revoke,A=T.proxy;return y.k=A,y.j=I,A}(s,a):Wd("ES5").J(s,a);return(a?a.A:ade()).p.push(c),c}function MR(i){return sb(i)||fu(22,i),function s(a){if(!Bv(a))return a;var c,h=a[ka],f=ab(a);if(h){if(!h.P&&(h.i<4||!Wd("ES5").K(h)))return h.t;h.I=!0,c=dde(a,f),h.I=!1}else c=dde(a,f);return rE(c,function(g,y){h&&SAe(h.t,g)===y||sde(c,g,s(y))}),f===3?new Set(c):c}(i)}function dde(i,s){switch(s){case 2:return new Map(i);case 3:return Array.from(i)}return ej(i)}var hde,iE,cj=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kAe=typeof Map<"u",TAe=typeof Set<"u",pde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",fde=cj?Symbol.for("immer-nothing"):((hde={})["immer-nothing"]=!0,hde),mde=cj?Symbol.for("immer-draftable"):"__$immer_draftable",ka=cj?Symbol.for("immer-state"):"__$immer_state",MAe=""+Object.prototype.constructor,dj=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,AAe=Object.getOwnPropertyDescriptors||function(i){var s={};return dj(i).forEach(function(a){s[a]=Object.getOwnPropertyDescriptor(i,a)}),s},IAe={},AR={get:function(i,s){if(s===ka)return i;var a=Uv(i);if(!Z4(a,s))return function(h,f,g){var y,w=cde(f,g);return w?"value"in w?w.value:(y=w.get)===null||y===void 0?void 0:y.call(h.k):void 0}(i,a,s);var c=a[s];return i.I||!Bv(c)?c:c===sj(i.t,s)?(lj(i),i.o[s]=uj(i.A.h,c,i)):c},has:function(i,s){return s in Uv(i)},ownKeys:function(i){return Reflect.ownKeys(Uv(i))},set:function(i,s,a){var c=cde(Uv(i),s);if(c!=null&&c.set)return c.set.call(i.k,a),!0;if(!i.P){var h=sj(Uv(i),s),f=h==null?void 0:h[ka];if(f&&f.t===a)return i.o[s]=a,i.D[s]=!1,!0;if(EAe(a,h)&&(a!==void 0||Z4(i.t,s)))return!0;lj(i),aj(i)}return i.o[s]===a&&typeof a!="number"&&(a!==void 0||s in i.o)||(i.o[s]=a,i.D[s]=!0,!0)},deleteProperty:function(i,s){return sj(i.t,s)!==void 0||s in i.t?(i.D[s]=!1,lj(i),aj(i)):delete i.D[s],i.o&&delete i.o[s],!0},getOwnPropertyDescriptor:function(i,s){var a=Uv(i),c=Reflect.getOwnPropertyDescriptor(a,s);return c&&{writable:!0,configurable:i.i!==1||s!=="length",enumerable:c.enumerable,value:a[s]}},defineProperty:function(){fu(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){fu(12)}},IR={};rE(AR,function(i,s){IR[i]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}}),IR.deleteProperty=function(i,s){return AR.deleteProperty.call(this,i[0],s)},IR.set=function(i,s,a){return AR.set.call(this,i[0],s,a,i[0])};var RAe=function(){function i(a){var c=this;this.g=pde,this.F=!0,this.produce=function(h,f,g){if(typeof h=="function"&&typeof f!="function"){var y=f;f=h;var w=c;return function(k){var D=this;k===void 0&&(k=y);for(var O=arguments.length,F=Array(O>1?O-1:0),V=1;V<O;V++)F[V-1]=arguments[V];return w.produce(k,function($){var X;return(X=f).call.apply(X,[D,$].concat(F))})}}var S;if(typeof f!="function"&&fu(6),g!==void 0&&typeof g!="function"&&fu(7),Bv(h)){var T=lde(c),I=uj(c,h,void 0),A=!0;try{S=f(I),A=!1}finally{A?PR(T):ij(T)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(k){return rj(T,g),oj(k,T)},function(k){throw PR(T),k}):(rj(T,g),oj(S,T))}if(!h||typeof h!="object")return(S=f(h))===fde?void 0:(S===void 0&&(S=h),c.F&&tj(S,!0),S);fu(21,h)},this.produceWithPatches=function(h,f){return typeof h=="function"?function(w){for(var S=arguments.length,T=Array(S>1?S-1:0),I=1;I<S;I++)T[I-1]=arguments[I];return c.produceWithPatches(w,function(A){return h.apply(void 0,[A].concat(T))})}:[c.produce(h,f,function(w,S){g=w,y=S}),g,y];var g,y},typeof(a==null?void 0:a.useProxies)=="boolean"&&this.setUseProxies(a.useProxies),typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var s=i.prototype;return s.createDraft=function(a){Bv(a)||fu(8),sb(a)&&(a=MR(a));var c=lde(this),h=uj(this,a,void 0);return h[ka].C=!0,ij(c),h},s.finishDraft=function(a,c){var h=a&&a[ka],f=h.A;return rj(f,c),oj(void 0,f)},s.setAutoFreeze=function(a){this.F=a},s.setUseProxies=function(a){a&&!pde&&fu(20),this.g=a},s.applyPatches=function(a,c){var h;for(h=c.length-1;h>=0;h--){var f=c[h];if(f.path.length===0&&f.op==="replace"){a=f.value;break}}var g=Wd("Patches").$;return sb(a)?g(a,c):this.produce(a,function(y){return g(y,c.slice(h+1))})},i}(),Ta=new RAe;Ta.produce,Ta.produceWithPatches.bind(Ta),Ta.setAutoFreeze.bind(Ta),Ta.setUseProxies.bind(Ta),Ta.applyPatches.bind(Ta);var hj=Ta.createDraft.bind(Ta),pj=Ta.finishDraft.bind(Ta);W5(),Wl(),sx(),X0(),Z0(),tR(),Qr(),Wn();var mu={create(i){let s={byId:{},allIds:{}};if(i)for(let[a,c]of i)s.byId[a]=c,s.allIds[a]=!0;return s},shallowCopy(i){return{byId:j({},i==null?void 0:i.byId),allIds:j({},i==null?void 0:i.allIds)}},add(i,s,a){return{byId:z(j({},i==null?void 0:i.byId),{[s]:a}),allIds:z(j({},i==null?void 0:i.allIds),{[s]:!0})}},merge(i){let s=mu.create();for(let a=0;a<i.length;a++)s.byId=j(j({},s.byId),i[a].byId),s.allIds=j(j({},s.allIds),i[a].allIds);return s},remove(i,s){let a=mu.shallowCopy(i);return delete a.allIds[s],delete a.byId[s],a},filter(i,s){let a=mu.shallowCopy(i);for(let[c,h]of Object.entries(a.byId))s(h)||(delete a.allIds[c],delete a.byId[c]);return a}},vde=i=>(fj=i,mj),fj,Go=()=>{if(fj===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return fj},mj;(i=>{(s=>{(a=>{(c=>{function h(f){let g=Go().historic;g.panelPositions!=null||(g.panelPositions={}),g.panelPositions[f.panelId]=f.position}c.setPanelPosition=h})(a.panelPositions||(a.panelPositions={})),(c=>{function h(){var f;return(f=Go().historic).panels!=null||(f.panels={}),Go().historic.panels}c._ensure=h,(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.outlinePanel!=null||(y.outlinePanel={}),y.outlinePanel}f._ensure=g,(y=>{function w(T){let I=[];for(let A of ns(T))nt(A)?I.push(j({type:"Project"},A.address)):Gt(A)?(I.push(j({type:"Sheet"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.address)):Bt(A)?I.push(j({type:"Sheet"},A.address)):Dt(A)?(I.push(j({type:"SheetObject"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.sheet.address)):Jt(A)&&I.push(j({type:"SheetObject"},A.address));f._ensure().selection=I}y.set=w;function S(){f._ensure().selection=[]}y.unset=S})(f.selection||(f.selection={}))})(c.outline||(c.outline={})),(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.sequenceEditor!=null||(y.sequenceEditor={}),y.sequenceEditor}f._ensure=g,(y=>{function w(){let T=f._ensure();return T.graphEditor!=null||(T.graphEditor={height:.5,isOpen:!1}),T.graphEditor}function S(T){w().isOpen=T.isOpen}y.setIsOpen=S})(f.graphEditor||(f.graphEditor={}))})(c.sequenceEditor||(c.sequenceEditor={}))})(a.panels||(a.panels={})),(c=>{(h=>{function f(g){let y=Go().historic;return y.projects.stateByProjectId[g.projectId]||(y.projects.stateByProjectId[g.projectId]={stateBySheetId:{}}),y.projects.stateByProjectId[g.projectId]}h._ensure=f,(g=>{function y(S){let T=i.studio.historic.projects.stateByProjectId._ensure(S);return T.stateBySheetId[S.sheetId]||(T.stateBySheetId[S.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),T.stateBySheetId[S.sheetId]}g._ensure=y;function w(S){i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(S).selectedInstanceId=S.sheetInstanceId}g.setSelectedInstanceId=w,(S=>{function T(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;V[F.objectKey]||(V[F.objectKey]={});let $=V[F.objectKey],X=fc(F.pathToProp),re=new Set(Object.keys(WS));for(let[ae,xe]of Object.entries(MR(V)))for(let[fe,ge]of Object.entries(xe))re.delete(ge);let ne=re.size>0?re.values().next().value:Object.keys(WS)[0];$[X]=ne}S.addPropToGraphEditor=T;function I(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;if(!V[F.objectKey])return;let $=V[F.objectKey],X=fc(F.pathToProp);$[X]&&ode(V,[F.objectKey,X])}S.removePropFromGraphEditor=I;function A(F){let V=i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(F).sequenceEditor;return V.markerSet||(V.markerSet=mu.create()),V.markerSet}function k(F){let V=A(F.sheetAddress),$=F.markers.filter(ae=>!!isFinite(ae.position)).map(ae=>z(j({},ae),{position:F.snappingFunction(ae.position)})),X=Sr($,"id"),re=mu.filter(V,ae=>ae&&!X[ae.id]),ne=Sr(Object.values(re.byId),"position");$.forEach(({position:ae})=>{let xe=ne[ae];xe&&(re=mu.remove(re,xe.id))}),Object.assign(V,mu.merge([re,mu.create($.map(ae=>[ae.id,ae]))]))}S.replaceMarkers=k;function D(F){let V=A(F.sheetAddress);Object.assign(V,mu.remove(V,F.markerId))}S.removeMarker=D;function O(F){let V=A(F.sheetAddress).byId[F.markerId];V!==void 0&&(V.label=F.label)}S.updateMarker=O})(g.sequenceEditor||(g.sequenceEditor={}))})(h.stateBySheetId||(h.stateBySheetId={}))})(c.stateByProjectId||(c.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.historic||(s.historic={})),(a=>{function c(h){Go().ephemeral.showOutline=h}a.setShowOutline=c,(h=>{(f=>{function g(y){let w=Go().ephemeral;return w.projects.stateByProjectId[y.projectId]||(w.projects.stateByProjectId[y.projectId]={stateBySheetId:{}}),w.projects.stateByProjectId[y.projectId]}f._ensure=g,(y=>{function w(S){let T=i.studio.ephemeral.projects.stateByProjectId._ensure(S);return T.stateBySheetId[S.sheetId]||(T.stateBySheetId[S.sheetId]={stateByObjectKey:{}}),T.stateBySheetId[S.sheetId]}y._ensure=w,(S=>{function T(I){var A;let k=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(I).stateByObjectKey;return k[A=I.objectKey]!=null||(k[A]={}),k[I.objectKey]}S._ensure=T,(I=>{function A(D){let O=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(D);return O.valuesBeingScrubbed!=null||(O.valuesBeingScrubbed={}),O.valuesBeingScrubbed}I._ensure=A;function k(D){lp(A(D),D.pathToProp,!0)}I.flag=k})(S.propsBeingScrubbed||(S.propsBeingScrubbed={}))})(y.stateByObjectKey||(y.stateByObjectKey={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(h.stateByProjectId||(h.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ephemeral||(s.ephemeral={})),(a=>{function c(w){Go().ahistoric.pinOutline=w}a.setPinOutline=c;function h(w){Go().ahistoric.pinDetails=w}a.setPinDetails=h;function f(w){Go().ahistoric.pinNotifications=w}a.setPinNotifications=f;function g(w){Go().ahistoric.visibilityState=w}a.setVisibilityState=g;function y(w){let S=fI(w.map(A=>A.pathToProp)),T=w.map(({keyframe:A,pathToProp:k})=>({keyframe:A,pathToProp:k.slice(S.length)})),I=Go();I.ahistoric.clipboard?I.ahistoric.clipboard.keyframesWithRelativePaths=T:I.ahistoric.clipboard={keyframesWithRelativePaths:T}}a.setClipboardKeyframes=y,(w=>{(S=>{function T(I){let A=Go().ahistoric;return A.projects.stateByProjectId[I.projectId]||(A.projects.stateByProjectId[I.projectId]={stateBySheetId:{}}),A.projects.stateByProjectId[I.projectId]}S._ensure=T,(I=>{function A(D){let O=i.studio.ahistoric.projects.stateByProjectId._ensure(D);return O.collapsedItemsInOutline||(O.collapsedItemsInOutline={}),O.collapsedItemsInOutline}I._ensure=A;function k(D){let O=i.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(D);D.isCollapsed?O[D.itemKey]=!0:delete O[D.itemKey]}I.set=k})(S.collapsedItemsInOutline||(S.collapsedItemsInOutline={})),(I=>{function A(k){let D=i.studio.ahistoric.projects.stateByProjectId._ensure(k);return D.stateBySheetId[k.sheetId]||(D.stateBySheetId[k.sheetId]={}),D.stateBySheetId[k.sheetId]}I._ensure=A,(k=>{function D(O){let F=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(O);return F.sequence||(F.sequence={}),F.sequence}k._ensure=D,(O=>{function F($){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange={range:$.range,enabled:$.enabled}}O.set=F;function V($){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange=void 0}O.unset=V})(k.focusRange||(k.focusRange={})),(O=>{function F(V){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(V).clippedSpaceRange=j({},V.range)}O.set=F})(k.clippedSpaceRange||(k.clippedSpaceRange={})),(O=>{function F($){let X=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($),re=X.collapsableItems;return re||(re=X.collapsableItems=mu.create()),re}function V($){let X=F($);Object.assign(X,mu.add(X,$.studioSheetItemKey,{isCollapsed:$.isCollapsed}))}O.set=V})(k.sequenceEditorCollapsableItems||(k.sequenceEditorCollapsableItems={}))})(I.sequence||(I.sequence={}))})(S.stateBySheetId||(S.stateBySheetId={}))})(w.stateByProjectId||(w.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ahistoric||(s.ahistoric={}))})(i.studio||(i.studio={})),(s=>{(a=>{(c=>{function h(f){let g=Go().historic.coreByProject[f.projectId].revisionHistory,y=50;g.unshift(f.revision),g.length>y&&(g.length=y)}c.add=h})(a.revisionHistory||(a.revisionHistory={})),(c=>{function h(y){let w=Go().historic.coreByProject[y.projectId].sheetsById;return w[y.sheetId]||(w[y.sheetId]={staticOverrides:{byObject:{}}}),w[y.sheetId]}c._ensure=h;function f(y){let w=Go().historic.coreByProject[y.projectId].sheetsById[y.sheetId];if(!w)return;delete w.staticOverrides.byObject[y.objectKey];let S=w.sequence;S&&delete S.tracksByObject[y.objectKey]}c.forgetObject=f;function g(y){Go().historic.coreByProject[y.projectId].sheetsById[y.sheetId]&&delete Go().historic.coreByProject[y.projectId].sheetsById[y.sheetId]}c.forgetSheet=g,(y=>{function w(fe){let ge=i.coreByProject.historic.sheetsById._ensure(fe);return ge.sequence!=null||(ge.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),ge.sequence}y._ensure=w;function S(fe){w(fe).length=ai(parseFloat(fe.length.toFixed(2)),.01,1/0)}y.setLength=S;function T(fe){var ge;let Ie=i.coreByProject.historic.sheetsById.sequence._ensure(fe).tracksByObject;return Ie[ge=fe.objectKey]!=null||(Ie[ge]={trackData:{},trackIdByPropPath:{}}),Ie[fe.objectKey]}function I(fe,ge){let Ie=T(fe),Qe=fc(fe.pathToProp);if(typeof Ie.trackIdByPropPath[Qe]=="string")return;let le=FPe(),Ae={type:"BasicKeyframedTrack",__debugName:"".concat(fe.objectKey,":").concat(Qe),keyframes:[]};Ie.trackData[le]=Ae,Ie.trackIdByPropPath[Qe]=le}y.setPrimitivePropAsSequenced=I;function A(fe){let ge=T(fe),Ie=fc(fe.pathToProp),Qe=ge.trackIdByPropPath[Ie];typeof Qe=="string"&&(delete ge.trackIdByPropPath[Ie],delete ge.trackData[Qe],i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(fe))}y.setPrimitivePropAsStatic=A;function k(fe){let ge=T(fe);for(let Ie of Object.keys(ge.trackIdByPropPath)){let Qe=JSON.parse(Ie);if(fe.pathToProp.every((le,Ae)=>Qe[Ae]===le)){let le=ge.trackIdByPropPath[Ie];if(typeof le!="string")continue;delete ge.trackIdByPropPath[Ie],delete ge.trackData[le]}}i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(fe)}y.setCompoundPropAsStatic=k;function D(fe){return T(fe).trackData[fe.trackId]}function O(fe){let ge=D(fe);if(ge)return ge.keyframes.find(Ie=>Ie.id===fe.keyframeId)}function F(fe){let ge=fe.snappingFunction(fe.position),Ie=D(fe);if(!Ie)return;let{keyframes:Qe}=Ie,le=Qe.findIndex(Ue=>Ue.position===ge);if(le!==-1){let Ue=Qe[le];Ue.value=fe.value;return}let Ae=t2(Qe,Ue=>Ue.position<ge);if(Ae===-1){Qe.unshift({id:gZ(),position:ge,connectedRight:!0,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value});return}let Y=Qe[Ae];Qe.splice(Ae+1,0,{id:gZ(),position:ge,connectedRight:Y.connectedRight,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value})}y.setKeyframeAtPosition=F;function V(fe){let ge=D(fe);if(!ge)return;let{keyframes:Ie}=ge,Qe=Ie.findIndex(le=>le.position===fe.position);Qe!==-1&&Ie.splice(Qe,1)}y.unsetKeyframeAtPosition=V;function $(fe){let ge=D(fe);if(!ge)return;let Ie=MR(ge.keyframes).filter(Qe=>fe.keyframeIds.includes(Qe.id)).map(Qe=>{let le=Qe.position,Ae=fe.snappingFunction(xAe(le,fe));return z(j({},Qe),{position:Ae})});xe(z(j({},fe),{keyframes:Ie}))}y.transformKeyframes=$;function X(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.map((Ie,Qe)=>{let le=ge.keyframes[Qe-1],Ae=fe.keyframeIds.includes(Ie.id),Y=fe.keyframeIds.includes(le==null?void 0:le.id);return Ae&&!Y?z(j({},Ie),{handles:[Ie.handles[0],Ie.handles[1],fe.handles[0],fe.handles[1]]}):Ae&&Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],fe.handles[0],fe.handles[1]]}):Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],Ie.handles[2],Ie.handles[3]]}):Ie}))}y.setTweenBetweenKeyframes=X;function re(fe){var ge,Ie,Qe,le,Ae,Y,Ue,Tt;let ke=O(fe);ke&&(ke.handles=[(Ie=(ge=fe.end)==null?void 0:ge[0])!=null?Ie:ke.handles[0],(le=(Qe=fe.end)==null?void 0:Qe[1])!=null?le:ke.handles[1],(Y=(Ae=fe.start)==null?void 0:Ae[0])!=null?Y:ke.handles[2],(Tt=(Ue=fe.start)==null?void 0:Ue[1])!=null?Tt:ke.handles[3]])}y.setHandlesForKeyframe=re;function ne(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.filter(Ie=>fe.keyframeIds.indexOf(Ie.id)===-1))}y.deleteKeyframes=ne;function ae(fe){let ge=O(fe);ge&&(ge.type=fe.keyframeType)}y.setKeyframeType=ae;function xe(fe){let ge=D(fe);if(!ge)return;let Ie=MR(ge.keyframes),Qe=fe.keyframes.filter(Tt=>!(typeof Tt.value=="number"&&!isFinite(Tt.value)||!Tt.handles.every(ke=>isFinite(ke)))).map(Tt=>z(j({},Tt),{position:fe.snappingFunction(Tt.position)})),le=Sr(Qe,"id"),Ae=Ie.filter(Tt=>!le[Tt.id]),Y=Sr(Ae,"position");Qe.forEach(({position:Tt})=>{let ke=Y[Tt];ke&&y2(Ae,ke)});let Ue=_2([...Ae,...Qe],"position");ge.keyframes=Ue}y.replaceKeyframes=xe})(c.sequence||(c.sequence={})),(y=>{(w=>{function S(k){var D;let O=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject;return O[D=k.objectKey]!=null||(O[D]={}),O[k.objectKey]}function T(k){let D=S(k);lp(D,k.pathToProp,k.value)}w.setValueOfCompoundProp=T;function I(k){let D=S(k);lp(D,k.pathToProp,k.value)}w.setValueOfPrimitiveProp=I;function A(k){let D=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject[k.objectKey];D&&ode(D,k.pathToProp)}w.unsetValueOfPrimitiveProp=A})(y.byObject||(y.byObject={}))})(c.staticOverrides||(c.staticOverrides={}))})(a.sheetsById||(a.sheetsById={}))})(s.historic||(s.historic={}))})(i.coreByProject||(i.coreByProject={}))})(mj||(mj={}));function vj(){let i,s,a=new Promise((h,f)=>{i=g=>{h(g),c.status="resolved"},s=g=>{f(g),c.status="rejected"}}),c={resolve:i,reject:s,promise:a,status:"pending"};return c}var OAe=Mt;function DAe(i){let s=i.getState(),a=new OAe.Atom(s);return i.subscribe(()=>{let c=i.getState();a.set(c),s=c}),a}Ju();function LAe(i){var s,a=i.Symbol;return typeof a=="function"?a.observable?s=a.observable:(s=a("observable"),a.observable=s):s="@@observable",s}var oE;typeof self<"u"?oE=self:typeof window<"u"?oE=window:typeof Ti<"u"?oE=Ti:oE=t;var NAe=LAe(oE),gde=NAe,yde={INIT:"@@redux/INIT"};function bde(i,s,a){var c;if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error("Expected the enhancer to be a function.");return a(bde)(i,s)}if(typeof i!="function")throw new Error("Expected the reducer to be a function.");var h=i,f=s,g=[],y=g,w=!1;function S(){y===g&&(y=g.slice())}function T(){return f}function I(O){if(typeof O!="function")throw new Error("Expected listener to be a function.");var F=!0;return S(),y.push(O),function(){if(F){F=!1,S();var V=y.indexOf(O);y.splice(V,1)}}}function A(O){if(!D0(O))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof O.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(w)throw new Error("Reducers may not dispatch actions.");try{w=!0,f=h(f,O)}finally{w=!1}for(var F=g=y,V=0;V<F.length;V++){var $=F[V];$()}return O}function k(O){if(typeof O!="function")throw new Error("Expected the nextReducer to be a function.");h=O,A({type:yde.INIT})}function D(){var O,F=I;return O={subscribe:function(V){if(typeof V!="object")throw new TypeError("Expected the observer to be an object.");function $(){V.next&&V.next(T())}$();var X=F($);return{unsubscribe:X}}},O[gde]=function(){return this},O}return A({type:yde.INIT}),c={dispatch:A,subscribe:I,getState:T,replaceReducer:k},c[gde]=D,c}function FAe(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length===0?function(c){return c}:s.length===1?s[0]:s.reduce(function(c,h){return function(){return c(h.apply(void 0,arguments))}})}function BAe(i){let s=FAe();return bde(i.rootReducer,void 0,s)}iR(),Z1();var gj=new WeakMap,UAe=(i,s,a)=>{let c=w=>{i.dispatch(ob.replacePersistentState(w))},h=_de(a),f=()=>i.getState().$persistent;y();let g=()=>{let w=f(),S=gj.get(i);w!==S&&(gj.set(i,w),localStorage.setItem(h,JSON.stringify(w)))};i.subscribe(G0(g,1e3)),window&&window.addEventListener("beforeunload",g);function y(){let w=localStorage.getItem(h);if(w){let S,T=!0;try{S=JSON.parse(w),T=!1}catch{rR.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{T||c(S),s()}}else s()}},VAe=(i,s)=>{let a=_de(s),c=i.getState().$persistent;localStorage.removeItem(a),gj.set(i,c)};function _de(i){return i+".persistent"}kQ(),Wn(),tp(),Je(),FA();var RR=Mt;Ep(),Qr(),hue();function yj(i){if(typeof i=="boolean"||typeof i=="string"||typeof i=="number")return i;if(D0(i)){let s={},a=!1;for(let[c,h]of Object.entries(i))yj(h)!==void 0&&(s[c]=h,a=!0);if(a)return s}else return}function wde(i,s,a){for(let[c,h]of Object.entries(i.props))if(h.type==="compound")wde(h,[...s,c],a);else{if(h.type==="enum")throw new Error("Not yet implemented");a(h,[...s,c])}}function jAe(i,s,a){return{set:(c,h)=>{i();let f=yj(h);if(typeof f>"u")return;let{root:g,path:y}=(0,RR.getPointerParts)(c);if(Dt(g)){let w=g.template.getMapOfValidSequenceTracks_forStudio().getValue(),S=RA(g.template.staticConfig,y);if(!S)throw new Error("Object ".concat(g.address.objectKey," does not have a prop at ").concat(JSON.stringify(y)));let T=(I,A,k)=>{if(I==null)return;if(yj(A.deserializeAndSanitize(I))===void 0)throw new Error("Invalid value ".concat(T4(I)," for object.props").concat(k.map(F=>"[".concat(JSON.stringify(F),"]")).join("")," is invalid"));let D=z(j({},g.address),{pathToProp:k}),O=fd(w,k);if(typeof O=="string"){let F=g.sheet.getSequence();F.position=F.closestGridPosition(F.position),s.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},D),{trackId:O,position:F.position,value:I,snappingFunction:F.closestGridPosition,type:"bezier"}))}else s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(z(j({},D),{value:I}))};if(S.type==="compound"){let I=(0,RR.getPointerParts)(c).path,A=I.length;wde(S,I,(k,D)=>{let O=D.slice(A),F=Pp(f,O);if(typeof F<"u")T(F,k,D);else throw new Error("Property object.props".concat(D.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is required but not provided"))})}else{if(S.type==="enum")throw new Error("Enums aren't implemented yet");T(f,S,y)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:c=>{i();let{root:h,path:f}=(0,RR.getPointerParts)(c);if(Dt(h)){let g=h.template.getMapOfValidSequenceTracks_forStudio().getValue(),y=Pp(h.template.getDefaultValues().getValue(),f),w=RA(h.template.staticConfig,f),S=(T,I)=>{let A=z(j({},h.address),{pathToProp:I}),k=fd(g,I);typeof k=="string"?s.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(z(j({},A),{trackId:k,position:h.sheet.getSequence().positionSnappedToGrid})):w!==void 0&&s.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(A)};w.type==="compound"?vt(y,(T,I)=>{S(T,I)},(0,RR.getPointerParts)(c).path):S(y,f)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return i(),a},get stateEditors(){return s}}}var zAe=class{constructor(){Pe(this,"_reduxStore"),Pe(this,"_atom"),Pe(this,"atomP"),this._reduxStore=BAe({rootReducer:wAe,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=DAe(this._reduxStore),this.atomP=this._atom.pointer}initialize(i){let s=vj();return i.usePersistentStorage===!0?UAe(this._reduxStore,()=>{this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()},i.persistenceKey):(this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()),s.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(i){return VAe(this._reduxStore,i),this.getState()}__dev_startHistoryFromScratch(i){this._reduxStore.dispatch(ob.historic.startHistoryFromScratch(ob.reduceParts(s=>z(j({},s),{historic:i}))))}tempTransaction(i){let s=_Ae(),a,c=s.push(ob.reduceParts(h=>{let f={historic:hj(h.historic),ahistoric:hj(h.ahistoric),ephemeral:hj(h.ephemeral)},g=!0,y=()=>{if(!g)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},w=vde(f),S=jAe(y,w,f);try{return i(S),g=!1,{historic:pj(f.historic),ahistoric:pj(f.ahistoric),ephemeral:pj(f.ephemeral)}}catch(T){return a=T,h}finally{vde(void 0)}}));if(this._reduxStore.dispatch(c),a)throw this._reduxStore.dispatch(s.discard()),a;return{commit:()=>{this._reduxStore.dispatch(s.commit())},discard:()=>{this._reduxStore.dispatch(s.discard())}}}undo(){this._reduxStore.dispatch(ob.historic.undo())}redo(){this._reduxStore.dispatch(ob.historic.redo())}createContentOfSaveFile(i){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i])throw new Error("Project ".concat(i," has not been initialized."));let s=PQ();this.tempTransaction(({stateEditors:c})=>{c.coreByProject.historic.revisionHistory.add({projectId:i,revision:s})}).commit();let a=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i];return j({},a)}},HAe=Mt,bj=class{constructor(){Pe(this,"_values",{})}get(i,s){if(this.has(i))return this._values[i];{let a=s();return this._values[i]=a,a}}has(i){return this._values.hasOwnProperty(i)}};Wn(),_p(),Fe(),Qr(),E4();var GAe=class{constructor(i){Pe(this,"ui",{hide(){me().ui.hide()},get isHidden(){return me().ui.isHidden},restore(){me().ui.restore()},renderToolset(s,a){return me().ui.renderToolset(s,a)}}),Pe(this,"_cache",new bj),Pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){XMe()},__experimental_enablePlayPauseKeyboardShortcut(){YMe()},__experimental_clearPersistentStorage(s){return me().clearPersistentStorage(s)},__experimental_createContentOfSaveFileTyped(s){return me().createContentOfSaveFile(s)}})}initialize(i){return me().initialize(i)}extend(i,s){me().extend(i,s)}transaction(i){return me().transaction(({set:s,unset:a,stateEditors:c})=>i({set:s,unset:a,__experimental_forgetObject:h=>{if(!wn(h))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");c.coreByProject.historic.sheetsById.forgetObject(h.address)},__experimental_forgetSheet:h=>{if(!on(h))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");c.coreByProject.historic.sheetsById.forgetSheet(h.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,HAe.prism)(()=>bp().filter(i=>i.type==="Theatre_SheetObject"||i.type==="Theatre_Sheet").map(i=>i.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(i){let s=[...i].filter(a=>wn(a)||on(a)).map(a=>me().corePrivateAPI(a));me().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set(s)})}onSelectionChange(i){let s=me();return this._getSelectionPrism().onChange(s.ticker,i,!0)}get selection(){return this._getSelection()}scrub(){return me().scrub()}getStudioProject(){let i=me().core;if(!i)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return me().getStudioProject(i)}debouncedScrub(i=1e3){let s,a=G0(()=>{let c=s;c&&(s=void 0,c.commit())},i);return{capture:c=>{s||(s=this.scrub());let h=!0;try{s.capture(c),h=!1}finally{if(h){let f=s;s=void 0,f.discard()}else a()}}}}createPane(i){return me().paneManager.createPane(i)}destroyPane(i){return me().paneManager.destroyPane(i)}createContentOfSaveFile(i){return me().createContentOfSaveFile(i)}};vZ();var Vv=Mt,$Ae=class{constructor(i){this._studio=i,Pe(this,"_cache",new bj),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let i=this._getAllPanes();i.onStale(()=>{i.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,Vv.prism)(()=>{if(!(0,Vv.val)(this._studio.coreP))return{};let i=(0,Vv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),s=(0,Vv.val)(this._studio.atomP.ephemeral.extensions.paneClasses),a={};for(let c of Object.values(i)){if(!c)continue;let h=s[c.paneClass];if(!h)continue;let{instanceId:f}=c,{extensionId:g,classDefinition:y}=h,w=Vv.prism.memo("instance-".concat(c.instanceId),()=>({extensionId:g,instanceId:f,definition:y}),[y]);a[f]=w}return a}))}get allPanesD(){return this._getAllPanes()}createPane(i){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let s=(0,Vv.val)(this._studio.atomP.ephemeral.extensions.paneClasses[i].extensionId),a=(0,Vv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),c;for(let h=1;h<1e3&&(c="".concat(i," #").concat(h),!!a[c]);h++);if(!s)throw new Error('Pane class "'.concat(i,'" is not registered.'));return this._studio.transaction(({drafts:h})=>{h.historic.panelInstanceDesceriptors[c]={instanceId:c,paneClass:i}}),this._getAllPanes().getValue()[c]}destroyPane(i){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:s})=>{delete s.historic.panelInstanceDesceriptors[i]})}},OR=Mt;Fe();var xde=30*60*1e3,WAe=1e3*60*60;function KAe(){return ye(this,null,function*(){let i=me().atomP.ahistoric.visibilityState;if((0,OR.val)(i)==="everythingIsVisible")return;let s=vj(),a=(0,OR.pointerToPrism)(i).onStale(()=>{(0,OR.val)(i)==="everythingIsVisible"&&(a(),s.resolve(void 0))});return s.promise})}function qAe(){return ye(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield DR(500),yield KAe();;){let i=(0,OR.val)(me().atomP.ahistoric.updateChecker);if(i&&i.result!=="error"){let s=i.lastChecked,a=Date.now(),c=Math.abs(a-s);c<xde&&(yield DR(xde-c))}try{let s=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(s.ok){let a=yield s.json();if(!XAe(a))throw new Error("Bad response");me().transaction(({drafts:c})=>{c.ahistoric.updateChecker={lastChecked:Date.now(),result:j({},a)}}),yield DR(1e3)}else throw new Error("HTTP Error ".concat(s.statusText))}catch{yield DR(WAe)}}})}var DR=i=>new Promise(s=>setTimeout(s,i));function XAe(i){if(typeof i!="object")return!1;let s=i;return typeof s.hasUpdates!="boolean"?!1:s.hasUpdates===!0&&typeof s.newVersion=="string"&&typeof s.releasePage=="string"||s.hasUpdates===!1}var YAe=Q(fx());function Kd(i){return new Promise((s,a)=>{i.oncomplete=i.onsuccess=()=>s(i.result),i.onabort=i.onerror=()=>a(i.error)})}function Sde(i,s){let a=indexedDB.open(i);a.onupgradeneeded=()=>a.result.createObjectStore(s);let c=Kd(a);return(h,f)=>c.then(g=>f(g.transaction(s,h).objectStore(s)))}var _j;function lb(){return _j||(_j=Sde("keyval-store","keyval")),_j}function ZAe(i,s=lb()){return s("readonly",a=>Kd(a.get(i)))}function QAe(i,s,a=lb()){return a("readwrite",c=>(c.put(s,i),Kd(c.transaction)))}function JAe(i,s=lb()){return s("readwrite",a=>(a.delete(i),Kd(a.transaction)))}function wj(i,s){return i.openCursor().onsuccess=function(){this.result&&(s(this.result),this.result.continue())},Kd(i.transaction)}function eIe(i=lb()){return i("readonly",s=>{if(s.getAllKeys)return Kd(s.getAllKeys());let a=[];return wj(s,c=>a.push(c.key)).then(()=>a)})}function tIe(i=lb()){return i("readonly",s=>{if(s.getAll)return Kd(s.getAll());let a=[];return wj(s,c=>a.push(c.value)).then(()=>a)})}function nIe(i=lb()){return i("readonly",s=>{if(s.getAll&&s.getAllKeys)return Promise.all([Kd(s.getAllKeys()),Kd(s.getAll())]).then(([c,h])=>c.map((f,g)=>[f,h[g]]));let a=[];return i("readonly",c=>wj(c,h=>a.push([h.key,h.value])).then(()=>a))})}var rIe=i=>{let s=Sde("theatrejs-".concat(i),"default-store");return{set:(a,c)=>QAe(a,c,s),get:a=>ZAe(a,s),del:a=>JAe(a,s),keys:()=>eIe(s),entries:()=>nIe(s),values:()=>tIe(s)}};ZJ(),kS();var Ede="theatre-0.4",iIe=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,oIe="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",sIe=class{constructor(){Pe(this,"ui"),Pe(this,"publicApi"),Pe(this,"address"),Pe(this,"_projectsProxy",new xR.PointerProxy(new xR.Atom({}).pointer)),Pe(this,"projectsP",this._projectsProxy.pointer),Pe(this,"_store",new zAe),Pe(this,"_corePrivateApi"),Pe(this,"_cache",new bj),Pe(this,"paneManager"),Pe(this,"_coreAtom",new xR.Atom({})),Pe(this,"_initializedDeferred",vj()),Pe(this,"_initializeFnCalled",!1),Pe(this,"_didWarnAboutNotInitializing",!1),Pe(this,"_coreBits"),Pe(this,"_rafDriver"),this.address={studioId:fS(10)},this.publicApi=new GAe(this),this.ui=new J2e(this),this._attachToIncomingProjects(),this.paneManager=new $Ae(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(iIe),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(i){return ye(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(oIe);let s={persistenceKey:Ede,usePersistentStorage:!0};if(typeof(i==null?void 0:i.persistenceKey)=="string"&&(s.persistenceKey=i.persistenceKey),((i==null?void 0:i.usePersistentStorage)===!1||typeof window>"u")&&(s.usePersistentStorage=!1),i!=null&&i.__experimental_rafDriver){if(i.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let a=this._coreBits.privateAPI(i.__experimental_rafDriver);if(!a)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=a}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(s)}catch(a){this._initializedDeferred.reject(a);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),qAe().catch(a=>{console.error(a)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let i=(0,xR.pointerToPrism)(this.projectsP),s=a=>{for(let c of Object.values(a))c.isAttachedToStudio||c.attachToStudio(this)};i.onStale(()=>{s(i.getValue())}),s(i.getValue())}setCoreBits(i){this._coreBits=i,this._corePrivateApi=i.privateAPI,this._coreAtom.setByPointer(s=>s.core,i.coreExports),this._setProjectsP(i.projectsP)}_setProjectsP(i){this._projectsProxy.setPointer(i)}scrub(){return new Z2e(this)}tempTransaction(i){return this._store.tempTransaction(i)}transaction(i){return this.tempTransaction(i).commit()}__dev_startHistoryFromScratch(i){return this._store.__dev_startHistoryFromScratch(i)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(i,s){if(!i||typeof i!="object")throw new Error("Extensions must be JS objects");if(typeof i.id!="string")throw new Error("extension.id must be a string");let a=(s==null?void 0:s.__experimental_reconfigure)===!0,c=i.id,h=this._store.getState().ephemeral.extensions.byId[c];if(h&&!a){if(i===h||(0,YAe.default)(i,h))return;throw new Error('Extension id "'.concat(i.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:f})=>{var g,y;f.ephemeral.extensions.byId[i.id]=i;let w=f.ephemeral.extensions.paneClasses;a&&h&&((g=h.panes)==null||g.forEach(S=>{delete w[S.class]})),(y=i.panes)==null||y.forEach(S=>{if(typeof S.class!="string")throw new Error("pane.class must be a string");if(S.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let T=w[S.class];if(T)if(a&&T.extensionId===i.id)console.warn('Pane class "'.concat(S.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(S.class,'" already exists and is supplied by extension ').concat(T));w[S.class]={extensionId:i.id,classDefinition:S}})})}getStudioProject(i){return this._cache.get("getStudioProject",()=>i.getProject("Studio"))}getExtensionSheet(i,s){return this._cache.get("extensionSheet-"+i,()=>this.getStudioProject(s).sheet("Extension "+i))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(i){return this._store.createContentOfSaveFile(i)}createAssetStorage(i,s){return ye(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let a=rIe("".concat(i.address.projectId,"-assets")),c=RU(i),h=yield a.keys();yield Promise.all(h.map(S=>ye(this,null,function*(){c.includes(S)||(yield a.del(S))}))),yield Promise.all(h.map(S=>ye(this,null,function*(){var T,I;let A="".concat(s,"/").concat(S);try{(yield fetch(A,{method:"HEAD"})).ok&&(yield a.del(S))}catch{PS.error("Failed to access assets","Failed to access assets at ".concat((I=(T=i.config.assets)==null?void 0:T.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."))}})));let f=new Map(yield a.entries()),g=new Map,y=S=>{if(g.has(S))return g.get(S);{let T=URL.createObjectURL(S);return g.set(S,T),T}},w=S=>{let T=f.get(S);if(!T)throw new Error("Asset with id ".concat(S," not found"));return y(T)};return{getAssetUrl:S=>f.has(S)?w(S):"".concat(s,"/").concat(S),createAsset:S=>ye(this,null,function*(){var T,I,A;let k=RU(i),D=!1;if(k.includes(S.name)){let O;try{O=(T=f.get(S.name))!=null?T:yield fetch("".concat(s,"/").concat(S.name)).then(F=>F.ok?F.blob():void 0)}catch{return PS.error("Failed to access assets","Failed to access assets at ".concat((A=(I=i.config.assets)==null?void 0:I.baseUrl)!=null?A:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(O){if(D=yield(yield Promise.resolve().then(()=>Q(X2e()))).default.isEqual(S,O),D)return S.name;{let F=V=>{let $=prompt(V,S.name);return $===null?!1:$===""?F("Asset name cannot be empty. Please choose a different file name for this asset."):k.includes($)?(console.log(k),F("An asset with this name already exists. Please choose a different file name for this asset.")):(S=new File([S],$,{type:S.type}),!0)};if(!F("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return f.set(S.name,S),yield a.set(S.name,S),S.name})}})}clearPersistentStorage(i=Ede){this._store.__experimental_clearPersistentStorage(i)}},xj="__TheatreJS_StudioBundle",aIe="__TheatreJS_CoreBundle",lIe="__TheatreJS_Notifications",uIe=class{constructor(i){this._studio=i,Pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(i){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=i;let s;i.getBitsForStudio(this._studio,a=>{s=a}),this._studio.setCoreBits(s)}},cIe=Q(Re());Ne();var Cde,dIe=se.div(Cde||(Cde=H([""]))),hIe=i=>cIe.default.createElement(dIe,null),pIe=hIe;kS();var Sj=new sIe;it(Sj);var fIe=Sj.publicApi,mIe=fIe;vIe();function vIe(){if(typeof window>"u")return;let i=window[xj];if(typeof i<"u")throw typeof i=="object"&&i&&typeof i.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(xj," seems to be already set by a module other than @theatre/core."));let s=new uIe(Sj);window[xj]=s;let a=window[aIe];a&&a!==null&&a.type==="Theatre_CoreBundle"&&s.registerCoreBundle(a)}typeof window<"u"&&(window[lIe]={notify:PS});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(P3,P3.exports);var N3e=P3.exports;const r_=X0e(N3e);class F3e{constructor(e,n,r){ki(this,"channel");ki(this,"components",new Map);ki(this,"_mode","app");this.editor=n&&document.location.hash.search(r)>-1,n&&(this.channel=new BroadcastChannel(e))}addComponent(e,n){this.components.set(e,n)}dispose(){this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){this.channel!==void 0&&this._mode!==e.target&&this.channel.postMessage(e)}listen(e){this.channel!==void 0&&(this.channel.onmessage=n=>{e(n.data)})}get mode(){return this._mode}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor",document.title+=" - Editor")}}class cL{constructor(e){ki(this,"app");this.app=e}dispose(){}}class B3e extends cL{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}}var k3={exports:{}};k3.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(v,E,L)=>E in v?r(v,E,{enumerable:!0,configurable:!0,writable:!0,value:L}):v[E]=L,G=(v,E)=>{for(var L in E||(E={}))M.call(E,L)&&N(v,L,E[L]);if(_)for(var L of _(E))R.call(E,L)&&N(v,L,E[L]);return v},Z=(v,E)=>o(v,p(E)),j=(v,E)=>function(){return E||(0,v[m(v)[0]])((E={exports:{}}).exports,E),E.exports},z=(v,E)=>{for(var L in E)r(v,L,{get:E[L],enumerable:!0})},U=(v,E,L,q)=>{if(E&&typeof E=="object"||typeof E=="function")for(let ie of m(E))!M.call(v,ie)&&ie!==L&&r(v,ie,{get:()=>E[ie],enumerable:!(q=u(E,ie))||q.enumerable});return v},C=(v,E,L)=>(L=v!=null?n(x(v)):{},U(E||!v||!v.__esModule?r(L,"default",{value:v,enumerable:!0}):L,v)),K=v=>U(r({},"__esModule",{value:!0}),v),te=(v,E,L)=>(N(v,typeof E!="symbol"?E+"":E,L),L),pe=j({"../node_modules/timing-function/lib/UnitBezier.js"(v,E){E.exports=function(){function L(q,ie,de,Me){this.set(q,ie,de,Me)}return L.prototype.set=function(q,ie,de,Me){this._cx=3*q,this._bx=3*(de-q)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*ie,this._by=3*(Me-ie)-this._cy,this._ay=1-this._cy-this._by},L.epsilon=1e-6,L.prototype._sampleCurveX=function(q){return((this._ax*q+this._bx)*q+this._cx)*q},L.prototype._sampleCurveY=function(q){return((this._ay*q+this._by)*q+this._cy)*q},L.prototype._sampleCurveDerivativeX=function(q){return(3*this._ax*q+2*this._bx)*q+this._cx},L.prototype._solveCurveX=function(q,ie){var de,Me,$e,Ke,gt,se;for($e=void 0,Ke=void 0,gt=void 0,se=void 0,de=void 0,Me=void 0,gt=q,Me=0;Me<8;){if(se=this._sampleCurveX(gt)-q,Math.abs(se)<ie)return gt;if(de=this._sampleCurveDerivativeX(gt),Math.abs(de)<ie)break;gt=gt-se/de,Me++}if($e=0,Ke=1,gt=q,gt<$e)return $e;if(gt>Ke)return Ke;for(;$e<Ke;){if(se=this._sampleCurveX(gt),Math.abs(se-q)<ie)return gt;q>se?$e=gt:Ke=gt,gt=(Ke-$e)*.5+$e}return gt},L.prototype.solve=function(q,ie){return this._sampleCurveY(this._solveCurveX(q,ie))},L.prototype.solveSimple=function(q){return this._sampleCurveY(this._solveCurveX(q,1e-6))},L}()}}),Q=j({"../node_modules/levenshtein-edit-distance/index.js"(v,E){var L,q;L=[],q=[];function ie(de,Me,$e){var Ke,gt,se,Ne,$t,bn,un,qn;if(de===Me)return 0;if(Ke=de.length,gt=Me.length,Ke===0)return gt;if(gt===0)return Ke;for($e&&(de=de.toLowerCase(),Me=Me.toLowerCase()),un=0;un<Ke;)q[un]=de.charCodeAt(un),L[un]=++un;for(qn=0;qn<gt;)for(se=Me.charCodeAt(qn),Ne=$t=qn++,un=-1;++un<Ke;)bn=se===q[un]?$t:$t+1,$t=L[un],L[un]=Ne=$t>Ne?bn>Ne?Ne+1:bn:bn>$t?$t+1:bn;return Ne}E.exports=ie}}),Se=j({"../node_modules/propose/propose.js"(v,E){var L=Q();function q(){var ie,de,Me,$e,Ke,gt=0,se=arguments[0],Ne=arguments[1],$t=Ne.length,bn=arguments[2];bn&&($e=bn.threshold,Ke=bn.ignoreCase),$e===void 0&&($e=0);for(var un=0;un<$t;++un)Ke?de=L(se,Ne[un],!0):de=L(se,Ne[un]),de>se.length?ie=1-de/Ne[un].length:ie=1-de/se.length,ie>gt&&(gt=ie,Me=Ne[un]);return gt>=$e?Me:null}E.exports=q}}),Pe=j({"../node_modules/fast-deep-equal/index.js"(v,E){E.exports=function L(q,ie){if(q===ie)return!0;if(q&&ie&&typeof q=="object"&&typeof ie=="object"){if(q.constructor!==ie.constructor)return!1;var de,Me,$e;if(Array.isArray(q)){if(de=q.length,de!=ie.length)return!1;for(Me=de;Me--!==0;)if(!L(q[Me],ie[Me]))return!1;return!0}if(q.constructor===RegExp)return q.source===ie.source&&q.flags===ie.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===ie.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===ie.toString();if($e=Object.keys(q),de=$e.length,de!==Object.keys(ie).length)return!1;for(Me=de;Me--!==0;)if(!Object.prototype.hasOwnProperty.call(ie,$e[Me]))return!1;for(Me=de;Me--!==0;){var Ke=$e[Me];if(!L(q[Ke],ie[Ke]))return!1}return!0}return q!==q&&ie!==ie}}}),H={};z(H,{createRafDriver:()=>Y0,getProject:()=>Mx,notify:()=>ap,onChange:()=>py,types:()=>ux,val:()=>Ax}),t.exports=K(H);var ye={};z(ye,{createRafDriver:()=>Y0,getProject:()=>Mx,notify:()=>ap,onChange:()=>py,types:()=>ux,val:()=>Ax});var St=Mt,kt=class{constructor(){te(this,"atom",new St.Atom({projects:{}}))}add(v,E){this.atom.setByPointer(L=>L.projects[v],E)}get(v){return this.atom.get().projects[v]}has(v){return!!this.get(v)}},it=new kt,me=it,lt=new WeakMap;function Fe(v){return lt.get(v)}function vt(v,E){lt.set(v,E)}var Ge=[],mt=Array.isArray,Je=mt,Be=typeof Ti=="object"&&Ti&&Ti.Object===Object&&Ti,nt=Be,Gt=typeof self=="object"&&self&&self.Object===Object&&self,Bt=nt||Gt||Function("return this")(),Dt=Bt,Jt=Dt.Symbol,on=Jt,wn=Object.prototype,Wn=wn.hasOwnProperty,Kr=wn.toString,xn=on?on.toStringTag:void 0;function et(v){var E=Wn.call(v,xn),L=v[xn];try{v[xn]=void 0;var q=!0}catch{}var ie=Kr.call(v);return q&&(E?v[xn]=L:delete v[xn]),ie}var Zr=et,Pn=Object.prototype,Sn=Pn.toString;function gn(v){return Sn.call(v)}var Mr=gn,kn="[object Null]",Nn="[object Undefined]",cr=on?on.toStringTag:void 0;function oi(v){return v==null?v===void 0?Nn:kn:cr&&cr in Object(v)?Zr(v):Mr(v)}var Rr=oi;function Ee(v){return v!=null&&typeof v=="object"}var ce=Ee,ut="[object Symbol]";function Ut(v){return typeof v=="symbol"||ce(v)&&Rr(v)==ut}var Ot=Ut,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mn=/^\w*$/;function zt(v,E){if(Je(v))return!1;var L=typeof v;return L=="number"||L=="symbol"||L=="boolean"||v==null||Ot(v)?!0:mn.test(v)||!Ft.test(v)||E!=null&&v in Object(E)}var pt=zt;function En(v){var E=typeof v;return v!=null&&(E=="object"||E=="function")}var en=En,yn="[object AsyncFunction]",rn="[object Function]",Qt="[object GeneratorFunction]",Bn="[object Proxy]";function pr(v){if(!en(v))return!1;var E=Rr(v);return E==rn||E==Qt||E==yn||E==Bn}var Le=pr,Ht=Dt["__core-js_shared__"],dt=Ht,Vt=function(){var v=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}();function Kt(v){return!!Vt&&Vt in v}var Qn=Kt,Or=Function.prototype,kr=Or.toString;function Jo(v){if(v!=null){try{return kr.call(v)}catch{}try{return v+""}catch{}}return""}var rr=Jo,Vr=/[\\^$.*+?()[\]{}|]/g,Tr=/^\[object .+?Constructor\]$/,Xc=Function.prototype,Yc=Object.prototype,Zc=Xc.toString,Wa=Yc.hasOwnProperty,Qc=RegExp("^"+Zc.call(Wa).replace(Vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gu(v){if(!en(v)||Qn(v))return!1;var E=Le(v)?Qc:Tr;return E.test(rr(v))}var ba=Gu;function Jc(v,E){return v==null?void 0:v[E]}var Dh=Jc;function dm(v,E){var L=Dh(v,E);return ba(L)?L:void 0}var _e=dm,tt=_e(Object,"create"),yt=tt;function We(){this.__data__=yt?yt(null):{},this.size=0}var _t=We;function qt(v){var E=this.has(v)&&delete this.__data__[v];return this.size-=E?1:0,E}var pn=qt,Ln="__lodash_hash_undefined__",Tn=Object.prototype,Kn=Tn.hasOwnProperty;function Mn(v){var E=this.__data__;if(yt){var L=E[v];return L===Ln?void 0:L}return Kn.call(E,v)?E[v]:void 0}var jn=Mn,Dr=Object.prototype,lr=Dr.hasOwnProperty;function qr(v){var E=this.__data__;return yt?E[v]!==void 0:lr.call(E,v)}var xs=qr,jr="__lodash_hash_undefined__";function Yn(v,E){var L=this.__data__;return this.size+=this.has(v)?0:1,L[v]=yt&&E===void 0?jr:E,this}var Ka=Yn;function wr(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}wr.prototype.clear=_t,wr.prototype.delete=pn,wr.prototype.get=jn,wr.prototype.has=xs,wr.prototype.set=Ka;var Xs=wr;function qa(){this.__data__=[],this.size=0}var Ys=qa;function Xa(v,E){return v===E||v!==v&&E!==E}var Xr=Xa;function es(v,E){for(var L=v.length;L--;)if(Xr(v[L][0],E))return L;return-1}var Ya=es,eo=Array.prototype,$u=eo.splice;function Lh(v){var E=this.__data__,L=Ya(E,v);if(L<0)return!1;var q=E.length-1;return L==q?E.pop():$u.call(E,L,1),--this.size,!0}var ed=Lh;function hm(v){var E=this.__data__,L=Ya(E,v);return L<0?void 0:E[L][1]}var jl=hm;function pm(v){return Ya(this.__data__,v)>-1}var Nh=pm;function fm(v,E){var L=this.__data__,q=Ya(L,v);return q<0?(++this.size,L.push([v,E])):L[q][1]=E,this}var lw=fm;function Za(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Za.prototype.clear=Ys,Za.prototype.delete=ed,Za.prototype.get=jl,Za.prototype.has=Nh,Za.prototype.set=lw;var td=Za,uw=_e(Dt,"Map"),nd=uw;function Qg(){this.size=0,this.__data__={hash:new Xs,map:new(nd||td),string:new Xs}}var Jg=Qg;function Qa(v){var E=typeof v;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?v!=="__proto__":v===null}var e0=Qa;function cw(v,E){var L=v.__data__;return e0(E)?L[typeof E=="string"?"string":"hash"]:L.map}var rd=cw;function mm(v){var E=rd(this,v).delete(v);return this.size-=E?1:0,E}var vm=mm;function gm(v){return rd(this,v).get(v)}var t0=gm;function n0(v){return rd(this,v).has(v)}var r0=n0;function i0(v,E){var L=rd(this,v),q=L.size;return L.set(v,E),this.size+=L.size==q?0:1,this}var dw=i0;function Wu(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Wu.prototype.clear=Jg,Wu.prototype.delete=vm,Wu.prototype.get=t0,Wu.prototype.has=r0,Wu.prototype.set=dw;var id=Wu,hw="Expected a function";function ym(v,E){if(typeof v!="function"||E!=null&&typeof E!="function")throw new TypeError(hw);var L=function(){var q=arguments,ie=E?E.apply(this,q):q[0],de=L.cache;if(de.has(ie))return de.get(ie);var Me=v.apply(this,q);return L.cache=de.set(ie,Me)||de,Me};return L.cache=new(ym.Cache||id),L}ym.Cache=id;var Ja=ym,zl=500;function o0(v){var E=Ja(v,function(q){return L.size===zl&&L.clear(),q}),L=E.cache;return E}var Fh=o0,pw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fw=/\\(\\)?/g,s0=Fh(function(v){var E=[];return v.charCodeAt(0)===46&&E.push(""),v.replace(pw,function(L,q,ie,de){E.push(ie?de.replace(fw,"$1"):q||L)}),E}),mw=s0;function vw(v,E){for(var L=-1,q=v==null?0:v.length,ie=Array(q);++L<q;)ie[L]=E(v[L],L,v);return ie}var a0=vw,l0=1/0,u0=on?on.prototype:void 0,bm=u0?u0.toString:void 0;function c0(v){if(typeof v=="string")return v;if(Je(v))return a0(v,c0)+"";if(Ot(v))return bm?bm.call(v):"";var E=v+"";return E=="0"&&1/v==-l0?"-0":E}var d0=c0;function h0(v){return v==null?"":d0(v)}var _m=h0;function Bh(v,E){return Je(v)?v:pt(v,E)?[v]:mw(_m(v))}var Ku=Bh,p0=1/0;function gw(v){if(typeof v=="string"||Ot(v))return v;var E=v+"";return E=="0"&&1/v==-p0?"-0":E}var Zs=gw;function od(v,E){E=Ku(E,v);for(var L=0,q=E.length;v!=null&&L<q;)v=v[Zs(E[L++])];return L&&L==q?v:void 0}var sd=od;function Hl(v,E,L){var q=v==null?void 0:sd(v,E);return q===void 0?L:q}var el=Hl;function wm(v,E){return E.length===0?v:el(v,E)}var Gl=class{constructor(){te(this,"_values",{})}get(v,E){if(this.has(v))return this._values[v];{const L=E();return this._values[v]=L,L}}has(v){return this._values.hasOwnProperty(v)}},zi=Mt,ad=function(){try{var v=_e(Object,"defineProperty");return v({},"",{}),v}catch{}}(),Uh=ad;function yw(v,E,L){E=="__proto__"&&Uh?Uh(v,E,{configurable:!0,enumerable:!0,value:L,writable:!0}):v[E]=L}var $l=yw,tl=Object.prototype,xm=tl.hasOwnProperty;function bw(v,E,L){var q=v[E];(!(xm.call(v,E)&&Xr(q,L))||L===void 0&&!(E in v))&&$l(v,E,L)}var Vh=bw,_w=9007199254740991,f0=/^(?:0|[1-9]\d*)$/;function m0(v,E){var L=typeof v;return E=E??_w,!!E&&(L=="number"||L!="symbol"&&f0.test(v))&&v>-1&&v%1==0&&v<E}var Sm=m0;function ww(v,E,L,q){if(!en(v))return v;E=Ku(E,v);for(var ie=-1,de=E.length,Me=de-1,$e=v;$e!=null&&++ie<de;){var Ke=Zs(E[ie]),gt=L;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return v;if(ie!=Me){var se=$e[Ke];gt=q?q(se,Ke,$e):void 0,gt===void 0&&(gt=en(se)?se:Sm(E[ie+1])?[]:{})}Vh($e,Ke,gt),$e=$e[Ke]}return v}var jh=ww;function Em(v,E,L){return v==null?v:jh(v,E,L)}var zh=Em,Hi=new WeakMap;function xw(v){return Cm(v)}function Cm(v){if(Hi.has(v))return Hi.get(v);const E=v.type==="compound"?km(v):v.type==="enum"?Pm(v):v.default;return Hi.set(v,E),E}function Pm(v){const E={$case:v.defaultCase};for(const[L,q]of Object.entries(v.cases))E[L]=Cm(q);return E}function km(v){const E={};for(const[L,q]of Object.entries(v.props))E[L]=Cm(q);return E}var Gi=Mt,Hh=C(pe());function Sw(v,E,L){return(0,Gi.prism)(()=>{const q=(0,Gi.val)(E);return Gi.prism.memo("driver",()=>q?q.type==="BasicKeyframedTrack"?Gh(v,q,L):(v.logger.error("Track type not yet supported."),(0,Gi.prism)(()=>{})):(0,Gi.prism)(()=>{}),[q]).getValue()})}function Gh(v,E,L){return(0,Gi.prism)(()=>{let q=Gi.prism.ref("state",{started:!1}),ie=q.current;const de=L.getValue();return(!ie.started||de<ie.validFrom||ie.validTo<=de)&&(q.current=ie=Ew(v,L,E)),ie.der.getValue()})}var $h=(0,Gi.prism)(()=>{});function Ew(v,E,L){const q=E.getValue();if(L.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:$h};let ie=0;for(;;){const de=L.keyframes[ie];if(!de)return si.error;const Me=ie===L.keyframes.length-1;if(q<de.position)return ie===0?si.beforeFirstKeyframe(de):si.error;if(de.position===q)return Me?si.lastKeyframe(de):si.between(de,L.keyframes[ie+1],E);if(ie===L.keyframes.length-1)return si.lastKeyframe(de);{const $e=ie+1;if(L.keyframes[$e].position<=q){ie=$e;continue}else return si.between(de,L.keyframes[ie+1],E)}}}var si={beforeFirstKeyframe(v){return{started:!0,validFrom:-1/0,validTo:v.position,der:(0,Gi.prism)(()=>({left:v.value,progression:0}))}},lastKeyframe(v){return{started:!0,validFrom:v.position,validTo:1/0,der:(0,Gi.prism)(()=>({left:v.value,progression:0}))}},between(v,E,L){if(!v.connectedRight)return{started:!0,validFrom:v.position,validTo:E.position,der:(0,Gi.prism)(()=>({left:v.value,progression:0}))};const q=de=>(de-v.position)/(E.position-v.position);if(!v.type||v.type==="bezier"){const de=new Hh.default(v.handles[2],v.handles[3],E.handles[0],E.handles[1]),Me=(0,Gi.prism)(()=>{const $e=q(L.getValue()),Ke=de.solveSimple($e);return{left:v.value,right:E.value,progression:Ke}});return{started:!0,validFrom:v.position,validTo:E.position,der:Me}}const ie=(0,Gi.prism)(()=>{const de=q(L.getValue()),Me=Math.floor(de);return{left:v.value,right:E.value,progression:Me}});return{started:!0,validFrom:v.position,validTo:E.position,der:ie}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:$h}};function nl(v,E,L){const ie=L.get(v);if(ie&&ie.override===E)return ie.merged;const de=G({},v);for(const Me of Object.keys(E)){const $e=E[Me],Ke=v[Me];de[Me]=typeof $e=="object"&&typeof Ke=="object"?nl(Ke,$e,L):$e===void 0?Ke:$e}return L.set(v,{override:E,merged:de}),de}function ld(v,E){let L=v;for(const q of E)L=L[q];return L}var qu=Mt,Tm=(v,E)=>{const L=qu.prism.memo(v,()=>new qu.Atom(E),[]);return L.set(E),L},xr=Mt,Mm=Mt,Cw=/\s/;function Wh(v){for(var E=v.length;E--&&Cw.test(v.charAt(E)););return E}var Am=Wh,v0=/^\s+/;function Pw(v){return v&&v.slice(0,Am(v)+1).replace(v0,"")}var Xu=Pw,Kh=0/0,kw=/^[-+]0x[0-9a-f]+$/i,g0=/^0b[01]+$/i,ud=/^0o[0-7]+$/i,Im=parseInt;function Tw(v){if(typeof v=="number")return v;if(Ot(v))return Kh;if(en(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=en(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=Xu(v);var L=g0.test(v);return L||ud.test(v)?Im(v.slice(2),L?2:8):kw.test(v)?Kh:+v}var ee=Tw,ve=1/0,De=17976931348623157e292;function ft(v){if(!v)return v===0?v:0;if(v=ee(v),v===ve||v===-ve){var E=v<0?-1:1;return E*De}return v===v?v:0}var Rn=ft;function dr(v){var E=Rn(v),L=E%1;return E===E?L?E-L:E:0}var to=dr;function Ss(v){return v}var y0=Ss,Yu=_e(Dt,"WeakMap"),Zu=Yu,$P=Object.create,DL=function(){function v(){}return function(E){if(!en(E))return{};if($P)return $P(E);v.prototype=E;var L=new v;return v.prototype=void 0,L}}(),WP=DL;function Mw(v,E){var L=-1,q=v.length;for(E||(E=Array(q));++L<q;)E[L]=v[L];return E}var LL=Mw;function Aw(v,E){for(var L=-1,q=v==null?0:v.length;++L<q&&E(v[L],L,v)!==!1;);return v}var KP=Aw;function qP(v,E,L,q){var ie=!L;L||(L={});for(var de=-1,Me=E.length;++de<Me;){var $e=E[de],Ke=q?q(L[$e],v[$e],$e,L,v):void 0;Ke===void 0&&(Ke=v[$e]),ie?$l(L,$e,Ke):Vh(L,$e,Ke)}return L}var Rm=qP,b0=9007199254740991;function Iw(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=b0}var Rw=Iw;function XP(v){return v!=null&&Rw(v.length)&&!Le(v)}var YP=XP,Ow=Object.prototype;function Dw(v){var E=v&&v.constructor,L=typeof E=="function"&&E.prototype||Ow;return v===L}var _0=Dw;function Lw(v,E){for(var L=-1,q=Array(v);++L<v;)q[L]=E(L);return q}var ZP=Lw,QP="[object Arguments]";function w0(v){return ce(v)&&Rr(v)==QP}var Nw=w0,JP=Object.prototype,ek=JP.hasOwnProperty,tk=JP.propertyIsEnumerable,nk=Nw(function(){return arguments}())?Nw:function(v){return ce(v)&&ek.call(v,"callee")&&!tk.call(v,"callee")},Fw=nk;function rk(){return!1}var ik=rk,Bw=e&&!e.nodeType&&e,Uw=Bw&&!0&&t&&!t.nodeType&&t,ok=Uw&&Uw.exports===Bw,Vw=ok?Dt.Buffer:void 0,sk=Vw?Vw.isBuffer:void 0,ak=sk||ik,Om=ak,lk="[object Arguments]",uk="[object Array]",ck="[object Boolean]",dk="[object Date]",hk="[object Error]",pk="[object Function]",fk="[object Map]",mk="[object Number]",vk="[object Object]",gk="[object RegExp]",yk="[object Set]",zr="[object String]",bk="[object WeakMap]",NL="[object ArrayBuffer]",FL="[object DataView]",x0="[object Float32Array]",jw="[object Float64Array]",zw="[object Int8Array]",qh="[object Int16Array]",_k="[object Int32Array]",S0="[object Uint8Array]",wk="[object Uint8ClampedArray]",Hw="[object Uint16Array]",BL="[object Uint32Array]",Lr={};Lr[x0]=Lr[jw]=Lr[zw]=Lr[qh]=Lr[_k]=Lr[S0]=Lr[wk]=Lr[Hw]=Lr[BL]=!0,Lr[lk]=Lr[uk]=Lr[NL]=Lr[ck]=Lr[FL]=Lr[dk]=Lr[hk]=Lr[pk]=Lr[fk]=Lr[mk]=Lr[vk]=Lr[gk]=Lr[yk]=Lr[zr]=Lr[bk]=!1;function xk(v){return ce(v)&&Rw(v.length)&&!!Lr[Rr(v)]}var Gw=xk;function Sk(v){return function(E){return v(E)}}var $w=Sk,Ww=e&&!e.nodeType&&e,Xh=Ww&&!0&&t&&!t.nodeType&&t,Ek=Xh&&Xh.exports===Ww,Kw=Ek&&nt.process,UL=function(){try{var v=Xh&&Xh.require&&Xh.require("util").types;return v||Kw&&Kw.binding&&Kw.binding("util")}catch{}}(),Qu=UL,qw=Qu&&Qu.isTypedArray,Ck=qw?$w(qw):Gw,Xw=Ck,VL=Object.prototype,jL=VL.hasOwnProperty;function Pk(v,E){var L=Je(v),q=!L&&Fw(v),ie=!L&&!q&&Om(v),de=!L&&!q&&!ie&&Xw(v),Me=L||q||ie||de,$e=Me?ZP(v.length,String):[],Ke=$e.length;for(var gt in v)(E||jL.call(v,gt))&&!(Me&&(gt=="length"||ie&&(gt=="offset"||gt=="parent")||de&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||Sm(gt,Ke)))&&$e.push(gt);return $e}var Yw=Pk;function kk(v,E){return function(L){return v(E(L))}}var Tk=kk,zL=Tk(Object.keys,Object),E0=zL,Zw=Object.prototype,HL=Zw.hasOwnProperty;function Mk(v){if(!_0(v))return E0(v);var E=[];for(var L in Object(v))HL.call(v,L)&&L!="constructor"&&E.push(L);return E}var Ak=Mk;function C0(v){return YP(v)?Yw(v):Ak(v)}var cd=C0;function Ik(v){var E=[];if(v!=null)for(var L in Object(v))E.push(L);return E}var Yh=Ik,P0=Object.prototype,GL=P0.hasOwnProperty;function Rk(v){if(!en(v))return Yh(v);var E=_0(v),L=[];for(var q in v)q=="constructor"&&(E||!GL.call(v,q))||L.push(q);return L}var $L=Rk;function WL(v){return YP(v)?Yw(v,!0):$L(v)}var k0=WL;function KL(v,E){for(var L=-1,q=E.length,ie=v.length;++L<q;)v[ie+L]=E[L];return v}var Ok=KL,Dk=Tk(Object.getPrototypeOf,Object),T0=Dk,Lk="[object Object]",Nk=Function.prototype,qL=Object.prototype,Fk=Nk.toString,Bk=qL.hasOwnProperty,Uk=Fk.call(Object);function Vk(v){if(!ce(v)||Rr(v)!=Lk)return!1;var E=T0(v);if(E===null)return!0;var L=Bk.call(E,"constructor")&&E.constructor;return typeof L=="function"&&L instanceof L&&Fk.call(L)==Uk}var XL=Vk;function YL(v,E,L){var q=-1,ie=v.length;E<0&&(E=-E>ie?0:ie+E),L=L>ie?ie:L,L<0&&(L+=ie),ie=E>L?0:L-E>>>0,E>>>=0;for(var de=Array(ie);++q<ie;)de[q]=v[q+E];return de}var Qw=YL;function jk(v,E,L){var q=v.length;return L=L===void 0?q:L,!E&&L>=q?v:Qw(v,E,L)}var ZL=jk,Zh="\\ud800-\\udfff",Jw="\\u0300-\\u036f",QL="\\ufe20-\\ufe2f",JL="\\u20d0-\\u20ff",zk=Jw+QL+JL,eN="\\ufe0e\\ufe0f",tN="\\u200d",Dm=RegExp("["+tN+Zh+zk+eN+"]");function M0(v){return Dm.test(v)}var e1=M0;function Hk(v){return v.split("")}var Gk=Hk,t1="\\ud800-\\udfff",nN="\\u0300-\\u036f",rN="\\ufe20-\\ufe2f",$k="\\u20d0-\\u20ff",iN=nN+rN+$k,oN="\\ufe0e\\ufe0f",Wk="["+t1+"]",n1="["+iN+"]",r1="\\ud83c[\\udffb-\\udfff]",Kk="(?:"+n1+"|"+r1+")",qk="[^"+t1+"]",dd="(?:\\ud83c[\\udde6-\\uddff]){2}",Qh="[\\ud800-\\udbff][\\udc00-\\udfff]",A0="\\u200d",i1=Kk+"?",hd="["+oN+"]?",o1="(?:"+A0+"(?:"+[qk,dd,Qh].join("|")+")"+hd+i1+")*",sN=hd+i1+o1,Xk="(?:"+[qk+n1+"?",n1,dd,Qh,Wk].join("|")+")",aN=RegExp(r1+"(?="+r1+")|"+Xk+sN,"g");function lN(v){return v.match(aN)||[]}var Yk=lN;function uN(v){return e1(v)?Yk(v):Gk(v)}var cN=uN;function Lm(v,E,L){return v===v&&(L!==void 0&&(v=v<=L?v:L),E!==void 0&&(v=v>=E?v:E)),v}var I0=Lm;function dN(v,E,L){return L===void 0&&(L=E,E=void 0),L!==void 0&&(L=ee(L),L=L===L?L:0),E!==void 0&&(E=ee(E),E=E===E?E:0),I0(ee(v),E,L)}var s1=dN;function hN(){this.__data__=new td,this.size=0}var pN=hN;function Zk(v){var E=this.__data__,L=E.delete(v);return this.size=E.size,L}var fN=Zk;function mN(v){return this.__data__.get(v)}var Qk=mN;function vN(v){return this.__data__.has(v)}var gN=vN,Jk=200;function yN(v,E){var L=this.__data__;if(L instanceof td){var q=L.__data__;if(!nd||q.length<Jk-1)return q.push([v,E]),this.size=++L.size,this;L=this.__data__=new id(q)}return L.set(v,E),this.size=L.size,this}var Jh=yN;function rl(v){var E=this.__data__=new td(v);this.size=E.size}rl.prototype.clear=pN,rl.prototype.delete=fN,rl.prototype.get=Qk,rl.prototype.has=gN,rl.prototype.set=Jh;var pd=rl;function a1(v,E){return v&&Rm(E,cd(E),v)}var eT=a1;function l1(v,E){return v&&Rm(E,k0(E),v)}var tT=l1,nT=e&&!e.nodeType&&e,u1=nT&&!0&&t&&!t.nodeType&&t,rT=u1&&u1.exports===nT,iT=rT?Dt.Buffer:void 0,c1=iT?iT.allocUnsafe:void 0;function oT(v,E){if(E)return v.slice();var L=v.length,q=c1?c1(L):new v.constructor(L);return v.copy(q),q}var sT=oT;function aT(v,E){for(var L=-1,q=v==null?0:v.length,ie=0,de=[];++L<q;){var Me=v[L];E(Me,L,v)&&(de[ie++]=Me)}return de}var bN=aT;function _N(){return[]}var Nm=_N,lT=Object.prototype,wN=lT.propertyIsEnumerable,Fm=Object.getOwnPropertySymbols,d1=Fm?function(v){return v==null?[]:(v=Object(v),bN(Fm(v),function(E){return wN.call(v,E)}))}:Nm,h1=d1;function uT(v,E){return Rm(v,h1(v),E)}var ep=uT,Bm=Object.getOwnPropertySymbols,xN=Bm?function(v){for(var E=[];v;)Ok(E,h1(v)),v=T0(v);return E}:Nm,Um=xN;function p1(v,E){return Rm(v,Um(v),E)}var SN=p1;function fd(v,E,L){var q=E(v);return Je(v)?q:Ok(q,L(v))}var tp=fd;function EN(v){return tp(v,cd,h1)}var Vm=EN;function cT(v){return tp(v,k0,Um)}var CN=cT,f1=_e(Dt,"DataView"),R0=f1,PN=_e(Dt,"Promise"),O0=PN,dT=_e(Dt,"Set"),m1=dT,v1="[object Map]",hT="[object Object]",pT="[object Promise]",fT="[object Set]",g1="[object WeakMap]",y1="[object DataView]",mT=rr(R0),b1=rr(nd),vT=rr(O0),gT=rr(m1),D0=rr(Zu),Ju=Rr;(R0&&Ju(new R0(new ArrayBuffer(1)))!=y1||nd&&Ju(new nd)!=v1||O0&&Ju(O0.resolve())!=pT||m1&&Ju(new m1)!=fT||Zu&&Ju(new Zu)!=g1)&&(Ju=function(v){var E=Rr(v),L=E==hT?v.constructor:void 0,q=L?rr(L):"";if(q)switch(q){case mT:return y1;case b1:return v1;case vT:return pT;case gT:return fT;case D0:return g1}return E});var jm=Ju,yT=Object.prototype,bT=yT.hasOwnProperty;function _T(v){var E=v.length,L=new v.constructor(E);return E&&typeof v[0]=="string"&&bT.call(v,"index")&&(L.index=v.index,L.input=v.input),L}var kN=_T,TN=Dt.Uint8Array,zm=TN;function MN(v){var E=new v.constructor(v.byteLength);return new zm(E).set(new zm(v)),E}var _1=MN;function ai(v,E){var L=E?_1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.byteLength)}var L0=ai,AN=/\w*$/;function wT(v){var E=new v.constructor(v.source,AN.exec(v));return E.lastIndex=v.lastIndex,E}var IN=wT,xT=on?on.prototype:void 0,w1=xT?xT.valueOf:void 0;function RN(v){return w1?Object(w1.call(v)):{}}var ON=RN;function ST(v,E){var L=E?_1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.length)}var DN=ST,LN="[object Boolean]",ET="[object Date]",NN="[object Map]",FN="[object Number]",CT="[object RegExp]",PT="[object Set]",BN="[object String]",np="[object Symbol]",Hm="[object ArrayBuffer]",kT="[object DataView]",UN="[object Float32Array]",TT="[object Float64Array]",VN="[object Int8Array]",jN="[object Int16Array]",MT="[object Int32Array]",zN="[object Uint8Array]",AT="[object Uint8ClampedArray]",IT="[object Uint16Array]",x1="[object Uint32Array]";function RT(v,E,L){var q=v.constructor;switch(E){case Hm:return _1(v);case LN:case ET:return new q(+v);case kT:return L0(v,L);case UN:case TT:case VN:case jN:case MT:case zN:case AT:case IT:case x1:return DN(v,L);case NN:return new q;case FN:case BN:return new q(v);case CT:return IN(v);case PT:return new q;case np:return ON(v)}}var OT=RT;function HN(v){return typeof v.constructor=="function"&&!_0(v)?WP(T0(v)):{}}var GN=HN,DT="[object Map]";function $N(v){return ce(v)&&jm(v)==DT}var WN=$N,N0=Qu&&Qu.isMap,KN=N0?$w(N0):WN,LT=KN,F0="[object Set]";function qN(v){return ce(v)&&jm(v)==F0}var NT=qN,Gm=Qu&&Qu.isSet,XN=Gm?$w(Gm):NT,FT=XN,md=1,BT=2,S1=4,E1="[object Arguments]",C1="[object Array]",P1="[object Boolean]",k1="[object Date]",T1="[object Error]",M1="[object Function]",UT="[object GeneratorFunction]",VT="[object Map]",jT="[object Number]",A1="[object Object]",ec="[object RegExp]",I1="[object Set]",YN="[object String]",zT="[object Symbol]",R1="[object WeakMap]",ZN="[object ArrayBuffer]",QN="[object DataView]",HT="[object Float32Array]",GT="[object Float64Array]",JN="[object Int8Array]",e5="[object Int16Array]",$T="[object Int32Array]",t5="[object Uint8Array]",B0="[object Uint8ClampedArray]",O1="[object Uint16Array]",WT="[object Uint32Array]",Hr={};Hr[E1]=Hr[C1]=Hr[ZN]=Hr[QN]=Hr[P1]=Hr[k1]=Hr[HT]=Hr[GT]=Hr[JN]=Hr[e5]=Hr[$T]=Hr[VT]=Hr[jT]=Hr[A1]=Hr[ec]=Hr[I1]=Hr[YN]=Hr[zT]=Hr[t5]=Hr[B0]=Hr[O1]=Hr[WT]=!0,Hr[T1]=Hr[M1]=Hr[R1]=!1;function $m(v,E,L,q,ie,de){var Me,$e=E&md,Ke=E&BT,gt=E&S1;if(L&&(Me=ie?L(v,q,ie,de):L(v)),Me!==void 0)return Me;if(!en(v))return v;var se=Je(v);if(se){if(Me=kN(v),!$e)return LL(v,Me)}else{var Ne=jm(v),$t=Ne==M1||Ne==UT;if(Om(v))return sT(v,$e);if(Ne==A1||Ne==E1||$t&&!ie){if(Me=Ke||$t?{}:GN(v),!$e)return Ke?SN(v,tT(Me,v)):ep(v,eT(Me,v))}else{if(!Hr[Ne])return ie?v:{};Me=OT(v,Ne,$e)}}de||(de=new pd);var bn=de.get(v);if(bn)return bn;de.set(v,Me),FT(v)?v.forEach(function(Xn){Me.add($m(Xn,E,L,Xn,v,de))}):LT(v)&&v.forEach(function(Xn,zn){Me.set(zn,$m(Xn,E,L,zn,v,de))});var un=gt?Ke?CN:Vm:Ke?k0:cd,qn=se?void 0:un(v);return KP(qn||v,function(Xn,zn){qn&&(zn=Xn,Xn=v[zn]),Vh(Me,zn,$m(Xn,E,L,zn,v,de))}),Me}var n5=$m,r5=1,D1=4;function KT(v){return n5(v,r5|D1)}var i5=KT,qT="__lodash_hash_undefined__";function XT(v){return this.__data__.set(v,qT),this}var L1=XT;function YT(v){return this.__data__.has(v)}var o5=YT;function Wm(v){var E=-1,L=v==null?0:v.length;for(this.__data__=new id;++E<L;)this.add(v[E])}Wm.prototype.add=Wm.prototype.push=L1,Wm.prototype.has=o5;var s5=Wm;function a5(v,E){for(var L=-1,q=v==null?0:v.length;++L<q;)if(E(v[L],L,v))return!0;return!1}var U0=a5;function N1(v,E){return v.has(E)}var l5=N1,ZT=1,QT=2;function JT(v,E,L,q,ie,de){var Me=L&ZT,$e=v.length,Ke=E.length;if($e!=Ke&&!(Me&&Ke>$e))return!1;var gt=de.get(v),se=de.get(E);if(gt&&se)return gt==E&&se==v;var Ne=-1,$t=!0,bn=L&QT?new s5:void 0;for(de.set(v,E),de.set(E,v);++Ne<$e;){var un=v[Ne],qn=E[Ne];if(q)var Xn=Me?q(qn,un,Ne,E,v,de):q(un,qn,Ne,v,E,de);if(Xn!==void 0){if(Xn)continue;$t=!1;break}if(bn){if(!U0(E,function(zn,fr){if(!l5(bn,fr)&&(un===zn||ie(un,zn,L,q,de)))return bn.push(fr)})){$t=!1;break}}else if(!(un===qn||ie(un,qn,L,q,de))){$t=!1;break}}return de.delete(v),de.delete(E),$t}var F1=JT;function eM(v){var E=-1,L=Array(v.size);return v.forEach(function(q,ie){L[++E]=[ie,q]}),L}var tM=eM;function nM(v){var E=-1,L=Array(v.size);return v.forEach(function(q){L[++E]=q}),L}var rM=nM,iM=1,oM=2,sM="[object Boolean]",aM="[object Date]",lM="[object Error]",B1="[object Map]",V0="[object Number]",uM="[object RegExp]",u5="[object Set]",c5="[object String]",cM="[object Symbol]",dM="[object ArrayBuffer]",hM="[object DataView]",U1=on?on.prototype:void 0,V1=U1?U1.valueOf:void 0;function d5(v,E,L,q,ie,de,Me){switch(L){case hM:if(v.byteLength!=E.byteLength||v.byteOffset!=E.byteOffset)return!1;v=v.buffer,E=E.buffer;case dM:return!(v.byteLength!=E.byteLength||!de(new zm(v),new zm(E)));case sM:case aM:case V0:return Xr(+v,+E);case lM:return v.name==E.name&&v.message==E.message;case uM:case c5:return v==E+"";case B1:var $e=tM;case u5:var Ke=q&iM;if($e||($e=rM),v.size!=E.size&&!Ke)return!1;var gt=Me.get(v);if(gt)return gt==E;q|=oM,Me.set(v,E);var se=F1($e(v),$e(E),q,ie,de,Me);return Me.delete(v),se;case cM:if(V1)return V1.call(v)==V1.call(E)}return!1}var pM=d5,j1=1,z1=Object.prototype,Km=z1.hasOwnProperty;function fM(v,E,L,q,ie,de){var Me=L&j1,$e=Vm(v),Ke=$e.length,gt=Vm(E),se=gt.length;if(Ke!=se&&!Me)return!1;for(var Ne=Ke;Ne--;){var $t=$e[Ne];if(!(Me?$t in E:Km.call(E,$t)))return!1}var bn=de.get(v),un=de.get(E);if(bn&&un)return bn==E&&un==v;var qn=!0;de.set(v,E),de.set(E,v);for(var Xn=Me;++Ne<Ke;){$t=$e[Ne];var zn=v[$t],fr=E[$t];if(q)var bo=Me?q(fr,zn,$t,E,v,de):q(zn,fr,$t,v,E,de);if(!(bo===void 0?zn===fr||ie(zn,fr,L,q,de):bo)){qn=!1;break}Xn||(Xn=$t=="constructor")}if(qn&&!Xn){var _o=v.constructor,wo=E.constructor;_o!=wo&&"constructor"in v&&"constructor"in E&&!(typeof _o=="function"&&_o instanceof _o&&typeof wo=="function"&&wo instanceof wo)&&(qn=!1)}return de.delete(v),de.delete(E),qn}var H1=fM,mM=1,vM="[object Arguments]",G1="[object Array]",rp="[object Object]",gM=Object.prototype,yM=gM.hasOwnProperty;function bM(v,E,L,q,ie,de){var Me=Je(v),$e=Je(E),Ke=Me?G1:jm(v),gt=$e?G1:jm(E);Ke=Ke==vM?rp:Ke,gt=gt==vM?rp:gt;var se=Ke==rp,Ne=gt==rp,$t=Ke==gt;if($t&&Om(v)){if(!Om(E))return!1;Me=!0,se=!1}if($t&&!se)return de||(de=new pd),Me||Xw(v)?F1(v,E,L,q,ie,de):pM(v,E,Ke,L,q,ie,de);if(!(L&mM)){var bn=se&&yM.call(v,"__wrapped__"),un=Ne&&yM.call(E,"__wrapped__");if(bn||un){var qn=bn?v.value():v,Xn=un?E.value():E;return de||(de=new pd),ie(qn,Xn,L,q,de)}}return $t?(de||(de=new pd),H1(v,E,L,q,ie,de)):!1}var _M=bM;function $1(v,E,L,q,ie){return v===E?!0:v==null||E==null||!ce(v)&&!ce(E)?v!==v&&E!==E:_M(v,E,L,q,$1,ie)}var wM=$1,h5=1,W1=2;function xM(v,E,L,q){var ie=L.length,de=ie,Me=!q;if(v==null)return!de;for(v=Object(v);ie--;){var $e=L[ie];if(Me&&$e[2]?$e[1]!==v[$e[0]]:!($e[0]in v))return!1}for(;++ie<de;){$e=L[ie];var Ke=$e[0],gt=v[Ke],se=$e[1];if(Me&&$e[2]){if(gt===void 0&&!(Ke in v))return!1}else{var Ne=new pd;if(q)var $t=q(gt,se,Ke,v,E,Ne);if(!($t===void 0?wM(se,gt,h5|W1,q,Ne):$t))return!1}}return!0}var p5=xM;function SM(v){return v===v&&!en(v)}var EM=SM;function f5(v){for(var E=cd(v),L=E.length;L--;){var q=E[L],ie=v[q];E[L]=[q,ie,EM(ie)]}return E}var K1=f5;function CM(v,E){return function(L){return L==null?!1:L[v]===E&&(E!==void 0||v in Object(L))}}var PM=CM;function kM(v){var E=K1(v);return E.length==1&&E[0][2]?PM(E[0][0],E[0][1]):function(L){return L===v||p5(L,v,E)}}var m5=kM;function v5(v,E){return v!=null&&E in Object(v)}var TM=v5;function g5(v,E,L){E=Ku(E,v);for(var q=-1,ie=E.length,de=!1;++q<ie;){var Me=Zs(E[q]);if(!(de=v!=null&&L(v,Me)))break;v=v[Me]}return de||++q!=ie?de:(ie=v==null?0:v.length,!!ie&&Rw(ie)&&Sm(Me,ie)&&(Je(v)||Fw(v)))}var y5=g5;function MM(v,E){return v!=null&&y5(v,E,TM)}var b5=MM,_5=1,AM=2;function w5(v,E){return pt(v)&&EM(E)?PM(Zs(v),E):function(L){var q=el(L,v);return q===void 0&&q===E?b5(L,v):wM(E,q,_5|AM)}}var x5=w5;function IM(v){return function(E){return E==null?void 0:E[v]}}var q1=IM;function RM(v){return function(E){return sd(E,v)}}var S5=RM;function E5(v){return pt(v)?q1(Zs(v)):S5(v)}var OM=E5;function C5(v){return typeof v=="function"?v:v==null?y0:typeof v=="object"?Je(v)?x5(v[0],v[1]):m5(v):OM(v)}var P5=C5;function DM(v){return function(E,L,q){for(var ie=-1,de=Object(E),Me=q(E),$e=Me.length;$e--;){var Ke=Me[v?$e:++ie];if(L(de[Ke],Ke,de)===!1)break}return E}}var k5=DM,T5=k5(),LM=T5;function M5(v,E){return v&&LM(v,E,cd)}var A5=M5,ip=function(){return Dt.Date.now()},vd=ip,I5="Expected a function",NM=Math.max,R5=Math.min;function O5(v,E,L){var q,ie,de,Me,$e,Ke,gt=0,se=!1,Ne=!1,$t=!0;if(typeof v!="function")throw new TypeError(I5);E=ee(E)||0,en(L)&&(se=!!L.leading,Ne="maxWait"in L,de=Ne?NM(ee(L.maxWait)||0,E):de,$t="trailing"in L?!!L.trailing:$t);function bn(Nr){var xo=q,Ps=ie;return q=ie=void 0,gt=Nr,Me=v.apply(Ps,xo),Me}function un(Nr){return gt=Nr,$e=setTimeout(zn,E),se?bn(Nr):Me}function qn(Nr){var xo=Nr-Ke,Ps=Nr-gt,sl=E-xo;return Ne?R5(sl,de-Ps):sl}function Xn(Nr){var xo=Nr-Ke,Ps=Nr-gt;return Ke===void 0||xo>=E||xo<0||Ne&&Ps>=de}function zn(){var Nr=vd();if(Xn(Nr))return fr(Nr);$e=setTimeout(zn,qn(Nr))}function fr(Nr){return $e=void 0,$t&&q?bn(Nr):(q=ie=void 0,Me)}function bo(){$e!==void 0&&clearTimeout($e),gt=0,q=Ke=ie=$e=void 0}function _o(){return $e===void 0?Me:fr(vd())}function wo(){var Nr=vd(),xo=Xn(Nr);if(q=arguments,ie=this,Ke=Nr,xo){if($e===void 0)return un(Ke);if(Ne)return clearTimeout($e),$e=setTimeout(zn,E),bn(Ke)}return $e===void 0&&($e=setTimeout(zn,E)),Me}return wo.cancel=bo,wo.flush=_o,wo}var FM=O5;function D5(v){var E=v==null?0:v.length;return E?v[E-1]:void 0}var BM=D5;function UM(v,E){return E.length<2?v:sd(v,Qw(E,0,-1))}var L5=UM;function N5(v){return typeof v=="number"&&v==to(v)}var X1=N5;function VM(v,E){var L={};return E=P5(E),A5(v,function(q,ie,de){$l(L,ie,E(q,ie,de))}),L}var F5=VM;function jM(v,E){return E=Ku(E,v),v=L5(v,E),v==null||delete v[Zs(BM(E))]}var B5=jM,zM=9007199254740991,Y1=Math.floor;function HM(v,E){var L="";if(!v||E<1||E>zM)return L;do E%2&&(L+=v),E=Y1(E/2),E&&(v+=v);while(E);return L}var GM=HM,$M=q1("length"),U5=$M,WM="\\ud800-\\udfff",KM="\\u0300-\\u036f",V5="\\ufe20-\\ufe2f",qM="\\u20d0-\\u20ff",j0=KM+V5+qM,j5="\\ufe0e\\ufe0f",z5="["+WM+"]",z0="["+j0+"]",H0="\\ud83c[\\udffb-\\udfff]",XM="(?:"+z0+"|"+H0+")",G0="[^"+WM+"]",Z1="(?:\\ud83c[\\udde6-\\uddff]){2}",YM="[\\ud800-\\udbff][\\udc00-\\udfff]",ZM="\\u200d",QM=XM+"?",JM="["+j5+"]?",gd="(?:"+ZM+"(?:"+[G0,Z1,YM].join("|")+")"+JM+QM+")*",$0=JM+QM+gd,H5="(?:"+[G0+z0+"?",z0,Z1,YM,z5].join("|")+")",Q1=RegExp(H0+"(?="+H0+")|"+H5+$0,"g");function J1(v){for(var E=Q1.lastIndex=0;Q1.test(v);)++E;return E}var G5=J1;function $5(v){return e1(v)?G5(v):U5(v)}var ex=$5,e2=Math.ceil;function t2(v,E){E=E===void 0?" ":d0(E);var L=E.length;if(L<2)return L?GM(E,v):E;var q=GM(E,e2(v/ex(E)));return e1(E)?ZL(cN(q),0,v).join(""):q.slice(0,v)}var W5=t2;function K5(v,E,L){v=_m(v),E=to(E);var q=E?ex(v):0;return E&&q<E?W5(E-q,L)+v:v}var op=K5;function q5(v,E){return v==null?!0:B5(v,E)}var n2=q5,r2=5*1e3,i2=class{constructor(v){te(this,"_cache",new Gl),te(this,"_keepHotUntapDebounce"),vt(this,v)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Fe(this).propsP}get sheet(){return Fe(this).sheet.publicApi}get project(){return Fe(this).sheet.project.publicApi}get address(){return G({},Fe(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const v=Fe(this);return(0,Mm.prism)(()=>(0,Mm.val)(v.getValues().getValue()))})}onValuesChange(v,E){return py(this._valuesPrism(),v,E)}get value(){const v=this._valuesPrism();{if(!v.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const E=v.keepHot();this._keepHotUntapDebounce=FM(()=>{E(),this._keepHotUntapDebounce=void 0},r2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return v.getValue()}set initialValue(v){Fe(this).setInitialValue(v)}};function o2(v){const E=new WeakMap;return L=>(E.has(L)||E.set(L,v(L)),E.get(L))}function W0(v){return v.type==="compound"||v.type==="enum"}function tx(v,E){if(!v)return;const[L,...q]=E;if(L===void 0)return v;if(!W0(v))return;const ie=v.type==="enum"?v.cases[L]:v.props[L];return tx(ie,q)}function nx(v){return!W0(v)}var X5=class{constructor(v,E,L){this.sheet=v,this.template=E,this.nativeObject=L,te(this,"$$isPointerToPrismProvider",!0),te(this,"address"),te(this,"publicApi"),te(this,"_initialValue",new xr.Atom({})),te(this,"_cache",new Gl),te(this,"_logger"),te(this,"_internalUtilCtx"),this._logger=v._logger.named("SheetObject",E.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=Z(G({},E.address),{sheetInstanceId:v.address.sheetInstanceId}),this.publicApi=new i2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,xr.prism)(()=>{const v=(0,xr.val)(this.template.getDefaultValues()),E=(0,xr.val)(this._initialValue.pointer),L=xr.prism.memo("withInitialCache",()=>new WeakMap,[]),q=nl(v,E,L),ie=(0,xr.val)(this.template.getStaticValues()),de=xr.prism.memo("withStatics",()=>new WeakMap,[]);let $e=nl(q,ie,de),Ke;{const se=xr.prism.memo("seq",()=>this.getSequencedValues(),[]),Ne=xr.prism.memo("withSeqsCache",()=>new WeakMap,[]);Ke=(0,xr.val)((0,xr.val)(se)),$e=nl($e,Ke,Ne)}return Tm("finalAtom",$e).pointer}))}getValueByPointer(v){const E=(0,xr.val)(this.getValues()),{path:L}=(0,xr.getPointerParts)(v);return(0,xr.val)(ld(E,L))}pointerToPrism(v){const{path:E}=(0,xr.getPointerParts)(v);return(0,xr.prism)(()=>{const L=(0,xr.val)(this.getValues());return(0,xr.val)(ld(L,E))})}getSequencedValues(){return(0,xr.prism)(()=>{const v=xr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),E=(0,xr.val)(v),L=new xr.Atom({}),q=(0,xr.val)(this.template.configPointer);return xr.prism.effect("processTracks",()=>{const ie=[];for(const{trackId:de,pathToProp:Me}of E){const $e=this._trackIdToPrism(de),Ke=tx(q,Me),gt=Ke.deserializeAndSanitize,se=Ke.interpolate,Ne=()=>{const bn=$e.getValue();if(!bn)return L.setByPointer(fr=>ld(fr,Me),void 0);const un=gt(bn.left),qn=un===void 0?Ke.default:un;if(bn.right===void 0)return L.setByPointer(fr=>ld(fr,Me),qn);const Xn=gt(bn.right),zn=Xn===void 0?Ke.default:Xn;return L.setByPointer(fr=>ld(fr,Me),se(qn,zn,bn.progression))},$t=$e.onStale(Ne);Ne(),ie.push($t)}return()=>{for(const de of ie)de()}},[q,...E]),L.pointer})}_trackIdToPrism(v){const E=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[v],L=this.sheet.getSequence().positionPrism;return Sw(this._internalUtilCtx,E,L)}get propsP(){return this._cache.get("propsP",()=>(0,xr.pointer)({root:this,path:[]}))}validateValue(v,E){}setInitialValue(v){this.validateValue(this.propsP,v),this._initialValue.set(v)}};function Gr(v){return function(L,q){return v(L,q())}}var ts={_hmm:Es(524),_todo:Es(522),_error:Es(521),errorDev:Es(529),errorPublic:Es(545),_kapow:Es(268),_warn:Es(265),warnDev:Es(273),warnPublic:Es(289),_debug:Es(137),debugDev:Es(145),_trace:Es(73),traceDev:Es(81)};function Es(v){return Object.freeze({audience:tc(v,8)?"internal":tc(v,16)?"dev":"public",category:tc(v,4)?"troubleshooting":tc(v,2)?"todo":"general",level:tc(v,512)?512:tc(v,256)?256:tc(v,128)?128:64})}function tc(v,E){return(v&E)===E}function Sr(v,E){return((E&32)===32?!0:(E&16)===16?v.dev:(E&8)===8?v.internal:!1)&&v.min<=E}var Wl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(v,E,L){return this.create({names:[...v.names,{name:E,key:L}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(v){if(v.length<5)return v;const E=v.replace(this.collapseOnRE,"");return this.cssMemo.has(E)||this.cssMemo.set(E,this.css(v)),E},css(v){var E,L,q,ie;const de=this.cssMemo.get(v);if(de)return de;let Me="color:".concat((L=(E=this.color)==null?void 0:E.call(this,v))!=null?L:"hsl(".concat((v.charCodeAt(0)+v.charCodeAt(v.length-1))%360,", 100%, 60%)"));return(q=this.bold)!=null&&q.test(v)&&(Me+=";font-weight:600"),(ie=this.italic)!=null&&ie.test(v)&&(Me+=";font-style:italic"),this.cssMemo.set(v,Me),Me}}};function s2(v=console,E={}){const L=Z(G({},Wl),{includes:G({},Wl.includes)}),q={styled:Y5.bind(L,v),noStyle:Z5.bind(L,v)},ie=a2.bind(L);function de(){return L.loggingConsoleStyle&&L.loggerConsoleStyle?q.styled:q.noStyle}return L.create=de(),{configureLogger(Me){var $e;Me==="console"?(L.loggerConsoleStyle=Wl.loggerConsoleStyle,L.create=de()):Me.type==="console"?(L.loggerConsoleStyle=($e=Me.style)!=null?$e:Wl.loggerConsoleStyle,L.create=de()):Me.type==="keyed"?(L.creatExt=Ke=>Me.keyed(Ke.names),L.create=ie):Me.type==="named"&&(L.creatExt=yd.bind(null,Me.named),L.create=ie)},configureLogging(Me){var $e,Ke,gt,se,Ne;L.includes.dev=($e=Me.dev)!=null?$e:Wl.includes.dev,L.includes.internal=(Ke=Me.internal)!=null?Ke:Wl.includes.internal,L.includes.min=(gt=Me.min)!=null?gt:Wl.includes.min,L.include=(se=Me.include)!=null?se:Wl.include,L.loggingConsoleStyle=(Ne=Me.consoleStyle)!=null?Ne:Wl.loggingConsoleStyle,L.create=de()},getLogger(){return L.create({names:[]})}}}function yd(v,E){const L=[];for(let{name:q,key:ie}of E.names)L.push(ie==null?q:"".concat(q," (").concat(ie,")"));return v(L)}function a2(v){const E=G(G({},this.includes),this.include(v)),L=this.filtered,q=this.named.bind(this,v),ie=this.creatExt(v),de=Sr(E,524),Me=Sr(E,522),$e=Sr(E,521),Ke=Sr(E,529),gt=Sr(E,545),se=Sr(E,265),Ne=Sr(E,268),$t=Sr(E,273),bn=Sr(E,289),un=Sr(E,137),qn=Sr(E,145),Xn=Sr(E,73),zn=Sr(E,81),fr=de?ie.error.bind(ie,ts._hmm):L.bind(v,524),bo=Me?ie.error.bind(ie,ts._todo):L.bind(v,522),_o=$e?ie.error.bind(ie,ts._error):L.bind(v,521),wo=Ke?ie.error.bind(ie,ts.errorDev):L.bind(v,529),Nr=gt?ie.error.bind(ie,ts.errorPublic):L.bind(v,545),xo=Ne?ie.warn.bind(ie,ts._kapow):L.bind(v,268),Ps=se?ie.warn.bind(ie,ts._warn):L.bind(v,265),sl=$t?ie.warn.bind(ie,ts.warnDev):L.bind(v,273),al=bn?ie.warn.bind(ie,ts.warnPublic):L.bind(v,273),Cd=un?ie.debug.bind(ie,ts._debug):L.bind(v,137),eu=qn?ie.debug.bind(ie,ts.debugDev):L.bind(v,145),Pd=Xn?ie.trace.bind(ie,ts._trace):L.bind(v,73),kd=zn?ie.trace.bind(ie,ts.traceDev):L.bind(v,81),Ni={_hmm:fr,_todo:bo,_error:_o,errorDev:wo,errorPublic:Nr,_kapow:xo,_warn:Ps,warnDev:sl,warnPublic:al,_debug:Cd,debugDev:eu,_trace:Pd,traceDev:kd,lazy:{_hmm:de?Gr(fr):fr,_todo:Me?Gr(bo):bo,_error:$e?Gr(_o):_o,errorDev:Ke?Gr(wo):wo,errorPublic:gt?Gr(Nr):Nr,_kapow:Ne?Gr(xo):xo,_warn:se?Gr(Ps):Ps,warnDev:$t?Gr(sl):sl,warnPublic:bn?Gr(al):al,_debug:un?Gr(Cd):Cd,debugDev:qn?Gr(eu):eu,_trace:Xn?Gr(Pd):Pd,traceDev:zn?Gr(kd):kd},named:q,utilFor:{internal(){return{debug:Ni._debug,error:Ni._error,warn:Ni._warn,trace:Ni._trace,named(ks,$r){return Ni.named(ks,$r).utilFor.internal()}}},dev(){return{debug:Ni.debugDev,error:Ni.errorDev,warn:Ni.warnDev,trace:Ni.traceDev,named(ks,$r){return Ni.named(ks,$r).utilFor.dev()}}},public(){return{error:Ni.errorPublic,warn:Ni.warnPublic,debug(ks,$r){Ni._warn('(public "debug" filtered out) '.concat(ks),$r)},trace(ks,$r){Ni._warn('(public "trace" filtered out) '.concat(ks),$r)},named(ks,$r){return Ni.named(ks,$r).utilFor.public()}}}}};return Ni}function Y5(v,E){const L=G(G({},this.includes),this.include(E)),q=[];let ie="";for(let Ke=0;Ke<E.names.length;Ke++){const{name:gt,key:se}=E.names[Ke];if(ie+=" %c".concat(gt),q.push(this.style.css(gt)),se!=null){const Ne="%c#".concat(se);ie+=Ne,q.push(this.style.css(Ne))}}const de=this.filtered,Me=this.named.bind(this,E),$e=[ie,...q];return u2(de,E,L,v,$e,l2($e),Me)}function l2(v){const E=v.slice(0);for(let L=1;L<E.length;L++)E[L]+=";background-color:#e0005a;padding:2px;color:white";return E}function Z5(v,E){const L=G(G({},this.includes),this.include(E));let q="";for(let $e=0;$e<E.names.length;$e++){const{name:Ke,key:gt}=E.names[$e];q+=" ".concat(Ke),gt!=null&&(q+="#".concat(gt))}const ie=this.filtered,de=this.named.bind(this,E),Me=[q];return u2(ie,E,L,v,Me,Me,de)}function u2(v,E,L,q,ie,de,Me){const $e=Sr(L,524),Ke=Sr(L,522),gt=Sr(L,521),se=Sr(L,529),Ne=Sr(L,545),$t=Sr(L,265),bn=Sr(L,268),un=Sr(L,273),qn=Sr(L,289),Xn=Sr(L,137),zn=Sr(L,145),fr=Sr(L,73),bo=Sr(L,81),_o=$e?q.error.bind(q,...ie):v.bind(E,524),wo=Ke?q.error.bind(q,...ie):v.bind(E,522),Nr=gt?q.error.bind(q,...ie):v.bind(E,521),xo=se?q.error.bind(q,...ie):v.bind(E,529),Ps=Ne?q.error.bind(q,...ie):v.bind(E,545),sl=bn?q.warn.bind(q,...de):v.bind(E,268),al=$t?q.warn.bind(q,...ie):v.bind(E,265),Cd=un?q.warn.bind(q,...ie):v.bind(E,273),eu=qn?q.warn.bind(q,...ie):v.bind(E,273),Pd=Xn?q.info.bind(q,...ie):v.bind(E,137),kd=zn?q.info.bind(q,...ie):v.bind(E,145),Ni=fr?q.debug.bind(q,...ie):v.bind(E,73),ks=bo?q.debug.bind(q,...ie):v.bind(E,81),$r={_hmm:_o,_todo:wo,_error:Nr,errorDev:xo,errorPublic:Ps,_kapow:sl,_warn:al,warnDev:Cd,warnPublic:eu,_debug:Pd,debugDev:kd,_trace:Ni,traceDev:ks,lazy:{_hmm:$e?Gr(_o):_o,_todo:Ke?Gr(wo):wo,_error:gt?Gr(Nr):Nr,errorDev:se?Gr(xo):xo,errorPublic:Ne?Gr(Ps):Ps,_kapow:bn?Gr(sl):sl,_warn:$t?Gr(al):al,warnDev:un?Gr(Cd):Cd,warnPublic:qn?Gr(eu):eu,_debug:Xn?Gr(Pd):Pd,debugDev:zn?Gr(kd):kd,_trace:fr?Gr(Ni):Ni,traceDev:bo?Gr(ks):ks},named:Me,utilFor:{internal(){return{debug:$r._debug,error:$r._error,warn:$r._warn,trace:$r._trace,named(ll,xa){return $r.named(ll,xa).utilFor.internal()}}},dev(){return{debug:$r.debugDev,error:$r.errorDev,warn:$r.warnDev,trace:$r.traceDev,named(ll,xa){return $r.named(ll,xa).utilFor.dev()}}},public(){return{error:$r.errorPublic,warn:$r.warnPublic,debug(ll,xa){$r._warn('(public "debug" filtered out) '.concat(ll),xa)},trace(ll,xa){$r._warn('(public "trace" filtered out) '.concat(ll),xa)},named(ll,xa){return $r.named(ll,xa).utilFor.public()}}}}};return $r}var rx=s2(console,{_debug:function(){},_error:function(){}});rx.configureLogging({dev:!0,min:64});var K0=rx.getLogger().named("Theatre.js (default logger)").utilFor.dev(),c2=new WeakMap;function d2(v){const E=c2.get(v);if(E)return E;const L=new Map;return c2.set(v,L),h2([],v,L),L}function h2(v,E,L){for(const[q,ie]of Object.entries(E.props))if(!W0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),p2(de,ie,L)}for(const[q,ie]of Object.entries(E.props))if(W0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),p2(de,ie,L)}}function p2(v,E,L){if(E.type==="compound")h2(v,E,L);else{if(E.type==="enum")throw new Error("Enums aren't supported yet");L.set(JSON.stringify(v),L.size)}}function ix(v){return typeof v=="object"&&v!==null&&Object.keys(v).length===0}var Q5=class{constructor(v,E,L,q,ie){this.sheetTemplate=v,te(this,"address"),te(this,"type","Theatre_SheetObjectTemplate"),te(this,"_config"),te(this,"_temp_actions_atom"),te(this,"_cache",new Gl),te(this,"project"),te(this,"pointerToSheetState"),te(this,"pointerToStaticOverrides"),this.address=Z(G({},v.address),{objectKey:E}),this._config=new zi.Atom(q),this._temp_actions_atom=new zi.Atom(ie),this.project=v.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(v,E,L){return this._config.set(L),new X5(v,this,E)}reconfigure(v){this._config.set(v)}_temp_setActions(v){this._temp_actions_atom.set(v)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,zi.prism)(()=>{const v=(0,zi.val)(this.configPointer);return xw(v)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,zi.prism)(()=>{var v;const E=(v=(0,zi.val)(this.pointerToStaticOverrides))!=null?v:{};return(0,zi.val)(this.configPointer).deserializeAndSanitize(E)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,zi.prism)(()=>{const v=this.project.pointers.historic.sheetsById[this.address.sheetId],E=(0,zi.val)(v.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!E)return Ge;const L=[];if(!E)return Ge;const q=(0,zi.val)(this.configPointer),ie=Object.entries(E);for(const[Me,$e]of ie){const Ke=J5(Me);if(!Ke)continue;const gt=tx(q,Ke);gt&&nx(gt)&&L.push({pathToProp:Ke,trackId:$e})}const de=d2(q);return L.sort((Me,$e)=>{const Ke=Me.pathToProp,gt=$e.pathToProp,se=de.get(JSON.stringify(Ke)),Ne=de.get(JSON.stringify(gt));return se>Ne?1:-1}),L.length===0?Ge:L}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,zi.prism)(()=>{const v=(0,zi.val)(this.getArrayOfValidSequenceTracks());let E={};for(const{pathToProp:L,trackId:q}of v)zh(E,L,q);return E}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,zi.prism)(()=>{const v=(0,zi.val)(this.getStaticValues()),E=(0,zi.val)(this.getArrayOfValidSequenceTracks()),L=i5(v);for(const{pathToProp:q}of E){n2(L,q);let ie=q.slice(0,-1);for(;ie.length>0;){const de=wm(L,ie);if(!ix(de))break;n2(L,ie),ie=ie.slice(0,-1)}}if(!ix(L))return L}))}getDefaultsAtPointer(v){const{path:E}=(0,zi.getPointerParts)(v),L=this.getDefaultValues().getValue();return wm(L,E)}};function J5(v){try{return JSON.parse(v)}catch{K0.warn("property ".concat(JSON.stringify(v)," cannot be parsed. Skipping."));return}}var ox=Mt,eF=o2(v=>JSON.stringify(v));C(Se());var tF=class extends Error{},sp=class extends tF{},f2=Mt,nF=Mt,m2=Mt,$i=Mt;function Kl(){let v,E;const L=new Promise((ie,de)=>{v=Me=>{ie(Me),q.status="resolved"},E=Me=>{de(Me),q.status="rejected"}}),q={resolve:v,reject:E,promise:L,status:"pending"};return q}var rF=()=>{},q0=rF,v2=Mt,iF=class{constructor(){te(this,"_stopPlayCallback",q0),te(this,"_state",new v2.Atom({position:0,playing:!1})),te(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=q0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.setByPointer(E=>E.position,v)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(v){this._state.setByPointer(E=>E.playing,v)}play(v,E,L,q,ie){this.playing&&this.pause(),this.playing=!0;const de=E[1]-E[0];{const $t=this.getCurrentPosition();$t<E[0]||$t>E[1]?q==="normal"||q==="alternate"?this._updatePositionInState(E[0]):(q==="reverse"||q==="alternateReverse")&&this._updatePositionInState(E[1]):q==="normal"||q==="alternate"?$t===E[1]&&this._updatePositionInState(E[0]):$t===E[0]&&this._updatePositionInState(E[1])}const Me=Kl(),$e=ie.time,Ke=de*v;let gt=this.getCurrentPosition()-E[0];(q==="reverse"||q==="alternateReverse")&&(gt=E[1]-this.getCurrentPosition());const se=$t=>{const un=Math.max($t-$e,0)/1e3,qn=Math.min(un*L+gt,Ke);if(qn!==Ke){const Xn=Math.floor(qn/de);let zn=qn/de%1*de;if(q!=="normal")if(q==="reverse")zn=de-zn;else{const fr=Xn%2===0;q==="alternate"?fr||(zn=de-zn):fr&&(zn=de-zn)}this._updatePositionInState(zn+E[0]),Ne()}else{if(q==="normal")this._updatePositionInState(E[1]);else if(q==="reverse")this._updatePositionInState(E[0]);else{const Xn=(v-1)%2===0;q==="alternate"?Xn?this._updatePositionInState(E[1]):this._updatePositionInState(E[0]):Xn?this._updatePositionInState(E[0]):this._updatePositionInState(E[1])}this.playing=!1,Me.resolve(!0)}};this._stopPlayCallback=()=>{ie.offThisOrNextTick(se),ie.offNextTick(se),this.playing&&Me.resolve(!1)};const Ne=()=>ie.onNextTick(se);return ie.onThisOrNextTick(se),Me.promise}playDynamicRange(v,E){this.playing&&this.pause(),this.playing=!0;const L=Kl(),q=v.keepHot();L.promise.then(q,q);let ie=E.time;const de=$e=>{const Ke=Math.max($e-ie,0);ie=$e;const gt=Ke/1e3,se=this.getCurrentPosition(),Ne=v.getValue();if(se<Ne[0]||se>Ne[1])this.gotoPosition(Ne[0]);else{let $t=se+gt;$t>Ne[1]&&($t=Ne[0]+($t-Ne[1])),this.gotoPosition($t)}Me()};this._stopPlayCallback=()=>{E.offThisOrNextTick(de),E.offNextTick(de),L.resolve(!1)};const Me=()=>E.onNextTick(de);return E.onThisOrNextTick(de),L.promise}},g2=Mt,y2="__TheatreJS_StudioBundle",sx="__TheatreJS_CoreBundle",b2="__TheatreJS_Notifications",qm=v=>(...E)=>{var L;switch(v){case"success":{K0.debug(E.slice(0,2).join(`
`));break}case"info":{K0.debug(E.slice(0,2).join(`
`));break}case"warning":{K0.warn(E.slice(0,2).join(`
`));break}}return typeof window<"u"?(L=window[b2])==null?void 0:L.notify[v](...E):void 0},ap={warning:qm("warning"),success:qm("success"),info:qm("info"),error:qm("error")};typeof window<"u"&&(window.addEventListener("error",v=>{ap.error("An error occurred","<pre>".concat(v.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",v=>{ap.error("An error occurred","<pre>".concat(v.reason,`</pre>

See **console** for details.`))}));var oF=class{constructor(v,E,L){this._decodedBuffer=v,this._audioContext=E,this._nodeDestination=L,te(this,"_mainGain"),te(this,"_state",new g2.Atom({position:0,playing:!1})),te(this,"statePointer"),te(this,"_stopPlayCallback",q0),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(v,E){const L=Kl();this._playing&&this.pause(),this._playing=!0;let q;const ie=()=>{q==null||q(),q=this._loopInRange(v.getValue(),E).stop},de=v.onStale(ie);return ie(),this._stopPlayCallback=()=>{q==null||q(),de(),L.resolve(!1)},L.promise}_loopInRange(v,E){let q=this.getCurrentPosition();const ie=v[1]-v[0];q<v[0]||q>v[1]?this._updatePositionInState(v[0]):q===v[1]&&this._updatePositionInState(v[0]),q=this.getCurrentPosition();const de=this._audioContext.createBufferSource();de.buffer=this._decodedBuffer,de.connect(this._mainGain),de.playbackRate.value=1,de.loop=!0,de.loopStart=v[0],de.loopEnd=v[1];const Me=E.time;let $e=q-v[0];de.start(0,q);const Ke=Ne=>{let qn=(Math.max(Ne-Me,0)/1e3*1+$e)/ie%1*ie;this._updatePositionInState(qn+v[0]),gt()},gt=()=>E.onNextTick(Ke);return E.onThisOrNextTick(Ke),{stop:()=>{de.stop(),de.disconnect(),E.offThisOrNextTick(Ke),E.offNextTick(Ke)}}}get _playing(){return this._state.get().playing}set _playing(v){this._state.setByPointer(E=>E.playing,v)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=q0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.reduce(E=>Z(G({},E),{position:v}))}getCurrentPosition(){return this._state.get().position}play(v,E,L,q,ie){this._playing&&this.pause(),this._playing=!0;let de=this.getCurrentPosition();const Me=E[1]-E[0];if(q!=="normal")throw new sp('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(q,"' given."));de<E[0]||de>E[1]?this._updatePositionInState(E[0]):de===E[1]&&this._updatePositionInState(E[0]),de=this.getCurrentPosition();const $e=Kl(),Ke=this._audioContext.createBufferSource();Ke.buffer=this._decodedBuffer,Ke.connect(this._mainGain),Ke.playbackRate.value=L,v>1e3&&(ap.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(v,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),v=1e3),v>1&&(Ke.loop=!0,Ke.loopStart=E[0],Ke.loopEnd=E[1]);const gt=ie.time;let se=de-E[0];const Ne=Me*v;Ke.start(0,de,Ne-se);const $t=qn=>{const zn=Math.max(qn-gt,0)/1e3,fr=Math.min(zn*L+se,Ne);if(fr!==Ne){let bo=fr/Me%1*Me;this._updatePositionInState(bo+E[0]),un()}else this._updatePositionInState(E[1]),this._playing=!1,bn(),$e.resolve(!0)},bn=()=>{Ke.stop(),Ke.disconnect()};this._stopPlayCallback=()=>{bn(),ie.offThisOrNextTick($t),ie.offNextTick($t),this._playing&&$e.resolve(!1)};const un=()=>ie.onNextTick($t);return ie.onThisOrNextTick($t),$e.promise}},lp=Mt,X0=0;function Y0(v){var E;const L=Me=>{q.tick(Me)},q=new lp.Ticker({onActive(){var Me;(Me=v==null?void 0:v.start)==null||Me.call(v)},onDormant(){var Me;(Me=v==null?void 0:v.stop)==null||Me.call(v)}}),ie={tick:L,id:X0++,name:(E=v==null?void 0:v.name)!=null?E:"CustomRafDriver-".concat(X0),type:"Theatre_RafDriver_PublicAPI"},de={type:"Theatre_RafDriver_PrivateAPI",publicApi:ie,ticker:q,start:v==null?void 0:v.start,stop:v==null?void 0:v.stop};return vt(ie,de),ie}function _2(){let v=null;const q=Y0({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const ie=de=>{q.tick(de),v=window.requestAnimationFrame(ie)};v=window.requestAnimationFrame(ie)}else q.tick(0),setTimeout(()=>q.tick(1),0)},stop:()=>{typeof window<"u"&&v!==null&&window.cancelAnimationFrame(v)}});return q}var Z0;function ax(){return Z0||w2(_2()),Z0}function lx(){return ax().ticker}function w2(v){if(Z0)throw new Error("`setCoreRafDriver()` is already called.");Z0=Fe(v)}var sF=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(v){vt(this,v)}play(v){const E=Fe(this);if(E._project.isReady()){const L=v!=null&&v.rafDriver?Fe(v.rafDriver).ticker:lx();return E.play(v??{},L)}else{const L=Kl();return L.resolve(!0),L.promise}}pause(){Fe(this).pause()}get position(){return Fe(this).position}set position(v){Fe(this).position=v}__experimental_getKeyframes(v){return Fe(this).getKeyframesOfSimpleProp(v)}async attachAudio(v){const{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}=await aF(v),de=new oF(q,E,ie);return Fe(this).replacePlaybackController(de),{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}}get pointer(){return Fe(this).pointer}};async function aF(v){function E(){if(v.audioContext)return Promise.resolve(v.audioContext);const gt=new AudioContext;return gt.state==="running"||typeof window>"u"?Promise.resolve(gt):new Promise(se=>{const Ne=()=>{gt.resume().catch(un=>{console.error(un)})},$t=["mousedown","keydown","touchstart"],bn={capture:!0,passive:!1};$t.forEach(un=>{window.addEventListener(un,Ne,bn)}),gt.addEventListener("statechange",()=>{gt.state==="running"&&($t.forEach(un=>{window.removeEventListener(un,Ne,bn)}),se(gt))})})}async function L(){if(v.source instanceof AudioBuffer)return v.source;const gt=Kl();if(typeof v.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let se;try{se=await fetch(v.source)}catch(un){throw console.error(un),new Error("Could not fetch '".concat(v.source,"'. Network error logged above."))}let Ne;try{Ne=await se.arrayBuffer()}catch(un){throw console.error(un),new Error("Could not read '".concat(v.source,"' as an arrayBuffer."))}(await q).decodeAudioData(Ne,gt.resolve,gt.reject);let bn;try{bn=await gt.promise}catch(un){throw console.error(un),new Error("Could not decode ".concat(v.source," as an audio file."))}return bn}const q=E(),ie=L(),[de,Me]=await Promise.all([q,ie]),$e=v.destinationNode||de.destination,Ke=de.createGain();return Ke.connect($e),{audioContext:de,decodedBuffer:Me,gainNode:Ke,destinationNode:$e}}var x2=S2("Theatre_SheetObject");function S2(v){return E=>typeof E=="object"&&!!E&&E.type===v}var lF=class{constructor(v,E,L,q,ie){this._project=v,this._sheet=E,this._lengthD=L,this._subUnitsPerUnitD=q,te(this,"address"),te(this,"publicApi"),te(this,"_playbackControllerBox"),te(this,"_prismOfStatePointer"),te(this,"_positionD"),te(this,"_positionFormatterD"),te(this,"_playableRangeD"),te(this,"pointer",(0,m2.pointer)({root:this,path:[]})),te(this,"$$isPointerToPrismProvider",!0),te(this,"_logger"),te(this,"closestGridPosition",de=>{const $e=1/this.subUnitsPerUnit;return parseFloat((Math.round(de/$e)*$e).toFixed(3))}),this._logger=v._logger.named("Sheet",E.address.sheetId).named("Instance",E.address.sheetInstanceId),this.address=Z(G({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new sF(this),this._playbackControllerBox=new nF.Atom(ie??new iF),this._prismOfStatePointer=(0,$i.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,$i.prism)(()=>{const de=this._prismOfStatePointer.getValue();return(0,$i.val)(de.position)}),this._positionFormatterD=(0,$i.prism)(()=>{const de=(0,$i.val)(this._subUnitsPerUnitD);return new uF(de)})}pointerToPrism(v){const{path:E}=(0,f2.getPointerParts)(v);if(E.length===0)return(0,$i.prism)(()=>({length:(0,$i.val)(this.pointer.length),playing:(0,$i.val)(this.pointer.playing),position:(0,$i.val)(this.pointer.position)}));if(E.length>1)return(0,$i.prism)(()=>{});const[L]=E;return L==="length"?this._lengthD:L==="position"?this._positionD:L==="playing"?(0,$i.prism)(()=>(0,$i.val)(this._prismOfStatePointer.getValue().playing)):(0,$i.prism)(()=>{})}getKeyframesOfSimpleProp(v){const{path:E,root:L}=(0,f2.getPointerParts)(v);if(!x2(L))throw new sp("Argument prop must be a pointer to a SheetObject property");const q=(0,$i.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[L.address.objectKey]);if(!q)return[];const{trackData:ie,trackIdByPropPath:de}=q,Me=eF(E),$e=de[Me];if(!$e)return[];const Ke=ie[$e];return Ke?Ke.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(v){let E=v;this.pause(),E>this.length&&(E=this.length);const L=this.length;this._playbackControllerBox.get().gotoPosition(E>L?L:E)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,$i.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,$i.prism)(()=>[0,(0,$i.val)(this._lengthD)])}playDynamicRange(v,E){return this._playbackControllerBox.get().playDynamicRange(v,E)}async play(v,E){const L=this.length,q=v&&v.range?v.range:[0,L],ie=v&&typeof v.iterationCount=="number"?v.iterationCount:1,de=v&&typeof v.rate<"u"?v.rate:1,Me=v&&v.direction?v.direction:"normal";return await this._play(ie,[q[0],q[1]],de,Me,E)}_play(v,E,L,q,ie){return this._playbackControllerBox.get().play(v,E,L,q,ie)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(v){this.pause();const E=this._playbackControllerBox.get();this._playbackControllerBox.set(v);const L=E.getCurrentPosition();E.destroy(),v.gotoPosition(L)}},uF=class{constructor(v){this._fps=v}formatSubUnitForGrid(v){const E=v%1,L=1/this._fps;return Math.round(E/L)+"f"}formatFullUnitForGrid(v){let E=v,L="";if(E>=Qr){const ie=Math.floor(E/Qr);L+=ie+"h",E=E%Qr}if(E>=bd){const ie=Math.floor(E/bd);L+=ie+"m",E=E%bd}if(E>=ns){const ie=Math.floor(E/ns);L+=ie+"s",E=E%ns}const q=1/this._fps;if(E>=q){const ie=Math.floor(E/q);L+=ie+"f",E=E%q}return L.length===0?"0s":L}formatForPlayhead(v){let E=v,L="";if(E>=Qr){const ie=Math.floor(E/Qr);L+=op(ie.toString(),2,"0")+"h",E=E%Qr}if(E>=bd){const ie=Math.floor(E/bd);L+=op(ie.toString(),2,"0")+"m",E=E%bd}else L.length>0&&(L+="00m");if(E>=ns){const ie=Math.floor(E/ns);L+=op(ie.toString(),2,"0")+"s",E=E%ns}else L+="00s";const q=1/this._fps;if(E>=q){const ie=Math.round(E/q);L+=op(ie.toString(),2,"0")+"f",E=E%q}else E/q>.98?(L+=op(1 .toString(),2,"0")+"f",E=E%q):L+="00f";return L.length===0?"00s00f":L}formatBasic(v){return v.toFixed(2)+"s"}},ns=1,bd=ns*60,Qr=bd*60,ux={};z(ux,{boolean:()=>fx,compound:()=>Xl,file:()=>$n,image:()=>_a,number:()=>Xm,rgba:()=>hn,string:()=>A2,stringLiteral:()=>R2});function E2(v,E){return v.length<=E?v:v.substr(0,E-3)+"..."}var Re=v=>typeof v=="string"?'string("'.concat(E2(v,10),'")'):typeof v=="number"?"number(".concat(E2(String(v),10),")"):v===null?"null":v===void 0?"undefined":typeof v=="boolean"?String(v):Array.isArray(v)?"array":typeof v=="object"?"object":"unknown",C2=Re;function cF(v,{removeAlphaIfOpaque:E=!1}={}){const L=(v.a*255|256).toString(16).slice(1),q=(v.r*255|256).toString(16).slice(1)+(v.g*255|256).toString(16).slice(1)+(v.b*255|256).toString(16).slice(1)+(E&&L==="ff"?"":L);return"#".concat(q)}function cx(v){return Z(G({},v),{toString(){return cF(this,{removeAlphaIfOpaque:!0})}})}function ql(v){return Object.fromEntries(Object.entries(v).map(([E,L])=>[E,s1(L,0,1)]))}function dF(v){function E(L){return L>=.0031308?1.055*L**(1/2.4)-.055:12.92*L}return ql({r:E(v.r),g:E(v.g),b:E(v.b),a:v.a})}function Un(v){function E(L){return L>=.04045?((L+.055)/(1+.055))**2.4:L/12.92}return{r:E(v.r),g:E(v.g),b:E(v.b),a:v.a}}function P2(v){let E=.4122214708*v.r+.5363325363*v.g+.0514459929*v.b,L=.2119034982*v.r+.6806995451*v.g+.1073969566*v.b,q=.0883024619*v.r+.2817188376*v.g+.6299787005*v.b,ie=Math.cbrt(E),de=Math.cbrt(L),Me=Math.cbrt(q);return{L:.2104542553*ie+.793617785*de-.0040720468*Me,a:1.9779984951*ie-2.428592205*de+.4505937099*Me,b:.0259040371*ie+.7827717662*de-.808675766*Me,alpha:v.a}}function Q0(v){let E=v.L+.3963377774*v.a+.2158037573*v.b,L=v.L-.1055613458*v.a-.0638541728*v.b,q=v.L-.0894841775*v.a-1.291485548*v.b,ie=E*E*E,de=L*L*L,Me=q*q*q;return{r:4.0767416621*ie-3.3077115913*de+.2309699292*Me,g:-1.2684380046*ie+2.6097574011*de-.3413193965*Me,b:-.0041960863*ie-.7034186147*de+1.707614701*Me,a:v.alpha}}var Qs=Symbol("TheatrePropType_Basic");function dx(v){return typeof v=="object"&&!!v&&v[Qs]==="TheatrePropType"}function nc(v){if(typeof v=="number")return Xm(v);if(typeof v=="boolean")return fx(v);if(typeof v=="string")return A2(v);if(typeof v=="object"&&v){if(dx(v))return v;if(XL(v))return Xl(v);throw new sp("This value is not a valid prop type: ".concat(C2(v)))}else throw new sp("This value is not a valid prop type: ".concat(C2(v)))}function k2(v){const E={};for(const L of Object.keys(v)){const q=v[L];dx(q)?E[L]=q:E[L]=nc(q)}return E}var Xl=(v,E={})=>{const L=k2(v),q=new WeakMap;return{type:"compound",props:L,valueType:null,[Qs]:"TheatrePropType",label:E.label,default:F5(L,de=>de.default),deserializeAndSanitize:de=>{if(typeof de!="object"||!de)return;if(q.has(de))return q.get(de);const Me={};let $e=!1;for(const[Ke,gt]of Object.entries(L))if(Object.prototype.hasOwnProperty.call(de,Ke)){const se=gt.deserializeAndSanitize(de[Ke]);se!=null&&($e=!0,Me[Ke]=se)}if(q.set(de,Me),$e)return Me}}},$n=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"file",id:((Me=E.interpolate)!=null?Me:cp)(q.id,ie.id,de)}};return{type:"file",default:{type:"file",id:v},valueType:null,[Qs]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:hx}},hx=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="file"&&(E=!1),!!E)return v},_a=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"image",id:((Me=E.interpolate)!=null?Me:cp)(q.id,ie.id,de)}};return{type:"image",default:{type:"image",id:v},valueType:null,[Qs]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:up}},up=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="image"&&(E=!1),!!E)return v},Xm=(v,E={})=>{var L;return Z(G({type:"number",valueType:0,default:v,[Qs]:"TheatrePropType"},E||{}),{label:E.label,nudgeFn:(L=E.nudgeFn)!=null?L:mF,nudgeMultiplier:typeof E.nudgeMultiplier=="number"?E.nudgeMultiplier:void 0,interpolate:px,deserializeAndSanitize:T2(E.range)})},T2=v=>v?E=>{if(typeof E=="number"&&isFinite(E))return s1(E,v[0],v[1])}:M2,M2=v=>typeof v=="number"&&isFinite(v)?v:void 0,px=(v,E,L)=>v+L*(E-v),hn=(v={r:0,g:0,b:0,a:1},E={})=>{const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return{type:"rgba",valueType:null,default:cx(L),[Qs]:"TheatrePropType",label:E.label,interpolate:pF,deserializeAndSanitize:hF}},hF=v=>{if(!v)return;let E=!0;for(const q of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(v,q)||typeof v[q]!="number")&&(E=!1);if(!E)return;const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return cx(L)},pF=(v,E,L)=>{const q=P2(Un(v)),ie=P2(Un(E)),de={L:(1-L)*q.L+L*ie.L,a:(1-L)*q.a+L*ie.a,b:(1-L)*q.b+L*ie.b,alpha:(1-L)*q.alpha+L*ie.alpha},Me=dF(Q0(de));return cx(Me)},fx=(v,E={})=>{var L;return{type:"boolean",default:v,valueType:null,[Qs]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:cp,deserializeAndSanitize:fF}},fF=v=>typeof v=="boolean"?v:void 0;function cp(v){return v}var A2=(v,E={})=>{var L;return{type:"string",default:v,valueType:null,[Qs]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:cp,deserializeAndSanitize:I2}};function I2(v){return typeof v=="string"?v:void 0}function R2(v,E,L={}){var q,ie;return{type:"stringLiteral",default:v,valuesAndLabels:G({},E),[Qs]:"TheatrePropType",valueType:null,as:(q=L.as)!=null?q:"menu",label:L.label,interpolate:(ie=L.interpolate)!=null?ie:cp,deserializeAndSanitize(de){if(typeof de=="string"&&Object.prototype.hasOwnProperty.call(E,de))return de}}}var mF=({config:v,deltaX:E,deltaFraction:L,magnitude:q})=>{var ie;const{range:de}=v;return!v.nudgeMultiplier&&de&&!de.includes(1/0)&&!de.includes(-1/0)?L*(de[1]-de[0])*q:E*q*((ie=v.nudgeMultiplier)!=null?ie:1)},vF=v=>v.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function J0(v,E){return vF(v)}C(Pe());var gF=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(v){vt(this,v)}object(v,E,L){const q=Fe(this),ie=J0(v),de=q.getObject(ie),Me=null,$e=L==null?void 0:L.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(de)return $e&&de.template._temp_setActions($e),de.publicApi;{const Ke=Xl(E);return q.createObject(ie,Me,Ke,$e).publicApi}}get sequence(){return Fe(this).getSequence().publicApi}get project(){return Fe(this).project.publicApi}get address(){return G({},Fe(this).address)}detachObject(v){const E=Fe(this),L=J0(v);if(!E.getObject(L)){ap.warning(`Couldn't delete object "`.concat(L,'"'),'There is no object with key "'.concat(L,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(L,'")` with the correct key.')),console.warn('Object key "'.concat(L,'" does not exist.'));return}E.deleteObject(L)}},dp=Mt,O2=class{constructor(v,E){this.template=v,this.instanceId=E,te(this,"_objects",new dp.Atom({})),te(this,"_sequence"),te(this,"address"),te(this,"publicApi"),te(this,"project"),te(this,"objectsP",this._objects.pointer),te(this,"type","Theatre_Sheet"),te(this,"_logger"),this._logger=v.project._logger.named("Sheet",E),this._logger._trace("creating sheet"),this.project=v.project,this.address=Z(G({},v.address),{sheetInstanceId:this.instanceId}),this.publicApi=new gF(this)}createObject(v,E,L,q={}){const de=this.template.getObjectTemplate(v,E,L,q).createInstance(this,E,L);return this._objects.setByPointer(Me=>Me[v],de),de}getObject(v){return this._objects.get()[v]}deleteObject(v){this._objects.reduce(E=>{const L=G({},E);return delete L[v],L})}getSequence(){if(!this._sequence){const v=(0,dp.prism)(()=>{const L=(0,dp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return mx(L)}),E=(0,dp.prism)(()=>{const L=(0,dp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return yF(L)});this._sequence=new lF(this.template.project,this,v,E)}return this._sequence}},mx=v=>typeof v=="number"&&isFinite(v)&&v>0?v:10,yF=v=>typeof v=="number"&&X1(v)&&v>=1&&v<=1e3?v:30,bF=class{constructor(v,E){this.project=v,te(this,"type","Theatre_SheetTemplate"),te(this,"address"),te(this,"_instances",new ox.Atom({})),te(this,"instancesP",this._instances.pointer),te(this,"_objectTemplates",new ox.Atom({})),te(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=Z(G({},v.address),{sheetId:E})}getInstance(v){let E=this._instances.get()[v];return E||(E=new O2(this,v),this._instances.setByPointer(L=>L[v],E)),E}getObjectTemplate(v,E,L,q){let ie=this._objectTemplates.get()[v];return ie||(ie=new Q5(this,v,E,L,q),this._objectTemplates.setByPointer(de=>de[v],ie)),ie}},vx=Mt,D2=Mt,wa=v=>new Promise(E=>setTimeout(E,v)),Ym=wa;function Cs(v){for(var E=arguments.length,L=Array(E>1?E-1:0),q=1;q<E;q++)L[q-1]=arguments[q];throw Error("[Immer] minified error nr: "+v+(L.length?" "+L.map(function(ie){return"'"+ie+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Yl(v){return!!v&&!!v[Lo]}function Oo(v){return!!v&&(function(E){if(!E||typeof E!="object")return!1;var L=Object.getPrototypeOf(E);if(L===null)return!0;var q=Object.hasOwnProperty.call(L,"constructor")&&L.constructor;return q===Object||typeof q=="function"&&Function.toString.call(q)===V2}(v)||Array.isArray(v)||!!v[ly]||!!v.constructor[ly]||Zl(v)||Do(v))}function gx(v){return Yl(v)||Cs(23,v),v[Lo].t}function hp(v,E,L){L===void 0&&(L=!1),_d(v)===0?(L?Object.keys:uy)(v).forEach(function(q){L&&typeof q=="symbol"||E(q,v[q],v)}):v.forEach(function(q,ie){return E(ie,q,v)})}function _d(v){var E=v[Lo];return E?E.i>3?E.i-4:E.i:Array.isArray(v)?1:Zl(v)?2:Do(v)?3:0}function Zm(v,E){return _d(v)===2?v.has(E):Object.prototype.hasOwnProperty.call(v,E)}function L2(v,E){return _d(v)===2?v.get(E):v[E]}function yx(v,E,L){var q=_d(v);q===2?v.set(E,L):q===3?(v.delete(E),v.add(L)):v[E]=L}function N2(v,E){return v===E?v!==0||1/v==1/E:v!=v&&E!=E}function Zl(v){return B2&&v instanceof Map}function Do(v){return U2&&v instanceof Set}function Ql(v){return v.o||v.t}function pp(v){if(Array.isArray(v))return Array.prototype.slice.call(v);var E=Sx(v);delete E[Lo];for(var L=uy(E),q=0;q<L.length;q++){var ie=L[q],de=E[ie];de.writable===!1&&(de.writable=!0,de.configurable=!0),(de.get||de.set)&&(E[ie]={configurable:!0,writable:!0,enumerable:de.enumerable,value:v[ie]})}return Object.create(Object.getPrototypeOf(v),E)}function bx(v,E){return E===void 0&&(E=!1),ey(v)||Yl(v)||!Oo(v)||(_d(v)>1&&(v.set=v.add=v.clear=v.delete=F2),Object.freeze(v),E&&hp(v,function(L,q){return bx(q,!0)},!0)),v}function F2(){Cs(2)}function ey(v){return v==null||typeof v!="object"||Object.isFrozen(v)}function il(v){var E=j2[v];return E||Cs(18,v),E}function ty(){return vp}function li(v,E){E&&(il("Patches"),v.u=[],v.s=[],v.v=E)}function Qm(v){ny(v),v.p.forEach(iy),v.p=null}function ny(v){v===vp&&(vp=v.l)}function ry(v){return vp={p:[],l:vp,h:v,m:!0,_:0}}function iy(v){var E=v[Lo];E.i===0||E.i===1?E.j():E.O=!0}function wd(v,E){E._=E.p.length;var L=E.p[0],q=v!==void 0&&v!==L;return E.h.g||il("ES5").S(E,v,q),q?(L[Lo].P&&(Qm(E),Cs(4)),Oo(v)&&(v=Js(E,v),E.l||xd(E,v)),E.u&&il("Patches").M(L[Lo],v,E.u,E.s)):v=Js(E,L,[]),Qm(E),E.u&&E.v(E.u,E.s),v!==Jm?v:void 0}function Js(v,E,L){if(ey(E))return E;var q=E[Lo];if(!q)return hp(E,function(de,Me){return ol(v,q,E,de,Me,L)},!0),E;if(q.A!==v)return E;if(!q.P)return xd(v,q.t,!0),q.t;if(!q.I){q.I=!0,q.A._--;var ie=q.i===4||q.i===5?q.o=pp(q.k):q.o;hp(q.i===3?new Set(ie):ie,function(de,Me){return ol(v,q,ie,de,Me,L)}),xd(v,ie,!1),L&&v.u&&il("Patches").R(q,L,v.u,v.s)}return q.o}function ol(v,E,L,q,ie,de){if(Yl(ie)){var Me=Js(v,ie,de&&E&&E.i!==3&&!Zm(E.D,q)?de.concat(q):void 0);if(yx(L,q,Me),!Yl(Me))return;v.m=!1}if(Oo(ie)&&!ey(ie)){if(!v.h.F&&v._<1)return;Js(v,ie),E&&E.A.l||xd(v,ie)}}function xd(v,E,L){L===void 0&&(L=!1),v.h.F&&v.m&&bx(E,L)}function oy(v,E){var L=v[Lo];return(L?Ql(L):v)[E]}function _x(v,E){if(E in v)for(var L=Object.getPrototypeOf(v);L;){var q=Object.getOwnPropertyDescriptor(L,E);if(q)return q;L=Object.getPrototypeOf(L)}}function sy(v){v.P||(v.P=!0,v.l&&sy(v.l))}function Sd(v){v.o||(v.o=pp(v.t))}function Ed(v,E,L){var q=Zl(E)?il("MapSet").N(E,L):Do(E)?il("MapSet").T(E,L):v.g?function(ie,de){var Me=Array.isArray(ie),$e={i:Me?1:0,A:de?de.A:ty(),P:!1,I:!1,D:{},l:de,t:ie,k:null,o:null,j:null,C:!1},Ke=$e,gt=Jl;Me&&(Ke=[$e],gt=ev);var se=Proxy.revocable(Ke,gt),Ne=se.revoke,$t=se.proxy;return $e.k=$t,$e.j=Ne,$t}(E,L):il("ES5").J(E,L);return(L?L.A:ty()).p.push(q),q}function fp(v){return Yl(v)||Cs(22,v),function E(L){if(!Oo(L))return L;var q,ie=L[Lo],de=_d(L);if(ie){if(!ie.P&&(ie.i<4||!il("ES5").K(ie)))return ie.t;ie.I=!0,q=mp(L,de),ie.I=!1}else q=mp(L,de);return hp(q,function(Me,$e){ie&&L2(ie.t,Me)===$e||yx(q,Me,E($e))}),de===3?new Set(q):q}(v)}function mp(v,E){switch(E){case 2:return new Map(v);case 3:return Array.from(v)}return pp(v)}var wx,vp,ay=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",B2=typeof Map<"u",U2=typeof Set<"u",xx=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Jm=ay?Symbol.for("immer-nothing"):((wx={})["immer-nothing"]=!0,wx),ly=ay?Symbol.for("immer-draftable"):"__$immer_draftable",Lo=ay?Symbol.for("immer-state"):"__$immer_state",V2=""+Object.prototype.constructor,uy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:Object.getOwnPropertyNames,Sx=Object.getOwnPropertyDescriptors||function(v){var E={};return uy(v).forEach(function(L){E[L]=Object.getOwnPropertyDescriptor(v,L)}),E},j2={},Jl={get:function(v,E){if(E===Lo)return v;var L=Ql(v);if(!Zm(L,E))return function(ie,de,Me){var $e,Ke=_x(de,Me);return Ke?"value"in Ke?Ke.value:($e=Ke.get)===null||$e===void 0?void 0:$e.call(ie.k):void 0}(v,L,E);var q=L[E];return v.I||!Oo(q)?q:q===oy(v.t,E)?(Sd(v),v.o[E]=Ed(v.A.h,q,v)):q},has:function(v,E){return E in Ql(v)},ownKeys:function(v){return Reflect.ownKeys(Ql(v))},set:function(v,E,L){var q=_x(Ql(v),E);if(q!=null&&q.set)return q.set.call(v.k,L),!0;if(!v.P){var ie=oy(Ql(v),E),de=ie==null?void 0:ie[Lo];if(de&&de.t===L)return v.o[E]=L,v.D[E]=!1,!0;if(N2(L,ie)&&(L!==void 0||Zm(v.t,E)))return!0;Sd(v),sy(v)}return v.o[E]===L&&typeof L!="number"&&(L!==void 0||E in v.o)||(v.o[E]=L,v.D[E]=!0,!0)},deleteProperty:function(v,E){return oy(v.t,E)!==void 0||E in v.t?(v.D[E]=!1,Sd(v),sy(v)):delete v.D[E],v.o&&delete v.o[E],!0},getOwnPropertyDescriptor:function(v,E){var L=Ql(v),q=Reflect.getOwnPropertyDescriptor(L,E);return q&&{writable:!0,configurable:v.i!==1||E!=="length",enumerable:q.enumerable,value:L[E]}},defineProperty:function(){Cs(11)},getPrototypeOf:function(v){return Object.getPrototypeOf(v.t)},setPrototypeOf:function(){Cs(12)}},ev={};hp(Jl,function(v,E){ev[v]=function(){return arguments[0]=arguments[0][0],E.apply(this,arguments)}}),ev.deleteProperty=function(v,E){return Jl.deleteProperty.call(this,v[0],E)},ev.set=function(v,E,L){return Jl.set.call(this,v[0],E,L,v[0])};var Ex=function(){function v(L){var q=this;this.g=xx,this.F=!0,this.produce=function(ie,de,Me){if(typeof ie=="function"&&typeof de!="function"){var $e=de;de=ie;var Ke=q;return function(bn){var un=this;bn===void 0&&(bn=$e);for(var qn=arguments.length,Xn=Array(qn>1?qn-1:0),zn=1;zn<qn;zn++)Xn[zn-1]=arguments[zn];return Ke.produce(bn,function(fr){var bo;return(bo=de).call.apply(bo,[un,fr].concat(Xn))})}}var gt;if(typeof de!="function"&&Cs(6),Me!==void 0&&typeof Me!="function"&&Cs(7),Oo(ie)){var se=ry(q),Ne=Ed(q,ie,void 0),$t=!0;try{gt=de(Ne),$t=!1}finally{$t?Qm(se):ny(se)}return typeof Promise<"u"&&gt instanceof Promise?gt.then(function(bn){return li(se,Me),wd(bn,se)},function(bn){throw Qm(se),bn}):(li(se,Me),wd(gt,se))}if(!ie||typeof ie!="object")return(gt=de(ie))===Jm?void 0:(gt===void 0&&(gt=ie),q.F&&bx(gt,!0),gt);Cs(21,ie)},this.produceWithPatches=function(ie,de){return typeof ie=="function"?function(Ke){for(var gt=arguments.length,se=Array(gt>1?gt-1:0),Ne=1;Ne<gt;Ne++)se[Ne-1]=arguments[Ne];return q.produceWithPatches(Ke,function($t){return ie.apply(void 0,[$t].concat(se))})}:[q.produce(ie,de,function(Ke,gt){Me=Ke,$e=gt}),Me,$e];var Me,$e},typeof(L==null?void 0:L.useProxies)=="boolean"&&this.setUseProxies(L.useProxies),typeof(L==null?void 0:L.autoFreeze)=="boolean"&&this.setAutoFreeze(L.autoFreeze)}var E=v.prototype;return E.createDraft=function(L){Oo(L)||Cs(8),Yl(L)&&(L=fp(L));var q=ry(this),ie=Ed(this,L,void 0);return ie[Lo].C=!0,ny(q),ie},E.finishDraft=function(L,q){var ie=L&&L[Lo],de=ie.A;return li(de,q),wd(void 0,de)},E.setAutoFreeze=function(L){this.F=L},E.setUseProxies=function(L){L&&!xx&&Cs(20),this.g=L},E.applyPatches=function(L,q){var ie;for(ie=q.length-1;ie>=0;ie--){var de=q[ie];if(de.path.length===0&&de.op==="replace"){L=de.value;break}}var Me=il("Patches").$;return Yl(L)?Me(L,q):this.produce(L,function($e){return Me($e,q.slice(ie+1))})},v}(),Wi=new Ex;Wi.produce,Wi.produceWithPatches.bind(Wi),Wi.setAutoFreeze.bind(Wi),Wi.setUseProxies.bind(Wi),Wi.applyPatches.bind(Wi),Wi.createDraft.bind(Wi),Wi.finishDraft.bind(Wi);var Cx={currentProjectStateDefinitionVersion:"0.4.0"},cy=Cx;async function z2(v,E,L){await Ym(0),v.transaction(({drafts:q})=>{var ie;const de=E.address.projectId;q.ephemeral.coreByProject[de]={lastExportedObject:null,loadingState:{type:"loading"}},q.ahistoric.coreByProject[de]={ahistoricStuff:""};function Me(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]={sheetsById:{},definitionVersion:cy.currentProjectStateDefinitionVersion,revisionHistory:[]}}function $e(Ne){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]=Ne}function Ke(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"}}function gt(Ne){q.ephemeral.coreByProject[de].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ne}}const se=(ie=gx(q.historic))==null?void 0:ie.coreByProject[E.address.projectId];se?L&&se.revisionHistory.indexOf(L.revisionHistory[0])==-1?gt(L):Ke():L?$e(L):Me()})}function Px(){}function kx(v){var E,L;const q=(E=v==null?void 0:v.logging)!=null&&E.internal?(L=v.logging.min)!=null?L:256:1/0,ie=q<=128,de=q<=512,Me=s2(void 0,{_debug:ie?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Px,_error:de?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Px});if(v){const{logger:$e,logging:Ke}=v;$e&&Me.configureLogger($e),Ke?Me.configureLogging(Ke):Me.configureLogging({dev:!1})}return Me.getLogger().named("Theatre")}var dy=class{constructor(v,E={},L){this.config=E,this.publicApi=L,te(this,"pointers"),te(this,"_pointerProxies"),te(this,"address"),te(this,"_studioReadyDeferred"),te(this,"_assetStorageReadyDeferred"),te(this,"_readyPromise"),te(this,"_sheetTemplates",new D2.Atom({})),te(this,"sheetTemplatesP",this._sheetTemplates.pointer),te(this,"_studio"),te(this,"assetStorage"),te(this,"type","Theatre_Project"),te(this,"_logger");var q;this._logger=kx({logging:{dev:!0}}).named("Project",v),this._logger.traceDev("creating project"),this.address={projectId:v};const ie=new D2.Atom({ahistoric:{ahistoricStuff:""},historic:(q=E.state)!=null?q:{sheetsById:{},definitionVersion:cy.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Kl(),this.assetStorage={getAssetUrl:de=>{var Me;return"".concat((Me=E.assets)==null?void 0:Me.baseUrl,"/").concat(de)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new vx.PointerProxy(ie.pointer.historic),ahistoric:new vx.PointerProxy(ie.pointer.ahistoric),ephemeral:new vx.PointerProxy(ie.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},me.add(v,this),this._studioReadyDeferred=Kl(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),E.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(v,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(v){if(this._studio){if(this._studio!==v)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=v,v.initialized.then(async()=>{var E;await z2(v,this,this.config.state),this._pointerProxies.historic.setPointer(v.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(v.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(v.atomP.ephemeral.coreByProject[this.address.projectId]),await v.createAssetStorage(this,(E=this.config.assets)==null?void 0:E.baseUrl).then(L=>{this.assetStorage=L,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(E=>{throw console.error(E),E})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(v,E="default"){let L=this._sheetTemplates.get()[v];return L||(L=new bF(this,v),this._sheetTemplates.reduce(q=>Z(G({},q),{[v]:L}))),L.getInstance(E)}},hy=class{get type(){return"Theatre_Project_PublicAPI"}constructor(v,E={}){vt(this,new dy(v,E,this))}get ready(){return Fe(this).ready}get isReady(){return Fe(this).isReady()}get address(){return G({},Fe(this).address)}getAssetUrl(v){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return v.id?Fe(this).assetStorage.getAssetUrl(v.id):void 0}sheet(v,E="default"){const L=J0(v);return Fe(this).getOrCreateSheet(L,E).publicApi}};C(Pe());var Tx=Mt,gp=Mt;function Mx(v,E={}){const L=me.get(v);if(L)return L.publicApi;const ie=kx().named("Project",v);return E.state?(G2(v,E.state),ie._debug("deep validated config.state on disk")):ie._debug("no config.state"),new hy(v,E)}var H2=(v,E)=>{if(Array.isArray(E)||E==null||E.definitionVersion!==cy.currentProjectStateDefinitionVersion)throw new sp("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(v),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},G2=(v,E)=>{H2(v,E)};function py(v,E,L){const q=L?Fe(L).ticker:lx();if((0,Tx.isPointer)(v))return(0,gp.pointerToPrism)(v).onChange(q,E,!0);if((0,gp.isPrism)(v))return v.onChange(q,E,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Ax(v){if((0,Tx.isPointer)(v))return(0,gp.pointerToPrism)(v).getValue();throw new Error("Called val(p) where p is not a pointer.")}var Ix=class{constructor(){te(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(v,E){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=v;const L={projectsP:me.atom.pointer.projects,privateAPI:Fe,coreExports:ye,getCoreRafDriver:ax};E(L)}};Rx();function Rx(){if(typeof window>"u")return;const v=window[sx];if(typeof v<"u")throw typeof v=="object"&&v&&typeof v.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(sx," seems to be already set by a module other than @theatre/core."));const E=new Ix;window[sx]=E;const L=window[y2];L&&L!==null&&L.type==="Theatre_StudioBundle"&&L.registerCoreBundle(E)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(k3,k3.exports);var RH=k3.exports;function U3e(){return Math.round(Math.random()*1e6).toString()}function V3e(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}const c_e=()=>{};class j3e extends cL{constructor(n,r,o){super(n);ki(this,"project");ki(this,"sheets");ki(this,"sheetObjects");ki(this,"sheetObjectCBs");ki(this,"sheetObjectUnsubscribe");this.project=RH.getProject(r,o),this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var o;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(o=this.project)==null?void 0:o.sheet(n),this.sheets.set(n,r)),r}sheetObject(n,r,o,u){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const p=this.sheets.get(n);if(p===void 0)return;const m=`${n}_${r}`;let _=this.sheetObjects.get(m);if(_!==void 0)return _=p.object(r,{...o,..._.value},{reconfigure:!0}),_;_=p.object(r,o),this.sheetObjects.set(m,_),this.sheetObjectCBs.set(m,u!==void 0?u:c_e);const x=_.onValuesChange(M=>{if(this.app.editor){for(const R in M){const N=M[R];typeof N=="object"&&V3e(N)&&(M[R]={r:N.r,g:N.g,b:N.b,a:N.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheetObject:m,values:M}})}else{const R=this.sheetObjectCBs.get(m);R!==void 0&&R(M)}});return this.sheetObjectUnsubscribe.set(m,x),_}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=`${n.address.sheetId}_${n.address.objectKey}`,o=this.sheetObjectUnsubscribe.get(r);o!==void 0&&o()}}function z3e(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function d_e(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(d_e(n))}),e}function H3e(t){return t.updateMatrix(),{name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements}}class G3e extends cL{constructor(n){super(n);ki(this,"scene")}getObject(n){this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=H3e(n);this.app.send({event:"setObject",target:"editor",data:r})}updateObject(n,r,o){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:o}})}getScene(){this.app.send({event:"getScene",target:"app"})}setScene(n){const r=d_e(n);this.app.send({event:"setScene",target:"editor",data:r})}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function ii(t){return t==null}function dG(t){return t!==null&&typeof t=="object"}function OH(t){return t!==null&&typeof t=="object"}function $3e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Og(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],p=e[o];return OH(u)&&OH(p)?Object.assign(Object.assign({},r),{[o]:Og(u,p)}):Object.assign(Object.assign({},r),{[o]:o in e?p:u})},{})}function hG(t){return dG(t)?"target"in t:!1}const W3e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let ys=class i_{static alreadyDisposed(){return new i_({type:"alreadydisposed"})}static notBindable(){return new i_({type:"notbindable"})}static notCompatible(e,n){return new i_({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new i_({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new i_({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=W3e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},wme=class h_e{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!h_e.isBindable(r))throw ys.notBindable();if(!(e in r))throw ys.propertyNotFound(e);r[e]=n}},uo=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}},K3e=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new uo,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}},q3e=class{constructor(e){this.emitter=new uo,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}},X3e=class{constructor(e){this.emitter=new uo,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function wi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new q3e(t):new K3e(t,e)}function Y3e(t){return[new X3e(t),(e,n)=>{t.setRawValue(e,n)}]}let or=class p_e{constructor(e){this.emitter=new uo,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:wi(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new p_e(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},_P=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},Z3e=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return ii(r)||(o=Math.max(o,r)),ii(n)||(o=Math.min(o,n)),o}},Q3e=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},J3e=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const eLe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let tLe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=eLe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const nLe={"+":t=>t,"-":t=>-t,"~":t=>~t};let rLe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=nLe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function pG(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function eP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function iLe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function tP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function oLe(t,e){const n=tP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=tP(t,e);return o===""?"":r+o}function fG(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=oLe(t,e);return r===""?"":n+r}function f_e(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=iLe(t,e);return e+=r.length,r===""?"":r+tP(t,e)}function sLe(t,e){const n=f_e(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=tP(t,e);return e+=o.length,n+r+o+fG(t,e)}function aLe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=tP(t,e);return e+=r.length,r===""?"":n+r+fG(t,e)}function lLe(t,e){const n=f_e(t,e);return e+=n.length,n===""?"":n+fG(t,e)}const uLe=pG([sLe,aLe,lLe]);function cLe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function dLe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=cLe(t,e);return r===""?"":n+r}function hLe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function pLe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=hLe(t,e);return r===""?"":n+r}function fLe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function mLe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=fLe(t,e);return r===""?"":n+r}const vLe=pG([dLe,pLe,mLe]),gLe=pG([vLe,uLe]);function yLe(t,e){const n=gLe(t,e);return e+=n.length,n===""?null:{evaluable:new J3e(n),cursor:e}}function bLe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=v_e(t,e);if(!r)return null;e=r.cursor,e+=eP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function _Le(t,e){var n;return(n=yLe(t,e))!==null&&n!==void 0?n:bLe(t,e)}function m_e(t,e){const n=_Le(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=m_e(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new rLe(r,o.evaluable)}):null}function wLe(t,e,n){n+=eP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=eP(e,n).length,{cursor:n,operator:r}):null}function xLe(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const p=wLe(e,n,r);if(!p)break;r=p.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new tLe(p.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const SLe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>xLe(t,e),m_e);function v_e(t,e){return e+=eP(t,e).length,SLe(t,e)}function ELe(t){const e=v_e(t,0);return!e||e.cursor+eP(t,e.cursor).length!==t.length?null:e.evaluable}function Mh(t){var e;const n=ELe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function g_e(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Mh(t);if(!ii(e))return e}return 0}function CLe(t){return String(t)}function ya(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Ar(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function xme(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function vo(t,e,n){return Math.min(Math.max(t,e),n)}function y_e(t,e){return(t%e+e)%e}function PLe(t,e){return ii(t.step)?Math.max(xme(e),2):xme(t.step)}function b_e(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function __e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function w_e(t,e){return ii(t.step)?null:new Q3e(t.step,e)}function x_e(t){return!ii(t.max)&&!ii(t.min)?new _P({max:t.max,min:t.min}):!ii(t.max)||!ii(t.min)?new Z3e({max:t.max,min:t.min}):null}function S_e(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:ya(PLe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:b_e(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:__e(t,e)}}function E_e(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function mG(t){return{constraint:t.constraint,textProps:or.fromObject(S_e(t.params,t.initialValue))}}let Gg=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},dL=class{constructor(e){this.target=e}},wP=class extends dL{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},kLe=class extends dL{constructor(e,n){super(e),this.expanded=n}},TLe=class extends dL{constructor(e,n){super(e),this.index=n}},nP=class extends Gg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new uo,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new wP(this,n.binding.target.read(),e.options.last))}};class MLe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new uo}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function ALe(t){if(!("binding"in t))return!1;const e=t.binding;return hG(e)&&"read"in e&&"write"in e}function ILe(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const p=e[u],m=p(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function RLe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function OLe(t){return t===null?!1:typeof t=="object"}function nh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Sme(t){return{custom:e=>nh(e)(t),boolean:nh(e=>typeof e=="boolean"?e:void 0)(t),number:nh(e=>typeof e=="number"?e:void 0)(t),string:nh(e=>typeof e=="string"?e:void 0)(t),function:nh(e=>typeof e=="function"?e:void 0)(t),constant:e=>nh(n=>n===e?e:void 0)(t),raw:nh(e=>e)(t),object:e=>nh(n=>{if(OLe(n))return ILe(n,e)})(t),array:e=>nh(n=>{if(Array.isArray(n))return RLe(n,e)})(t)}}const DH={optional:Sme(!0),required:Sme(!1)};function Li(t,e){const n=e(DH),r=DH.required.object(n)(t);return r.succeeded?r.value:void 0}function Ga(t,e,n,r){if(e&&!e(t))return!1;const o=Li(t,n);return o?r(o):!1}function $a(t,e){var n;return Og((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function Sg(t){return"value"in t}function C_e(t){if(!dG(t)||!("binding"in t))return!1;const e=t.binding;return hG(e)}const Bc="http://www.w3.org/2000/svg";function T3(t){t.offsetHeight}function DLe(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function vG(t){return t.ontouchstart!==void 0}function LLe(){return globalThis}function NLe(){return LLe().document}function FLe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const BLe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function hL(t,e){const n=t.createElementNS(Bc,"svg");return n.innerHTML=BLe[e],n}function P_e(t,e,n){t.insertBefore(e,t.children[n])}function gG(t){t.parentElement&&t.parentElement.removeChild(t)}function k_e(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function ULe(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function T_e(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function xh(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Gc(t,e,n){xh(t.value(e),n)}const VLe="tp";function _r(t){return(n,r)=>[VLe,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const JE=_r("lbl");function jLe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}let M_e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(JE()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(JE("l")),Gc(n.props,"label",u=>{ii(u)?this.element.classList.add(JE(void 0,"nol")):(this.element.classList.remove(JE(void 0,"nol")),ULe(r),r.appendChild(jLe(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(JE("v")),this.element.appendChild(o),this.valueElement=o}},A_e=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new M_e(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ga(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return $a(null,{label:this.props.get("label")})}};function zLe(){return["veryfirst","first","last","verylast"]}const Eme=_r(""),Cme={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let pL=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{zLe().forEach(r=>{n.classList.remove(Eme(void 0,Cme[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Eme(void 0,Cme[r]))})}),this.viewProps.handleDispose(()=>{gG(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ga(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return $a(null,Object.assign({},this.viewProps.exportState()))}},Dg=class extends pL{constructor(e,n){if(n.value!==n.valueController.value)throw ys.shouldNeverHappen();const r=n.valueController.viewProps,o=new A_e(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new M_e(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Ga(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return $a(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function Pme(t){const e=Object.assign({},t);return delete e.value,e}class I_e extends Dg{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return Ga(e,n=>super.importState(Pme(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return $a(()=>Pme(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function HLe(t){return Sg(t)&&C_e(t.value)}class GLe extends I_e{importState(e){return Ga(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function $Le(t){return Sg(t)&&ALe(t.value)}function R_e(t,e){for(;t.length<e;)t.push(void 0)}function WLe(t){const e=[];return R_e(e,t),e}function KLe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function qLe(t,e){const n=[...KLe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):R_e(n,t.length),n}class XLe{constructor(e){this.emitter=new uo,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=wi(WLe(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=qLe(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function YLe(t){if(!("binding"in t))return!1;const e=t.binding;return hG(e)&&"read"in e&&!("write"in e)}class ZLe extends I_e{exportState(){return $a(()=>super.exportState(),{binding:{readonly:!0}})}}function QLe(t){return Sg(t)&&YLe(t.value)}let JLe=class extends Gg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new dL(this))}),this}};function eNe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function J_(t,e){return n=>{eNe(t,e,n)}}function yG(t,e){xh(t,n=>{e.textContent=n??""})}const A6=_r("btn");let tNe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(A6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(A6("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(A6("t")),yG(n.props.value("title"),o),this.buttonElement.appendChild(o)}},nNe=class{constructor(e,n){this.emitter=new uo,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new tNe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ga(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return $a(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},kme=class extends pL{constructor(e,n){const r=new nNe(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new A_e(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return Ga(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return $a(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},O_e=class{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const ew=new O_e("2.0.0");function qs(t){return Object.assign({core:ew},t)}const rNe=qs({id:"button",type:"blade",accept(t){const e=Li(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new kme(t.document,{blade:t.blade,buttonProps:or.fromObject({title:t.params.title}),labelProps:or.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof kme?new JLe(t.controller):null}});function iNe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function oNe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function sNe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function aNe(t){return dG(t)?"refresh"in t&&typeof t.refresh=="function":!1}function lNe(t,e){if(!wme.isBindable(t))throw ys.notBindable();return new wme(t,e)}let uNe=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new uo,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,p=this.pool_.createBinding(u,lNe(e,n),o),m=this.pool_.createBindingApi(p);return this.add(m,o.index)}addFolder(e){return oNe(this,e)}addButton(e){return iNe(this,e)}addTab(e){return sNe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{aNe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=C_e(n.value)?n.value.binding:null;this.emitter_.emit("change",new wP(r,o?o.target.read():n.value.rawValue,e.options.last))}},bG=class extends Gg{constructor(e,n){super(e),this.rackApi_=new uNe(e.rackController,n)}},_G=class extends pL{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ga(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return $a(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function LH(t){return"rackController"in t}let cNe=class{constructor(e){this.emitter=new uo,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw ys.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function dNe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(Sg(r)&&r.value===e)return r}return null}function hNe(t){return LH(t)?t.rackController.rack.bcSet_:null}let pNe=class{constructor(e){var n,r;this.emitter=new uo,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new cNe(hNe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Sg(r))r.value.emitter.on("change",this.onChildValueChange_);else if(LH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(Sg(r))r.value.emitter.off("change",this.onChildValueChange_);else if(LH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=dNe(this.find(Sg),e.sender);if(!n)throw ys.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},wG=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new pNe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&P_e(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&gG(e.bladeController.view.element)}};function tw(){return new or({positions:wi([],{equals:$3e})})}let xG=class D_e extends or{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=or.createCore(n);return new D_e(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ii(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Gc(this,"expanded",r),Gc(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function fNe(t,e){let n=0;return DLe(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),T3(e),n=e.clientHeight,t.set("temporaryExpanded",null),T3(e)}),n}function Tme(t,e){e.style.height=t.styleHeight}function SG(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),ii(t.get("expandedHeight"))){const n=fNe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),T3(e)}),t.emitter.on("change",()=>{Tme(t,e)}),Tme(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let L_e=class extends bG{constructor(e,n){super(e,n),this.emitter_=new uo,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new kLe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}};const N_e=_r("cnt");let mNe=class{constructor(e,n){var r;this.className_=_r((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),N_e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Gc(this.foldable_,"completed",J_(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),Gc(n.props,"title",x=>{ii(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const p=e.createElement("div");p.classList.add(this.className_("t")),yG(n.props.value("title"),p),this.buttonElement.appendChild(p),this.titleElement=p;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}},NH=class extends _G{constructor(e,n){var r;const o=xG.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new mNe(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new wG({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,SG(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ga(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return $a(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const vNe=qs({id:"folder",type:"blade",accept(t){const e=Li(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new NH(t.document,{blade:t.blade,expanded:t.params.expanded,props:or.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof NH?new L_e(t.controller,t.pool):null}}),gNe=_r("");function Mme(t,e){return J_(t,gNe(void 0,e))}let $g=class F_e extends or{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Y3e(wi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new F_e(or.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){xh(this.globalDisabled_,Mme(e,"disabled")),Gc(this,"hidden",Mme(e,"hidden"))}bindDisabled(e){xh(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){xh(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Ame=_r("tbp");let yNe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ame()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Ame("c")),this.element.appendChild(r),this.containerElement=r}};const eC=_r("tbi");let bNe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(eC()),n.viewProps.bindClassModifiers(this.element),Gc(n.props,"selected",u=>{u?this.element.classList.add(eC(void 0,"sel")):this.element.classList.remove(eC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(eC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(eC("t")),yG(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}},_Ne=class{constructor(e,n){this.emitter=new uo,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new bNe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},FH=class extends _G{constructor(e,n){const r=new yNe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new wG({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new _Ne(e,{props:n.itemProps,viewProps:$g.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Gc(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return Ga(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return $a(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},wNe=class extends bG{constructor(e,n){super(e,n),this.emitter_=new uo,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new FH(n,{blade:tw(),itemProps:or.fromObject({selected:!1,title:e.title}),props:or.fromObject({selected:!1}),viewProps:$g.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new TLe(this,e.rawValue))}},xNe=class extends bG{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const Ime=-1;let SNe=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=wi(!0),this.selectedIndex=wi(Ime),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ime,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const tC=_r("tab");let ENe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(tC(),N_e()),n.viewProps.bindClassModifiers(this.element),xh(n.empty,J_(this.element,tC(void 0,"nop")));const r=e.createElement("div");r.classList.add(tC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(tC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(tC("c")),this.element.appendChild(u),this.contentsElement=u}},Rme=class extends _G{constructor(e,n){const r=new SNe,o=new ENe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new wG({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;P_e(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;gG(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const B_e=qs({id:"tab",type:"blade",accept(t){const e=Li(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Rme(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new FH(t.document,{blade:tw(),itemProps:or.fromObject({selected:!1,title:n.title}),props:or.fromObject({selected:!1}),viewProps:$g.create()});e.add(r)}),e},api(t){return t.controller instanceof Rme?new wNe(t.controller,t.pool):t.controller instanceof FH?new xNe(t.controller,t.pool):null}});function CNe(t,e){const n=t.accept(e.params);if(!n)return null;const r=Li(e.params,o=>({disabled:o.optional.boolean,hidden:o.optional.boolean}));return t.controller({blade:tw(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:$g.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let EG=class extends nP{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},PNe=class{constructor(){this.disabled=!1,this.emitter=new uo}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},kNe=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new uo,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},xP=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function M3(t,e){if(t instanceof e)return t;if(t instanceof xP){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}let SP=class{constructor(e){this.values=or.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}};function EP(t){var e;const n=DH;if(Array.isArray(t))return(e=Li({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function CG(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function PG(t){return ii(t)?null:new SP(CG(t))}const I6=_r("lst");let TNe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(I6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(I6("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(I6("m")),o.appendChild(hL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Gc(this.props_,"options",u=>{k_e(this.selectElement),u.forEach(p=>{const m=e.createElement("option");m.textContent=p.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Jf=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new TNe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Ga(e,null,n=>({options:n.required.custom(EP)}),n=>(this.props.set("options",CG(n.options)),!0))}exportProps(){return $a(null,{options:this.props.get("options")})}};const Ome=_r("pop");let MNe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ome()),n.viewProps.bindClassModifiers(this.element),xh(n.shows,J_(this.element,Ome(void 0,"v")))}},U_e=class{constructor(e,n){this.shows=wi(!1),this.viewProps=n.viewProps,this.view=new MNe(e,{shows:this.shows,viewProps:this.viewProps})}};const Dme=_r("txt");let ANe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Dme()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Dme("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},rP=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ANe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);ii(o)||(this.value.rawValue=o),this.view.refresh()}};function INe(t){return String(t)}function V_e(t){return t==="false"?!1:!!t}function Lme(t){return INe(t)}function RNe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const ONe=ya(0);function A3(t){return ONe(t)+"%"}function j_e(t){return String(t)}function BH(t){return t}function nw({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(p){o||(o=!0,p(),o=!1)}t.emitter.on("change",p=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),p.options)})}),e.emitter.on("change",p=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),p.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),p.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function pa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function iP(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Ah(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function DNe(t){return t==="ArrowUp"||t==="ArrowDown"}function z_e(t){return DNe(t)||t==="ArrowLeft"||t==="ArrowRight"}function R6(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}let Wg=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new uo,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(R6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(R6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(R6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const El=_r("txt");let LNe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(El(),El(void 0,"num")),n.arrayPosition&&this.element.classList.add(El(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(El("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(El()),this.inputElement.classList.add(El("i"));const o=e.createElement("div");o.classList.add(El("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Bc,"svg");u.classList.add(El("g")),this.knobElement.appendChild(u);const p=e.createElementNS(Bc,"path");p.classList.add(El("gb")),u.appendChild(p),this.guideBodyElem_=p;const m=e.createElementNS(Bc,"path");m.classList.add(El("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(_r("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(El(void 0,"drg"));return}this.element.classList.add(El(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=vo(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},CP=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=wi(null),this.view=new LNe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Wg(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let p=e;return o!==void 0&&(p=Math.max(p,o)),u!==void 0&&(p=Math.min(p,u)),p}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);ii(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=pa(this.props.get("keyScale"),iP(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){pa(this.props.get("keyScale"),iP(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const O6=_r("sld");let NNe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(O6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(O6("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(O6("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=vo(Ar(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},FNe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new NNe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wg(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Ar(vo(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(this.props.get("keyScale"),Ah(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){pa(this.props.get("keyScale"),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const D6=_r("sldtxt");let BNe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(D6());const r=e.createElement("div");r.classList.add(D6("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(D6("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}},I3=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new FNe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new CP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new BNe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ga(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return $a(null,{max:e.get("max"),min:e.get("min")})}};function H_e(t){return{sliderProps:new or({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new or({formatter:wi(t.formatter),keyScale:t.keyScale,pointerScale:wi(t.pointerScale)})}}const UNe={containerUnitSize:"cnt-usz"};function G_e(t){return`--${UNe[t]}`}function oP(t){return E_e(t)}function Rf(t){if(OH(t))return Li(t,oP)}function vh(t,e){if(!t)return;const n=[],r=w_e(t,e);r&&n.push(r);const o=x_e(t);return o&&n.push(o),new xP(n)}function VNe(t){return t?t.major===ew.major:!1}function $_e(t){if(t==="inline"||t==="popup")return t}function PP(t,e){t.write(e)}const lD=_r("ckb");let jNe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(lD()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(lD("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(lD("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(lD("w")),r.appendChild(u);const p=hL(e,"check");u.appendChild(p),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},zNe=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new jNe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function HNe(t){const e=[],n=PG(t.options);return n&&e.push(n),new xP(e)}const GNe=qs({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Li(e,r=>({options:r.optional.custom(EP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>V_e,constraint:t=>HNe(t.params),writer:t=>PP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&M3(r,SP);return o?new Jf(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new zNe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Jf?new EG(t.controller):null}}),tg=_r("col");let $Ne=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(tg()),n.foldable.bindExpandedClass(this.element,tg(void 0,"expanded")),Gc(n.foldable,"completed",J_(this.element,tg(void 0,"cpl")));const r=e.createElement("div");r.classList.add(tg("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(tg("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(tg("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const p=e.createElement("div");p.classList.add(tg("p")),this.element.appendChild(p),this.pickerElement=p}else this.pickerElement=null}};function WNe(t,e,n){const r=vo(t/255,0,1),o=vo(e/255,0,1),u=vo(n/255,0,1),p=Math.max(r,o,u),m=Math.min(r,o,u),_=p-m;let x=0,M=0;const R=(m+p)/2;return _!==0&&(M=_/(1-Math.abs(p+m-1)),r===p?x=(o-u)/_:o===p?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,M*100,R*100]}function KNe(t,e,n){const r=(t%360+360)%360,o=vo(e/100,0,1),u=vo(n/100,0,1),p=(1-Math.abs(2*u-1))*o,m=p*(1-Math.abs(r/60%2-1)),_=u-p/2;let x,M,R;return r>=0&&r<60?[x,M,R]=[p,m,0]:r>=60&&r<120?[x,M,R]=[m,p,0]:r>=120&&r<180?[x,M,R]=[0,p,m]:r>=180&&r<240?[x,M,R]=[0,m,p]:r>=240&&r<300?[x,M,R]=[m,0,p]:[x,M,R]=[p,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function qNe(t,e,n){const r=vo(t/255,0,1),o=vo(e/255,0,1),u=vo(n/255,0,1),p=Math.max(r,o,u),m=Math.min(r,o,u),_=p-m;let x;_===0?x=0:p===r?x=60*(((o-u)/_%6+6)%6):p===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const M=p===0?0:_/p,R=p;return[x,M*100,R*100]}function W_e(t,e,n){const r=y_e(t,360),o=vo(e/100,0,1),u=vo(n/100,0,1),p=u*o,m=p*(1-Math.abs(r/60%2-1)),_=u-p;let x,M,R;return r>=0&&r<60?[x,M,R]=[p,m,0]:r>=60&&r<120?[x,M,R]=[m,p,0]:r>=120&&r<180?[x,M,R]=[0,p,m]:r>=180&&r<240?[x,M,R]=[0,m,p]:r>=240&&r<300?[x,M,R]=[m,0,p]:[x,M,R]=[p,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function XNe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function YNe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function $c(t){return[t[0],t[1],t[2]]}function fL(t,e){return[t[0],t[1],t[2],e]}const ZNe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:XNe,rgb:KNe},hsv:{hsl:YNe,hsv:(t,e,n)=>[t,e,n],rgb:W_e},rgb:{hsl:WNe,hsv:qNe,rgb:(t,e,n)=>[t,e,n]}};function z_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function QNe(t,e){return t===e?e:y_e(t,e)}function K_e(t,e,n){var r;const o=z_(e,n);return[e==="rgb"?vo(t[0],0,o[0]):QNe(t[0],o[0]),vo(t[1],0,o[1]),vo(t[2],0,o[2]),vo((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function Nme(t,e,n,r){const o=z_(e,n),u=z_(e,r);return t.map((p,m)=>p/o[m]*u[m])}function q_e(t,e,n){const r=Nme(t,e.mode,e.type,"int"),o=ZNe[e.mode][n.mode](...r);return Nme(o,n.mode,"int",n.type)}let Ir=class X_e{static black(){return new X_e([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=K_e(e,n,this.type)}getComponents(e){return fL(q_e($c(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const pf=_r("colp");let JNe=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(pf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(pf("hsv"));const o=e.createElement("div");o.classList.add(pf("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(pf("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const p=e.createElement("div");if(p.classList.add(pf("rgb")),this.textsView_=n.textsView,p.appendChild(this.textsView_.element),this.element.appendChild(p),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(pf("a"));const _=e.createElement("div");_.classList.add(pf("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(pf("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function e5e(t){return t==="int"?"int":t==="float"?"float":void 0}function kG(t){return Li(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(e5e)}),expanded:e.optional.boolean,picker:e.optional.custom($_e),readonly:e.optional.constant(!1)}))}function Lg(t){return t?.1:1}function Y_e(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let TG=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=K_e(e,n,this.type)}getComponents(e){return fL(q_e($c(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const t5e={int:(t,e)=>new Ir(t,e),float:(t,e)=>new TG(t,e)};function MG(t,e,n){return t5e[n](t,e)}function n5e(t){return t.type==="float"}function r5e(t){return t.type==="int"}function i5e(t){const e=t.getComponents(),n=z_(t.mode,"int");return new Ir([Math.round(Ar(e[0],0,1,0,n[0])),Math.round(Ar(e[1],0,1,0,n[1])),Math.round(Ar(e[2],0,1,0,n[2])),e[3]],t.mode)}function o5e(t){const e=t.getComponents(),n=z_(t.mode,"int");return new TG([Ar(e[0],0,n[0],0,1),Ar(e[1],0,n[1],0,1),Ar(e[2],0,n[2],0,1),e[3]],t.mode)}function Hs(t,e){if(t.type===e)return t;if(r5e(t)&&e==="float")return o5e(t);if(n5e(t)&&e==="int")return i5e(t);throw ys.shouldNeverHappen()}function s5e(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Dl(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const a5e={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Z_e(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return a5e[r](n)}function Q_e(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Dl(e[1],255),Dl(e[2],255),Dl(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function l5e(t){const e=Q_e(t);return e?new Ir(e,"rgb"):null}function J_e(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Dl(e[1],255),Dl(e[2],255),Dl(e[3],255),Dl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function u5e(t){const e=J_e(t);return e?new Ir(e,"rgb"):null}function ewe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Z_e(e[1]),Dl(e[2],100),Dl(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function c5e(t){const e=ewe(t);return e?new Ir(e,"hsl"):null}function twe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Z_e(e[1]),Dl(e[2],100),Dl(e[3],100),Dl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function d5e(t){const e=twe(t);return e?new Ir(e,"hsl"):null}function nwe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function h5e(t){const e=nwe(t);return e?new Ir(e,"rgb"):null}function rwe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Ar(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Ar(parseInt(n[4],16),0,255,0,1)]:null}function p5e(t){const e=rwe(t);return e?new Ir(e,"rgb"):null}function iwe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Fme(t){return e=>{const n=iwe(e);return n?MG(n,"rgb",t):null}}function owe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Bme(t){return e=>{const n=owe(e);return n?MG(n,"rgb",t):null}}const f5e=[{parser:nwe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:rwe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Q_e,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:J_e,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ewe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:twe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:iwe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:owe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function m5e(t){return f5e.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function v5e(t,e="int"){const n=m5e(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function kP(t){const e=[h5e,p5e,l5e,u5e,c5e,d5e];t==="int"&&e.push(Fme("int"),Bme("int")),t==="float"&&e.push(Fme("float"),Bme("float"));const n=RNe(e);return r=>{const o=n(r);return o?Hs(o,t):null}}function g5e(t){const e=kP("int");if(typeof t!="string")return Ir.black();const n=e(t);return n??Ir.black()}function swe(t){const e=vo(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function AG(t,e="#"){const n=$c(t.getComponents("rgb")).map(swe).join("");return`${e}${n}`}function IG(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(swe).join("");return`${e}${r}`}function awe(t){const e=ya(0),n=Hs(t,"int");return`rgb(${$c(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function qD(t){const e=ya(2),n=ya(0);return`rgba(${Hs(t,"int").getComponents("rgb").map((u,p)=>(p===3?e:n)(u)).join(", ")})`}function y5e(t){const e=[ya(0),A3,A3],n=Hs(t,"int");return`hsl(${$c(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function b5e(t){const e=[ya(0),A3,A3,ya(2)];return`hsla(${Hs(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function lwe(t,e){const n=ya(e==="float"?2:0),r=["r","g","b"],o=Hs(t,e);return`{${$c(o.getComponents("rgb")).map((p,m)=>`${r[m]}: ${n(p)}`).join(", ")}}`}function _5e(t){return e=>lwe(e,t)}function uwe(t,e){const n=ya(2),r=ya(e==="float"?2:0),o=["r","g","b","a"];return`{${Hs(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function w5e(t){return e=>uwe(e,t)}const x5e=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:AG},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:IG},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:awe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:qD},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:y5e},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:b5e},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:_5e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:w5e(e)}],[])];function cwe(t){return x5e.reduce((e,n)=>e||(s5e(n.format,t)?n.stringifier:null),null)}const nC=_r("apl");let S5e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(nC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(nC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(nC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(nC("m")),this.element.appendChild(u),this.markerElem_=u;const p=e.createElement("div");p.classList.add(nC("p")),this.markerElem_.appendChild(p),this.previewElem_=p,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Ir([n[0],n[1],n[2],0],"rgb"),o=new Ir([n[0],n[1],n[2],255],"rgb"),u=["to right",qD(r),qD(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=qD(e);const p=Ar(n[3],0,1,0,100);this.markerElem_.style.left=`${p}%`}onValueChange_(){this.update_()}},E5e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new S5e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,p,m]=o.getComponents("hsv");this.value.setRawValue(new Ir([u,p,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(Lg(!0),Ah(e));if(n===0)return;const r=this.value.rawValue,[o,u,p,m]=r.getComponents("hsv");this.value.setRawValue(new Ir([o,u,p,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pa(Lg(!0),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Nb=_r("coltxt");function C5e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}let P5e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Nb()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Nb("m")),this.modeElem_=C5e(e),this.modeElem_.classList.add(Nb("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(Nb("mm")),o.appendChild(hL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(Nb("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),xh(n.mode,p=>{this.modeElem_.value=p})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){k_e(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(Nb("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function k5e(t){return ya(t==="float"?2:0)}function T5e(t,e,n){const r=z_(t,e)[n];return new _P({min:0,max:r})}function M5e(t,e,n){return new CP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:or.fromObject({formatter:k5e(e.colorType),keyScale:Lg(!1),pointerScale:e.colorType==="float"?.01:1}),value:wi(0,{constraint:T5e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function A5e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Mh,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=M5e(t,n,r);return nw({primary:e.value,secondary:o.value,forward(u){return Hs(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,p){const m=e.colorMode,x=Hs(u,e.colorType).getComponents(m);x[r]=p;const M=MG(fL($c(x),x[3]),m,e.colorType);return Hs(M,"int")}}),o})}function I5e(t,e){const n=new rP(t,{parser:kP("int"),props:or.fromObject({formatter:AG}),value:wi(Ir.black()),viewProps:e.viewProps});return nw({primary:e.value,secondary:n.value,forward:r=>new Ir($c(r.getComponents()),r.mode),backward:(r,o)=>new Ir(fL($c(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function R5e(t){return t!=="hex"}let O5e=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=wi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new P5e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return R5e(n)?A5e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):I5e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const L6=_r("hpl");let D5e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(L6()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(L6("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(L6("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=awe(new Ir([n,100,100],"hsv"));const r=Ar(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},L5e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new D5e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Ar(vo(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,p,m]=o.getComponents("hsv");this.value.setRawValue(new Ir([r,u,p,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(Lg(!1),Ah(e));if(n===0)return;const r=this.value.rawValue,[o,u,p,m]=r.getComponents("hsv");this.value.setRawValue(new Ir([o+n,u,p,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pa(Lg(!1),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const N6=_r("svp"),Ume=64;let N5e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(N6()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=Ume,r.width=Ume,r.classList.add(N6("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(N6("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=FLe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,p=e.getImageData(0,0,o,u),m=p.data;for(let M=0;M<u;M++)for(let R=0;R<o;R++){const N=Ar(R,0,o,0,100),G=Ar(M,0,u,100,0),Z=W_e(r[0],N,G),j=(M*o+R)*4;m[j]=Z[0],m[j+1]=Z[1],m[j+2]=Z[2],m[j+3]=255}e.putImageData(p,0,0);const _=Ar(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Ar(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}},F5e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new N5e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Ar(e.point.x,0,e.bounds.width,0,100),o=Ar(e.point.y,0,e.bounds.height,100,0),[u,,,p]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ir([u,r,o,p],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){z_e(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),p=Lg(!1),m=pa(p,Ah(e)),_=pa(p,iP(e));m===0&&_===0||this.value.setRawValue(new Ir([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Lg(!1),r=pa(n,Ah(e)),o=pa(n,iP(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},B5e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new L5e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new F5e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new E5e(e,{value:this.value,viewProps:this.viewProps}),text:new CP(e,{parser:Mh,props:or.fromObject({pointerScale:.01,keyScale:.1,formatter:ya(2)}),value:wi(0,{constraint:new _P({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&nw({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Ir(u,r.mode)}}),this.textsC_=new O5e(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new JNe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const F6=_r("colsw");let U5e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(F6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(F6("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add(F6("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=IG(e)}onValueChange_(){this.update_()}},V5e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new U5e(e,{value:this.value,viewProps:this.viewProps})}},RG=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=xG.create(n.expanded),this.swatchC_=new V5e(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new rP(e,{parser:n.parser,props:or.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new $Ne(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new U_e(e,{viewProps:this.viewProps}):null;const o=new B5e(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),nw({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,p)=>p})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),SG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=T_e(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!vG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function j5e(t){return $c(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function z5e(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function H5e(t){return new Ir([t>>16&255,t>>8&255,t&255],"rgb")}function G5e(t){return new Ir([t>>24&255,t>>16&255,t>>8&255,Ar(t&255,0,255,0,1)],"rgb")}function $5e(t){return typeof t!="number"?Ir.black():H5e(t)}function W5e(t){return typeof t!="number"?Ir.black():G5e(t)}function XD(t,e){return typeof t!="object"||ii(t)?!1:e in t&&typeof t[e]=="number"}function dwe(t){return XD(t,"r")&&XD(t,"g")&&XD(t,"b")}function hwe(t){return dwe(t)&&XD(t,"a")}function pwe(t){return dwe(t)}function OG(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function Vme(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function K5e(t){const e=cwe(t);return e?(n,r)=>{PP(n,e(r))}:null}function q5e(t){const e=t?z5e:j5e;return(n,r)=>{PP(n,e(r))}}function X5e(t,e,n){const o=Hs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function Y5e(t,e,n){const o=Hs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function Z5e(t,e){return(n,r)=>{t?X5e(n,r,e):Y5e(n,r,e)}}function Q5e(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function J5e(t){return t?e=>IG(e,"0x"):e=>AG(e,"0x")}function eFe(t){return"color"in t||t.view==="color"}const tFe=qs({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!eFe(e))return null;const n=kG(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:Q5e(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?W5e:$5e,equals:OG,writer:t=>q5e(t.params.supportsAlpha)},controller:t=>{var e,n;return new RG(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:J5e(t.params.supportsAlpha),parser:kP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function nFe(t,e){if(!pwe(t))return Hs(Ir.black(),e);if(e==="int"){const n=Vme(t);return new Ir(n,"rgb")}if(e==="float"){const n=Vme(t);return new TG(n,"rgb")}return Hs(Ir.black(),"int")}function rFe(t){return hwe(t)}function iFe(t){return e=>{const n=nFe(e,t);return Hs(n,"int")}}function oFe(t,e){return n=>t?uwe(n,e):lwe(n,e)}const sFe=qs({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!pwe(t))return null;const r=kG(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=Y_e(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>iFe(t.params.colorType),equals:OG,writer:t=>Z5e(rFe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=hwe(t.initialValue);return new RG(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:oFe(r,t.params.colorType),parser:kP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),aFe=qs({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=v5e(t,Y_e(e));if(!n)return null;const r=cwe(n);if(!r)return null;const o=kG(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>g5e,equals:OG,writer:t=>{const e=K5e(t.params.format);if(!e)throw ys.notBindable();return e}},controller:t=>{var e,n;return new RG(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:kP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let DG=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,p;return(p=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&p!==void 0?p:r});return this.asm_.fromComponents(n)}};const jme=_r("pndtxt");let lFe=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(jme()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add(jme("a")),o.appendChild(r.element),this.element.appendChild(o)})}};function uFe(t,e,n){return new CP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:wi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let LG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>uFe(e,n,o)),this.acs_.forEach((r,o)=>{nw({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,p)=>{const m=n.assembly.toComponents(u);return m[o]=p,n.assembly.fromComponents(m)}})}),this.view=new lFe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},cFe=class extends nP{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function dFe(t,e){const n=[],r=w_e(t,e);r&&n.push(r);const o=x_e(t);o&&n.push(o);const u=PG(t.options);return u&&n.push(u),new xP(n)}const hFe=qs({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Li(e,r=>Object.assign(Object.assign({},E_e(r)),{options:r.optional.custom(EP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>g_e,constraint:t=>dFe(t.params,t.initialValue),writer:t=>PP},controller:t=>{const e=t.value,n=t.constraint,r=n&&M3(n,SP);if(r)return new Jf(t.document,{props:new or({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=S_e(t.params,e.rawValue),u=n&&M3(n,_P);return u?new I3(t.document,Object.assign(Object.assign({},H_e(Object.assign(Object.assign({},o),{keyScale:wi(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:Mh,value:e,viewProps:t.viewProps})):new CP(t.document,{parser:Mh,props:or.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof I3?new cFe(t.controller):t.controller.valueController instanceof Jf?new EG(t.controller):null}});let Gf=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(ii(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const fwe={toComponents:t=>t.getComponents(),fromComponents:t=>new Gf(...t)},Fb=_r("p2d");let pFe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Fb()),n.viewProps.bindClassModifiers(this.element),xh(n.expanded,J_(this.element,Fb(void 0,"expanded")));const r=e.createElement("div");r.classList.add(Fb("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(Fb("b")),o.appendChild(hL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(Fb("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const p=e.createElement("div");p.classList.add(Fb("p")),this.element.appendChild(p),this.pickerElement=p}else this.pickerElement=null}};const ff=_r("p2dp");let fFe=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ff()),n.layout==="popup"&&this.element.classList.add(ff(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(ff("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Bc,"svg");o.classList.add(ff("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Bc,"line");u.classList.add(ff("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const p=e.createElementNS(Bc,"line");p.classList.add(ff("ax")),p.setAttributeNS(null,"x1","50%"),p.setAttributeNS(null,"y1","0"),p.setAttributeNS(null,"x2","50%"),p.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(p);const m=e.createElementNS(Bc,"line");m.classList.add(ff("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(ff("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Ar(e,-r,+r,0,100),u=Ar(n,-r,+r,0,100),p=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${p}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${p}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function zme(t,e,n){return[pa(e[0],Ah(t)),pa(e[1],iP(t))*(n?1:-1)]}let mFe=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new fFe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wg(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Ar(e.point.x,0,e.bounds.width,-r,+r),u=Ar(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Gf(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){z_e(e.key)&&e.preventDefault();const[n,r]=zme(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Gf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=zme(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},vFe=class{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=xG.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new U_e(e,{viewProps:this.viewProps}):null;const u=new mFe(e,{layout:n.pickerLayout,props:new or({invertsY:wi(n.invertsY),max:wi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(p=>{p.addEventListener("blur",this.onPopupChildBlur_),p.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new LG(e,{assembly:fwe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new pFe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),nw({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:p=>p,backward:(p,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),SG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=T_e(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!vG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function gFe(t){return Gf.isObject(t)?new Gf(t.x,t.y):new Gf}function yFe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function bFe(t,e){return new DG({assembly:fwe,components:[vh(Object.assign(Object.assign({},t),t.x),e.x),vh(Object.assign(Object.assign({},t),t.y),e.y)]})}function Hme(t,e){var n,r;if(!ii(t.min)||!ii(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=b_e(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function _Fe(t,e){var n,r;const o=Hme(Og(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=Hme(Og(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function wFe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const xFe=qs({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Gf.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},oP(r)),{expanded:r.optional.boolean,picker:r.optional.custom($_e),readonly:r.optional.constant(!1),x:r.optional.custom(Rf),y:r.optional.object(Object.assign(Object.assign({},oP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>gFe,constraint:t=>bFe(t.params,t.initialValue),equals:Gf.equals,writer:()=>yFe},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,p=[t.params.x,t.params.y];return new vFe(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return mG({constraint:u.components[_],initialValue:m,params:Og(t.params,(x=p[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:wFe(t.params),max:_Fe(t.params,o.rawValue),parser:Mh,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});let M_=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(ii(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const mwe={toComponents:t=>t.getComponents(),fromComponents:t=>new M_(...t)};function SFe(t){return M_.isObject(t)?new M_(t.x,t.y,t.z):new M_}function EFe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function CFe(t,e){return new DG({assembly:mwe,components:[vh(Object.assign(Object.assign({},t),t.x),e.x),vh(Object.assign(Object.assign({},t),t.y),e.y),vh(Object.assign(Object.assign({},t),t.z),e.z)]})}const PFe=qs({id:"input-point3d",type:"input",accept:(t,e)=>{if(!M_.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},oP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Rf),y:r.optional.custom(Rf),z:r.optional.custom(Rf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>SFe,constraint:t=>CFe(t.params,t.initialValue),equals:M_.equals,writer:t=>EFe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new LG(t.document,{assembly:mwe,axes:e.rawValue.getComponents().map((o,u)=>{var p;return mG({constraint:n.components[u],initialValue:o,params:Og(t.params,(p=r[u])!==null&&p!==void 0?p:{})})}),parser:Mh,value:e,viewProps:t.viewProps})}});let A_=class{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(ii(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const vwe={toComponents:t=>t.getComponents(),fromComponents:t=>new A_(...t)};function kFe(t){return A_.isObject(t)?new A_(t.x,t.y,t.z,t.w):new A_}function TFe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function MFe(t,e){return new DG({assembly:vwe,components:[vh(Object.assign(Object.assign({},t),t.x),e.x),vh(Object.assign(Object.assign({},t),t.y),e.y),vh(Object.assign(Object.assign({},t),t.z),e.z),vh(Object.assign(Object.assign({},t),t.w),e.w)]})}const AFe=qs({id:"input-point4d",type:"input",accept:(t,e)=>{if(!A_.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},oP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Rf),x:r.optional.custom(Rf),y:r.optional.custom(Rf),z:r.optional.custom(Rf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>kFe,constraint:t=>MFe(t.params,t.initialValue),equals:A_.equals,writer:t=>TFe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new LG(t.document,{assembly:vwe,axes:e.rawValue.getComponents().map((o,u)=>{var p;return mG({constraint:n.components[u],initialValue:o,params:Og(t.params,(p=r[u])!==null&&p!==void 0?p:{})})}),parser:Mh,value:e,viewProps:t.viewProps})}});function IFe(t){const e=[],n=PG(t.options);return n&&e.push(n),new xP(e)}const RFe=qs({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Li(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(EP)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>j_e,constraint:t=>IFe(t.params),writer:t=>PP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&M3(r,SP);return o?new Jf(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new rP(e,{parser:u=>u,props:or.fromObject({formatter:BH}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Jf?new EG(t.controller):null}}),TP={monitor:{defaultInterval:200,defaultRows:3}},Gme=_r("mll");let OFe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Gme()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(Gme("i")),r.style.height=`calc(var(${G_e("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},NG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new OFe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const $me=_r("sgl");let DFe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add($me()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add($me("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},FG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new DFe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const LFe=qs({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Li(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>V_e},controller:t=>{var e;return t.value.rawValue.length===1?new FG(t.document,{formatter:Lme,value:t.value,viewProps:t.viewProps}):new NG(t.document,{formatter:Lme,rows:(e=t.params.rows)!==null&&e!==void 0?e:TP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let NFe=class extends nP{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const mf=_r("grl");let FFe=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Bc,"svg");r.classList.add(mf("g")),r.style.height=`calc(var(${G_e("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Bc,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(mf("t"),_r("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((M,R)=>{if(M===void 0)return;const N=Ar(R,0,n,0,e.width),G=Ar(M,r,o,e.height,0);u.push([N,G].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const p=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){p.classList.remove(mf("t","a"));return}const _=Ar(this.cursor_.rawValue,0,n,0,e.width),x=Ar(m,r,o,e.height,0);p.style.left=`${_}px`,p.style.top=`${x}px`,p.textContent=`${this.formatter_(m)}`,p.classList.contains(mf("t","a"))||(p.classList.add(mf("t","a"),mf("t","in")),T3(p),p.classList.remove(mf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},gwe=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=wi(-1),this.view=new FFe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!vG(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Wg(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ga(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return $a(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Ar(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ar(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function UH(t){return ii(t.format)?ya(2):t.format}function BFe(t){var e;return t.value.rawValue.length===1?new FG(t.document,{formatter:UH(t.params),value:t.value,viewProps:t.viewProps}):new NG(t.document,{formatter:UH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:TP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function UFe(t){var e,n,r;return new gwe(t.document,{formatter:UH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:TP.monitor.defaultRows,props:or.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Wme(t){return t.view==="graph"}const VFe=qs({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Li(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Wme(t)?64:1,reader:t=>g_e},controller:t=>Wme(t.params)?UFe(t):BFe(t),api:t=>t.controller.valueController instanceof gwe?new NFe(t.controller):null}),jFe=qs({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Li(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>j_e},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new NG(t.document,{formatter:BH,rows:(e=t.params.rows)!==null&&e!==void 0?e:TP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new FG(t.document,{formatter:BH,value:n,viewProps:t.viewProps})}});class zFe{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class HFe{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function GFe(t,e){var n;const r=t.accept(e.target.read(),e.params);if(ii(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},u=Li(e.params,R=>({disabled:R.optional.boolean,hidden:R.optional.boolean,label:R.optional.string,tag:R.optional.string})),p=t.binding.reader(o),m=t.binding.constraint?t.binding.constraint(o):void 0,_=new HFe({reader:p,target:e.target,writer:t.binding.writer(o)}),x=new MLe(wi(p(r.initialValue),{constraint:m,equals:t.binding.equals}),_),M=t.controller({constraint:m,document:e.document,initialValue:r.initialValue,params:r.params,value:x,viewProps:$g.create({disabled:u==null?void 0:u.disabled,hidden:u==null?void 0:u.hidden})});return new GLe(e.document,{blade:tw(),props:or.fromObject({label:"label"in e.params?(n=u==null?void 0:u.label)!==null&&n!==void 0?n:null:e.target.key}),tag:u==null?void 0:u.tag,value:x,valueController:M})}class $Fe{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function WFe(t,e){return e===0?new PNe:new kNe(t,e??TP.monitor.defaultInterval)}function KFe(t,e){var n,r,o;const u=t.accept(e.target.read(),e.params);if(ii(u))return null;const p={target:e.target,initialValue:u.initialValue,params:u.params},m=Li(e.params,N=>({bufferSize:N.optional.number,disabled:N.optional.boolean,hidden:N.optional.boolean,interval:N.optional.number,label:N.optional.string})),_=t.binding.reader(p),x=(r=(n=m==null?void 0:m.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(u.params))!==null&&r!==void 0?r:1,M=new XLe({binding:new $Fe({reader:_,target:e.target}),bufferSize:x,ticker:WFe(e.document,m==null?void 0:m.interval)}),R=t.controller({document:e.document,params:u.params,value:M,viewProps:$g.create({disabled:m==null?void 0:m.disabled,hidden:m==null?void 0:m.hidden})});return R.viewProps.bindDisabled(M.ticker),R.viewProps.handleDispose(()=>{M.ticker.dispose()}),new ZLe(e.document,{blade:tw(),props:or.fromObject({label:"label"in e.params?(o=m==null?void 0:m.label)!==null&&o!==void 0?o:null:e.target.key}),value:M,valueController:R})}class qFe{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!VNe(n.core))throw ys.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((o,u)=>o??GFe(u,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((o,u)=>o??KFe(u,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const o=n.read();if(ii(o))throw new ys({context:{key:n.key},type:"nomatchingcontroller"});const u=this.createInput_(e,n,r);if(u)return u;const p=this.createMonitor_(e,n,r);if(p)return p;throw new ys({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((o,u)=>o??CNe(u,{document:e,params:n}),null);if(!r)throw new ys({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,o)=>{var u,p;return r||((p=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&p!==void 0?p:null)},null);return this.apiCache_.add(e,n??new nP(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,o)=>{var u,p;return r||((p=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&p!==void 0?p:null)},null);return this.apiCache_.add(e,n??new nP(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if($Le(e))return this.createInputBindingApi_(e);if(QLe(e))return this.createMonitorBindingApi_(e);throw ys.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(HLe(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,o)=>r??o.api({controller:e,pool:this}),null);if(!n)throw ys.shouldNeverHappen();return this.apiCache_.add(e,n)}}const XFe=new zFe;function YFe(){const t=new qFe(XFe);return[xFe,PFe,AFe,RFe,hFe,aFe,sFe,tFe,GNe,LFe,jFe,VFe,rNe,vNe,B_e].forEach(e=>{t.register("core",e)}),t}class ZFe extends Gg{constructor(e){super(e),this.emitter_=new uo,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new wP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class QFe extends Gg{}class JFe extends Gg{constructor(e){super(e),this.emitter_=new uo,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new wP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class eBe extends Gg{constructor(e){super(e),this.emitter_=new uo,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new wP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}const tBe=function(){return{id:"list",type:"blade",core:ew,accept(t){const e=Li(t,n=>({options:n.required.custom(EP),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new SP(CG(t.params.options)),n=wi(t.params.value,{constraint:e}),r=new Jf(t.document,{props:new or({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Dg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Dg)||!(t.controller.valueController instanceof Jf)?null:new ZFe(t.controller)}}}();class nBe extends L_e{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class rBe extends NH{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Kme=_r("spr");class iBe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kme()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(Kme("r")),this.element.appendChild(r)}}class qme extends pL{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new iBe(e,{viewProps:n.viewProps})}))}}const oBe={id:"separator",type:"blade",core:ew,accept(t){const e=Li(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new qme(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof qme?new QFe(t.controller):null}},sBe={id:"slider",type:"blade",core:ew,accept(t){const e=Li(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,o=new _P({max:t.params.max,min:t.params.min}),u=wi(r,{constraint:o}),p=new I3(t.document,Object.assign(Object.assign({},H_e({formatter:(n=t.params.format)!==null&&n!==void 0?n:CLe,keyScale:wi(1),max:o.values.value("max"),min:o.values.value("min"),pointerScale:__e(t.params,r)})),{parser:Mh,value:u,viewProps:t.viewProps}));return new Dg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:u,valueController:p})},api(t){return!(t.controller instanceof Dg)||!(t.controller.valueController instanceof I3)?null:new JFe(t.controller)}},aBe=function(){return{id:"text",type:"blade",core:ew,accept(t){const e=Li(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=wi(t.params.value),r=new rP(t.document,{parser:t.params.parse,props:or.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:o=>String(o)}),value:n,viewProps:t.viewProps});return new Dg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Dg)||!(t.controller.valueController instanceof rP)?null:new eBe(t.controller)}}}();function lBe(t){const e=t.createElement("div");return e.classList.add(_r("dfw")()),t.body&&t.body.appendChild(e),e}function uBe(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class cBe extends nBe{constructor(e){var n,r;const o=e??{},u=(n=o.document)!==null&&n!==void 0?n:NLe(),p=YFe(),m=new rBe(u,{expanded:o.expanded,blade:tw(),props:or.fromObject({title:o.title}),viewProps:$g.create()});super(m,p),this.pool_=p,this.containerElem_=(r=o.container)!==null&&r!==void 0?r:lBe(u),this.containerElem_.appendChild(this.element),this.doc_=u,this.usesDefaultWrapper_=!o.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw ys.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw ys.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&uBe(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[tBe,oBe,sBe,B_e,aBe]})}}new O_e("4.0.0");function bi(t){return t==null}function BG(t){return t!==null&&typeof t=="object"}function VH(t){return t!==null&&typeof t=="object"}function dBe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ng(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],p=e[o];return VH(u)&&VH(p)?Object.assign(Object.assign({},r),{[o]:Ng(u,p)}):Object.assign(Object.assign({},r),{[o]:o in e?p:u})},{})}function hBe(t){return BG(t)?"target"in t:!1}const pBe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class js{static alreadyDisposed(){return new js({type:"alreadydisposed"})}static notBindable(){return new js({type:"notbindable"})}static notCompatible(e,n){return new js({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new js({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new js({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=pBe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class R3{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!R3.isBindable(r))throw js.notBindable();if(!(e in r))throw js.propertyNotFound(e);r[e]=n}}class ws{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}}class fBe{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new ws,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}}class mBe{constructor(e){this.emitter=new ws,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}}class vBe{constructor(e){this.emitter=new ws,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Vi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new mBe(t):new fBe(t,e)}function gBe(t){return[new vBe(t),(e,n)=>{t.setRawValue(e,n)}]}class Jn{constructor(e){this.emitter=new ws,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:Vi(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new Jn(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class MP{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class UG{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return bi(r)||(o=Math.max(o,r)),bi(n)||(o=Math.min(o,n)),o}}class yBe{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class bBe{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const _Be={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class wBe{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=_Be[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const xBe={"+":t=>t,"-":t=>-t,"~":t=>~t};class SBe{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=xBe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function VG(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function sP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function EBe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function aP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function CBe(t,e){const n=aP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=aP(t,e);return o===""?"":r+o}function jG(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=CBe(t,e);return r===""?"":n+r}function ywe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=EBe(t,e);return e+=r.length,r===""?"":r+aP(t,e)}function PBe(t,e){const n=ywe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=aP(t,e);return e+=o.length,n+r+o+jG(t,e)}function kBe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=aP(t,e);return e+=r.length,r===""?"":n+r+jG(t,e)}function TBe(t,e){const n=ywe(t,e);return e+=n.length,n===""?"":n+jG(t,e)}const MBe=VG([PBe,kBe,TBe]);function ABe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function IBe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=ABe(t,e);return r===""?"":n+r}function RBe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function OBe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=RBe(t,e);return r===""?"":n+r}function DBe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function LBe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=DBe(t,e);return r===""?"":n+r}const NBe=VG([IBe,OBe,LBe]),FBe=VG([NBe,MBe]);function BBe(t,e){const n=FBe(t,e);return e+=n.length,n===""?null:{evaluable:new bBe(n),cursor:e}}function UBe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=_we(t,e);if(!r)return null;e=r.cursor,e+=sP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function VBe(t,e){var n;return(n=BBe(t,e))!==null&&n!==void 0?n:UBe(t,e)}function bwe(t,e){const n=VBe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=bwe(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new SBe(r,o.evaluable)}):null}function jBe(t,e,n){n+=sP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=sP(e,n).length,{cursor:n,operator:r}):null}function zBe(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const p=jBe(e,n,r);if(!p)break;r=p.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new wBe(p.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const HBe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>zBe(t,e),bwe);function _we(t,e){return e+=sP(t,e).length,HBe(t,e)}function GBe(t){const e=_we(t,0);return!e||e.cursor+sP(t,e.cursor).length!==t.length?null:e.evaluable}function Vu(t){var e;const n=GBe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function zG(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Vu(t);if(!bi(e))return e}return 0}function Qo(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Zn(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function Xme(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ri(t,e,n){return Math.min(Math.max(t,e),n)}function wwe(t,e){return(t%e+e)%e}function $Be(t,e){return bi(t.step)?Math.max(Xme(e),2):Xme(t.step)}function xwe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function WBe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function HG(t,e){return bi(t.step)?null:new yBe(t.step,e)}function GG(t){return!bi(t.max)&&!bi(t.min)?new MP({max:t.max,min:t.min}):!bi(t.max)||!bi(t.min)?new UG({max:t.max,min:t.min}):null}function $G(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:Qo($Be(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:xwe(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:WBe(t,e)}}function WG(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function KG(t){return{constraint:t.constraint,textProps:Jn.fromObject($G(t.params,t.initialValue))}}class Kg{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class rw{constructor(e){this.target=e}}class mL extends rw{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class KBe extends rw{constructor(e,n){super(e),this.expanded=n}}class qBe extends rw{constructor(e,n){super(e),this.index=n}}class qG extends Kg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ws,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new mL(this,n.binding.target.read(),e.options.last))}}function XBe(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const p=e[u],m=p(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function YBe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function ZBe(t){return t===null?!1:typeof t=="object"}function rh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Yme(t){return{custom:e=>rh(e)(t),boolean:rh(e=>typeof e=="boolean"?e:void 0)(t),number:rh(e=>typeof e=="number"?e:void 0)(t),string:rh(e=>typeof e=="string"?e:void 0)(t),function:rh(e=>typeof e=="function"?e:void 0)(t),constant:e=>rh(n=>n===e?e:void 0)(t),raw:rh(e=>e)(t),object:e=>rh(n=>{if(ZBe(n))return XBe(n,e)})(t),array:e=>rh(n=>{if(Array.isArray(n))return YBe(n,e)})(t)}}const jH={optional:Yme(!0),required:Yme(!1)};function ji(t,e){const n=e(jH),r=jH.required.object(n)(t);return r.succeeded?r.value:void 0}function zu(t,e,n,r){if(e&&!e(t))return!1;const o=ji(t,n);return o?r(o):!1}function Hu(t,e){var n;return Ng((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function YD(t){return"value"in t}function QBe(t){if(!BG(t)||!("binding"in t))return!1;const e=t.binding;return hBe(e)}const Mo="http://www.w3.org/2000/svg";function O3(t){t.offsetHeight}function JBe(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function vL(t){return t.ontouchstart!==void 0}function eUe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const tUe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function gL(t,e){const n=t.createElementNS(Mo,"svg");return n.innerHTML=tUe[e],n}function Swe(t,e,n){t.insertBefore(e,t.children[n])}function XG(t){t.parentElement&&t.parentElement.removeChild(t)}function Ewe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function nUe(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function YG(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Fl(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Vl(t,e,n){Fl(t.value(e),n)}const rUe="tp";function nr(t){return(n,r)=>[rUe,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const rC=nr("lbl");function iUe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}class Cwe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(rC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(rC("l")),Vl(n.props,"label",u=>{bi(u)?this.element.classList.add(rC(void 0,"nol")):(this.element.classList.remove(rC(void 0,"nol")),nUe(r),r.appendChild(iUe(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(rC("v")),this.element.appendChild(o),this.valueElement=o}}class yL{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Cwe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return zu(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Hu(null,{label:this.props.get("label")})}}function oUe(){return["veryfirst","first","last","verylast"]}const Zme=nr(""),Qme={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class AP{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{oUe().forEach(r=>{n.classList.remove(Zme(void 0,Qme[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Zme(void 0,Qme[r]))})}),this.viewProps.handleDispose(()=>{XG(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return zu(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Hu(null,Object.assign({},this.viewProps.exportState()))}}class D3 extends AP{constructor(e,n){if(n.value!==n.valueController.value)throw js.shouldNeverHappen();const r=n.valueController.viewProps,o=new yL(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Cwe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return zu(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Hu(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function Pwe(t,e){for(;t.length<e;)t.push(void 0)}function sUe(t){const e=[];return Pwe(e,t),e}function aUe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function lUe(t,e){const n=[...aUe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Pwe(n,t.length),n}class uUe extends Kg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new rw(this))}),this}}function cUe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function am(t,e){return n=>{cUe(t,e,n)}}function ZG(t,e){Fl(t,n=>{e.textContent=n??""})}const B6=nr("btn");class dUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(B6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(B6("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(B6("t")),ZG(n.props.value("title"),o),this.buttonElement.appendChild(o)}}class kwe{constructor(e,n){this.emitter=new ws,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new dUe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return zu(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Hu(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class Jme extends AP{constructor(e,n){const r=new kwe(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new yL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return zu(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Hu(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class hUe{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const pUe=new hUe("2.0.0-beta.2");function Ji(t){return Object.assign({core:pUe},t)}Ji({id:"button",type:"blade",accept(t){const e=ji(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Jme(t.document,{blade:t.blade,buttonProps:Jn.fromObject({title:t.params.title}),labelProps:Jn.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Jme?new uUe(t.controller):null}});function fUe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function mUe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function vUe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function gUe(t){return BG(t)?"refresh"in t&&typeof t.refresh=="function":!1}function yUe(t,e){if(!R3.isBindable(t))throw js.notBindable();return new R3(t,e)}class bUe{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ws,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,p=this.pool_.createBinding(u,yUe(e,n),o),m=this.pool_.createBindingApi(p);return this.add(m,o.index)}addFolder(e){return mUe(this,e)}addButton(e){return fUe(this,e)}addTab(e){return vUe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{gUe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=QBe(n.value)?n.value.binding:null;this.emitter_.emit("change",new mL(r,o?o.target.read():n.value.rawValue,e.options.last))}}class QG extends Kg{constructor(e,n){super(e),this.rackApi_=new bUe(e.rackController,n)}}class JG extends AP{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return zu(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return Hu(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function zH(t){return"rackController"in t}class _Ue{constructor(e){this.emitter=new ws,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw js.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function wUe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(YD(r)&&r.value===e)return r}return null}function xUe(t){return zH(t)?t.rackController.rack.bcSet_:null}class SUe{constructor(e){var n,r;this.emitter=new ws,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new _Ue(xUe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),YD(r))r.value.emitter.on("change",this.onChildValueChange_);else if(zH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(YD(r))r.value.emitter.off("change",this.onChildValueChange_);else if(zH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=wUe(this.find(YD),e.sender);if(!n)throw js.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class e${constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new SUe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Swe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&XG(e.bladeController.view.element)}}function Twe(){return new Jn({positions:Vi([],{equals:dBe})})}class iw extends Jn{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=Jn.createCore(n);return new iw(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!bi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Vl(this,"expanded",r),Vl(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function EUe(t,e){let n=0;return JBe(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),O3(e),n=e.clientHeight,t.set("temporaryExpanded",null),O3(e)}),n}function eve(t,e){e.style.height=t.styleHeight}function bL(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),bi(t.get("expandedHeight"))){const n=EUe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),O3(e)}),t.emitter.on("change",()=>{eve(t,e)}),eve(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class CUe extends QG{constructor(e,n){super(e,n),this.emitter_=new ws,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new KBe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}}const Mwe=nr("cnt");class PUe{constructor(e,n){var r;this.className_=nr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Mwe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Vl(this.foldable_,"completed",am(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),Vl(n.props,"title",x=>{bi(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const p=e.createElement("div");p.classList.add(this.className_("t")),ZG(n.props.value("title"),p),this.buttonElement.appendChild(p),this.titleElement=p;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}}class tve extends JG{constructor(e,n){var r;const o=iw.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new PUe(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new e$({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,bL(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return zu(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Hu(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ji({id:"folder",type:"blade",accept(t){const e=ji(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new tve(t.document,{blade:t.blade,expanded:t.params.expanded,props:Jn.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof tve?new CUe(t.controller,t.pool):null}});const kUe=nr("");function nve(t,e){return am(t,kUe(void 0,e))}class Ih extends Jn{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=gBe(Vi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new Ih(Jn.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Fl(this.globalDisabled_,nve(e,"disabled")),Vl(this,"hidden",nve(e,"hidden"))}bindDisabled(e){Fl(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Fl(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const rve=nr("tbp");class TUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(rve()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(rve("c")),this.element.appendChild(r),this.containerElement=r}}const iC=nr("tbi");class MUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(iC()),n.viewProps.bindClassModifiers(this.element),Vl(n.props,"selected",u=>{u?this.element.classList.add(iC(void 0,"sel")):this.element.classList.remove(iC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(iC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(iC("t")),ZG(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}}class AUe{constructor(e,n){this.emitter=new ws,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new MUe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class HH extends JG{constructor(e,n){const r=new TUe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new e$({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new AUe(e,{props:n.itemProps,viewProps:Ih.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Vl(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return zu(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Hu(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class IUe extends QG{constructor(e,n){super(e,n),this.emitter_=new ws,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new HH(n,{blade:Twe(),itemProps:Jn.fromObject({selected:!1,title:e.title}),props:Jn.fromObject({selected:!1}),viewProps:Ih.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new qBe(this,e.rawValue))}}class RUe extends QG{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const ive=-1;class OUe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Vi(!0),this.selectedIndex=Vi(ive),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=ive,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const oC=nr("tab");class DUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(oC(),Mwe()),n.viewProps.bindClassModifiers(this.element),Fl(n.empty,am(this.element,oC(void 0,"nop")));const r=e.createElement("div");r.classList.add(oC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(oC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(oC("c")),this.element.appendChild(u),this.contentsElement=u}}class ove extends JG{constructor(e,n){const r=new OUe,o=new DUe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new e$({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;Swe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;XG(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Ji({id:"tab",type:"blade",accept(t){const e=ji(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new ove(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new HH(t.document,{blade:Twe(),itemProps:Jn.fromObject({selected:!1,title:n.title}),props:Jn.fromObject({selected:!1}),viewProps:Ih.create()});e.add(r)}),e},api(t){return t.controller instanceof ove?new IUe(t.controller,t.pool):t.controller instanceof HH?new RUe(t.controller,t.pool):null}});class t$ extends qG{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class LUe{constructor(){this.disabled=!1,this.emitter=new ws}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class NUe{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ws,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ow{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function lP(t,e){if(t instanceof e)return t;if(t instanceof ow){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}class _L{constructor(e){this.values=Jn.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}}function wL(t){var e;const n=jH;if(Array.isArray(t))return(e=ji({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function Awe(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function n$(t){return bi(t)?null:new _L(Awe(t))}const U6=nr("lst");class FUe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(U6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(U6("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(U6("m")),o.appendChild(gL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Vl(this.props_,"options",u=>{Ewe(this.selectElement),u.forEach(p=>{const m=e.createElement("option");m.textContent=p.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class H_{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new FUe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return zu(e,null,n=>({options:n.required.custom(wL)}),n=>(this.props.set("options",Awe(n.options)),!0))}exportProps(){return Hu(null,{options:this.props.get("options")})}}const sve=nr("pop");class BUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sve()),n.viewProps.bindClassModifiers(this.element),Fl(n.shows,am(this.element,sve(void 0,"v")))}}class r${constructor(e,n){this.shows=Vi(!1),this.viewProps=n.viewProps,this.view=new BUe(e,{shows:this.shows,viewProps:this.viewProps})}}const ave=nr("txt");class UUe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ave()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(ave("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class xL{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new UUe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);bi(o)||(this.value.rawValue=o),this.view.refresh()}}function VUe(t){return String(t)}function i$(t){return t==="false"?!1:!!t}function lve(t){return VUe(t)}function jUe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const zUe=Qo(0);function L3(t){return zUe(t)+"%"}function o$(t){return String(t)}function GH(t){return t}function qg({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(p){o||(o=!0,p(),o=!1)}t.emitter.on("change",p=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),p.options)})}),e.emitter.on("change",p=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),p.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),p.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ao(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Fg(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function ju(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function HUe(t){return t==="ArrowUp"||t==="ArrowDown"}function N3(t){return HUe(t)||t==="ArrowLeft"||t==="ArrowRight"}function V6(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}class Oh{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ws,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(V6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(V6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(V6(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Cl=nr("txt");class GUe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Cl(),Cl(void 0,"num")),n.arrayPosition&&this.element.classList.add(Cl(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Cl("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Cl()),this.inputElement.classList.add(Cl("i"));const o=e.createElement("div");o.classList.add(Cl("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Mo,"svg");u.classList.add(Cl("g")),this.knobElement.appendChild(u);const p=e.createElementNS(Mo,"path");p.classList.add(Cl("gb")),u.appendChild(p),this.guideBodyElem_=p;const m=e.createElementNS(Mo,"path");m.classList.add(Cl("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(nr("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Cl(void 0,"drg"));return}this.element.classList.add(Cl(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=Ri(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class IP{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Vi(null),this.view=new GUe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Oh(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let p=e;return o!==void 0&&(p=Math.max(p,o)),u!==void 0&&(p=Math.min(p,u)),p}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);bi(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=Ao(this.props.get("keyScale"),Fg(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ao(this.props.get("keyScale"),Fg(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const j6=nr("sld");class $Ue{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(j6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(j6("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(j6("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Ri(Zn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class WUe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new $Ue(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Zn(Ri(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ao(this.props.get("keyScale"),ju(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ao(this.props.get("keyScale"),ju(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const z6=nr("sldtxt");class KUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(z6());const r=e.createElement("div");r.classList.add(z6("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(z6("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}}class uve{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new WUe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new IP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new KUe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return zu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Hu(null,{max:e.get("max"),min:e.get("min")})}}function qUe(t){return{sliderProps:new Jn({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new Jn({formatter:Vi(t.formatter),keyScale:t.keyScale,pointerScale:Vi(t.pointerScale)})}}const XUe={containerUnitSize:"cnt-usz"};function Iwe(t){return`--${XUe[t]}`}class Rwe{constructor(e,n){const r=nr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function uP(t){return WG(t)}function Of(t){if(VH(t))return ji(t,uP)}function gh(t,e){if(!t)return;const n=[],r=HG(t,e);r&&n.push(r);const o=GG(t);return o&&n.push(o),new ow(n)}function Owe(t){if(t==="inline"||t==="popup")return t}function lm(t,e){t.write(e)}const uD=nr("ckb");class YUe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(uD()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(uD("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(uD("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(uD("w")),r.appendChild(u);const p=gL(e,"check");u.appendChild(p),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class ZUe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new YUe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function QUe(t){const e=[],n=n$(t.options);return n&&e.push(n),new ow(e)}Ji({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ji(e,r=>({options:r.optional.custom(wL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>i$,constraint:t=>QUe(t.params),writer:t=>lm},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&lP(r,_L);return o?new H_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new ZUe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof H_?new t$(t.controller):null}});const ng=nr("col");class JUe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ng()),n.foldable.bindExpandedClass(this.element,ng(void 0,"expanded")),Vl(n.foldable,"completed",am(this.element,ng(void 0,"cpl")));const r=e.createElement("div");r.classList.add(ng("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(ng("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(ng("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const p=e.createElement("div");p.classList.add(ng("p")),this.element.appendChild(p),this.pickerElement=p}else this.pickerElement=null}}function eVe(t,e,n){const r=Ri(t/255,0,1),o=Ri(e/255,0,1),u=Ri(n/255,0,1),p=Math.max(r,o,u),m=Math.min(r,o,u),_=p-m;let x=0,M=0;const R=(m+p)/2;return _!==0&&(M=_/(1-Math.abs(p+m-1)),r===p?x=(o-u)/_:o===p?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,M*100,R*100]}function tVe(t,e,n){const r=(t%360+360)%360,o=Ri(e/100,0,1),u=Ri(n/100,0,1),p=(1-Math.abs(2*u-1))*o,m=p*(1-Math.abs(r/60%2-1)),_=u-p/2;let x,M,R;return r>=0&&r<60?[x,M,R]=[p,m,0]:r>=60&&r<120?[x,M,R]=[m,p,0]:r>=120&&r<180?[x,M,R]=[0,p,m]:r>=180&&r<240?[x,M,R]=[0,m,p]:r>=240&&r<300?[x,M,R]=[m,0,p]:[x,M,R]=[p,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function nVe(t,e,n){const r=Ri(t/255,0,1),o=Ri(e/255,0,1),u=Ri(n/255,0,1),p=Math.max(r,o,u),m=Math.min(r,o,u),_=p-m;let x;_===0?x=0:p===r?x=60*(((o-u)/_%6+6)%6):p===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const M=p===0?0:_/p,R=p;return[x,M*100,R*100]}function Dwe(t,e,n){const r=wwe(t,360),o=Ri(e/100,0,1),u=Ri(n/100,0,1),p=u*o,m=p*(1-Math.abs(r/60%2-1)),_=u-p;let x,M,R;return r>=0&&r<60?[x,M,R]=[p,m,0]:r>=60&&r<120?[x,M,R]=[m,p,0]:r>=120&&r<180?[x,M,R]=[0,p,m]:r>=180&&r<240?[x,M,R]=[0,m,p]:r>=240&&r<300?[x,M,R]=[m,0,p]:[x,M,R]=[p,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function rVe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function iVe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Wc(t){return[t[0],t[1],t[2]]}function SL(t,e){return[t[0],t[1],t[2],e]}const oVe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:rVe,rgb:tVe},hsv:{hsl:iVe,hsv:(t,e,n)=>[t,e,n],rgb:Dwe},rgb:{hsl:eVe,hsv:nVe,rgb:(t,e,n)=>[t,e,n]}};function G_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function sVe(t,e){return t===e?e:wwe(t,e)}function Lwe(t,e,n){var r;const o=G_(e,n);return[e==="rgb"?Ri(t[0],0,o[0]):sVe(t[0],o[0]),Ri(t[1],0,o[1]),Ri(t[2],0,o[2]),Ri((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function cve(t,e,n,r){const o=G_(e,n),u=G_(e,r);return t.map((p,m)=>p/o[m]*u[m])}function Nwe(t,e,n){const r=cve(t,e.mode,e.type,"int"),o=oVe[e.mode][n.mode](...r);return cve(o,n.mode,"int",n.type)}class Pr{static black(){return new Pr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Lwe(e,n,this.type)}getComponents(e){return SL(Nwe(Wc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const vf=nr("colp");class aVe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(vf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(vf("hsv"));const o=e.createElement("div");o.classList.add(vf("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(vf("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const p=e.createElement("div");if(p.classList.add(vf("rgb")),this.textsView_=n.textsView,p.appendChild(this.textsView_.element),this.element.appendChild(p),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(vf("a"));const _=e.createElement("div");_.classList.add(vf("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(vf("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function lVe(t){return t==="int"?"int":t==="float"?"float":void 0}function s$(t){return ji(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(lVe)}),expanded:e.optional.boolean,picker:e.optional.custom(Owe),readonly:e.optional.constant(!1)}))}function Bg(t){return t?.1:1}function Fwe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class a${constructor(e,n){this.type="float",this.mode=n,this.comps_=Lwe(e,n,this.type)}getComponents(e){return SL(Nwe(Wc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const uVe={int:(t,e)=>new Pr(t,e),float:(t,e)=>new a$(t,e)};function l$(t,e,n){return uVe[n](t,e)}function cVe(t){return t.type==="float"}function dVe(t){return t.type==="int"}function hVe(t){const e=t.getComponents(),n=G_(t.mode,"int");return new Pr([Math.round(Zn(e[0],0,1,0,n[0])),Math.round(Zn(e[1],0,1,0,n[1])),Math.round(Zn(e[2],0,1,0,n[2])),e[3]],t.mode)}function pVe(t){const e=t.getComponents(),n=G_(t.mode,"int");return new a$([Zn(e[0],0,n[0],0,1),Zn(e[1],0,n[1],0,1),Zn(e[2],0,n[2],0,1),e[3]],t.mode)}function Gs(t,e){if(t.type===e)return t;if(dVe(t)&&e==="float")return pVe(t);if(cVe(t)&&e==="int")return hVe(t);throw js.shouldNeverHappen()}function fVe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Ll(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const mVe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Bwe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return mVe[r](n)}function Uwe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function vVe(t){const e=Uwe(t);return e?new Pr(e,"rgb"):null}function Vwe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function gVe(t){const e=Vwe(t);return e?new Pr(e,"rgb"):null}function jwe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Bwe(e[1]),Ll(e[2],100),Ll(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function yVe(t){const e=jwe(t);return e?new Pr(e,"hsl"):null}function zwe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Bwe(e[1]),Ll(e[2],100),Ll(e[3],100),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function bVe(t){const e=zwe(t);return e?new Pr(e,"hsl"):null}function Hwe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function _Ve(t){const e=Hwe(t);return e?new Pr(e,"rgb"):null}function Gwe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Zn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Zn(parseInt(n[4],16),0,255,0,1)]:null}function wVe(t){const e=Gwe(t);return e?new Pr(e,"rgb"):null}function $we(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function dve(t){return e=>{const n=$we(e);return n?l$(n,"rgb",t):null}}function Wwe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function hve(t){return e=>{const n=Wwe(e);return n?l$(n,"rgb",t):null}}const xVe=[{parser:Hwe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Gwe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Uwe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Vwe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:jwe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:zwe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:$we,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Wwe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function SVe(t){return xVe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function EVe(t,e="int"){const n=SVe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function RP(t){const e=[_Ve,wVe,vVe,gVe,yVe,bVe];t==="int"&&e.push(dve("int"),hve("int")),t==="float"&&e.push(dve("float"),hve("float"));const n=jUe(e);return r=>{const o=n(r);return o?Gs(o,t):null}}function CVe(t){const e=RP("int");if(typeof t!="string")return Pr.black();const n=e(t);return n??Pr.black()}function Kwe(t){const e=Ri(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function u$(t,e="#"){const n=Wc(t.getComponents("rgb")).map(Kwe).join("");return`${e}${n}`}function c$(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(Kwe).join("");return`${e}${r}`}function qwe(t){const e=Qo(0),n=Gs(t,"int");return`rgb(${Wc(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function ZD(t){const e=Qo(2),n=Qo(0);return`rgba(${Gs(t,"int").getComponents("rgb").map((u,p)=>(p===3?e:n)(u)).join(", ")})`}function PVe(t){const e=[Qo(0),L3,L3],n=Gs(t,"int");return`hsl(${Wc(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function kVe(t){const e=[Qo(0),L3,L3,Qo(2)];return`hsla(${Gs(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function Xwe(t,e){const n=Qo(e==="float"?2:0),r=["r","g","b"],o=Gs(t,e);return`{${Wc(o.getComponents("rgb")).map((p,m)=>`${r[m]}: ${n(p)}`).join(", ")}}`}function TVe(t){return e=>Xwe(e,t)}function Ywe(t,e){const n=Qo(2),r=Qo(e==="float"?2:0),o=["r","g","b","a"];return`{${Gs(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function MVe(t){return e=>Ywe(e,t)}const AVe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:u$},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:c$},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:qwe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ZD},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:PVe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:kVe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:TVe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:MVe(e)}],[])];function Zwe(t){return AVe.reduce((e,n)=>e||(fVe(n.format,t)?n.stringifier:null),null)}const sC=nr("apl");class IVe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(sC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(sC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(sC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(sC("m")),this.element.appendChild(u),this.markerElem_=u;const p=e.createElement("div");p.classList.add(sC("p")),this.markerElem_.appendChild(p),this.previewElem_=p,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Pr([n[0],n[1],n[2],0],"rgb"),o=new Pr([n[0],n[1],n[2],255],"rgb"),u=["to right",ZD(r),ZD(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=ZD(e);const p=Zn(n[3],0,1,0,100);this.markerElem_.style.left=`${p}%`}onValueChange_(){this.update_()}}class RVe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new IVe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,p,m]=o.getComponents("hsv");this.value.setRawValue(new Pr([u,p,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ao(Bg(!0),ju(e));if(n===0)return;const r=this.value.rawValue,[o,u,p,m]=r.getComponents("hsv");this.value.setRawValue(new Pr([o,u,p,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ao(Bg(!0),ju(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Bb=nr("coltxt");function OVe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}class DVe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Bb()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Bb("m")),this.modeElem_=OVe(e),this.modeElem_.classList.add(Bb("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(Bb("mm")),o.appendChild(gL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(Bb("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),Fl(n.mode,p=>{this.modeElem_.value=p})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Ewe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(Bb("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function LVe(t){return Qo(t==="float"?2:0)}function NVe(t,e,n){const r=G_(t,e)[n];return new MP({min:0,max:r})}function FVe(t,e,n){return new IP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:Jn.fromObject({formatter:LVe(e.colorType),keyScale:Bg(!1),pointerScale:e.colorType==="float"?.01:1}),value:Vi(0,{constraint:NVe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function BVe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Vu,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=FVe(t,n,r);return qg({primary:e.value,secondary:o.value,forward(u){return Gs(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,p){const m=e.colorMode,x=Gs(u,e.colorType).getComponents(m);x[r]=p;const M=l$(SL(Wc(x),x[3]),m,e.colorType);return Gs(M,"int")}}),o})}function UVe(t,e){const n=new xL(t,{parser:RP("int"),props:Jn.fromObject({formatter:u$}),value:Vi(Pr.black()),viewProps:e.viewProps});return qg({primary:e.value,secondary:n.value,forward:r=>new Pr(Wc(r.getComponents()),r.mode),backward:(r,o)=>new Pr(SL(Wc(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function VVe(t){return t!=="hex"}class jVe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Vi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new DVe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return VVe(n)?BVe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):UVe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const H6=nr("hpl");class zVe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(H6()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(H6("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(H6("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=qwe(new Pr([n,100,100],"hsv"));const r=Zn(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class HVe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new zVe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(Ri(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,p,m]=o.getComponents("hsv");this.value.setRawValue(new Pr([r,u,p,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ao(Bg(!1),ju(e));if(n===0)return;const r=this.value.rawValue,[o,u,p,m]=r.getComponents("hsv");this.value.setRawValue(new Pr([o+n,u,p,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ao(Bg(!1),ju(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const G6=nr("svp"),pve=64;class GVe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(G6()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=pve,r.width=pve,r.classList.add(G6("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(G6("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=eUe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,p=e.getImageData(0,0,o,u),m=p.data;for(let M=0;M<u;M++)for(let R=0;R<o;R++){const N=Zn(R,0,o,0,100),G=Zn(M,0,u,100,0),Z=Dwe(r[0],N,G),j=(M*o+R)*4;m[j]=Z[0],m[j+1]=Z[1],m[j+2]=Z[2],m[j+3]=255}e.putImageData(p,0,0);const _=Zn(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Zn(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}}class $Ve{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new GVe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(e.point.x,0,e.bounds.width,0,100),o=Zn(e.point.y,0,e.bounds.height,100,0),[u,,,p]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Pr([u,r,o,p],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){N3(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),p=Bg(!1),m=Ao(p,ju(e)),_=Ao(p,Fg(e));m===0&&_===0||this.value.setRawValue(new Pr([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Bg(!1),r=Ao(n,ju(e)),o=Ao(n,Fg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class WVe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new HVe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new $Ve(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new RVe(e,{value:this.value,viewProps:this.viewProps}),text:new IP(e,{parser:Vu,props:Jn.fromObject({pointerScale:.01,keyScale:.1,formatter:Qo(2)}),value:Vi(0,{constraint:new MP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&qg({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Pr(u,r.mode)}}),this.textsC_=new jVe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new aVe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const $6=nr("colsw");class KVe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add($6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add($6("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add($6("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=c$(e)}onValueChange_(){this.update_()}}class qVe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new KVe(e,{value:this.value,viewProps:this.viewProps})}}class d${constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=iw.create(n.expanded),this.swatchC_=new qVe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new xL(e,{parser:n.parser,props:Jn.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new JUe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new r$(e,{viewProps:this.viewProps}):null;const o=new WVe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,p)=>p})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=YG(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!vL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function XVe(t){return Wc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function YVe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function ZVe(t){return new Pr([t>>16&255,t>>8&255,t&255],"rgb")}function QVe(t){return new Pr([t>>24&255,t>>16&255,t>>8&255,Zn(t&255,0,255,0,1)],"rgb")}function JVe(t){return typeof t!="number"?Pr.black():ZVe(t)}function e4e(t){return typeof t!="number"?Pr.black():QVe(t)}function QD(t,e){return typeof t!="object"||bi(t)?!1:e in t&&typeof t[e]=="number"}function Qwe(t){return QD(t,"r")&&QD(t,"g")&&QD(t,"b")}function Jwe(t){return Qwe(t)&&QD(t,"a")}function e1e(t){return Qwe(t)}function h$(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function fve(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function t4e(t){const e=Zwe(t);return e?(n,r)=>{lm(n,e(r))}:null}function n4e(t){const e=t?YVe:XVe;return(n,r)=>{lm(n,e(r))}}function r4e(t,e,n){const o=Gs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function i4e(t,e,n){const o=Gs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function o4e(t,e){return(n,r)=>{t?r4e(n,r,e):i4e(n,r,e)}}function s4e(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function a4e(t){return t?e=>c$(e,"0x"):e=>u$(e,"0x")}function l4e(t){return"color"in t||t.view==="color"}Ji({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!l4e(e))return null;const n=s$(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:s4e(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?e4e:JVe,equals:h$,writer:t=>n4e(t.params.supportsAlpha)},controller:t=>{var e,n;return new d$(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:a4e(t.params.supportsAlpha),parser:RP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function u4e(t,e){if(!e1e(t))return Gs(Pr.black(),e);if(e==="int"){const n=fve(t);return new Pr(n,"rgb")}if(e==="float"){const n=fve(t);return new a$(n,"rgb")}return Gs(Pr.black(),"int")}function c4e(t){return Jwe(t)}function d4e(t){return e=>{const n=u4e(e,t);return Gs(n,"int")}}function h4e(t,e){return n=>t?Ywe(n,e):Xwe(n,e)}Ji({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!e1e(t))return null;const r=s$(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=Fwe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>d4e(t.params.colorType),equals:h$,writer:t=>o4e(c4e(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=Jwe(t.initialValue);return new d$(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:h4e(r,t.params.colorType),parser:RP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});Ji({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=EVe(t,Fwe(e));if(!n)return null;const r=Zwe(n);if(!r)return null;const o=s$(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>CVe,equals:h$,writer:t=>{const e=t4e(t.params.format);if(!e)throw js.notBindable();return e}},controller:t=>{var e,n;return new d$(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:RP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class EL{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,p;return(p=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&p!==void 0?p:r});return this.asm_.fromComponents(n)}}const mve=nr("pndtxt");class p4e{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(mve()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add(mve("a")),o.appendChild(r.element),this.element.appendChild(o)})}}function f4e(t,e,n){return new IP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Vi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class sw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>f4e(e,n,o)),this.acs_.forEach((r,o)=>{qg({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,p)=>{const m=n.assembly.toComponents(u);return m[o]=p,n.assembly.fromComponents(m)}})}),this.view=new p4e(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class m4e extends qG{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function v4e(t,e){const n=[],r=HG(t,e);r&&n.push(r);const o=GG(t);o&&n.push(o);const u=n$(t.options);return u&&n.push(u),new ow(n)}Ji({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=ji(e,r=>Object.assign(Object.assign({},WG(r)),{options:r.optional.custom(wL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>zG,constraint:t=>v4e(t.params,t.initialValue),writer:t=>lm},controller:t=>{const e=t.value,n=t.constraint,r=n&&lP(n,_L);if(r)return new H_(t.document,{props:new Jn({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=$G(t.params,e.rawValue),u=n&&lP(n,MP);return u?new uve(t.document,Object.assign(Object.assign({},qUe(Object.assign(Object.assign({},o),{keyScale:Vi(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:Vu,value:e,viewProps:t.viewProps})):new IP(t.document,{parser:Vu,props:Jn.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof uve?new m4e(t.controller):t.controller.valueController instanceof H_?new t$(t.controller):null}});class $f{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const t1e={toComponents:t=>t.getComponents(),fromComponents:t=>new $f(...t)},Ub=nr("p2d");class g4e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ub()),n.viewProps.bindClassModifiers(this.element),Fl(n.expanded,am(this.element,Ub(void 0,"expanded")));const r=e.createElement("div");r.classList.add(Ub("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(Ub("b")),o.appendChild(gL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(Ub("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const p=e.createElement("div");p.classList.add(Ub("p")),this.element.appendChild(p),this.pickerElement=p}else this.pickerElement=null}}const gf=nr("p2dp");class y4e{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(gf()),n.layout==="popup"&&this.element.classList.add(gf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(gf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Mo,"svg");o.classList.add(gf("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Mo,"line");u.classList.add(gf("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const p=e.createElementNS(Mo,"line");p.classList.add(gf("ax")),p.setAttributeNS(null,"x1","50%"),p.setAttributeNS(null,"y1","0"),p.setAttributeNS(null,"x2","50%"),p.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(p);const m=e.createElementNS(Mo,"line");m.classList.add(gf("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(gf("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Zn(e,-r,+r,0,100),u=Zn(n,-r,+r,0,100),p=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${p}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${p}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function vve(t,e,n){return[Ao(e[0],ju(t)),Ao(e[1],Fg(t))*(n?1:-1)]}class b4e{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new y4e(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Zn(e.point.x,0,e.bounds.width,-r,+r),u=Zn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new $f(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){N3(e.key)&&e.preventDefault();const[n,r]=vve(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new $f(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=vve(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class _4e{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=iw.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new r$(e,{viewProps:this.viewProps}):null;const u=new b4e(e,{layout:n.pickerLayout,props:new Jn({invertsY:Vi(n.invertsY),max:Vi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(p=>{p.addEventListener("blur",this.onPopupChildBlur_),p.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new sw(e,{assembly:t1e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new g4e(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:p=>p,backward:(p,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=YG(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!vL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function w4e(t){return $f.isObject(t)?new $f(t.x,t.y):new $f}function x4e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function S4e(t,e){return new EL({assembly:t1e,components:[gh(Object.assign(Object.assign({},t),t.x),e.x),gh(Object.assign(Object.assign({},t),t.y),e.y)]})}function gve(t,e){var n,r;if(!bi(t.min)||!bi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=xwe(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function E4e(t,e){var n,r;const o=gve(Ng(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=gve(Ng(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function C4e(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Ji({id:"input-point2d",type:"input",accept:(t,e)=>{if(!$f.isObject(t))return null;const n=ji(e,r=>Object.assign(Object.assign({},uP(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Owe),readonly:r.optional.constant(!1),x:r.optional.custom(Of),y:r.optional.object(Object.assign(Object.assign({},uP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>w4e,constraint:t=>S4e(t.params,t.initialValue),equals:$f.equals,writer:()=>x4e},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,p=[t.params.x,t.params.y];return new _4e(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return KG({constraint:u.components[_],initialValue:m,params:Ng(t.params,(x=p[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:C4e(t.params),max:E4e(t.params,o.rawValue),parser:Vu,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});class I_{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const n1e={toComponents:t=>t.getComponents(),fromComponents:t=>new I_(...t)};function P4e(t){return I_.isObject(t)?new I_(t.x,t.y,t.z):new I_}function k4e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function T4e(t,e){return new EL({assembly:n1e,components:[gh(Object.assign(Object.assign({},t),t.x),e.x),gh(Object.assign(Object.assign({},t),t.y),e.y),gh(Object.assign(Object.assign({},t),t.z),e.z)]})}Ji({id:"input-point3d",type:"input",accept:(t,e)=>{if(!I_.isObject(t))return null;const n=ji(e,r=>Object.assign(Object.assign({},uP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Of),y:r.optional.custom(Of),z:r.optional.custom(Of)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>P4e,constraint:t=>T4e(t.params,t.initialValue),equals:I_.equals,writer:t=>k4e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new sw(t.document,{assembly:n1e,axes:e.rawValue.getComponents().map((o,u)=>{var p;return KG({constraint:n.components[u],initialValue:o,params:Ng(t.params,(p=r[u])!==null&&p!==void 0?p:{})})}),parser:Vu,value:e,viewProps:t.viewProps})}});class R_{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const r1e={toComponents:t=>t.getComponents(),fromComponents:t=>new R_(...t)};function M4e(t){return R_.isObject(t)?new R_(t.x,t.y,t.z,t.w):new R_}function A4e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function I4e(t,e){return new EL({assembly:r1e,components:[gh(Object.assign(Object.assign({},t),t.x),e.x),gh(Object.assign(Object.assign({},t),t.y),e.y),gh(Object.assign(Object.assign({},t),t.z),e.z),gh(Object.assign(Object.assign({},t),t.w),e.w)]})}Ji({id:"input-point4d",type:"input",accept:(t,e)=>{if(!R_.isObject(t))return null;const n=ji(e,r=>Object.assign(Object.assign({},uP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Of),x:r.optional.custom(Of),y:r.optional.custom(Of),z:r.optional.custom(Of)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>M4e,constraint:t=>I4e(t.params,t.initialValue),equals:R_.equals,writer:t=>A4e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new sw(t.document,{assembly:r1e,axes:e.rawValue.getComponents().map((o,u)=>{var p;return KG({constraint:n.components[u],initialValue:o,params:Ng(t.params,(p=r[u])!==null&&p!==void 0?p:{})})}),parser:Vu,value:e,viewProps:t.viewProps})}});function R4e(t){const e=[],n=n$(t.options);return n&&e.push(n),new ow(e)}Ji({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=ji(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(wL)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>o$,constraint:t=>R4e(t.params),writer:t=>lm},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&lP(r,_L);return o?new H_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new xL(e,{parser:u=>u,props:Jn.fromObject({formatter:GH}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof H_?new t$(t.controller):null}});const OP={monitor:{defaultInterval:200,defaultRows:3}},yve=nr("mll");class O4e{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(yve()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(yve("i")),r.style.height=`calc(var(${Iwe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class p${constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new O4e(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const bve=nr("sgl");class D4e{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(bve()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(bve("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class f${constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new D4e(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Ji({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ji(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>i$},controller:t=>{var e;return t.value.rawValue.length===1?new f$(t.document,{formatter:lve,value:t.value,viewProps:t.viewProps}):new p$(t.document,{formatter:lve,rows:(e=t.params.rows)!==null&&e!==void 0?e:OP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class L4e extends qG{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const yf=nr("grl");class N4e{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(yf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Mo,"svg");r.classList.add(yf("g")),r.style.height=`calc(var(${Iwe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Mo,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(yf("t"),nr("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((M,R)=>{if(M===void 0)return;const N=Zn(R,0,n,0,e.width),G=Zn(M,r,o,e.height,0);u.push([N,G].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const p=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){p.classList.remove(yf("t","a"));return}const _=Zn(this.cursor_.rawValue,0,n,0,e.width),x=Zn(m,r,o,e.height,0);p.style.left=`${_}px`,p.style.top=`${x}px`,p.textContent=`${this.formatter_(m)}`,p.classList.contains(yf("t","a"))||(p.classList.add(yf("t","a"),yf("t","in")),O3(p),p.classList.remove(yf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class m${constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Vi(-1),this.view=new N4e(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!vL(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Oh(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return zu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Hu(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Zn(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Zn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function $H(t){return bi(t.format)?Qo(2):t.format}function F4e(t){var e;return t.value.rawValue.length===1?new f$(t.document,{formatter:$H(t.params),value:t.value,viewProps:t.viewProps}):new p$(t.document,{formatter:$H(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:OP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function B4e(t){var e,n,r;return new m$(t.document,{formatter:$H(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:OP.monitor.defaultRows,props:Jn.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function _ve(t){return t.view==="graph"}Ji({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=ji(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>_ve(t)?64:1,reader:t=>zG},controller:t=>_ve(t.params)?B4e(t):F4e(t),api:t=>t.controller.valueController instanceof m$?new L4e(t.controller):null});Ji({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=ji(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>o$},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new p$(t.document,{formatter:GH,rows:(e=t.params.rows)!==null&&e!==void 0?e:OP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new f$(t.document,{formatter:GH,value:n,viewProps:t.viewProps})}});class i1e{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new rw(this))}),this}}class U4e extends rw{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class o1e extends Kg{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new ws;const n=this.controller.valueController;n.cellControllers.forEach((r,o)=>{const u=new i1e(r);this.cellToApiMap_.set(r,u),r.emitter.on("click",()=>{const p=o%n.size[0],m=Math.floor(o/n.size[0]);this.emitter_.emit("click",{event:new U4e(this,u,[p,m])})})})}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o.event)}),this}}class s1e{constructor(e,n){this.size=n.size;const[r,o]=this.size,u=[];for(let p=0;p<o;p++)for(let m=0;m<r;m++){const _=new kwe(e,{props:Jn.fromObject(Object.assign({},n.cellConfig(m,p))),viewProps:Ih.create()});u.push(_)}this.cellCs_=u,this.viewProps=Ih.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(p=>{p.viewProps.set("disposed",!0)})}),this.view=new Rwe(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(p=>{this.view.element.appendChild(p.view.element)})}get cellControllers(){return this.cellCs_}}class wve extends AP{constructor(e,n){const r=n.valueController,o=new yL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}const V4e=Ji({id:"buttongrid",type:"blade",accept(t){const e=ji(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new wve(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new s1e(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof wve?new o1e(t.controller):null}});class a1e extends Kg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,o=>{r(new mL(this,o.rawValue,o.options.last))}),this}}function Pl(t,e,n){return t*(1-n)+e*n}const j4e=20,z4e=.001,W6=100;function H4e(t,e){let n=.25,r=.5,o=-1;for(let u=0;u<j4e;u++){const[p,m]=t.curve(r);if(r+=n*(p<e?1:-1),o=m,n*=.5,Math.abs(e-p)<z4e)break}return o}class em{constructor(e=0,n=0,r=1,o=1){this.cache_=[],this.comps_=[e,n,r,o]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return bi(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=Pl(0,this.x1,e),r=Pl(0,this.y1,e),o=Pl(this.x1,this.x2,e),u=Pl(this.y1,this.y2,e),p=Pl(this.x2,1,e),m=Pl(this.y2,1,e),_=Pl(n,o,e),x=Pl(r,u,e),M=Pl(o,p,e),R=Pl(u,m,e);return[Pl(_,M,e),Pl(x,R,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<W6;r++)n.push(H4e(this,Zn(r,0,W6-1,0,1)));this.cache_=n}return this.cache_[Math.round(Zn(Ri(e,0,1),0,1,0,W6-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const v$={toComponents:t=>t.toObject(),fromComponents:t=>new em(...t)};function G4e(t){const e=Qo(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const xve=[0,.5,.5,1];function $4e(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new em(...xve);const n=[e[1],e[2],e[3],e[4]].reduce((r,o)=>{if(!r)return null;const u=Number(o);return isNaN(u)?null:[...r,u]},[]);return new em(...n??xve)}const rg=nr("cbz");class l1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(rg()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,rg(void 0,"expanded")),Vl(n.foldable,"completed",am(this.element,rg(void 0,"cpl")));const r=e.createElement("div");r.classList.add(rg("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(rg("b")),n.viewProps.bindDisabled(o);const u=e.createElementNS(Mo,"svg");u.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',o.appendChild(u),r.appendChild(o),this.buttonElement=o;const p=e.createElement("div");if(p.classList.add(rg("t")),r.appendChild(p),this.textElement=p,n.pickerLayout==="inline"){const m=e.createElement("div");m.classList.add(rg("p")),this.element.appendChild(m),this.pickerElement=m}else this.pickerElement=null}}const K6=nr("cbzp");class u1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(K6()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(K6("g")),this.element.appendChild(r),this.graphElement=r;const o=e.createElement("div");o.classList.add(K6("t")),this.element.appendChild(o),this.textElement=o}}function c1e(t,e){const n=new MutationObserver(o=>{for(const u of o)u.type==="childList"&&u.addedNodes.forEach(p=>{p.contains(p)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const bf=nr("cbzg");function W4e(t,e){return n=>e(t(n))}class d1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(bf()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(bf("p")),this.element.appendChild(r),this.previewElement=r;const o=e.createElementNS(Mo,"svg");o.classList.add(bf("g")),this.element.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Mo,"path");u.classList.add(bf("u")),this.svgElem_.appendChild(u),this.guideElem_=u;const p=e.createElementNS(Mo,"polyline");p.classList.add(bf("l")),this.svgElem_.appendChild(p),this.lineElem_=p,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(m=>{m.classList.add(bf("h")),this.element.appendChild(m)}),this.vectorElems_=[e.createElementNS(Mo,"line"),e.createElementNS(Mo,"line")],this.vectorElems_.forEach(m=>{m.classList.add(bf("v")),this.svgElem_.appendChild(m)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((m,_)=>{Fl(this.sel_,W4e(x=>x===_,am(m,bf("h","sel"))))}),c1e(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,p=this.getVertMargin_(u);return{x:Zn(e,0,1,0,o),y:Zn(n,0,1,u-p,p)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,p=this.getVertMargin_(u);return{x:Ri(Zn(e,0,o,0,1),0,1),y:Zn(n,u-p,p,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(u=>{const p=this.valueToPosition(0,u),m=this.valueToPosition(1,u);return[`M ${p.x},${p.y}`,`L ${m.x},${m.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const u=this.valueToPosition(...e.curve(r));if(n.push([u.x,u.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const o=e.toObject();[0,1].forEach(u=>{const p=this.valueToPosition(u,u),m=this.valueToPosition(o[u*2],o[u*2+1]),_=this.vectorElems_[u];_.setAttributeNS(null,"x1",String(p.x)),_.setAttributeNS(null,"y1",String(p.y)),_.setAttributeNS(null,"x2",String(m.x)),_.setAttributeNS(null,"y2",String(m.y));const x=this.handleElems_[u];x.style.left=`${m.x}px`,x.style.top=`${m.y}px`})}onValueChange_(){this.refresh()}}const Sve=24,Eve=400,Cve=1e3,Vb=nr("cbzprv");class h1e{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Vb()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(Mo,"svg");r.classList.add(Vb("g")),this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Mo,"path");o.classList.add(Vb("t")),this.svgElem_.appendChild(o),this.ticksElem_=o;const u=e.createElement("div");u.classList.add(Vb("m")),this.element.appendChild(u),this.markerElem_=u,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),c1e(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Vb("m","a")),this.startTime_=new Date().getTime()+Eve,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(Vb("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Ri(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,o=[],u=this.value_.rawValue;for(let p=0;p<Sve;p++){const m=Zn(p,0,Sve-1,0,1),_=Zn(u.y(m),0,1,0,n);o.push(`M ${_},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",o.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/Cve;this.updateMarker_(n),e>Cve+Eve&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function WH(t,e,n,r){const o=n-t,u=r-e;return Math.sqrt(o*o+u*u)}function K4e(t,e,n,r){const o=WH(t,e,n,r),u=Math.atan2(r-e,n-t),p=Math.round(u/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(p)*o,y:e+Math.sin(p)*o}}class p1e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=Vi(0),this.viewProps=n.viewProps,this.view=new d1e(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new h1e(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",o=>{o.stopImmediatePropagation(),o.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new Oh(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const o=this.sel_.rawValue,u=this.value.rawValue.toObject(),p=this.view.positionToValue(e.x,e.y),m=n?K4e(o,o,p.x,p.y):p;u[o*2]=m.x,u[o*2+1]=m.y,this.value.setRawValue(new em(...u),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,o=this.view.valueToPosition(r.x1,r.y1),u=WH(n.point.x,n.point.y,o.x,o.y),p=this.view.valueToPosition(r.x2,r.y2),m=WH(n.point.x,n.point.y,p.x,p.y);this.sel_.rawValue=u<=m?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){N3(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.keyScale_.rawValue;r[n*2]+=Ao(o,ju(e)),r[n*2+1]+=Ao(o,Fg(e)),this.value.setRawValue(new em(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){N3(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=Ao(n,ju(e)),o=Ao(n,Fg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class f1e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new u1e(e,{viewProps:this.viewProps}),this.gc_=new p1e(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new UG({max:1,min:0})}),o=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new sw(e,{assembly:v$,axes:[r,o,r,o],parser:Vu,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class KH{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=iw.create(n.expanded),this.view=new l1e(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new xL(e,{parser:$4e,props:Jn.fromObject({formatter:G4e}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new r$(e,{viewProps:this.viewProps}):null;const r=new f1e(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Fl(this.popC_.shows,o=>{o&&r.refresh()}),qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bL(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=YG(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!vL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function q4e(){return new EL({assembly:v$,components:[0,1,2,3].map(t=>t%2===0?new UG({min:0,max:1}):void 0)})}const X4e=Ji({id:"cubicbezier",type:"blade",accept(t){const e=ji(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new em(...t.params.value),o=Vi(r,{constraint:q4e(),equals:em.equals}),u=new KH(t.document,{axis:{textProps:Jn.fromObject({keyScale:.1,pointerScale:.01,formatter:Qo(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps});return new D3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof D3)||!(t.controller.valueController instanceof KH)?null:new a1e(t.controller)}});class m1e extends Kg{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const Pve=20;class v1e{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Pve)return;const e=this.timestamps_.length-Pve;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const aC=nr("fps");class g1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(aC()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(aC("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(aC("l")),this.element.appendChild(r);const o=e.createElement("span");o.classList.add(aC("v")),o.textContent="--",r.appendChild(o),this.valueElement=o;const u=e.createElement("span");u.classList.add(aC("u")),u.textContent="FPS",r.appendChild(u)}}class y1e{constructor(e,n){this.stopwatch_=new v1e,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new g1e(e,{viewProps:this.viewProps}),this.graphC_=new m$(e,{formatter:Qo(0),props:Jn.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=lUe(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class kve extends AP{constructor(e,n){const r=n.valueController,o=new yL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}function Y4e(t,e){return e===0?new LUe:new NUe(t,e??OP.monitor.defaultInterval)}const Z4e=Ji({id:"fpsgraph",type:"blade",accept(t){const e=ji(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,o;const u=(e=t.params.interval)!==null&&e!==void 0?e:500;return new kve(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new y1e(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(o=t.params.min)!==null&&o!==void 0?o:0,ticker:Y4e(t.document,u),value:Vi(sUe(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof kve?new m1e(t.controller):null}});class Ba{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const g$={fromComponents:t=>new Ba(t[0],t[1]),toComponents:t=>[t.min,t.max]};class y${constructor(e){this.edge=e}constrain(e){var n,r,o,u,p,m,_,x;if(e.min<=e.max)return new Ba((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(u=(o=this.edge)===null||o===void 0?void 0:o.constrain(e.max))!==null&&u!==void 0?u:e.max);const M=(e.min+e.max)/2;return new Ba((m=(p=this.edge)===null||p===void 0?void 0:p.constrain(M))!==null&&m!==void 0?m:M,(x=(_=this.edge)===null||_===void 0?void 0:_.constrain(M))!==null&&x!==void 0?x:M)}}const q6=nr("rsltxt");class b1e{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(q6());const r=e.createElement("div");r.classList.add(q6("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(q6("t")),o.appendChild(this.textView_.element),this.element.appendChild(o)}}const ig=nr("rsl");class _1e{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ig()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(ig("t")),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(ig("b")),r.appendChild(o),this.barElement=o;const u=["min","max"].map(p=>{const m=e.createElement("div");return m.classList.add(ig("k"),ig("k",p)),r.appendChild(m),m});this.knobElements=[u[0],u[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Ri(Zn(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(ig(void 0,"zero")):this.element.classList.remove(ig(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,o)=>{r.style.left=`${n[o]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class w1e{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new _1e(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new Oh(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),o=this.sliderProps.get("max");return Zn(n,0,1,r,o)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,o=this.sliderProps.get("min"),u=this.sliderProps.get("max"),p=Zn(r.min,o,u,0,1),m=Zn(r.max,o,u,0,1);Math.abs(m-n)<=.025?this.grabbing_="max":Math.abs(p-n)<=.025?this.grabbing_="min":n>=p&&n<=m?(this.grabbing_="length",this.grabOffset_=Zn(n-p,0,1,0,u-o)):n<p?(this.grabbing_="min",this.onPointerMove_(e)):n>m&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const o=this.sliderProps.get("min"),u=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new Ba(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new Ba(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const p=this.value.rawValue.length;let m=r-this.grabOffset_,_=m+p;m<o?(m=o,_=o+p):_>u&&(m=u-p,_=u),this.value.setRawValue(new Ba(m,_),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class x1e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new w1e(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new sw(e,{assembly:g$,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new b1e(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Q4e(t){return Ba.isObject(t)?new Ba(t.min,t.max):new Ba(0,0)}function J4e(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function eje(t){const e=[],n=GG(t);n&&e.push(n);const r=HG(t);return r&&e.push(r),new y$(new ow(e))}const tje=Ji({id:"input-interval",type:"input",accept:(t,e)=>{if(!Ba.isObject(t))return null;const n=ji(e,r=>Object.assign(Object.assign({},WG(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new Ba(t.min,t.max),params:n}:null},binding:{reader:t=>Q4e,constraint:t=>eje(t.params),equals:Ba.equals,writer:t=>J4e},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof y$))throw js.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,o=Jn.fromObject($G(t.params,r)),u=n.edge&&lP(n.edge,MP);if(u)return new x1e(t.document,{constraint:n.edge,parser:Vu,sliderProps:new Jn({keyScale:o.value("keyScale"),max:u.values.value("max"),min:u.values.value("min")}),textProps:o,value:e,viewProps:t.viewProps});const p={constraint:n.edge,textProps:o};return new sw(t.document,{assembly:g$,axes:[p,p],parser:Vu,value:e,viewProps:t.viewProps})}});class S1e{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class E1e extends mL{constructor(e,n,r,o,u){super(e,o,u),this.cell=n,this.index=r}}class C1e extends Kg{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const o=new S1e(r);this.cellToApiMap_.set(r,o)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,o=>{const u=this.controller.valueController,p=u.findCellByValue(o.rawValue);if(!p)return;const m=this.cellToApiMap_.get(p);if(!m)return;const _=u.cellControllers.indexOf(p);r(new E1e(this,m,[_%u.size[0],Math.floor(_/u.size[0])],o.rawValue))})}}const lC=nr("rad");class P1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(lC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(lC("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(lC("i")),o.name=n.name,o.type="radio",n.viewProps.bindDisabled(o),r.appendChild(o),this.inputElement=o;const u=e.createElement("div");u.classList.add(lC("b")),r.appendChild(u);const p=e.createElement("div");p.classList.add(lC("t")),u.appendChild(p),Vl(n.props,"title",m=>{p.textContent=m})}}class k1e{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new P1e(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class F3{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,o]=this.size;for(let u=0;u<o;u++)for(let p=0;p<r;p++){const m=new k1e(e,{name:n.groupName,props:Jn.fromObject(Object.assign({},n.cellConfig(p,u))),viewProps:Ih.create()});this.cellCs_.push(m),this.cellValues_.push(n.cellConfig(p,u).value)}this.value=n.value,Fl(this.value,u=>{const p=this.findCellByValue(u);p&&(p.view.inputElement.checked=!0)}),this.viewProps=Ih.create(),this.view=new Rwe(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{u.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(o=>o.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const nje=function(){return Ji({id:"radiogrid",type:"blade",accept(t){const e=ji(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=Vi(t.params.value);return new D3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:e,valueController:new F3(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof D3)||!(t.controller.valueController instanceof F3)?null:new C1e(t.controller)}})}();function b$(t){return Ji({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=ji(n,o=>({cells:o.required.function,groupName:o.required.string,size:o.required.array(o.required.number),view:o.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new F3(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const rje=b$({isType:t=>typeof t=="number",binding:{reader:t=>zG,writer:t=>lm}}),ije=b$({isType:t=>typeof t=="string",binding:{reader:t=>o$,writer:t=>lm}}),oje=b$({isType:t=>typeof t=="boolean",binding:{reader:t=>i$,writer:t=>lm}}),sje="essentials",aje='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',lje=[V4e,X4e,Z4e,tje,nje,oje,rje,ije],uje=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:i1e,ButtonGridApi:o1e,ButtonGridController:s1e,CubicBezier:em,CubicBezierApi:a1e,CubicBezierAssembly:v$,CubicBezierController:KH,CubicBezierGraphController:p1e,CubicBezierGraphView:d1e,CubicBezierPickerController:f1e,CubicBezierPickerView:u1e,CubicBezierPreviewView:h1e,CubicBezierView:l1e,FpsGraphBladeApi:m1e,FpsGraphController:y1e,FpsView:g1e,Fpswatch:v1e,Interval:Ba,IntervalAssembly:g$,IntervalConstraint:y$,RadioCellApi:S1e,RadioController:k1e,RadioGridApi:C1e,RadioGridController:F3,RadioView:P1e,RangeSliderController:w1e,RangeSliderTextController:x1e,RangeSliderTextView:b1e,RangeSliderView:_1e,TpRadioGridChangeEvent:E1e,css:aje,id:sje,plugins:lje},Symbol.toStringTag,{value:"Module"}));class cje extends cL{constructor(n){super(n);ki(this,"appTab");ki(this,"systemTab");ki(this,"utilsTab");ki(this,"bindCBs");ki(this,"buttonCBs");ki(this,"pane");ki(this,"appCallbacks",0);ki(this,"editorCallbacks",0);ki(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new cBe({title:"GUI"}),this.pane.registerPlugin(uje);const n=this.pane.addTab({pages:[{title:"App"},{title:"System"},{title:"Tools"}]});this.appTab=n.pages[0],this.systemTab=n.pages[1],this.utilsTab=n.pages[2]}dispose(){var n,r,o,u;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.appTab)==null||n.dispose(),(r=this.systemTab)==null||r.dispose(),(o=this.utilsTab)==null||o.dispose(),(u=this.pane)==null||u.dispose(),this.appTab=void 0,this.systemTab=void 0,this.utilsTab=void 0,this.pane=void 0)}addFolder(n,r=void 0,o=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.appTab).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:o}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,o,u=void 0){const p=this.bindID,m=o.onChange!==void 0?o.onChange:c_e;this.bindCBs.set(p,m),this.app.editor?(this.pane===void 0&&this.createGUI(),(u!==void 0?u:this.appTab).addBinding(n,r,o).on("change",x=>{this.app.send({event:"updateBind",target:"app",data:{id:p,value:x.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:p,name:r,params:o,parent:u}}),this.appCallbacks++)}triggerBind(n,r){const o=this.bindCBs.get(n);o!==void 0?o(r):console.warn(`No callback for: ${n}`,r)}button(n,r,o=void 0){const u=this.bindID;this.buttonCBs.set(u,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.appTab).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:u}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:u,name:n,callback:r,parent:o}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.utilsTab)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}}const dje=!0;class hje extends F3e{constructor(e,n,r){super(e,n,r),this.addComponent("theatre",new j3e(this,"RemoteApp",{})),this.addComponent("components",new B3e(this)),this.addComponent("debug",new cje(this)),this.addComponent("three",new G3e(this))}get debug(){return this.components.get("debug")}get debugComponents(){return this.components.get("components")}get theatre(){return this.components.get("theatre")}get three(){return this.components.get("three")}}const Zi=new hje("Hermes",dje,"editor");/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _$="155",pje=0,Tve=1,fje=2,T1e=1,mje=2,ch=3,tm=0,ga=1,ph=2,Wf=0,O_=1,Mve=2,Ave=3,Ive=4,vje=5,o_=100,gje=101,yje=102,Rve=103,Ove=104,bje=200,_je=201,wje=202,xje=203,M1e=204,A1e=205,Sje=206,Eje=207,Cje=208,Pje=209,kje=210,Tje=0,Mje=1,Aje=2,qH=3,Ije=4,Rje=5,Oje=6,Dje=7,I1e=0,Lje=1,Nje=2,Kf=0,Fje=1,Bje=2,Uje=3,Vje=4,jje=5,R1e=300,$_=301,W_=302,XH=303,YH=304,CL=306,ZH=1e3,Lu=1001,QH=1002,Vs=1003,Dve=1004,X6=1005,Il=1006,zje=1007,cP=1008,qf=1009,Hje=1010,Gje=1011,w$=1012,O1e=1013,Df=1014,Lf=1015,dP=1016,D1e=1017,L1e=1018,Eg=1020,$je=1021,Nu=1023,Wje=1024,Kje=1025,Cg=1026,K_=1027,qje=1028,N1e=1029,Xje=1030,F1e=1031,B1e=1033,Y6=33776,Z6=33777,Q6=33778,J6=33779,Lve=35840,Nve=35841,Fve=35842,Bve=35843,Yje=36196,Uve=37492,Vve=37496,jve=37808,zve=37809,Hve=37810,Gve=37811,$ve=37812,Wve=37813,Kve=37814,qve=37815,Xve=37816,Yve=37817,Zve=37818,Qve=37819,Jve=37820,ege=37821,e8=36492,Zje=36283,tge=36284,nge=36285,rge=36286,U1e=3e3,Pg=3001,Qje=3200,Jje=3201,V1e=0,eze=1,kg="",tr="srgb",Kc="srgb-linear",j1e="display-p3",t8=7680,tze=519,nze=512,rze=513,ize=514,oze=515,sze=516,aze=517,lze=518,uze=519,ige=35044,oge="300 es",JH=1035,yh=2e3,B3=2001;class Xg{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const u=o.indexOf(n);u!==-1&&o.splice(u,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let u=0,p=o.length;u<p;u++)o[u].call(this,e);e.target=null}}}const fs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],n8=Math.PI/180,e9=180/Math.PI;function DP(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(fs[t&255]+fs[t>>8&255]+fs[t>>16&255]+fs[t>>24&255]+"-"+fs[e&255]+fs[e>>8&255]+"-"+fs[e>>16&15|64]+fs[e>>24&255]+"-"+fs[n&63|128]+fs[n>>8&255]+"-"+fs[n>>16&255]+fs[n>>24&255]+fs[r&255]+fs[r>>8&255]+fs[r>>16&255]+fs[r>>24&255]).toLowerCase()}function da(t,e,n){return Math.max(e,Math.min(n,t))}function cze(t,e){return(t%e+e)%e}function r8(t,e,n){return(1-n)*t+n*e}function sge(t){return(t&t-1)===0&&t!==0}function t9(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function uC(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ua(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Wr{constructor(e=0,n=0){Wr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6],this.y=o[1]*n+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(da(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),o=Math.sin(n),u=this.x-e.x,p=this.y-e.y;return this.x=u*r-p*o+e.x,this.y=u*o+p*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(e,n,r,o,u,p,m,_,x){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,p,m,_,x)}set(e,n,r,o,u,p,m,_,x){const M=this.elements;return M[0]=e,M[1]=o,M[2]=m,M[3]=n,M[4]=u,M[5]=_,M[6]=r,M[7]=p,M[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,p=r[0],m=r[3],_=r[6],x=r[1],M=r[4],R=r[7],N=r[2],G=r[5],Z=r[8],j=o[0],z=o[3],U=o[6],C=o[1],K=o[4],te=o[7],pe=o[2],Q=o[5],Se=o[8];return u[0]=p*j+m*C+_*pe,u[3]=p*z+m*K+_*Q,u[6]=p*U+m*te+_*Se,u[1]=x*j+M*C+R*pe,u[4]=x*z+M*K+R*Q,u[7]=x*U+M*te+R*Se,u[2]=N*j+G*C+Z*pe,u[5]=N*z+G*K+Z*Q,u[8]=N*U+G*te+Z*Se,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],p=e[4],m=e[5],_=e[6],x=e[7],M=e[8];return n*p*M-n*m*x-r*u*M+r*m*_+o*u*x-o*p*_}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],p=e[4],m=e[5],_=e[6],x=e[7],M=e[8],R=M*p-m*x,N=m*_-M*u,G=x*u-p*_,Z=n*R+r*N+o*G;if(Z===0)return this.set(0,0,0,0,0,0,0,0,0);const j=1/Z;return e[0]=R*j,e[1]=(o*x-M*r)*j,e[2]=(m*r-o*p)*j,e[3]=N*j,e[4]=(M*n-o*_)*j,e[5]=(o*u-m*n)*j,e[6]=G*j,e[7]=(r*_-x*n)*j,e[8]=(p*n-r*u)*j,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,o,u,p,m){const _=Math.cos(u),x=Math.sin(u);return this.set(r*_,r*x,-r*(_*p+x*m)+p+e,-o*x,o*_,-o*(-x*p+_*m)+m+n,0,0,1),this}scale(e,n){return this.premultiply(i8.makeScale(e,n)),this}rotate(e){return this.premultiply(i8.makeRotation(-e)),this}translate(e,n){return this.premultiply(i8.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<9;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const i8=new ir;function z1e(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function U3(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const age={};function IC(t){t in age||(age[t]=!0,console.warn(t))}function D_(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function o8(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const dze=new ir().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),hze=new ir().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function pze(t){return t.convertSRGBToLinear().applyMatrix3(hze)}function fze(t){return t.applyMatrix3(dze).convertLinearToSRGB()}const mze={[Kc]:t=>t,[tr]:t=>t.convertSRGBToLinear(),[j1e]:pze},vze={[Kc]:t=>t,[tr]:t=>t.convertLinearToSRGB(),[j1e]:fze},ku={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Kc},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=mze[e],o=vze[n];if(r===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return o(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let jb;class H1e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{jb===void 0&&(jb=U3("canvas")),jb.width=e.width,jb.height=e.height;const r=jb.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=jb}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=U3("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),u=o.data;for(let p=0;p<u.length;p++)u[p]=D_(u[p]/255)*255;return r.putImageData(o,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(D_(n[r]/255)*255):n[r]=D_(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let gze=0;class G1e{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:gze++}),this.uuid=DP(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let u;if(Array.isArray(o)){u=[];for(let p=0,m=o.length;p<m;p++)o[p].isDataTexture?u.push(s8(o[p].image)):u.push(s8(o[p]))}else u=s8(o);r.url=u}return n||(e.images[this.uuid]=r),r}}function s8(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?H1e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yze=0;class Ua extends Xg{constructor(e=Ua.DEFAULT_IMAGE,n=Ua.DEFAULT_MAPPING,r=Lu,o=Lu,u=Il,p=cP,m=Nu,_=qf,x=Ua.DEFAULT_ANISOTROPY,M=kg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yze++}),this.uuid=DP(),this.name="",this.source=new G1e(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=u,this.minFilter=p,this.anisotropy=x,this.format=m,this.internalFormat=null,this.type=_,this.offset=new Wr(0,0),this.repeat=new Wr(1,1),this.center=new Wr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof M=="string"?this.colorSpace=M:(IC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=M===Pg?tr:kg),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==R1e)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ZH:e.x=e.x-Math.floor(e.x);break;case Lu:e.x=e.x<0?0:1;break;case QH:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ZH:e.y=e.y-Math.floor(e.y);break;case Lu:e.y=e.y<0?0:1;break;case QH:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return IC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===tr?Pg:U1e}set encoding(e){IC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Pg?tr:kg}}Ua.DEFAULT_IMAGE=null;Ua.DEFAULT_MAPPING=R1e;Ua.DEFAULT_ANISOTROPY=1;class Xo{constructor(e=0,n=0,r=0,o=1){Xo.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,o){return this.x=e,this.y=n,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=this.w,p=e.elements;return this.x=p[0]*n+p[4]*r+p[8]*o+p[12]*u,this.y=p[1]*n+p[5]*r+p[9]*o+p[13]*u,this.z=p[2]*n+p[6]*r+p[10]*o+p[14]*u,this.w=p[3]*n+p[7]*r+p[11]*o+p[15]*u,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,o,u;const _=e.elements,x=_[0],M=_[4],R=_[8],N=_[1],G=_[5],Z=_[9],j=_[2],z=_[6],U=_[10];if(Math.abs(M-N)<.01&&Math.abs(R-j)<.01&&Math.abs(Z-z)<.01){if(Math.abs(M+N)<.1&&Math.abs(R+j)<.1&&Math.abs(Z+z)<.1&&Math.abs(x+G+U-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const K=(x+1)/2,te=(G+1)/2,pe=(U+1)/2,Q=(M+N)/4,Se=(R+j)/4,Pe=(Z+z)/4;return K>te&&K>pe?K<.01?(r=0,o=.707106781,u=.707106781):(r=Math.sqrt(K),o=Q/r,u=Se/r):te>pe?te<.01?(r=.707106781,o=0,u=.707106781):(o=Math.sqrt(te),r=Q/o,u=Pe/o):pe<.01?(r=.707106781,o=.707106781,u=0):(u=Math.sqrt(pe),r=Se/u,o=Pe/u),this.set(r,o,u,n),this}let C=Math.sqrt((z-Z)*(z-Z)+(R-j)*(R-j)+(N-M)*(N-M));return Math.abs(C)<.001&&(C=1),this.x=(z-Z)/C,this.y=(R-j)/C,this.z=(N-M)/C,this.w=Math.acos((x+G+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bze extends Xg{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Xo(0,0,e,n),this.scissorTest=!1,this.viewport=new Xo(0,0,e,n);const o={width:e,height:n,depth:1};r.encoding!==void 0&&(IC("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Pg?tr:kg),this.texture=new Ua(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Il,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new G1e(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ug extends bze{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class $1e extends Ua{constructor(e=null,n=1,r=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Lu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _ze extends Ua{constructor(e=null,n=1,r=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Lu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LP{constructor(e=0,n=0,r=0,o=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=o}static slerpFlat(e,n,r,o,u,p,m){let _=r[o+0],x=r[o+1],M=r[o+2],R=r[o+3];const N=u[p+0],G=u[p+1],Z=u[p+2],j=u[p+3];if(m===0){e[n+0]=_,e[n+1]=x,e[n+2]=M,e[n+3]=R;return}if(m===1){e[n+0]=N,e[n+1]=G,e[n+2]=Z,e[n+3]=j;return}if(R!==j||_!==N||x!==G||M!==Z){let z=1-m;const U=_*N+x*G+M*Z+R*j,C=U>=0?1:-1,K=1-U*U;if(K>Number.EPSILON){const pe=Math.sqrt(K),Q=Math.atan2(pe,U*C);z=Math.sin(z*Q)/pe,m=Math.sin(m*Q)/pe}const te=m*C;if(_=_*z+N*te,x=x*z+G*te,M=M*z+Z*te,R=R*z+j*te,z===1-m){const pe=1/Math.sqrt(_*_+x*x+M*M+R*R);_*=pe,x*=pe,M*=pe,R*=pe}}e[n]=_,e[n+1]=x,e[n+2]=M,e[n+3]=R}static multiplyQuaternionsFlat(e,n,r,o,u,p){const m=r[o],_=r[o+1],x=r[o+2],M=r[o+3],R=u[p],N=u[p+1],G=u[p+2],Z=u[p+3];return e[n]=m*Z+M*R+_*G-x*N,e[n+1]=_*Z+M*N+x*R-m*G,e[n+2]=x*Z+M*G+m*N-_*R,e[n+3]=M*Z-m*R-_*N-x*G,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,o){return this._x=e,this._y=n,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,o=e._y,u=e._z,p=e._order,m=Math.cos,_=Math.sin,x=m(r/2),M=m(o/2),R=m(u/2),N=_(r/2),G=_(o/2),Z=_(u/2);switch(p){case"XYZ":this._x=N*M*R+x*G*Z,this._y=x*G*R-N*M*Z,this._z=x*M*Z+N*G*R,this._w=x*M*R-N*G*Z;break;case"YXZ":this._x=N*M*R+x*G*Z,this._y=x*G*R-N*M*Z,this._z=x*M*Z-N*G*R,this._w=x*M*R+N*G*Z;break;case"ZXY":this._x=N*M*R-x*G*Z,this._y=x*G*R+N*M*Z,this._z=x*M*Z+N*G*R,this._w=x*M*R-N*G*Z;break;case"ZYX":this._x=N*M*R-x*G*Z,this._y=x*G*R+N*M*Z,this._z=x*M*Z-N*G*R,this._w=x*M*R+N*G*Z;break;case"YZX":this._x=N*M*R+x*G*Z,this._y=x*G*R+N*M*Z,this._z=x*M*Z-N*G*R,this._w=x*M*R-N*G*Z;break;case"XZY":this._x=N*M*R-x*G*Z,this._y=x*G*R-N*M*Z,this._z=x*M*Z+N*G*R,this._w=x*M*R+N*G*Z;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],o=n[4],u=n[8],p=n[1],m=n[5],_=n[9],x=n[2],M=n[6],R=n[10],N=r+m+R;if(N>0){const G=.5/Math.sqrt(N+1);this._w=.25/G,this._x=(M-_)*G,this._y=(u-x)*G,this._z=(p-o)*G}else if(r>m&&r>R){const G=2*Math.sqrt(1+r-m-R);this._w=(M-_)/G,this._x=.25*G,this._y=(o+p)/G,this._z=(u+x)/G}else if(m>R){const G=2*Math.sqrt(1+m-r-R);this._w=(u-x)/G,this._x=(o+p)/G,this._y=.25*G,this._z=(_+M)/G}else{const G=2*Math.sqrt(1+R-r-m);this._w=(p-o)/G,this._x=(u+x)/G,this._y=(_+M)/G,this._z=.25*G}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(da(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,n/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,o=e._y,u=e._z,p=e._w,m=n._x,_=n._y,x=n._z,M=n._w;return this._x=r*M+p*m+o*x-u*_,this._y=o*M+p*_+u*m-r*x,this._z=u*M+p*x+r*_-o*m,this._w=p*M-r*m-o*_-u*x,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,o=this._y,u=this._z,p=this._w;let m=p*e._w+r*e._x+o*e._y+u*e._z;if(m<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,m=-m):this.copy(e),m>=1)return this._w=p,this._x=r,this._y=o,this._z=u,this;const _=1-m*m;if(_<=Number.EPSILON){const G=1-n;return this._w=G*p+n*this._w,this._x=G*r+n*this._x,this._y=G*o+n*this._y,this._z=G*u+n*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(_),M=Math.atan2(x,m),R=Math.sin((1-n)*M)/x,N=Math.sin(n*M)/x;return this._w=p*R+this._w*N,this._x=r*R+this._x*N,this._y=o*R+this._y*N,this._z=u*R+this._z*N,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(n*Math.cos(o),r*Math.sin(u),r*Math.cos(u),n*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ht{constructor(e=0,n=0,r=0){ht.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(lge.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(lge.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[3]*r+u[6]*o,this.y=u[1]*n+u[4]*r+u[7]*o,this.z=u[2]*n+u[5]*r+u[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=e.elements,p=1/(u[3]*n+u[7]*r+u[11]*o+u[15]);return this.x=(u[0]*n+u[4]*r+u[8]*o+u[12])*p,this.y=(u[1]*n+u[5]*r+u[9]*o+u[13])*p,this.z=(u[2]*n+u[6]*r+u[10]*o+u[14])*p,this}applyQuaternion(e){const n=this.x,r=this.y,o=this.z,u=e.x,p=e.y,m=e.z,_=e.w,x=_*n+p*o-m*r,M=_*r+m*n-u*o,R=_*o+u*r-p*n,N=-u*n-p*r-m*o;return this.x=x*_+N*-u+M*-m-R*-p,this.y=M*_+N*-p+R*-u-x*-m,this.z=R*_+N*-m+x*-p-M*-u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*o,this.y=u[1]*n+u[5]*r+u[9]*o,this.z=u[2]*n+u[6]*r+u[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,o=e.y,u=e.z,p=n.x,m=n.y,_=n.z;return this.x=o*_-u*m,this.y=u*p-r*_,this.z=r*m-o*p,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return a8.copy(this).projectOnVector(e),this.sub(a8)}reflect(e){return this.sub(a8.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(da(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return n*n+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const o=Math.sin(n)*e;return this.x=o*Math.sin(r),this.y=Math.cos(n)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=o,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const a8=new ht,lge=new LP;class NP{constructor(e=new ht(1/0,1/0,1/0),n=new ht(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(oh.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(oh.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=oh.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),zb.copy(e.boundingBox),zb.applyMatrix4(e.matrixWorld),this.union(zb);else{const o=e.geometry;if(o!==void 0)if(n&&o.attributes!==void 0&&o.attributes.position!==void 0){const u=o.attributes.position;for(let p=0,m=u.count;p<m;p++)oh.fromBufferAttribute(u,p).applyMatrix4(e.matrixWorld),this.expandByPoint(oh)}else o.boundingBox===null&&o.computeBoundingBox(),zb.copy(o.boundingBox),zb.applyMatrix4(e.matrixWorld),this.union(zb)}const r=e.children;for(let o=0,u=r.length;o<u;o++)this.expandByObject(r[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,oh),oh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cC),cD.subVectors(this.max,cC),Hb.subVectors(e.a,cC),Gb.subVectors(e.b,cC),$b.subVectors(e.c,cC),_f.subVectors(Gb,Hb),wf.subVectors($b,Gb),og.subVectors(Hb,$b);let n=[0,-_f.z,_f.y,0,-wf.z,wf.y,0,-og.z,og.y,_f.z,0,-_f.x,wf.z,0,-wf.x,og.z,0,-og.x,-_f.y,_f.x,0,-wf.y,wf.x,0,-og.y,og.x,0];return!l8(n,Hb,Gb,$b,cD)||(n=[1,0,0,0,1,0,0,0,1],!l8(n,Hb,Gb,$b,cD))?!1:(dD.crossVectors(_f,wf),n=[dD.x,dD.y,dD.z],l8(n,Hb,Gb,$b,cD))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(oh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ih[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ih[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ih[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ih[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ih[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ih[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ih[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ih[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ih),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ih=[new ht,new ht,new ht,new ht,new ht,new ht,new ht,new ht],oh=new ht,zb=new NP,Hb=new ht,Gb=new ht,$b=new ht,_f=new ht,wf=new ht,og=new ht,cC=new ht,cD=new ht,dD=new ht,sg=new ht;function l8(t,e,n,r,o){for(let u=0,p=t.length-3;u<=p;u+=3){sg.fromArray(t,u);const m=o.x*Math.abs(sg.x)+o.y*Math.abs(sg.y)+o.z*Math.abs(sg.z),_=e.dot(sg),x=n.dot(sg),M=r.dot(sg);if(Math.max(-Math.max(_,x,M),Math.min(_,x,M))>m)return!1}return!0}const wze=new NP,dC=new ht,u8=new ht;class x${constructor(e=new ht,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):wze.setFromPoints(e).getCenter(r);let o=0;for(let u=0,p=e.length;u<p;u++)o=Math.max(o,r.distanceToSquared(e[u]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dC.subVectors(e,this.center);const n=dC.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),o=(r-this.radius)*.5;this.center.addScaledVector(dC,o/r),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(u8.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(dC.copy(e.center).add(u8)),this.expandByPoint(dC.copy(e.center).sub(u8))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const sh=new ht,c8=new ht,hD=new ht,xf=new ht,d8=new ht,pD=new ht,h8=new ht;class xze{constructor(e=new ht,n=new ht(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=sh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(sh.copy(this.origin).addScaledVector(this.direction,n),sh.distanceToSquared(e))}distanceSqToSegment(e,n,r,o){c8.copy(e).add(n).multiplyScalar(.5),hD.copy(n).sub(e).normalize(),xf.copy(this.origin).sub(c8);const u=e.distanceTo(n)*.5,p=-this.direction.dot(hD),m=xf.dot(this.direction),_=-xf.dot(hD),x=xf.lengthSq(),M=Math.abs(1-p*p);let R,N,G,Z;if(M>0)if(R=p*_-m,N=p*m-_,Z=u*M,R>=0)if(N>=-Z)if(N<=Z){const j=1/M;R*=j,N*=j,G=R*(R+p*N+2*m)+N*(p*R+N+2*_)+x}else N=u,R=Math.max(0,-(p*N+m)),G=-R*R+N*(N+2*_)+x;else N=-u,R=Math.max(0,-(p*N+m)),G=-R*R+N*(N+2*_)+x;else N<=-Z?(R=Math.max(0,-(-p*u+m)),N=R>0?-u:Math.min(Math.max(-u,-_),u),G=-R*R+N*(N+2*_)+x):N<=Z?(R=0,N=Math.min(Math.max(-u,-_),u),G=N*(N+2*_)+x):(R=Math.max(0,-(p*u+m)),N=R>0?u:Math.min(Math.max(-u,-_),u),G=-R*R+N*(N+2*_)+x);else N=p>0?-u:u,R=Math.max(0,-(p*N+m)),G=-R*R+N*(N+2*_)+x;return r&&r.copy(this.origin).addScaledVector(this.direction,R),o&&o.copy(c8).addScaledVector(hD,N),G}intersectSphere(e,n){sh.subVectors(e.center,this.origin);const r=sh.dot(this.direction),o=sh.dot(sh)-r*r,u=e.radius*e.radius;if(o>u)return null;const p=Math.sqrt(u-o),m=r-p,_=r+p;return _<0?null:m<0?this.at(_,n):this.at(m,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,o,u,p,m,_;const x=1/this.direction.x,M=1/this.direction.y,R=1/this.direction.z,N=this.origin;return x>=0?(r=(e.min.x-N.x)*x,o=(e.max.x-N.x)*x):(r=(e.max.x-N.x)*x,o=(e.min.x-N.x)*x),M>=0?(u=(e.min.y-N.y)*M,p=(e.max.y-N.y)*M):(u=(e.max.y-N.y)*M,p=(e.min.y-N.y)*M),r>p||u>o||((u>r||isNaN(r))&&(r=u),(p<o||isNaN(o))&&(o=p),R>=0?(m=(e.min.z-N.z)*R,_=(e.max.z-N.z)*R):(m=(e.max.z-N.z)*R,_=(e.min.z-N.z)*R),r>_||m>o)||((m>r||r!==r)&&(r=m),(_<o||o!==o)&&(o=_),o<0)?null:this.at(r>=0?r:o,n)}intersectsBox(e){return this.intersectBox(e,sh)!==null}intersectTriangle(e,n,r,o,u){d8.subVectors(n,e),pD.subVectors(r,e),h8.crossVectors(d8,pD);let p=this.direction.dot(h8),m;if(p>0){if(o)return null;m=1}else if(p<0)m=-1,p=-p;else return null;xf.subVectors(this.origin,e);const _=m*this.direction.dot(pD.crossVectors(xf,pD));if(_<0)return null;const x=m*this.direction.dot(d8.cross(xf));if(x<0||_+x>p)return null;const M=-m*xf.dot(h8);return M<0?null:this.at(M/p,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ro{constructor(e,n,r,o,u,p,m,_,x,M,R,N,G,Z,j,z){Ro.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,p,m,_,x,M,R,N,G,Z,j,z)}set(e,n,r,o,u,p,m,_,x,M,R,N,G,Z,j,z){const U=this.elements;return U[0]=e,U[4]=n,U[8]=r,U[12]=o,U[1]=u,U[5]=p,U[9]=m,U[13]=_,U[2]=x,U[6]=M,U[10]=R,U[14]=N,U[3]=G,U[7]=Z,U[11]=j,U[15]=z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ro().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,o=1/Wb.setFromMatrixColumn(e,0).length(),u=1/Wb.setFromMatrixColumn(e,1).length(),p=1/Wb.setFromMatrixColumn(e,2).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=0,n[4]=r[4]*u,n[5]=r[5]*u,n[6]=r[6]*u,n[7]=0,n[8]=r[8]*p,n[9]=r[9]*p,n[10]=r[10]*p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,o=e.y,u=e.z,p=Math.cos(r),m=Math.sin(r),_=Math.cos(o),x=Math.sin(o),M=Math.cos(u),R=Math.sin(u);if(e.order==="XYZ"){const N=p*M,G=p*R,Z=m*M,j=m*R;n[0]=_*M,n[4]=-_*R,n[8]=x,n[1]=G+Z*x,n[5]=N-j*x,n[9]=-m*_,n[2]=j-N*x,n[6]=Z+G*x,n[10]=p*_}else if(e.order==="YXZ"){const N=_*M,G=_*R,Z=x*M,j=x*R;n[0]=N+j*m,n[4]=Z*m-G,n[8]=p*x,n[1]=p*R,n[5]=p*M,n[9]=-m,n[2]=G*m-Z,n[6]=j+N*m,n[10]=p*_}else if(e.order==="ZXY"){const N=_*M,G=_*R,Z=x*M,j=x*R;n[0]=N-j*m,n[4]=-p*R,n[8]=Z+G*m,n[1]=G+Z*m,n[5]=p*M,n[9]=j-N*m,n[2]=-p*x,n[6]=m,n[10]=p*_}else if(e.order==="ZYX"){const N=p*M,G=p*R,Z=m*M,j=m*R;n[0]=_*M,n[4]=Z*x-G,n[8]=N*x+j,n[1]=_*R,n[5]=j*x+N,n[9]=G*x-Z,n[2]=-x,n[6]=m*_,n[10]=p*_}else if(e.order==="YZX"){const N=p*_,G=p*x,Z=m*_,j=m*x;n[0]=_*M,n[4]=j-N*R,n[8]=Z*R+G,n[1]=R,n[5]=p*M,n[9]=-m*M,n[2]=-x*M,n[6]=G*R+Z,n[10]=N-j*R}else if(e.order==="XZY"){const N=p*_,G=p*x,Z=m*_,j=m*x;n[0]=_*M,n[4]=-R,n[8]=x*M,n[1]=N*R+j,n[5]=p*M,n[9]=G*R-Z,n[2]=Z*R-G,n[6]=m*M,n[10]=j*R+N}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Sze,e,Eze)}lookAt(e,n,r){const o=this.elements;return Oa.subVectors(e,n),Oa.lengthSq()===0&&(Oa.z=1),Oa.normalize(),Sf.crossVectors(r,Oa),Sf.lengthSq()===0&&(Math.abs(r.z)===1?Oa.x+=1e-4:Oa.z+=1e-4,Oa.normalize(),Sf.crossVectors(r,Oa)),Sf.normalize(),fD.crossVectors(Oa,Sf),o[0]=Sf.x,o[4]=fD.x,o[8]=Oa.x,o[1]=Sf.y,o[5]=fD.y,o[9]=Oa.y,o[2]=Sf.z,o[6]=fD.z,o[10]=Oa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,p=r[0],m=r[4],_=r[8],x=r[12],M=r[1],R=r[5],N=r[9],G=r[13],Z=r[2],j=r[6],z=r[10],U=r[14],C=r[3],K=r[7],te=r[11],pe=r[15],Q=o[0],Se=o[4],Pe=o[8],H=o[12],ye=o[1],St=o[5],kt=o[9],it=o[13],me=o[2],lt=o[6],Fe=o[10],vt=o[14],Ge=o[3],mt=o[7],Je=o[11],Be=o[15];return u[0]=p*Q+m*ye+_*me+x*Ge,u[4]=p*Se+m*St+_*lt+x*mt,u[8]=p*Pe+m*kt+_*Fe+x*Je,u[12]=p*H+m*it+_*vt+x*Be,u[1]=M*Q+R*ye+N*me+G*Ge,u[5]=M*Se+R*St+N*lt+G*mt,u[9]=M*Pe+R*kt+N*Fe+G*Je,u[13]=M*H+R*it+N*vt+G*Be,u[2]=Z*Q+j*ye+z*me+U*Ge,u[6]=Z*Se+j*St+z*lt+U*mt,u[10]=Z*Pe+j*kt+z*Fe+U*Je,u[14]=Z*H+j*it+z*vt+U*Be,u[3]=C*Q+K*ye+te*me+pe*Ge,u[7]=C*Se+K*St+te*lt+pe*mt,u[11]=C*Pe+K*kt+te*Fe+pe*Je,u[15]=C*H+K*it+te*vt+pe*Be,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],o=e[8],u=e[12],p=e[1],m=e[5],_=e[9],x=e[13],M=e[2],R=e[6],N=e[10],G=e[14],Z=e[3],j=e[7],z=e[11],U=e[15];return Z*(+u*_*R-o*x*R-u*m*N+r*x*N+o*m*G-r*_*G)+j*(+n*_*G-n*x*N+u*p*N-o*p*G+o*x*M-u*_*M)+z*(+n*x*R-n*m*G-u*p*R+r*p*G+u*m*M-r*x*M)+U*(-o*m*M-n*_*R+n*m*N+o*p*R-r*p*N+r*_*M)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=n,o[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],p=e[4],m=e[5],_=e[6],x=e[7],M=e[8],R=e[9],N=e[10],G=e[11],Z=e[12],j=e[13],z=e[14],U=e[15],C=R*z*x-j*N*x+j*_*G-m*z*G-R*_*U+m*N*U,K=Z*N*x-M*z*x-Z*_*G+p*z*G+M*_*U-p*N*U,te=M*j*x-Z*R*x+Z*m*G-p*j*G-M*m*U+p*R*U,pe=Z*R*_-M*j*_-Z*m*N+p*j*N+M*m*z-p*R*z,Q=n*C+r*K+o*te+u*pe;if(Q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Se=1/Q;return e[0]=C*Se,e[1]=(j*N*u-R*z*u-j*o*G+r*z*G+R*o*U-r*N*U)*Se,e[2]=(m*z*u-j*_*u+j*o*x-r*z*x-m*o*U+r*_*U)*Se,e[3]=(R*_*u-m*N*u-R*o*x+r*N*x+m*o*G-r*_*G)*Se,e[4]=K*Se,e[5]=(M*z*u-Z*N*u+Z*o*G-n*z*G-M*o*U+n*N*U)*Se,e[6]=(Z*_*u-p*z*u-Z*o*x+n*z*x+p*o*U-n*_*U)*Se,e[7]=(p*N*u-M*_*u+M*o*x-n*N*x-p*o*G+n*_*G)*Se,e[8]=te*Se,e[9]=(Z*R*u-M*j*u-Z*r*G+n*j*G+M*r*U-n*R*U)*Se,e[10]=(p*j*u-Z*m*u+Z*r*x-n*j*x-p*r*U+n*m*U)*Se,e[11]=(M*m*u-p*R*u-M*r*x+n*R*x+p*r*G-n*m*G)*Se,e[12]=pe*Se,e[13]=(M*j*o-Z*R*o+Z*r*N-n*j*N-M*r*z+n*R*z)*Se,e[14]=(Z*m*o-p*j*o-Z*r*_+n*j*_+p*r*z-n*m*z)*Se,e[15]=(p*R*o-M*m*o+M*r*_-n*R*_-p*r*N+n*m*N)*Se,this}scale(e){const n=this.elements,r=e.x,o=e.y,u=e.z;return n[0]*=r,n[4]*=o,n[8]*=u,n[1]*=r,n[5]*=o,n[9]*=u,n[2]*=r,n[6]*=o,n[10]*=u,n[3]*=r,n[7]*=o,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,o))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),o=Math.sin(n),u=1-r,p=e.x,m=e.y,_=e.z,x=u*p,M=u*m;return this.set(x*p+r,x*m-o*_,x*_+o*m,0,x*m+o*_,M*m+r,M*_-o*p,0,x*_-o*m,M*_+o*p,u*_*_+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,o,u,p){return this.set(1,r,u,0,e,1,p,0,n,o,1,0,0,0,0,1),this}compose(e,n,r){const o=this.elements,u=n._x,p=n._y,m=n._z,_=n._w,x=u+u,M=p+p,R=m+m,N=u*x,G=u*M,Z=u*R,j=p*M,z=p*R,U=m*R,C=_*x,K=_*M,te=_*R,pe=r.x,Q=r.y,Se=r.z;return o[0]=(1-(j+U))*pe,o[1]=(G+te)*pe,o[2]=(Z-K)*pe,o[3]=0,o[4]=(G-te)*Q,o[5]=(1-(N+U))*Q,o[6]=(z+C)*Q,o[7]=0,o[8]=(Z+K)*Se,o[9]=(z-C)*Se,o[10]=(1-(N+j))*Se,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,n,r){const o=this.elements;let u=Wb.set(o[0],o[1],o[2]).length();const p=Wb.set(o[4],o[5],o[6]).length(),m=Wb.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),e.x=o[12],e.y=o[13],e.z=o[14],Tu.copy(this);const x=1/u,M=1/p,R=1/m;return Tu.elements[0]*=x,Tu.elements[1]*=x,Tu.elements[2]*=x,Tu.elements[4]*=M,Tu.elements[5]*=M,Tu.elements[6]*=M,Tu.elements[8]*=R,Tu.elements[9]*=R,Tu.elements[10]*=R,n.setFromRotationMatrix(Tu),r.x=u,r.y=p,r.z=m,this}makePerspective(e,n,r,o,u,p,m=yh){const _=this.elements,x=2*u/(n-e),M=2*u/(r-o),R=(n+e)/(n-e),N=(r+o)/(r-o);let G,Z;if(m===yh)G=-(p+u)/(p-u),Z=-2*p*u/(p-u);else if(m===B3)G=-p/(p-u),Z=-p*u/(p-u);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+m);return _[0]=x,_[4]=0,_[8]=R,_[12]=0,_[1]=0,_[5]=M,_[9]=N,_[13]=0,_[2]=0,_[6]=0,_[10]=G,_[14]=Z,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,n,r,o,u,p,m=yh){const _=this.elements,x=1/(n-e),M=1/(r-o),R=1/(p-u),N=(n+e)*x,G=(r+o)*M;let Z,j;if(m===yh)Z=(p+u)*R,j=-2*R;else if(m===B3)Z=u*R,j=-1*R;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+m);return _[0]=2*x,_[4]=0,_[8]=0,_[12]=-N,_[1]=0,_[5]=2*M,_[9]=0,_[13]=-G,_[2]=0,_[6]=0,_[10]=j,_[14]=-Z,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<16;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Wb=new ht,Tu=new Ro,Sze=new ht(0,0,0),Eze=new ht(1,1,1),Sf=new ht,fD=new ht,Oa=new ht,uge=new Ro,cge=new LP;class FP{constructor(e=0,n=0,r=0,o=FP.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const o=e.elements,u=o[0],p=o[4],m=o[8],_=o[1],x=o[5],M=o[9],R=o[2],N=o[6],G=o[10];switch(n){case"XYZ":this._y=Math.asin(da(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-M,G),this._z=Math.atan2(-p,u)):(this._x=Math.atan2(N,x),this._z=0);break;case"YXZ":this._x=Math.asin(-da(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(m,G),this._z=Math.atan2(_,x)):(this._y=Math.atan2(-R,u),this._z=0);break;case"ZXY":this._x=Math.asin(da(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(-R,G),this._z=Math.atan2(-p,x)):(this._y=0,this._z=Math.atan2(_,u));break;case"ZYX":this._y=Math.asin(-da(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(N,G),this._z=Math.atan2(_,u)):(this._x=0,this._z=Math.atan2(-p,x));break;case"YZX":this._z=Math.asin(da(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-M,x),this._y=Math.atan2(-R,u)):(this._x=0,this._y=Math.atan2(m,G));break;case"XZY":this._z=Math.asin(-da(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(N,x),this._y=Math.atan2(m,u)):(this._x=Math.atan2(-M,G),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return uge.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uge,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return cge.setFromEuler(this),this.setFromQuaternion(cge,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}FP.DEFAULT_ORDER="XYZ";class W1e{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Cze=0;const dge=new ht,Kb=new LP,ah=new Ro,mD=new ht,hC=new ht,Pze=new ht,kze=new LP,hge=new ht(1,0,0),pge=new ht(0,1,0),fge=new ht(0,0,1),Tze={type:"added"},mge={type:"removed"};class bs extends Xg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Cze++}),this.uuid=DP(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bs.DEFAULT_UP.clone();const e=new ht,n=new FP,r=new LP,o=new ht(1,1,1);function u(){r.setFromEuler(n,!1)}function p(){n.setFromQuaternion(r,void 0,!1)}n._onChange(u),r._onChange(p),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Ro},normalMatrix:{value:new ir}}),this.matrix=new Ro,this.matrixWorld=new Ro,this.matrixAutoUpdate=bs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=bs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new W1e,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Kb.setFromAxisAngle(e,n),this.quaternion.multiply(Kb),this}rotateOnWorldAxis(e,n){return Kb.setFromAxisAngle(e,n),this.quaternion.premultiply(Kb),this}rotateX(e){return this.rotateOnAxis(hge,e)}rotateY(e){return this.rotateOnAxis(pge,e)}rotateZ(e){return this.rotateOnAxis(fge,e)}translateOnAxis(e,n){return dge.copy(e).applyQuaternion(this.quaternion),this.position.add(dge.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(hge,e)}translateY(e){return this.translateOnAxis(pge,e)}translateZ(e){return this.translateOnAxis(fge,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ah.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?mD.copy(e):mD.set(e,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),hC.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ah.lookAt(hC,mD,this.up):ah.lookAt(mD,hC,this.up),this.quaternion.setFromRotationMatrix(ah),o&&(ah.extractRotation(o.matrixWorld),Kb.setFromRotationMatrix(ah),this.quaternion.premultiply(Kb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Tze)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(mge)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(mge)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ah.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ah.multiply(e.parent.matrixWorld)),e.applyMatrix4(ah),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const p=this.children[r].getObjectByProperty(e,n);if(p!==void 0)return p}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let o=0,u=this.children.length;o<u;o++){const p=this.children[o].getObjectsByProperty(e,n);p.length>0&&(r=r.concat(p))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hC,e,Pze),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hC,kze,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++){const u=n[r];(u.matrixWorldAutoUpdate===!0||e===!0)&&u.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const o=this.children;for(let u=0,p=o.length;u<p;u++){const m=o[u];m.matrixWorldAutoUpdate===!0&&m.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function u(m,_){return m[_.uuid]===void 0&&(m[_.uuid]=_.toJSON(e)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=u(e.geometries,this.geometry);const m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){const _=m.shapes;if(Array.isArray(_))for(let x=0,M=_.length;x<M;x++){const R=_[x];u(e.shapes,R)}else u(e.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(u(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const m=[];for(let _=0,x=this.material.length;_<x;_++)m.push(u(e.materials,this.material[_]));o.material=m}else o.material=u(e.materials,this.material);if(this.children.length>0){o.children=[];for(let m=0;m<this.children.length;m++)o.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let m=0;m<this.animations.length;m++){const _=this.animations[m];o.animations.push(u(e.animations,_))}}if(n){const m=p(e.geometries),_=p(e.materials),x=p(e.textures),M=p(e.images),R=p(e.shapes),N=p(e.skeletons),G=p(e.animations),Z=p(e.nodes);m.length>0&&(r.geometries=m),_.length>0&&(r.materials=_),x.length>0&&(r.textures=x),M.length>0&&(r.images=M),R.length>0&&(r.shapes=R),N.length>0&&(r.skeletons=N),G.length>0&&(r.animations=G),Z.length>0&&(r.nodes=Z)}return r.object=o,r;function p(m){const _=[];for(const x in m){const M=m[x];delete M.metadata,_.push(M)}return _}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}bs.DEFAULT_UP=new ht(0,1,0);bs.DEFAULT_MATRIX_AUTO_UPDATE=!0;bs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mu=new ht,lh=new ht,p8=new ht,uh=new ht,qb=new ht,Xb=new ht,vge=new ht,f8=new ht,m8=new ht,v8=new ht;let vD=!1;class Du{constructor(e=new ht,n=new ht,r=new ht){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,o){o.subVectors(r,n),Mu.subVectors(e,n),o.cross(Mu);const u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}static getBarycoord(e,n,r,o,u){Mu.subVectors(o,n),lh.subVectors(r,n),p8.subVectors(e,n);const p=Mu.dot(Mu),m=Mu.dot(lh),_=Mu.dot(p8),x=lh.dot(lh),M=lh.dot(p8),R=p*x-m*m;if(R===0)return u.set(-2,-1,-1);const N=1/R,G=(x*_-m*M)*N,Z=(p*M-m*_)*N;return u.set(1-G-Z,Z,G)}static containsPoint(e,n,r,o){return this.getBarycoord(e,n,r,o,uh),uh.x>=0&&uh.y>=0&&uh.x+uh.y<=1}static getUV(e,n,r,o,u,p,m,_){return vD===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vD=!0),this.getInterpolation(e,n,r,o,u,p,m,_)}static getInterpolation(e,n,r,o,u,p,m,_){return this.getBarycoord(e,n,r,o,uh),_.setScalar(0),_.addScaledVector(u,uh.x),_.addScaledVector(p,uh.y),_.addScaledVector(m,uh.z),_}static isFrontFacing(e,n,r,o){return Mu.subVectors(r,n),lh.subVectors(e,n),Mu.cross(lh).dot(o)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,o){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,n,r,o){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mu.subVectors(this.c,this.b),lh.subVectors(this.a,this.b),Mu.cross(lh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Du.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Du.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,o,u){return vD===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vD=!0),Du.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}getInterpolation(e,n,r,o,u){return Du.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}containsPoint(e){return Du.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Du.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,o=this.b,u=this.c;let p,m;qb.subVectors(o,r),Xb.subVectors(u,r),f8.subVectors(e,r);const _=qb.dot(f8),x=Xb.dot(f8);if(_<=0&&x<=0)return n.copy(r);m8.subVectors(e,o);const M=qb.dot(m8),R=Xb.dot(m8);if(M>=0&&R<=M)return n.copy(o);const N=_*R-M*x;if(N<=0&&_>=0&&M<=0)return p=_/(_-M),n.copy(r).addScaledVector(qb,p);v8.subVectors(e,u);const G=qb.dot(v8),Z=Xb.dot(v8);if(Z>=0&&G<=Z)return n.copy(u);const j=G*x-_*Z;if(j<=0&&x>=0&&Z<=0)return m=x/(x-Z),n.copy(r).addScaledVector(Xb,m);const z=M*Z-G*R;if(z<=0&&R-M>=0&&G-Z>=0)return vge.subVectors(u,o),m=(R-M)/(R-M+(G-Z)),n.copy(o).addScaledVector(vge,m);const U=1/(z+j+N);return p=j*U,m=N*U,n.copy(r).addScaledVector(qb,p).addScaledVector(Xb,m)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Mze=0;class BP extends Xg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mze++}),this.uuid=DP(),this.name="",this.type="Material",this.blending=O_,this.side=tm,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=M1e,this.blendDst=A1e,this.blendEquation=o_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=qH,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tze,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=t8,this.stencilZFail=t8,this.stencilZPass=t8,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==O_&&(r.blending=this.blending),this.side!==tm&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function o(u){const p=[];for(const m in u){const _=u[m];delete _.metadata,p.push(_)}return p}if(n){const u=o(e.textures),p=o(e.images);u.length>0&&(r.textures=u),p.length>0&&(r.images=p)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const o=n.length;r=new Array(o);for(let u=0;u!==o;++u)r[u]=n[u].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const K1e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Au={h:0,s:0,l:0},gD={h:0,s:0,l:0};function g8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class fi{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ku.toWorkingColorSpace(this,n),this}setRGB(e,n,r,o=ku.workingColorSpace){return this.r=e,this.g=n,this.b=r,ku.toWorkingColorSpace(this,o),this}setHSL(e,n,r,o=ku.workingColorSpace){if(e=cze(e,1),n=da(n,0,1),r=da(r,0,1),n===0)this.r=this.g=this.b=r;else{const u=r<=.5?r*(1+n):r+n-r*n,p=2*r-u;this.r=g8(p,u,e+1/3),this.g=g8(p,u,e),this.b=g8(p,u,e-1/3)}return ku.toWorkingColorSpace(this,o),this}setStyle(e,n=tr){function r(u){u!==void 0&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const p=o[1],m=o[2];switch(p){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=o[1],p=u.length;if(p===3)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(p===6)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=tr){const r=K1e[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=D_(e.r),this.g=D_(e.g),this.b=D_(e.b),this}copyLinearToSRGB(e){return this.r=o8(e.r),this.g=o8(e.g),this.b=o8(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tr){return ku.fromWorkingColorSpace(ms.copy(this),e),Math.round(da(ms.r*255,0,255))*65536+Math.round(da(ms.g*255,0,255))*256+Math.round(da(ms.b*255,0,255))}getHexString(e=tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ku.workingColorSpace){ku.fromWorkingColorSpace(ms.copy(this),n);const r=ms.r,o=ms.g,u=ms.b,p=Math.max(r,o,u),m=Math.min(r,o,u);let _,x;const M=(m+p)/2;if(m===p)_=0,x=0;else{const R=p-m;switch(x=M<=.5?R/(p+m):R/(2-p-m),p){case r:_=(o-u)/R+(o<u?6:0);break;case o:_=(u-r)/R+2;break;case u:_=(r-o)/R+4;break}_/=6}return e.h=_,e.s=x,e.l=M,e}getRGB(e,n=ku.workingColorSpace){return ku.fromWorkingColorSpace(ms.copy(this),n),e.r=ms.r,e.g=ms.g,e.b=ms.b,e}getStyle(e=tr){ku.fromWorkingColorSpace(ms.copy(this),e);const n=ms.r,r=ms.g,o=ms.b;return e!==tr?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(o*255)})`}offsetHSL(e,n,r){return this.getHSL(Au),Au.h+=e,Au.s+=n,Au.l+=r,this.setHSL(Au.h,Au.s,Au.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Au),e.getHSL(gD);const r=r8(Au.h,gD.h,n),o=r8(Au.s,gD.s,n),u=r8(Au.l,gD.l,n);return this.setHSL(r,o,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,o=this.b,u=e.elements;return this.r=u[0]*n+u[3]*r+u[6]*o,this.g=u[1]*n+u[4]*r+u[7]*o,this.b=u[2]*n+u[5]*r+u[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ms=new fi;fi.NAMES=K1e;class q1e extends BP{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=I1e,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=new ht,yD=new Wr;class jc{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=ige,this.updateRange={offset:0,count:-1},this.gpuType=Lf,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let o=0,u=this.itemSize;o<u;o++)this.array[e+o]=n.array[r+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)yD.fromBufferAttribute(this,n),yD.applyMatrix3(e),this.setXY(n,yD.x,yD.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix3(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix4(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyNormalMatrix(e),this.setXYZ(n,so.x,so.y,so.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.transformDirection(e),this.setXYZ(n,so.x,so.y,so.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=uC(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ua(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=uC(n,this.array)),n}setX(e,n){return this.normalized&&(n=ua(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=uC(n,this.array)),n}setY(e,n){return this.normalized&&(n=ua(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=uC(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ua(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=uC(n,this.array)),n}setW(e,n){return this.normalized&&(n=ua(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ua(n,this.array),r=ua(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,o){return e*=this.itemSize,this.normalized&&(n=ua(n,this.array),r=ua(r,this.array),o=ua(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,n,r,o,u){return e*=this.itemSize,this.normalized&&(n=ua(n,this.array),r=ua(r,this.array),o=ua(o,this.array),u=ua(u,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ige&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class X1e extends jc{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Y1e extends jc{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class zc extends jc{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Aze=0;const kl=new Ro,y8=new bs,Yb=new ht,Da=new NP,pC=new NP,ko=new ht;class um extends Xg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Aze++}),this.uuid=DP(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(z1e(e)?Y1e:X1e)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const u=new ir().getNormalMatrix(e);r.applyNormalMatrix(u),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return kl.makeRotationFromQuaternion(e),this.applyMatrix4(kl),this}rotateX(e){return kl.makeRotationX(e),this.applyMatrix4(kl),this}rotateY(e){return kl.makeRotationY(e),this.applyMatrix4(kl),this}rotateZ(e){return kl.makeRotationZ(e),this.applyMatrix4(kl),this}translate(e,n,r){return kl.makeTranslation(e,n,r),this.applyMatrix4(kl),this}scale(e,n,r){return kl.makeScale(e,n,r),this.applyMatrix4(kl),this}lookAt(e){return y8.lookAt(e),y8.updateMatrix(),this.applyMatrix4(y8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yb).negate(),this.translate(Yb.x,Yb.y,Yb.z),this}setFromPoints(e){const n=[];for(let r=0,o=e.length;r<o;r++){const u=e[r];n.push(u.x,u.y,u.z||0)}return this.setAttribute("position",new zc(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new NP);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ht(-1/0,-1/0,-1/0),new ht(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,o=n.length;r<o;r++){const u=n[r];Da.setFromBufferAttribute(u),this.morphTargetsRelative?(ko.addVectors(this.boundingBox.min,Da.min),this.boundingBox.expandByPoint(ko),ko.addVectors(this.boundingBox.max,Da.max),this.boundingBox.expandByPoint(ko)):(this.boundingBox.expandByPoint(Da.min),this.boundingBox.expandByPoint(Da.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new x$);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ht,1/0);return}if(e){const r=this.boundingSphere.center;if(Da.setFromBufferAttribute(e),n)for(let u=0,p=n.length;u<p;u++){const m=n[u];pC.setFromBufferAttribute(m),this.morphTargetsRelative?(ko.addVectors(Da.min,pC.min),Da.expandByPoint(ko),ko.addVectors(Da.max,pC.max),Da.expandByPoint(ko)):(Da.expandByPoint(pC.min),Da.expandByPoint(pC.max))}Da.getCenter(r);let o=0;for(let u=0,p=e.count;u<p;u++)ko.fromBufferAttribute(e,u),o=Math.max(o,r.distanceToSquared(ko));if(n)for(let u=0,p=n.length;u<p;u++){const m=n[u],_=this.morphTargetsRelative;for(let x=0,M=m.count;x<M;x++)ko.fromBufferAttribute(m,x),_&&(Yb.fromBufferAttribute(e,x),ko.add(Yb)),o=Math.max(o,r.distanceToSquared(ko))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=n.position.array,u=n.normal.array,p=n.uv.array,m=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jc(new Float32Array(4*m),4));const _=this.getAttribute("tangent").array,x=[],M=[];for(let ye=0;ye<m;ye++)x[ye]=new ht,M[ye]=new ht;const R=new ht,N=new ht,G=new ht,Z=new Wr,j=new Wr,z=new Wr,U=new ht,C=new ht;function K(ye,St,kt){R.fromArray(o,ye*3),N.fromArray(o,St*3),G.fromArray(o,kt*3),Z.fromArray(p,ye*2),j.fromArray(p,St*2),z.fromArray(p,kt*2),N.sub(R),G.sub(R),j.sub(Z),z.sub(Z);const it=1/(j.x*z.y-z.x*j.y);isFinite(it)&&(U.copy(N).multiplyScalar(z.y).addScaledVector(G,-j.y).multiplyScalar(it),C.copy(G).multiplyScalar(j.x).addScaledVector(N,-z.x).multiplyScalar(it),x[ye].add(U),x[St].add(U),x[kt].add(U),M[ye].add(C),M[St].add(C),M[kt].add(C))}let te=this.groups;te.length===0&&(te=[{start:0,count:r.length}]);for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)K(r[lt+0],r[lt+1],r[lt+2])}const pe=new ht,Q=new ht,Se=new ht,Pe=new ht;function H(ye){Se.fromArray(u,ye*3),Pe.copy(Se);const St=x[ye];pe.copy(St),pe.sub(Se.multiplyScalar(Se.dot(St))).normalize(),Q.crossVectors(Pe,St);const it=Q.dot(M[ye])<0?-1:1;_[ye*4]=pe.x,_[ye*4+1]=pe.y,_[ye*4+2]=pe.z,_[ye*4+3]=it}for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)H(r[lt+0]),H(r[lt+1]),H(r[lt+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new jc(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let N=0,G=r.count;N<G;N++)r.setXYZ(N,0,0,0);const o=new ht,u=new ht,p=new ht,m=new ht,_=new ht,x=new ht,M=new ht,R=new ht;if(e)for(let N=0,G=e.count;N<G;N+=3){const Z=e.getX(N+0),j=e.getX(N+1),z=e.getX(N+2);o.fromBufferAttribute(n,Z),u.fromBufferAttribute(n,j),p.fromBufferAttribute(n,z),M.subVectors(p,u),R.subVectors(o,u),M.cross(R),m.fromBufferAttribute(r,Z),_.fromBufferAttribute(r,j),x.fromBufferAttribute(r,z),m.add(M),_.add(M),x.add(M),r.setXYZ(Z,m.x,m.y,m.z),r.setXYZ(j,_.x,_.y,_.z),r.setXYZ(z,x.x,x.y,x.z)}else for(let N=0,G=n.count;N<G;N+=3)o.fromBufferAttribute(n,N+0),u.fromBufferAttribute(n,N+1),p.fromBufferAttribute(n,N+2),M.subVectors(p,u),R.subVectors(o,u),M.cross(R),r.setXYZ(N+0,M.x,M.y,M.z),r.setXYZ(N+1,M.x,M.y,M.z),r.setXYZ(N+2,M.x,M.y,M.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)ko.fromBufferAttribute(e,n),ko.normalize(),e.setXYZ(n,ko.x,ko.y,ko.z)}toNonIndexed(){function e(m,_){const x=m.array,M=m.itemSize,R=m.normalized,N=new x.constructor(_.length*M);let G=0,Z=0;for(let j=0,z=_.length;j<z;j++){m.isInterleavedBufferAttribute?G=_[j]*m.data.stride+m.offset:G=_[j]*M;for(let U=0;U<M;U++)N[Z++]=x[G++]}return new jc(N,M,R)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new um,r=this.index.array,o=this.attributes;for(const m in o){const _=o[m],x=e(_,r);n.setAttribute(m,x)}const u=this.morphAttributes;for(const m in u){const _=[],x=u[m];for(let M=0,R=x.length;M<R;M++){const N=x[M],G=e(N,r);_.push(G)}n.morphAttributes[m]=_}n.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let m=0,_=p.length;m<_;m++){const x=p[m];n.addGroup(x.start,x.count,x.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const x in _)_[x]!==void 0&&(e[x]=_[x]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const _ in r){const x=r[_];e.data.attributes[_]=x.toJSON(e.data)}const o={};let u=!1;for(const _ in this.morphAttributes){const x=this.morphAttributes[_],M=[];for(let R=0,N=x.length;R<N;R++){const G=x[R];M.push(G.toJSON(e.data))}M.length>0&&(o[_]=M,u=!0)}u&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const m=this.boundingSphere;return m!==null&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const o=e.attributes;for(const x in o){const M=o[x];this.setAttribute(x,M.clone(n))}const u=e.morphAttributes;for(const x in u){const M=[],R=u[x];for(let N=0,G=R.length;N<G;N++)M.push(R[N].clone(n));this.morphAttributes[x]=M}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let x=0,M=p.length;x<M;x++){const R=p[x];this.addGroup(R.start,R.count,R.materialIndex)}const m=e.boundingBox;m!==null&&(this.boundingBox=m.clone());const _=e.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gge=new Ro,ag=new xze,bD=new x$,yge=new ht,Zb=new ht,Qb=new ht,Jb=new ht,b8=new ht,_D=new ht,wD=new Wr,xD=new Wr,SD=new Wr,bge=new ht,_ge=new ht,wge=new ht,ED=new ht,CD=new ht;class bh extends bs{constructor(e=new um,n=new q1e){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,p=o.length;u<p;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}getVertexPosition(e,n){const r=this.geometry,o=r.attributes.position,u=r.morphAttributes.position,p=r.morphTargetsRelative;n.fromBufferAttribute(o,e);const m=this.morphTargetInfluences;if(u&&m){_D.set(0,0,0);for(let _=0,x=u.length;_<x;_++){const M=m[_],R=u[_];M!==0&&(b8.fromBufferAttribute(R,e),p?_D.addScaledVector(b8,M):_D.addScaledVector(b8.sub(n),M))}n.add(_D)}return n}raycast(e,n){const r=this.geometry,o=this.material,u=this.matrixWorld;o!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),bD.copy(r.boundingSphere),bD.applyMatrix4(u),ag.copy(e.ray).recast(e.near),!(bD.containsPoint(ag.origin)===!1&&(ag.intersectSphere(bD,yge)===null||ag.origin.distanceToSquared(yge)>(e.far-e.near)**2))&&(gge.copy(u).invert(),ag.copy(e.ray).applyMatrix4(gge),!(r.boundingBox!==null&&ag.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ag)))}_computeIntersections(e,n,r){let o;const u=this.geometry,p=this.material,m=u.index,_=u.attributes.position,x=u.attributes.uv,M=u.attributes.uv1,R=u.attributes.normal,N=u.groups,G=u.drawRange;if(m!==null)if(Array.isArray(p))for(let Z=0,j=N.length;Z<j;Z++){const z=N[Z],U=p[z.materialIndex],C=Math.max(z.start,G.start),K=Math.min(m.count,Math.min(z.start+z.count,G.start+G.count));for(let te=C,pe=K;te<pe;te+=3){const Q=m.getX(te),Se=m.getX(te+1),Pe=m.getX(te+2);o=PD(this,U,e,r,x,M,R,Q,Se,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Z=Math.max(0,G.start),j=Math.min(m.count,G.start+G.count);for(let z=Z,U=j;z<U;z+=3){const C=m.getX(z),K=m.getX(z+1),te=m.getX(z+2);o=PD(this,p,e,r,x,M,R,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}else if(_!==void 0)if(Array.isArray(p))for(let Z=0,j=N.length;Z<j;Z++){const z=N[Z],U=p[z.materialIndex],C=Math.max(z.start,G.start),K=Math.min(_.count,Math.min(z.start+z.count,G.start+G.count));for(let te=C,pe=K;te<pe;te+=3){const Q=te,Se=te+1,Pe=te+2;o=PD(this,U,e,r,x,M,R,Q,Se,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Z=Math.max(0,G.start),j=Math.min(_.count,G.start+G.count);for(let z=Z,U=j;z<U;z+=3){const C=z,K=z+1,te=z+2;o=PD(this,p,e,r,x,M,R,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}}}function Ize(t,e,n,r,o,u,p,m){let _;if(e.side===ga?_=r.intersectTriangle(p,u,o,!0,m):_=r.intersectTriangle(o,u,p,e.side===tm,m),_===null)return null;CD.copy(m),CD.applyMatrix4(t.matrixWorld);const x=n.ray.origin.distanceTo(CD);return x<n.near||x>n.far?null:{distance:x,point:CD.clone(),object:t}}function PD(t,e,n,r,o,u,p,m,_,x){t.getVertexPosition(m,Zb),t.getVertexPosition(_,Qb),t.getVertexPosition(x,Jb);const M=Ize(t,e,n,r,Zb,Qb,Jb,ED);if(M){o&&(wD.fromBufferAttribute(o,m),xD.fromBufferAttribute(o,_),SD.fromBufferAttribute(o,x),M.uv=Du.getInterpolation(ED,Zb,Qb,Jb,wD,xD,SD,new Wr)),u&&(wD.fromBufferAttribute(u,m),xD.fromBufferAttribute(u,_),SD.fromBufferAttribute(u,x),M.uv1=Du.getInterpolation(ED,Zb,Qb,Jb,wD,xD,SD,new Wr),M.uv2=M.uv1),p&&(bge.fromBufferAttribute(p,m),_ge.fromBufferAttribute(p,_),wge.fromBufferAttribute(p,x),M.normal=Du.getInterpolation(ED,Zb,Qb,Jb,bge,_ge,wge,new ht),M.normal.dot(r.direction)>0&&M.normal.multiplyScalar(-1));const R={a:m,b:_,c:x,normal:new ht,materialIndex:0};Du.getNormal(Zb,Qb,Jb,R.normal),M.face=R}return M}class UP extends um{constructor(e=1,n=1,r=1,o=1,u=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:o,heightSegments:u,depthSegments:p};const m=this;o=Math.floor(o),u=Math.floor(u),p=Math.floor(p);const _=[],x=[],M=[],R=[];let N=0,G=0;Z("z","y","x",-1,-1,r,n,e,p,u,0),Z("z","y","x",1,-1,r,n,-e,p,u,1),Z("x","z","y",1,1,e,r,n,o,p,2),Z("x","z","y",1,-1,e,r,-n,o,p,3),Z("x","y","z",1,-1,e,n,r,o,u,4),Z("x","y","z",-1,-1,e,n,-r,o,u,5),this.setIndex(_),this.setAttribute("position",new zc(x,3)),this.setAttribute("normal",new zc(M,3)),this.setAttribute("uv",new zc(R,2));function Z(j,z,U,C,K,te,pe,Q,Se,Pe,H){const ye=te/Se,St=pe/Pe,kt=te/2,it=pe/2,me=Q/2,lt=Se+1,Fe=Pe+1;let vt=0,Ge=0;const mt=new ht;for(let Je=0;Je<Fe;Je++){const Be=Je*St-it;for(let nt=0;nt<lt;nt++){const Gt=nt*ye-kt;mt[j]=Gt*C,mt[z]=Be*K,mt[U]=me,x.push(mt.x,mt.y,mt.z),mt[j]=0,mt[z]=0,mt[U]=Q>0?1:-1,M.push(mt.x,mt.y,mt.z),R.push(nt/Se),R.push(1-Je/Pe),vt+=1}}for(let Je=0;Je<Pe;Je++)for(let Be=0;Be<Se;Be++){const nt=N+Be+lt*Je,Gt=N+Be+lt*(Je+1),Bt=N+(Be+1)+lt*(Je+1),Dt=N+(Be+1)+lt*Je;_.push(nt,Gt,Dt),_.push(Gt,Bt,Dt),Ge+=6}m.addGroup(G,Ge,H),G+=Ge,N+=vt}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UP(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function q_(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const o=t[n][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=o.clone():Array.isArray(o)?e[n][r]=o.slice():e[n][r]=o}}return e}function Fs(t){const e={};for(let n=0;n<t.length;n++){const r=q_(t[n]);for(const o in r)e[o]=r[o]}return e}function Rze(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Z1e(t){return t.getRenderTarget()===null?t.outputColorSpace:Kc}const Oze={clone:q_,merge:Fs};var Dze=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Lze=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vg extends BP{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Dze,this.fragmentShader=Lze,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=q_(e.uniforms),this.uniformsGroups=Rze(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const p=this.uniforms[o].value;p&&p.isTexture?n.uniforms[o]={type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?n.uniforms[o]={type:"c",value:p.getHex()}:p&&p.isVector2?n.uniforms[o]={type:"v2",value:p.toArray()}:p&&p.isVector3?n.uniforms[o]={type:"v3",value:p.toArray()}:p&&p.isVector4?n.uniforms[o]={type:"v4",value:p.toArray()}:p&&p.isMatrix3?n.uniforms[o]={type:"m3",value:p.toArray()}:p&&p.isMatrix4?n.uniforms[o]={type:"m4",value:p.toArray()}:n.uniforms[o]={value:p}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Q1e extends bs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ro,this.projectionMatrix=new Ro,this.projectionMatrixInverse=new Ro,this.coordinateSystem=yh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Rl extends Q1e{constructor(e=50,n=1,r=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=e9*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(n8*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return e9*2*Math.atan(Math.tan(n8*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,o,u,p){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(n8*.5*this.fov)/this.zoom,r=2*n,o=this.aspect*r,u=-.5*o;const p=this.view;if(this.view!==null&&this.view.enabled){const _=p.fullWidth,x=p.fullHeight;u+=p.offsetX*o/_,n-=p.offsetY*r/x,o*=p.width/_,r*=p.height/x}const m=this.filmOffset;m!==0&&(u+=e*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const e_=-90,t_=1;class Nze extends bs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const o=new Rl(e_,t_,e,n);o.layers=this.layers,this.add(o);const u=new Rl(e_,t_,e,n);u.layers=this.layers,this.add(u);const p=new Rl(e_,t_,e,n);p.layers=this.layers,this.add(p);const m=new Rl(e_,t_,e,n);m.layers=this.layers,this.add(m);const _=new Rl(e_,t_,e,n);_.layers=this.layers,this.add(_);const x=new Rl(e_,t_,e,n);x.layers=this.layers,this.add(x)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,o,u,p,m,_]=n;for(const x of n)this.remove(x);if(e===yh)r.up.set(0,1,0),r.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),p.up.set(0,0,1),p.lookAt(0,-1,0),m.up.set(0,1,0),m.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else if(e===B3)r.up.set(0,-1,0),r.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),p.up.set(0,0,-1),p.lookAt(0,-1,0),m.up.set(0,-1,0),m.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const x of n)this.add(x),x.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,p,m,_,x]=this.children,M=e.getRenderTarget(),R=e.xr.enabled;e.xr.enabled=!1;const N=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,o),e.setRenderTarget(r,1),e.render(n,u),e.setRenderTarget(r,2),e.render(n,p),e.setRenderTarget(r,3),e.render(n,m),e.setRenderTarget(r,4),e.render(n,_),r.texture.generateMipmaps=N,e.setRenderTarget(r,5),e.render(n,x),e.setRenderTarget(M),e.xr.enabled=R,r.texture.needsPMREMUpdate=!0}}class J1e extends Ua{constructor(e,n,r,o,u,p,m,_,x,M){e=e!==void 0?e:[],n=n!==void 0?n:$_,super(e,n,r,o,u,p,m,_,x,M),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Fze extends Ug{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];n.encoding!==void 0&&(IC("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Pg?tr:kg),this.texture=new J1e(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Il}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new UP(5,5,5),u=new Vg({name:"CubemapFromEquirect",uniforms:q_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ga,blending:Wf});u.uniforms.tEquirect.value=n;const p=new bh(o,u),m=n.minFilter;return n.minFilter===cP&&(n.minFilter=Il),new Nze(1,10,this).update(e,p),n.minFilter=m,p.geometry.dispose(),p.material.dispose(),this}clear(e,n,r,o){const u=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(n,r,o);e.setRenderTarget(u)}}const _8=new ht,Bze=new ht,Uze=new ir;class hg{constructor(e=new ht(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,o){return this.normal.set(e,n,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const o=_8.subVectors(r,n).cross(Bze.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(_8),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:n.copy(e.start).addScaledVector(r,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Uze.getNormalMatrix(e),o=this.coplanarPoint(_8).applyMatrix4(e),u=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lg=new x$,kD=new ht;class exe{constructor(e=new hg,n=new hg,r=new hg,o=new hg,u=new hg,p=new hg){this.planes=[e,n,r,o,u,p]}set(e,n,r,o,u,p){const m=this.planes;return m[0].copy(e),m[1].copy(n),m[2].copy(r),m[3].copy(o),m[4].copy(u),m[5].copy(p),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=yh){const r=this.planes,o=e.elements,u=o[0],p=o[1],m=o[2],_=o[3],x=o[4],M=o[5],R=o[6],N=o[7],G=o[8],Z=o[9],j=o[10],z=o[11],U=o[12],C=o[13],K=o[14],te=o[15];if(r[0].setComponents(_-u,N-x,z-G,te-U).normalize(),r[1].setComponents(_+u,N+x,z+G,te+U).normalize(),r[2].setComponents(_+p,N+M,z+Z,te+C).normalize(),r[3].setComponents(_-p,N-M,z-Z,te-C).normalize(),r[4].setComponents(_-m,N-R,z-j,te-K).normalize(),n===yh)r[5].setComponents(_+m,N+R,z+j,te+K).normalize();else if(n===B3)r[5].setComponents(m,R,j,K).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),lg.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),lg.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(lg)}intersectsSprite(e){return lg.center.set(0,0,0),lg.radius=.7071067811865476,lg.applyMatrix4(e.matrixWorld),this.intersectsSphere(lg)}intersectsSphere(e){const n=this.planes,r=e.center,o=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const o=n[r];if(kD.x=o.normal.x>0?e.max.x:e.min.x,kD.y=o.normal.y>0?e.max.y:e.min.y,kD.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(kD)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function txe(){let t=null,e=!1,n=null,r=null;function o(u,p){n(u,p),r=t.requestAnimationFrame(o)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){t=u}}}function Vze(t,e){const n=e.isWebGL2,r=new WeakMap;function o(x,M){const R=x.array,N=x.usage,G=t.createBuffer();t.bindBuffer(M,G),t.bufferData(M,R,N),x.onUploadCallback();let Z;if(R instanceof Float32Array)Z=t.FLOAT;else if(R instanceof Uint16Array)if(x.isFloat16BufferAttribute)if(n)Z=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Z=t.UNSIGNED_SHORT;else if(R instanceof Int16Array)Z=t.SHORT;else if(R instanceof Uint32Array)Z=t.UNSIGNED_INT;else if(R instanceof Int32Array)Z=t.INT;else if(R instanceof Int8Array)Z=t.BYTE;else if(R instanceof Uint8Array)Z=t.UNSIGNED_BYTE;else if(R instanceof Uint8ClampedArray)Z=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+R);return{buffer:G,type:Z,bytesPerElement:R.BYTES_PER_ELEMENT,version:x.version}}function u(x,M,R){const N=M.array,G=M.updateRange;t.bindBuffer(R,x),G.count===-1?t.bufferSubData(R,0,N):(n?t.bufferSubData(R,G.offset*N.BYTES_PER_ELEMENT,N,G.offset,G.count):t.bufferSubData(R,G.offset*N.BYTES_PER_ELEMENT,N.subarray(G.offset,G.offset+G.count)),G.count=-1),M.onUploadCallback()}function p(x){return x.isInterleavedBufferAttribute&&(x=x.data),r.get(x)}function m(x){x.isInterleavedBufferAttribute&&(x=x.data);const M=r.get(x);M&&(t.deleteBuffer(M.buffer),r.delete(x))}function _(x,M){if(x.isGLBufferAttribute){const N=r.get(x);(!N||N.version<x.version)&&r.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version});return}x.isInterleavedBufferAttribute&&(x=x.data);const R=r.get(x);R===void 0?r.set(x,o(x,M)):R.version<x.version&&(u(R.buffer,x,M),R.version=x.version)}return{get:p,remove:m,update:_}}class S$ extends um{constructor(e=1,n=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:o};const u=e/2,p=n/2,m=Math.floor(r),_=Math.floor(o),x=m+1,M=_+1,R=e/m,N=n/_,G=[],Z=[],j=[],z=[];for(let U=0;U<M;U++){const C=U*N-p;for(let K=0;K<x;K++){const te=K*R-u;Z.push(te,-C,0),j.push(0,0,1),z.push(K/m),z.push(1-U/_)}}for(let U=0;U<_;U++)for(let C=0;C<m;C++){const K=C+x*U,te=C+x*(U+1),pe=C+1+x*(U+1),Q=C+1+x*U;G.push(K,te,Q),G.push(te,pe,Q)}this.setIndex(G),this.setAttribute("position",new zc(Z,3)),this.setAttribute("normal",new zc(j,3)),this.setAttribute("uv",new zc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S$(e.width,e.height,e.widthSegments,e.heightSegments)}}var jze=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zze=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Hze=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Gze=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$ze=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Wze=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Kze=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qze=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Xze=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Yze=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Zze=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Qze=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jze=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e6e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,t6e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,n6e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,r6e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,i6e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,o6e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,s6e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,a6e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,l6e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,u6e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c6e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,d6e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,h6e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,p6e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,f6e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m6e="gl_FragColor = linearToOutputTexel( gl_FragColor );",v6e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,g6e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,y6e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,b6e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_6e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,w6e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,x6e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,S6e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,E6e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,C6e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,P6e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,k6e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,T6e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M6e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,A6e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,I6e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,R6e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,O6e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,D6e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,L6e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,N6e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,F6e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,B6e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,U6e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V6e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,j6e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,z6e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,H6e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,G6e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,$6e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,W6e=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,K6e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,q6e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,X6e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Y6e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Z6e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Q6e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,J6e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,e8e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,t8e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,n8e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,r8e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,i8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,s8e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,a8e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,l8e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,u8e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,c8e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,d8e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,h8e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,p8e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,f8e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,m8e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,v8e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,g8e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,y8e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,b8e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,w8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,x8e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,S8e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,E8e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,C8e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,P8e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,k8e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,T8e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,M8e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,A8e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,I8e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,R8e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,O8e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,D8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,L8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,F8e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const B8e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,U8e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V8e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,j8e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z8e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,H8e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G8e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$8e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,W8e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,K8e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,q8e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,X8e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y8e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Z8e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q8e=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,J8e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eHe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tHe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nHe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rHe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iHe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oHe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sHe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aHe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lHe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uHe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cHe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dHe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hHe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pHe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fHe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mHe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vHe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gHe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,er={alphahash_fragment:jze,alphahash_pars_fragment:zze,alphamap_fragment:Hze,alphamap_pars_fragment:Gze,alphatest_fragment:$ze,alphatest_pars_fragment:Wze,aomap_fragment:Kze,aomap_pars_fragment:qze,begin_vertex:Xze,beginnormal_vertex:Yze,bsdfs:Zze,iridescence_fragment:Qze,bumpmap_pars_fragment:Jze,clipping_planes_fragment:e6e,clipping_planes_pars_fragment:t6e,clipping_planes_pars_vertex:n6e,clipping_planes_vertex:r6e,color_fragment:i6e,color_pars_fragment:o6e,color_pars_vertex:s6e,color_vertex:a6e,common:l6e,cube_uv_reflection_fragment:u6e,defaultnormal_vertex:c6e,displacementmap_pars_vertex:d6e,displacementmap_vertex:h6e,emissivemap_fragment:p6e,emissivemap_pars_fragment:f6e,colorspace_fragment:m6e,colorspace_pars_fragment:v6e,envmap_fragment:g6e,envmap_common_pars_fragment:y6e,envmap_pars_fragment:b6e,envmap_pars_vertex:_6e,envmap_physical_pars_fragment:R6e,envmap_vertex:w6e,fog_vertex:x6e,fog_pars_vertex:S6e,fog_fragment:E6e,fog_pars_fragment:C6e,gradientmap_pars_fragment:P6e,lightmap_fragment:k6e,lightmap_pars_fragment:T6e,lights_lambert_fragment:M6e,lights_lambert_pars_fragment:A6e,lights_pars_begin:I6e,lights_toon_fragment:O6e,lights_toon_pars_fragment:D6e,lights_phong_fragment:L6e,lights_phong_pars_fragment:N6e,lights_physical_fragment:F6e,lights_physical_pars_fragment:B6e,lights_fragment_begin:U6e,lights_fragment_maps:V6e,lights_fragment_end:j6e,logdepthbuf_fragment:z6e,logdepthbuf_pars_fragment:H6e,logdepthbuf_pars_vertex:G6e,logdepthbuf_vertex:$6e,map_fragment:W6e,map_pars_fragment:K6e,map_particle_fragment:q6e,map_particle_pars_fragment:X6e,metalnessmap_fragment:Y6e,metalnessmap_pars_fragment:Z6e,morphcolor_vertex:Q6e,morphnormal_vertex:J6e,morphtarget_pars_vertex:e8e,morphtarget_vertex:t8e,normal_fragment_begin:n8e,normal_fragment_maps:r8e,normal_pars_fragment:i8e,normal_pars_vertex:o8e,normal_vertex:s8e,normalmap_pars_fragment:a8e,clearcoat_normal_fragment_begin:l8e,clearcoat_normal_fragment_maps:u8e,clearcoat_pars_fragment:c8e,iridescence_pars_fragment:d8e,opaque_fragment:h8e,packing:p8e,premultiplied_alpha_fragment:f8e,project_vertex:m8e,dithering_fragment:v8e,dithering_pars_fragment:g8e,roughnessmap_fragment:y8e,roughnessmap_pars_fragment:b8e,shadowmap_pars_fragment:_8e,shadowmap_pars_vertex:w8e,shadowmap_vertex:x8e,shadowmask_pars_fragment:S8e,skinbase_vertex:E8e,skinning_pars_vertex:C8e,skinning_vertex:P8e,skinnormal_vertex:k8e,specularmap_fragment:T8e,specularmap_pars_fragment:M8e,tonemapping_fragment:A8e,tonemapping_pars_fragment:I8e,transmission_fragment:R8e,transmission_pars_fragment:O8e,uv_pars_fragment:D8e,uv_pars_vertex:L8e,uv_vertex:N8e,worldpos_vertex:F8e,background_vert:B8e,background_frag:U8e,backgroundCube_vert:V8e,backgroundCube_frag:j8e,cube_vert:z8e,cube_frag:H8e,depth_vert:G8e,depth_frag:$8e,distanceRGBA_vert:W8e,distanceRGBA_frag:K8e,equirect_vert:q8e,equirect_frag:X8e,linedashed_vert:Y8e,linedashed_frag:Z8e,meshbasic_vert:Q8e,meshbasic_frag:J8e,meshlambert_vert:eHe,meshlambert_frag:tHe,meshmatcap_vert:nHe,meshmatcap_frag:rHe,meshnormal_vert:iHe,meshnormal_frag:oHe,meshphong_vert:sHe,meshphong_frag:aHe,meshphysical_vert:lHe,meshphysical_frag:uHe,meshtoon_vert:cHe,meshtoon_frag:dHe,points_vert:hHe,points_frag:pHe,shadow_vert:fHe,shadow_frag:mHe,sprite_vert:vHe,sprite_frag:gHe},Xt={common:{diffuse:{value:new fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ir}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ir},normalScale:{value:new Wr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new fi(16777215)},opacity:{value:1},center:{value:new Wr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}}},Nc={basic:{uniforms:Fs([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.fog]),vertexShader:er.meshbasic_vert,fragmentShader:er.meshbasic_frag},lambert:{uniforms:Fs([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,Xt.lights,{emissive:{value:new fi(0)}}]),vertexShader:er.meshlambert_vert,fragmentShader:er.meshlambert_frag},phong:{uniforms:Fs([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,Xt.lights,{emissive:{value:new fi(0)},specular:{value:new fi(1118481)},shininess:{value:30}}]),vertexShader:er.meshphong_vert,fragmentShader:er.meshphong_frag},standard:{uniforms:Fs([Xt.common,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.roughnessmap,Xt.metalnessmap,Xt.fog,Xt.lights,{emissive:{value:new fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag},toon:{uniforms:Fs([Xt.common,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.gradientmap,Xt.fog,Xt.lights,{emissive:{value:new fi(0)}}]),vertexShader:er.meshtoon_vert,fragmentShader:er.meshtoon_frag},matcap:{uniforms:Fs([Xt.common,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,{matcap:{value:null}}]),vertexShader:er.meshmatcap_vert,fragmentShader:er.meshmatcap_frag},points:{uniforms:Fs([Xt.points,Xt.fog]),vertexShader:er.points_vert,fragmentShader:er.points_frag},dashed:{uniforms:Fs([Xt.common,Xt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:er.linedashed_vert,fragmentShader:er.linedashed_frag},depth:{uniforms:Fs([Xt.common,Xt.displacementmap]),vertexShader:er.depth_vert,fragmentShader:er.depth_frag},normal:{uniforms:Fs([Xt.common,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,{opacity:{value:1}}]),vertexShader:er.meshnormal_vert,fragmentShader:er.meshnormal_frag},sprite:{uniforms:Fs([Xt.sprite,Xt.fog]),vertexShader:er.sprite_vert,fragmentShader:er.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:er.background_vert,fragmentShader:er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:er.backgroundCube_vert,fragmentShader:er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:er.cube_vert,fragmentShader:er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:er.equirect_vert,fragmentShader:er.equirect_frag},distanceRGBA:{uniforms:Fs([Xt.common,Xt.displacementmap,{referencePosition:{value:new ht},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:er.distanceRGBA_vert,fragmentShader:er.distanceRGBA_frag},shadow:{uniforms:Fs([Xt.lights,Xt.fog,{color:{value:new fi(0)},opacity:{value:1}}]),vertexShader:er.shadow_vert,fragmentShader:er.shadow_frag}};Nc.physical={uniforms:Fs([Nc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ir},clearcoatNormalScale:{value:new Wr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ir},sheen:{value:0},sheenColor:{value:new fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ir},transmissionSamplerSize:{value:new Wr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ir},attenuationDistance:{value:0},attenuationColor:{value:new fi(0)},specularColor:{value:new fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ir},anisotropyVector:{value:new Wr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ir}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag};const TD={r:0,b:0,g:0};function yHe(t,e,n,r,o,u,p){const m=new fi(0);let _=u===!0?0:1,x,M,R=null,N=0,G=null;function Z(z,U){let C=!1,K=U.isScene===!0?U.background:null;switch(K&&K.isTexture&&(K=(U.backgroundBlurriness>0?n:e).get(K)),K===null?j(m,_):K&&K.isColor&&(j(K,1),C=!0),t.xr.getEnvironmentBlendMode()){case"opaque":C=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,p),C=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,p),C=!0;break}(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),K&&(K.isCubeTexture||K.mapping===CL)?(M===void 0&&(M=new bh(new UP(1,1,1),new Vg({name:"BackgroundCubeMaterial",uniforms:q_(Nc.backgroundCube.uniforms),vertexShader:Nc.backgroundCube.vertexShader,fragmentShader:Nc.backgroundCube.fragmentShader,side:ga,depthTest:!1,depthWrite:!1,fog:!1})),M.geometry.deleteAttribute("normal"),M.geometry.deleteAttribute("uv"),M.onBeforeRender=function(Q,Se,Pe){this.matrixWorld.copyPosition(Pe.matrixWorld)},Object.defineProperty(M.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(M)),M.material.uniforms.envMap.value=K,M.material.uniforms.flipEnvMap.value=K.isCubeTexture&&K.isRenderTargetTexture===!1?-1:1,M.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,M.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,M.material.toneMapped=K.colorSpace!==tr,(R!==K||N!==K.version||G!==t.toneMapping)&&(M.material.needsUpdate=!0,R=K,N=K.version,G=t.toneMapping),M.layers.enableAll(),z.unshift(M,M.geometry,M.material,0,0,null)):K&&K.isTexture&&(x===void 0&&(x=new bh(new S$(2,2),new Vg({name:"BackgroundMaterial",uniforms:q_(Nc.background.uniforms),vertexShader:Nc.background.vertexShader,fragmentShader:Nc.background.fragmentShader,side:tm,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(x)),x.material.uniforms.t2D.value=K,x.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,x.material.toneMapped=K.colorSpace!==tr,K.matrixAutoUpdate===!0&&K.updateMatrix(),x.material.uniforms.uvTransform.value.copy(K.matrix),(R!==K||N!==K.version||G!==t.toneMapping)&&(x.material.needsUpdate=!0,R=K,N=K.version,G=t.toneMapping),x.layers.enableAll(),z.unshift(x,x.geometry,x.material,0,0,null))}function j(z,U){z.getRGB(TD,Z1e(t)),r.buffers.color.setClear(TD.r,TD.g,TD.b,U,p)}return{getClearColor:function(){return m},setClearColor:function(z,U=1){m.set(z),_=U,j(m,_)},getClearAlpha:function(){return _},setClearAlpha:function(z){_=z,j(m,_)},render:Z}}function bHe(t,e,n,r){const o=t.getParameter(t.MAX_VERTEX_ATTRIBS),u=r.isWebGL2?null:e.get("OES_vertex_array_object"),p=r.isWebGL2||u!==null,m={},_=z(null);let x=_,M=!1;function R(me,lt,Fe,vt,Ge){let mt=!1;if(p){const Je=j(vt,Fe,lt);x!==Je&&(x=Je,G(x.object)),mt=U(me,vt,Fe,Ge),mt&&C(me,vt,Fe,Ge)}else{const Je=lt.wireframe===!0;(x.geometry!==vt.id||x.program!==Fe.id||x.wireframe!==Je)&&(x.geometry=vt.id,x.program=Fe.id,x.wireframe=Je,mt=!0)}Ge!==null&&n.update(Ge,t.ELEMENT_ARRAY_BUFFER),(mt||M)&&(M=!1,Pe(me,lt,Fe,vt),Ge!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Ge).buffer))}function N(){return r.isWebGL2?t.createVertexArray():u.createVertexArrayOES()}function G(me){return r.isWebGL2?t.bindVertexArray(me):u.bindVertexArrayOES(me)}function Z(me){return r.isWebGL2?t.deleteVertexArray(me):u.deleteVertexArrayOES(me)}function j(me,lt,Fe){const vt=Fe.wireframe===!0;let Ge=m[me.id];Ge===void 0&&(Ge={},m[me.id]=Ge);let mt=Ge[lt.id];mt===void 0&&(mt={},Ge[lt.id]=mt);let Je=mt[vt];return Je===void 0&&(Je=z(N()),mt[vt]=Je),Je}function z(me){const lt=[],Fe=[],vt=[];for(let Ge=0;Ge<o;Ge++)lt[Ge]=0,Fe[Ge]=0,vt[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:lt,enabledAttributes:Fe,attributeDivisors:vt,object:me,attributes:{},index:null}}function U(me,lt,Fe,vt){const Ge=x.attributes,mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){const Bt=Ge[nt];let Dt=mt[nt];if(Dt===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Dt=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Dt=me.instanceColor)),Bt===void 0||Bt.attribute!==Dt||Dt&&Bt.data!==Dt.data)return!0;Je++}return x.attributesNum!==Je||x.index!==vt}function C(me,lt,Fe,vt){const Ge={},mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){let Bt=mt[nt];Bt===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Bt=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Bt=me.instanceColor));const Dt={};Dt.attribute=Bt,Bt&&Bt.data&&(Dt.data=Bt.data),Ge[nt]=Dt,Je++}x.attributes=Ge,x.attributesNum=Je,x.index=vt}function K(){const me=x.newAttributes;for(let lt=0,Fe=me.length;lt<Fe;lt++)me[lt]=0}function te(me){pe(me,0)}function pe(me,lt){const Fe=x.newAttributes,vt=x.enabledAttributes,Ge=x.attributeDivisors;Fe[me]=1,vt[me]===0&&(t.enableVertexAttribArray(me),vt[me]=1),Ge[me]!==lt&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,lt),Ge[me]=lt)}function Q(){const me=x.newAttributes,lt=x.enabledAttributes;for(let Fe=0,vt=lt.length;Fe<vt;Fe++)lt[Fe]!==me[Fe]&&(t.disableVertexAttribArray(Fe),lt[Fe]=0)}function Se(me,lt,Fe,vt,Ge,mt,Je){Je===!0?t.vertexAttribIPointer(me,lt,Fe,Ge,mt):t.vertexAttribPointer(me,lt,Fe,vt,Ge,mt)}function Pe(me,lt,Fe,vt){if(r.isWebGL2===!1&&(me.isInstancedMesh||vt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;K();const Ge=vt.attributes,mt=Fe.getAttributes(),Je=lt.defaultAttributeValues;for(const Be in mt){const nt=mt[Be];if(nt.location>=0){let Gt=Ge[Be];if(Gt===void 0&&(Be==="instanceMatrix"&&me.instanceMatrix&&(Gt=me.instanceMatrix),Be==="instanceColor"&&me.instanceColor&&(Gt=me.instanceColor)),Gt!==void 0){const Bt=Gt.normalized,Dt=Gt.itemSize,Jt=n.get(Gt);if(Jt===void 0)continue;const on=Jt.buffer,wn=Jt.type,Wn=Jt.bytesPerElement,Kr=r.isWebGL2===!0&&(wn===t.INT||wn===t.UNSIGNED_INT||Gt.gpuType===O1e);if(Gt.isInterleavedBufferAttribute){const xn=Gt.data,et=xn.stride,Zr=Gt.offset;if(xn.isInstancedInterleavedBuffer){for(let Pn=0;Pn<nt.locationSize;Pn++)pe(nt.location+Pn,xn.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=xn.meshPerAttribute*xn.count)}else for(let Pn=0;Pn<nt.locationSize;Pn++)te(nt.location+Pn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let Pn=0;Pn<nt.locationSize;Pn++)Se(nt.location+Pn,Dt/nt.locationSize,wn,Bt,et*Wn,(Zr+Dt/nt.locationSize*Pn)*Wn,Kr)}else{if(Gt.isInstancedBufferAttribute){for(let xn=0;xn<nt.locationSize;xn++)pe(nt.location+xn,Gt.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=Gt.meshPerAttribute*Gt.count)}else for(let xn=0;xn<nt.locationSize;xn++)te(nt.location+xn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let xn=0;xn<nt.locationSize;xn++)Se(nt.location+xn,Dt/nt.locationSize,wn,Bt,Dt*Wn,Dt/nt.locationSize*xn*Wn,Kr)}}else if(Je!==void 0){const Bt=Je[Be];if(Bt!==void 0)switch(Bt.length){case 2:t.vertexAttrib2fv(nt.location,Bt);break;case 3:t.vertexAttrib3fv(nt.location,Bt);break;case 4:t.vertexAttrib4fv(nt.location,Bt);break;default:t.vertexAttrib1fv(nt.location,Bt)}}}}Q()}function H(){kt();for(const me in m){const lt=m[me];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me]}}function ye(me){if(m[me.id]===void 0)return;const lt=m[me.id];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me.id]}function St(me){for(const lt in m){const Fe=m[lt];if(Fe[me.id]===void 0)continue;const vt=Fe[me.id];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete Fe[me.id]}}function kt(){it(),M=!0,x!==_&&(x=_,G(x.object))}function it(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:R,reset:kt,resetDefaultState:it,dispose:H,releaseStatesOfGeometry:ye,releaseStatesOfProgram:St,initAttributes:K,enableAttribute:te,disableUnusedAttributes:Q}}function _He(t,e,n,r){const o=r.isWebGL2;let u;function p(x){u=x}function m(x,M){t.drawArrays(u,x,M),n.update(M,u,1)}function _(x,M,R){if(R===0)return;let N,G;if(o)N=t,G="drawArraysInstanced";else if(N=e.get("ANGLE_instanced_arrays"),G="drawArraysInstancedANGLE",N===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[G](u,x,M,R),n.update(M,u,R)}this.setMode=p,this.render=m,this.renderInstances=_}function wHe(t,e,n){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(Se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function u(Se){if(Se==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";Se="mediump"}return Se==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let m=n.precision!==void 0?n.precision:"highp";const _=u(m);_!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",_,"instead."),m=_);const x=p||e.has("WEBGL_draw_buffers"),M=n.logarithmicDepthBuffer===!0,R=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),N=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),G=t.getParameter(t.MAX_TEXTURE_SIZE),Z=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),j=t.getParameter(t.MAX_VERTEX_ATTRIBS),z=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),U=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),K=N>0,te=p||e.has("OES_texture_float"),pe=K&&te,Q=p?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:p,drawBuffers:x,getMaxAnisotropy:o,getMaxPrecision:u,precision:m,logarithmicDepthBuffer:M,maxTextures:R,maxVertexTextures:N,maxTextureSize:G,maxCubemapSize:Z,maxAttributes:j,maxVertexUniforms:z,maxVaryings:U,maxFragmentUniforms:C,vertexTextures:K,floatFragmentTextures:te,floatVertexTextures:pe,maxSamples:Q}}function xHe(t){const e=this;let n=null,r=0,o=!1,u=!1;const p=new hg,m=new ir,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(R,N){const G=R.length!==0||N||r!==0||o;return o=N,r=R.length,G},this.beginShadows=function(){u=!0,M(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(R,N){n=M(R,N,0)},this.setState=function(R,N,G){const Z=R.clippingPlanes,j=R.clipIntersection,z=R.clipShadows,U=t.get(R);if(!o||Z===null||Z.length===0||u&&!z)u?M(null):x();else{const C=u?0:r,K=C*4;let te=U.clippingState||null;_.value=te,te=M(Z,N,K,G);for(let pe=0;pe!==K;++pe)te[pe]=n[pe];U.clippingState=te,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=C}};function x(){_.value!==n&&(_.value=n,_.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function M(R,N,G,Z){const j=R!==null?R.length:0;let z=null;if(j!==0){if(z=_.value,Z!==!0||z===null){const U=G+j*4,C=N.matrixWorldInverse;m.getNormalMatrix(C),(z===null||z.length<U)&&(z=new Float32Array(U));for(let K=0,te=G;K!==j;++K,te+=4)p.copy(R[K]).applyMatrix4(C,m),p.normal.toArray(z,te),z[te+3]=p.constant}_.value=z,_.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,z}}function SHe(t){let e=new WeakMap;function n(p,m){return m===XH?p.mapping=$_:m===YH&&(p.mapping=W_),p}function r(p){if(p&&p.isTexture&&p.isRenderTargetTexture===!1){const m=p.mapping;if(m===XH||m===YH)if(e.has(p)){const _=e.get(p).texture;return n(_,p.mapping)}else{const _=p.image;if(_&&_.height>0){const x=new Fze(_.height/2);return x.fromEquirectangularTexture(t,p),e.set(p,x),p.addEventListener("dispose",o),n(x.texture,p.mapping)}else return null}}return p}function o(p){const m=p.target;m.removeEventListener("dispose",o);const _=e.get(m);_!==void 0&&(e.delete(m),_.dispose())}function u(){e=new WeakMap}return{get:r,dispose:u}}class EHe extends Q1e{constructor(e=-1,n=1,r=1,o=-1,u=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=o,this.near=u,this.far=p,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,o,u,p){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let u=r-e,p=r+e,m=o+n,_=o-n;if(this.view!==null&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=x*this.view.offsetX,p=u+x*this.view.width,m-=M*this.view.offsetY,_=m-M*this.view.height}this.projectionMatrix.makeOrthographic(u,p,m,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const y_=4,xge=[.125,.215,.35,.446,.526,.582],vg=20,w8=new EHe,Sge=new fi;let x8=null;const pg=(1+Math.sqrt(5))/2,n_=1/pg,Ege=[new ht(1,1,1),new ht(-1,1,1),new ht(1,1,-1),new ht(-1,1,-1),new ht(0,pg,n_),new ht(0,pg,-n_),new ht(n_,0,pg),new ht(-n_,0,pg),new ht(pg,n_,0),new ht(-pg,n_,0)];class Cge{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,o=100){x8=this._renderer.getRenderTarget(),this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,r,o,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Tge(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kge(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(x8),e.scissorTest=!1,MD(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===$_||e.mapping===W_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),x8=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Il,minFilter:Il,generateMipmaps:!1,type:dP,format:Nu,colorSpace:Kc,depthBuffer:!1},o=Pge(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Pge(e,n,r);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=CHe(u)),this._blurMaterial=PHe(u,e,n)}return o}_compileMaterial(e){const n=new bh(this._lodPlanes[0],e);this._renderer.compile(n,w8)}_sceneToCubeUV(e,n,r,o){const m=new Rl(90,1,n,r),_=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],M=this._renderer,R=M.autoClear,N=M.toneMapping;M.getClearColor(Sge),M.toneMapping=Kf,M.autoClear=!1;const G=new q1e({name:"PMREM.Background",side:ga,depthWrite:!1,depthTest:!1}),Z=new bh(new UP,G);let j=!1;const z=e.background;z?z.isColor&&(G.color.copy(z),e.background=null,j=!0):(G.color.copy(Sge),j=!0);for(let U=0;U<6;U++){const C=U%3;C===0?(m.up.set(0,_[U],0),m.lookAt(x[U],0,0)):C===1?(m.up.set(0,0,_[U]),m.lookAt(0,x[U],0)):(m.up.set(0,_[U],0),m.lookAt(0,0,x[U]));const K=this._cubeSize;MD(o,C*K,U>2?K:0,K,K),M.setRenderTarget(o),j&&M.render(Z,m),M.render(e,m)}Z.geometry.dispose(),Z.material.dispose(),M.toneMapping=N,M.autoClear=R,e.background=z}_textureToCubeUV(e,n){const r=this._renderer,o=e.mapping===$_||e.mapping===W_;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Tge()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kge());const u=o?this._cubemapMaterial:this._equirectMaterial,p=new bh(this._lodPlanes[0],u),m=u.uniforms;m.envMap.value=e;const _=this._cubeSize;MD(n,0,0,3*_,2*_),r.setRenderTarget(n),r.render(p,w8)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const u=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),p=Ege[(o-1)%Ege.length];this._blur(e,o-1,o,u,p)}n.autoClear=r}_blur(e,n,r,o,u){const p=this._pingPongRenderTarget;this._halfBlur(e,p,n,r,o,"latitudinal",u),this._halfBlur(p,e,r,r,o,"longitudinal",u)}_halfBlur(e,n,r,o,u,p,m){const _=this._renderer,x=this._blurMaterial;p!=="latitudinal"&&p!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const M=3,R=new bh(this._lodPlanes[o],x),N=x.uniforms,G=this._sizeLods[r]-1,Z=isFinite(u)?Math.PI/(2*G):2*Math.PI/(2*vg-1),j=u/Z,z=isFinite(u)?1+Math.floor(M*j):vg;z>vg&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${z} samples when the maximum is set to ${vg}`);const U=[];let C=0;for(let Se=0;Se<vg;++Se){const Pe=Se/j,H=Math.exp(-Pe*Pe/2);U.push(H),Se===0?C+=H:Se<z&&(C+=2*H)}for(let Se=0;Se<U.length;Se++)U[Se]=U[Se]/C;N.envMap.value=e.texture,N.samples.value=z,N.weights.value=U,N.latitudinal.value=p==="latitudinal",m&&(N.poleAxis.value=m);const{_lodMax:K}=this;N.dTheta.value=Z,N.mipInt.value=K-r;const te=this._sizeLods[o],pe=3*te*(o>K-y_?o-K+y_:0),Q=4*(this._cubeSize-te);MD(n,pe,Q,3*te,2*te),_.setRenderTarget(n),_.render(R,w8)}}function CHe(t){const e=[],n=[],r=[];let o=t;const u=t-y_+1+xge.length;for(let p=0;p<u;p++){const m=Math.pow(2,o);n.push(m);let _=1/m;p>t-y_?_=xge[p-t+y_-1]:p===0&&(_=0),r.push(_);const x=1/(m-2),M=-x,R=1+x,N=[M,M,R,M,R,R,M,M,R,R,M,R],G=6,Z=6,j=3,z=2,U=1,C=new Float32Array(j*Z*G),K=new Float32Array(z*Z*G),te=new Float32Array(U*Z*G);for(let Q=0;Q<G;Q++){const Se=Q%3*2/3-1,Pe=Q>2?0:-1,H=[Se,Pe,0,Se+2/3,Pe,0,Se+2/3,Pe+1,0,Se,Pe,0,Se+2/3,Pe+1,0,Se,Pe+1,0];C.set(H,j*Z*Q),K.set(N,z*Z*Q);const ye=[Q,Q,Q,Q,Q,Q];te.set(ye,U*Z*Q)}const pe=new um;pe.setAttribute("position",new jc(C,j)),pe.setAttribute("uv",new jc(K,z)),pe.setAttribute("faceIndex",new jc(te,U)),e.push(pe),o>y_&&o--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Pge(t,e,n){const r=new Ug(t,e,n);return r.texture.mapping=CL,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function MD(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function PHe(t,e,n){const r=new Float32Array(vg),o=new ht(0,1,0);return new Vg({name:"SphericalGaussianBlur",defines:{n:vg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:E$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function kge(){return new Vg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:E$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function Tge(){return new Vg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:E$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function E$(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kHe(t){let e=new WeakMap,n=null;function r(m){if(m&&m.isTexture){const _=m.mapping,x=_===XH||_===YH,M=_===$_||_===W_;if(x||M)if(m.isRenderTargetTexture&&m.needsPMREMUpdate===!0){m.needsPMREMUpdate=!1;let R=e.get(m);return n===null&&(n=new Cge(t)),R=x?n.fromEquirectangular(m,R):n.fromCubemap(m,R),e.set(m,R),R.texture}else{if(e.has(m))return e.get(m).texture;{const R=m.image;if(x&&R&&R.height>0||M&&R&&o(R)){n===null&&(n=new Cge(t));const N=x?n.fromEquirectangular(m):n.fromCubemap(m);return e.set(m,N),m.addEventListener("dispose",u),N.texture}else return null}}}return m}function o(m){let _=0;const x=6;for(let M=0;M<x;M++)m[M]!==void 0&&_++;return _===x}function u(m){const _=m.target;_.removeEventListener("dispose",u);const x=e.get(_);x!==void 0&&(e.delete(_),x.dispose())}function p(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:p}}function THe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(r)}return e[r]=o,o}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const o=n(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function MHe(t,e,n,r){const o={},u=new WeakMap;function p(R){const N=R.target;N.index!==null&&e.remove(N.index);for(const Z in N.attributes)e.remove(N.attributes[Z]);for(const Z in N.morphAttributes){const j=N.morphAttributes[Z];for(let z=0,U=j.length;z<U;z++)e.remove(j[z])}N.removeEventListener("dispose",p),delete o[N.id];const G=u.get(N);G&&(e.remove(G),u.delete(N)),r.releaseStatesOfGeometry(N),N.isInstancedBufferGeometry===!0&&delete N._maxInstanceCount,n.memory.geometries--}function m(R,N){return o[N.id]===!0||(N.addEventListener("dispose",p),o[N.id]=!0,n.memory.geometries++),N}function _(R){const N=R.attributes;for(const Z in N)e.update(N[Z],t.ARRAY_BUFFER);const G=R.morphAttributes;for(const Z in G){const j=G[Z];for(let z=0,U=j.length;z<U;z++)e.update(j[z],t.ARRAY_BUFFER)}}function x(R){const N=[],G=R.index,Z=R.attributes.position;let j=0;if(G!==null){const C=G.array;j=G.version;for(let K=0,te=C.length;K<te;K+=3){const pe=C[K+0],Q=C[K+1],Se=C[K+2];N.push(pe,Q,Q,Se,Se,pe)}}else if(Z!==void 0){const C=Z.array;j=Z.version;for(let K=0,te=C.length/3-1;K<te;K+=3){const pe=K+0,Q=K+1,Se=K+2;N.push(pe,Q,Q,Se,Se,pe)}}else return;const z=new(z1e(N)?Y1e:X1e)(N,1);z.version=j;const U=u.get(R);U&&e.remove(U),u.set(R,z)}function M(R){const N=u.get(R);if(N){const G=R.index;G!==null&&N.version<G.version&&x(R)}else x(R);return u.get(R)}return{get:m,update:_,getWireframeAttribute:M}}function AHe(t,e,n,r){const o=r.isWebGL2;let u;function p(N){u=N}let m,_;function x(N){m=N.type,_=N.bytesPerElement}function M(N,G){t.drawElements(u,G,m,N*_),n.update(G,u,1)}function R(N,G,Z){if(Z===0)return;let j,z;if(o)j=t,z="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),z="drawElementsInstancedANGLE",j===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}j[z](u,G,m,N*_,Z),n.update(G,u,Z)}this.setMode=p,this.setIndex=x,this.render=M,this.renderInstances=R}function IHe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(u,p,m){switch(n.calls++,p){case t.TRIANGLES:n.triangles+=m*(u/3);break;case t.LINES:n.lines+=m*(u/2);break;case t.LINE_STRIP:n.lines+=m*(u-1);break;case t.LINE_LOOP:n.lines+=m*u;break;case t.POINTS:n.points+=m*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:o,update:r}}function RHe(t,e){return t[0]-e[0]}function OHe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function DHe(t,e,n){const r={},o=new Float32Array(8),u=new WeakMap,p=new Xo,m=[];for(let x=0;x<8;x++)m[x]=[x,0];function _(x,M,R){const N=x.morphTargetInfluences;if(e.isWebGL2===!0){const Z=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,j=Z!==void 0?Z.length:0;let z=u.get(M);if(z===void 0||z.count!==j){let lt=function(){it.dispose(),u.delete(M),M.removeEventListener("dispose",lt)};var G=lt;z!==void 0&&z.texture.dispose();const K=M.morphAttributes.position!==void 0,te=M.morphAttributes.normal!==void 0,pe=M.morphAttributes.color!==void 0,Q=M.morphAttributes.position||[],Se=M.morphAttributes.normal||[],Pe=M.morphAttributes.color||[];let H=0;K===!0&&(H=1),te===!0&&(H=2),pe===!0&&(H=3);let ye=M.attributes.position.count*H,St=1;ye>e.maxTextureSize&&(St=Math.ceil(ye/e.maxTextureSize),ye=e.maxTextureSize);const kt=new Float32Array(ye*St*4*j),it=new $1e(kt,ye,St,j);it.type=Lf,it.needsUpdate=!0;const me=H*4;for(let Fe=0;Fe<j;Fe++){const vt=Q[Fe],Ge=Se[Fe],mt=Pe[Fe],Je=ye*St*4*Fe;for(let Be=0;Be<vt.count;Be++){const nt=Be*me;K===!0&&(p.fromBufferAttribute(vt,Be),kt[Je+nt+0]=p.x,kt[Je+nt+1]=p.y,kt[Je+nt+2]=p.z,kt[Je+nt+3]=0),te===!0&&(p.fromBufferAttribute(Ge,Be),kt[Je+nt+4]=p.x,kt[Je+nt+5]=p.y,kt[Je+nt+6]=p.z,kt[Je+nt+7]=0),pe===!0&&(p.fromBufferAttribute(mt,Be),kt[Je+nt+8]=p.x,kt[Je+nt+9]=p.y,kt[Je+nt+10]=p.z,kt[Je+nt+11]=mt.itemSize===4?p.w:1)}}z={count:j,texture:it,size:new Wr(ye,St)},u.set(M,z),M.addEventListener("dispose",lt)}let U=0;for(let K=0;K<N.length;K++)U+=N[K];const C=M.morphTargetsRelative?1:1-U;R.getUniforms().setValue(t,"morphTargetBaseInfluence",C),R.getUniforms().setValue(t,"morphTargetInfluences",N),R.getUniforms().setValue(t,"morphTargetsTexture",z.texture,n),R.getUniforms().setValue(t,"morphTargetsTextureSize",z.size)}else{const Z=N===void 0?0:N.length;let j=r[M.id];if(j===void 0||j.length!==Z){j=[];for(let te=0;te<Z;te++)j[te]=[te,0];r[M.id]=j}for(let te=0;te<Z;te++){const pe=j[te];pe[0]=te,pe[1]=N[te]}j.sort(OHe);for(let te=0;te<8;te++)te<Z&&j[te][1]?(m[te][0]=j[te][0],m[te][1]=j[te][1]):(m[te][0]=Number.MAX_SAFE_INTEGER,m[te][1]=0);m.sort(RHe);const z=M.morphAttributes.position,U=M.morphAttributes.normal;let C=0;for(let te=0;te<8;te++){const pe=m[te],Q=pe[0],Se=pe[1];Q!==Number.MAX_SAFE_INTEGER&&Se?(z&&M.getAttribute("morphTarget"+te)!==z[Q]&&M.setAttribute("morphTarget"+te,z[Q]),U&&M.getAttribute("morphNormal"+te)!==U[Q]&&M.setAttribute("morphNormal"+te,U[Q]),o[te]=Se,C+=Se):(z&&M.hasAttribute("morphTarget"+te)===!0&&M.deleteAttribute("morphTarget"+te),U&&M.hasAttribute("morphNormal"+te)===!0&&M.deleteAttribute("morphNormal"+te),o[te]=0)}const K=M.morphTargetsRelative?1:1-C;R.getUniforms().setValue(t,"morphTargetBaseInfluence",K),R.getUniforms().setValue(t,"morphTargetInfluences",o)}}return{update:_}}function LHe(t,e,n,r){let o=new WeakMap;function u(_){const x=r.render.frame,M=_.geometry,R=e.get(_,M);if(o.get(R)!==x&&(e.update(R),o.set(R,x)),_.isInstancedMesh&&(_.hasEventListener("dispose",m)===!1&&_.addEventListener("dispose",m),o.get(_)!==x&&(n.update(_.instanceMatrix,t.ARRAY_BUFFER),_.instanceColor!==null&&n.update(_.instanceColor,t.ARRAY_BUFFER),o.set(_,x))),_.isSkinnedMesh){const N=_.skeleton;o.get(N)!==x&&(N.update(),o.set(N,x))}return R}function p(){o=new WeakMap}function m(_){const x=_.target;x.removeEventListener("dispose",m),n.remove(x.instanceMatrix),x.instanceColor!==null&&n.remove(x.instanceColor)}return{update:u,dispose:p}}const nxe=new Ua,rxe=new $1e,ixe=new _ze,oxe=new J1e,Mge=[],Age=[],Ige=new Float32Array(16),Rge=new Float32Array(9),Oge=new Float32Array(4);function aw(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let u=Mge[o];if(u===void 0&&(u=new Float32Array(o),Mge[o]=u),e!==0){r.toArray(u,0);for(let p=1,m=0;p!==e;++p)m+=n,t[p].toArray(u,m)}return u}function go(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function yo(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function PL(t,e){let n=Age[e];n===void 0&&(n=new Int32Array(e),Age[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function NHe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function FHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(go(n,e))return;t.uniform2fv(this.addr,e),yo(n,e)}}function BHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(go(n,e))return;t.uniform3fv(this.addr,e),yo(n,e)}}function UHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(go(n,e))return;t.uniform4fv(this.addr,e),yo(n,e)}}function VHe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(go(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),yo(n,e)}else{if(go(n,r))return;Oge.set(r),t.uniformMatrix2fv(this.addr,!1,Oge),yo(n,r)}}function jHe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(go(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),yo(n,e)}else{if(go(n,r))return;Rge.set(r),t.uniformMatrix3fv(this.addr,!1,Rge),yo(n,r)}}function zHe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(go(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),yo(n,e)}else{if(go(n,r))return;Ige.set(r),t.uniformMatrix4fv(this.addr,!1,Ige),yo(n,r)}}function HHe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function GHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(go(n,e))return;t.uniform2iv(this.addr,e),yo(n,e)}}function $He(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(go(n,e))return;t.uniform3iv(this.addr,e),yo(n,e)}}function WHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(go(n,e))return;t.uniform4iv(this.addr,e),yo(n,e)}}function KHe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function qHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(go(n,e))return;t.uniform2uiv(this.addr,e),yo(n,e)}}function XHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(go(n,e))return;t.uniform3uiv(this.addr,e),yo(n,e)}}function YHe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(go(n,e))return;t.uniform4uiv(this.addr,e),yo(n,e)}}function ZHe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2D(e||nxe,o)}function QHe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||ixe,o)}function JHe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||oxe,o)}function e9e(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||rxe,o)}function t9e(t){switch(t){case 5126:return NHe;case 35664:return FHe;case 35665:return BHe;case 35666:return UHe;case 35674:return VHe;case 35675:return jHe;case 35676:return zHe;case 5124:case 35670:return HHe;case 35667:case 35671:return GHe;case 35668:case 35672:return $He;case 35669:case 35673:return WHe;case 5125:return KHe;case 36294:return qHe;case 36295:return XHe;case 36296:return YHe;case 35678:case 36198:case 36298:case 36306:case 35682:return ZHe;case 35679:case 36299:case 36307:return QHe;case 35680:case 36300:case 36308:case 36293:return JHe;case 36289:case 36303:case 36311:case 36292:return e9e}}function n9e(t,e){t.uniform1fv(this.addr,e)}function r9e(t,e){const n=aw(e,this.size,2);t.uniform2fv(this.addr,n)}function i9e(t,e){const n=aw(e,this.size,3);t.uniform3fv(this.addr,n)}function o9e(t,e){const n=aw(e,this.size,4);t.uniform4fv(this.addr,n)}function s9e(t,e){const n=aw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function a9e(t,e){const n=aw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function l9e(t,e){const n=aw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function u9e(t,e){t.uniform1iv(this.addr,e)}function c9e(t,e){t.uniform2iv(this.addr,e)}function d9e(t,e){t.uniform3iv(this.addr,e)}function h9e(t,e){t.uniform4iv(this.addr,e)}function p9e(t,e){t.uniform1uiv(this.addr,e)}function f9e(t,e){t.uniform2uiv(this.addr,e)}function m9e(t,e){t.uniform3uiv(this.addr,e)}function v9e(t,e){t.uniform4uiv(this.addr,e)}function g9e(t,e,n){const r=this.cache,o=e.length,u=PL(n,o);go(r,u)||(t.uniform1iv(this.addr,u),yo(r,u));for(let p=0;p!==o;++p)n.setTexture2D(e[p]||nxe,u[p])}function y9e(t,e,n){const r=this.cache,o=e.length,u=PL(n,o);go(r,u)||(t.uniform1iv(this.addr,u),yo(r,u));for(let p=0;p!==o;++p)n.setTexture3D(e[p]||ixe,u[p])}function b9e(t,e,n){const r=this.cache,o=e.length,u=PL(n,o);go(r,u)||(t.uniform1iv(this.addr,u),yo(r,u));for(let p=0;p!==o;++p)n.setTextureCube(e[p]||oxe,u[p])}function _9e(t,e,n){const r=this.cache,o=e.length,u=PL(n,o);go(r,u)||(t.uniform1iv(this.addr,u),yo(r,u));for(let p=0;p!==o;++p)n.setTexture2DArray(e[p]||rxe,u[p])}function w9e(t){switch(t){case 5126:return n9e;case 35664:return r9e;case 35665:return i9e;case 35666:return o9e;case 35674:return s9e;case 35675:return a9e;case 35676:return l9e;case 5124:case 35670:return u9e;case 35667:case 35671:return c9e;case 35668:case 35672:return d9e;case 35669:case 35673:return h9e;case 5125:return p9e;case 36294:return f9e;case 36295:return m9e;case 36296:return v9e;case 35678:case 36198:case 36298:case 36306:case 35682:return g9e;case 35679:case 36299:case 36307:return y9e;case 35680:case 36300:case 36308:case 36293:return b9e;case 36289:case 36303:case 36311:case 36292:return _9e}}class x9e{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=t9e(n.type)}}class S9e{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=w9e(n.type)}}class E9e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const o=this.seq;for(let u=0,p=o.length;u!==p;++u){const m=o[u];m.setValue(e,n[m.id],r)}}}const S8=/(\w+)(\])?(\[|\.)?/g;function Dge(t,e){t.seq.push(e),t.map[e.id]=e}function C9e(t,e,n){const r=t.name,o=r.length;for(S8.lastIndex=0;;){const u=S8.exec(r),p=S8.lastIndex;let m=u[1];const _=u[2]==="]",x=u[3];if(_&&(m=m|0),x===void 0||x==="["&&p+2===o){Dge(n,x===void 0?new x9e(m,t,e):new S9e(m,t,e));break}else{let R=n.map[m];R===void 0&&(R=new E9e(m),Dge(n,R)),n=R}}}class JD{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let o=0;o<r;++o){const u=e.getActiveUniform(n,o),p=e.getUniformLocation(n,u.name);C9e(u,p,this)}}setValue(e,n,r,o){const u=this.map[n];u!==void 0&&u.setValue(e,r,o)}setOptional(e,n,r){const o=n[r];o!==void 0&&this.setValue(e,r,o)}static upload(e,n,r,o){for(let u=0,p=n.length;u!==p;++u){const m=n[u],_=r[m.id];_.needsUpdate!==!1&&m.setValue(e,_.value,o)}}static seqWithValue(e,n){const r=[];for(let o=0,u=e.length;o!==u;++o){const p=e[o];p.id in n&&r.push(p)}return r}}function Lge(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let P9e=0;function k9e(t,e){const n=t.split(`
`),r=[],o=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let p=o;p<u;p++){const m=p+1;r.push(`${m===e?">":" "} ${m}: ${n[p]}`)}return r.join(`
`)}function T9e(t){switch(t){case Kc:return["Linear","( value )"];case tr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Nge(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),o=t.getShaderInfoLog(e).trim();if(r&&o==="")return"";const u=/ERROR: 0:(\d+)/.exec(o);if(u){const p=parseInt(u[1]);return n.toUpperCase()+`

`+o+`

`+k9e(t.getShaderSource(e),p)}else return o}function M9e(t,e){const n=T9e(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function A9e(t,e){let n;switch(e){case Fje:n="Linear";break;case Bje:n="Reinhard";break;case Uje:n="OptimizedCineon";break;case Vje:n="ACESFilmic";break;case jje:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function I9e(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_C).join(`
`)}function R9e(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function O9e(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const u=t.getActiveAttrib(e,o),p=u.name;let m=1;u.type===t.FLOAT_MAT2&&(m=2),u.type===t.FLOAT_MAT3&&(m=3),u.type===t.FLOAT_MAT4&&(m=4),n[p]={type:u.type,location:t.getAttribLocation(e,p),locationSize:m}}return n}function _C(t){return t!==""}function Fge(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Bge(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D9e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n9(t){return t.replace(D9e,N9e)}const L9e=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function N9e(t,e){let n=er[e];if(n===void 0){const r=L9e.get(e);if(r!==void 0)n=er[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return n9(n)}const F9e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uge(t){return t.replace(F9e,B9e)}function B9e(t,e,n,r){let o="";for(let u=parseInt(e);u<parseInt(n);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function Vge(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function U9e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===T1e?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===mje?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ch&&(e="SHADOWMAP_TYPE_VSM"),e}function V9e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case $_:case W_:e="ENVMAP_TYPE_CUBE";break;case CL:e="ENVMAP_TYPE_CUBE_UV";break}return e}function j9e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case W_:e="ENVMAP_MODE_REFRACTION";break}return e}function z9e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case I1e:e="ENVMAP_BLENDING_MULTIPLY";break;case Lje:e="ENVMAP_BLENDING_MIX";break;case Nje:e="ENVMAP_BLENDING_ADD";break}return e}function H9e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function G9e(t,e,n,r){const o=t.getContext(),u=n.defines;let p=n.vertexShader,m=n.fragmentShader;const _=U9e(n),x=V9e(n),M=j9e(n),R=z9e(n),N=H9e(n),G=n.isWebGL2?"":I9e(n),Z=R9e(u),j=o.createProgram();let z,U,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z].filter(_C).join(`
`),z.length>0&&(z+=`
`),U=[G,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z].filter(_C).join(`
`),U.length>0&&(U+=`
`)):(z=[Vge(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+M:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_C).join(`
`),U=[G,Vge(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.envMap?"#define "+M:"",n.envMap?"#define "+R:"",N?"#define CUBEUV_TEXEL_WIDTH "+N.texelWidth:"",N?"#define CUBEUV_TEXEL_HEIGHT "+N.texelHeight:"",N?"#define CUBEUV_MAX_MIP "+N.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Kf?"#define TONE_MAPPING":"",n.toneMapping!==Kf?er.tonemapping_pars_fragment:"",n.toneMapping!==Kf?A9e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",er.colorspace_pars_fragment,M9e("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(_C).join(`
`)),p=n9(p),p=Fge(p,n),p=Bge(p,n),m=n9(m),m=Fge(m,n),m=Bge(m,n),p=Uge(p),m=Uge(m),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,z=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,U=["#define varying in",n.glslVersion===oge?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===oge?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+U);const K=C+z+p,te=C+U+m,pe=Lge(o,o.VERTEX_SHADER,K),Q=Lge(o,o.FRAGMENT_SHADER,te);if(o.attachShader(j,pe),o.attachShader(j,Q),n.index0AttributeName!==void 0?o.bindAttribLocation(j,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(j,0,"position"),o.linkProgram(j),t.debug.checkShaderErrors){const H=o.getProgramInfoLog(j).trim(),ye=o.getShaderInfoLog(pe).trim(),St=o.getShaderInfoLog(Q).trim();let kt=!0,it=!0;if(o.getProgramParameter(j,o.LINK_STATUS)===!1)if(kt=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(o,j,pe,Q);else{const me=Nge(o,pe,"vertex"),lt=Nge(o,Q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(j,o.VALIDATE_STATUS)+`

Program Info Log: `+H+`
`+me+`
`+lt)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(ye===""||St==="")&&(it=!1);it&&(this.diagnostics={runnable:kt,programLog:H,vertexShader:{log:ye,prefix:z},fragmentShader:{log:St,prefix:U}})}o.deleteShader(pe),o.deleteShader(Q);let Se;this.getUniforms=function(){return Se===void 0&&(Se=new JD(o,j)),Se};let Pe;return this.getAttributes=function(){return Pe===void 0&&(Pe=O9e(o,j)),Pe},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(j),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=P9e++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=pe,this.fragmentShader=Q,this}let $9e=0;class W9e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(n),u=this._getShaderStage(r),p=this._getShaderCacheForMaterial(e);return p.has(o)===!1&&(p.add(o),o.usedTimes++),p.has(u)===!1&&(p.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new K9e(e),n.set(e,r)),r}}class K9e{constructor(e){this.id=$9e++,this.code=e,this.usedTimes=0}}function q9e(t,e,n,r,o,u,p){const m=new W1e,_=new W9e,x=[],M=o.isWebGL2,R=o.logarithmicDepthBuffer,N=o.vertexTextures;let G=o.precision;const Z={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function j(H){return H===0?"uv":`uv${H}`}function z(H,ye,St,kt,it){const me=kt.fog,lt=it.geometry,Fe=H.isMeshStandardMaterial?kt.environment:null,vt=(H.isMeshStandardMaterial?n:e).get(H.envMap||Fe),Ge=vt&&vt.mapping===CL?vt.image.height:null,mt=Z[H.type];H.precision!==null&&(G=o.getMaxPrecision(H.precision),G!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",G,"instead."));const Je=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Be=Je!==void 0?Je.length:0;let nt=0;lt.morphAttributes.position!==void 0&&(nt=1),lt.morphAttributes.normal!==void 0&&(nt=2),lt.morphAttributes.color!==void 0&&(nt=3);let Gt,Bt,Dt,Jt;if(mt){const rr=Nc[mt];Gt=rr.vertexShader,Bt=rr.fragmentShader}else Gt=H.vertexShader,Bt=H.fragmentShader,_.update(H),Dt=_.getVertexShaderID(H),Jt=_.getFragmentShaderID(H);const on=t.getRenderTarget(),wn=it.isInstancedMesh===!0,Wn=!!H.map,Kr=!!H.matcap,xn=!!vt,et=!!H.aoMap,Zr=!!H.lightMap,Pn=!!H.bumpMap,Sn=!!H.normalMap,gn=!!H.displacementMap,Mr=!!H.emissiveMap,kn=!!H.metalnessMap,Nn=!!H.roughnessMap,cr=H.anisotropy>0,oi=H.clearcoat>0,Rr=H.iridescence>0,Ee=H.sheen>0,ce=H.transmission>0,ut=cr&&!!H.anisotropyMap,Ut=oi&&!!H.clearcoatMap,Ot=oi&&!!H.clearcoatNormalMap,Ft=oi&&!!H.clearcoatRoughnessMap,mn=Rr&&!!H.iridescenceMap,zt=Rr&&!!H.iridescenceThicknessMap,pt=Ee&&!!H.sheenColorMap,En=Ee&&!!H.sheenRoughnessMap,en=!!H.specularMap,yn=!!H.specularColorMap,rn=!!H.specularIntensityMap,Qt=ce&&!!H.transmissionMap,Bn=ce&&!!H.thicknessMap,pr=!!H.gradientMap,Le=!!H.alphaMap,Ht=H.alphaTest>0,dt=!!H.alphaHash,Vt=!!H.extensions,Kt=!!lt.attributes.uv1,Qn=!!lt.attributes.uv2,Or=!!lt.attributes.uv3;let kr=Kf;return H.toneMapped&&(on===null||on.isXRRenderTarget===!0)&&(kr=t.toneMapping),{isWebGL2:M,shaderID:mt,shaderType:H.type,shaderName:H.name,vertexShader:Gt,fragmentShader:Bt,defines:H.defines,customVertexShaderID:Dt,customFragmentShaderID:Jt,isRawShaderMaterial:H.isRawShaderMaterial===!0,glslVersion:H.glslVersion,precision:G,instancing:wn,instancingColor:wn&&it.instanceColor!==null,supportsVertexTextures:N,outputColorSpace:on===null?t.outputColorSpace:on.isXRRenderTarget===!0?on.texture.colorSpace:Kc,map:Wn,matcap:Kr,envMap:xn,envMapMode:xn&&vt.mapping,envMapCubeUVHeight:Ge,aoMap:et,lightMap:Zr,bumpMap:Pn,normalMap:Sn,displacementMap:N&&gn,emissiveMap:Mr,normalMapObjectSpace:Sn&&H.normalMapType===eze,normalMapTangentSpace:Sn&&H.normalMapType===V1e,metalnessMap:kn,roughnessMap:Nn,anisotropy:cr,anisotropyMap:ut,clearcoat:oi,clearcoatMap:Ut,clearcoatNormalMap:Ot,clearcoatRoughnessMap:Ft,iridescence:Rr,iridescenceMap:mn,iridescenceThicknessMap:zt,sheen:Ee,sheenColorMap:pt,sheenRoughnessMap:En,specularMap:en,specularColorMap:yn,specularIntensityMap:rn,transmission:ce,transmissionMap:Qt,thicknessMap:Bn,gradientMap:pr,opaque:H.transparent===!1&&H.blending===O_,alphaMap:Le,alphaTest:Ht,alphaHash:dt,combine:H.combine,mapUv:Wn&&j(H.map.channel),aoMapUv:et&&j(H.aoMap.channel),lightMapUv:Zr&&j(H.lightMap.channel),bumpMapUv:Pn&&j(H.bumpMap.channel),normalMapUv:Sn&&j(H.normalMap.channel),displacementMapUv:gn&&j(H.displacementMap.channel),emissiveMapUv:Mr&&j(H.emissiveMap.channel),metalnessMapUv:kn&&j(H.metalnessMap.channel),roughnessMapUv:Nn&&j(H.roughnessMap.channel),anisotropyMapUv:ut&&j(H.anisotropyMap.channel),clearcoatMapUv:Ut&&j(H.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&j(H.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ft&&j(H.clearcoatRoughnessMap.channel),iridescenceMapUv:mn&&j(H.iridescenceMap.channel),iridescenceThicknessMapUv:zt&&j(H.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&j(H.sheenColorMap.channel),sheenRoughnessMapUv:En&&j(H.sheenRoughnessMap.channel),specularMapUv:en&&j(H.specularMap.channel),specularColorMapUv:yn&&j(H.specularColorMap.channel),specularIntensityMapUv:rn&&j(H.specularIntensityMap.channel),transmissionMapUv:Qt&&j(H.transmissionMap.channel),thicknessMapUv:Bn&&j(H.thicknessMap.channel),alphaMapUv:Le&&j(H.alphaMap.channel),vertexTangents:!!lt.attributes.tangent&&(Sn||cr),vertexColors:H.vertexColors,vertexAlphas:H.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,vertexUv1s:Kt,vertexUv2s:Qn,vertexUv3s:Or,pointsUvs:it.isPoints===!0&&!!lt.attributes.uv&&(Wn||Le),fog:!!me,useFog:H.fog===!0,fogExp2:me&&me.isFogExp2,flatShading:H.flatShading===!0,sizeAttenuation:H.sizeAttenuation===!0,logarithmicDepthBuffer:R,skinning:it.isSkinnedMesh===!0,morphTargets:lt.morphAttributes.position!==void 0,morphNormals:lt.morphAttributes.normal!==void 0,morphColors:lt.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:nt,numDirLights:ye.directional.length,numPointLights:ye.point.length,numSpotLights:ye.spot.length,numSpotLightMaps:ye.spotLightMap.length,numRectAreaLights:ye.rectArea.length,numHemiLights:ye.hemi.length,numDirLightShadows:ye.directionalShadowMap.length,numPointLightShadows:ye.pointShadowMap.length,numSpotLightShadows:ye.spotShadowMap.length,numSpotLightShadowsWithMaps:ye.numSpotLightShadowsWithMaps,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:H.dithering,shadowMapEnabled:t.shadowMap.enabled&&St.length>0,shadowMapType:t.shadowMap.type,toneMapping:kr,useLegacyLights:t._useLegacyLights,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===ph,flipSided:H.side===ga,useDepthPacking:H.depthPacking>=0,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionDerivatives:Vt&&H.extensions.derivatives===!0,extensionFragDepth:Vt&&H.extensions.fragDepth===!0,extensionDrawBuffers:Vt&&H.extensions.drawBuffers===!0,extensionShaderTextureLOD:Vt&&H.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:M||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||r.has("EXT_shader_texture_lod"),customProgramCacheKey:H.customProgramCacheKey()}}function U(H){const ye=[];if(H.shaderID?ye.push(H.shaderID):(ye.push(H.customVertexShaderID),ye.push(H.customFragmentShaderID)),H.defines!==void 0)for(const St in H.defines)ye.push(St),ye.push(H.defines[St]);return H.isRawShaderMaterial===!1&&(C(ye,H),K(ye,H),ye.push(t.outputColorSpace)),ye.push(H.customProgramCacheKey),ye.join()}function C(H,ye){H.push(ye.precision),H.push(ye.outputColorSpace),H.push(ye.envMapMode),H.push(ye.envMapCubeUVHeight),H.push(ye.mapUv),H.push(ye.alphaMapUv),H.push(ye.lightMapUv),H.push(ye.aoMapUv),H.push(ye.bumpMapUv),H.push(ye.normalMapUv),H.push(ye.displacementMapUv),H.push(ye.emissiveMapUv),H.push(ye.metalnessMapUv),H.push(ye.roughnessMapUv),H.push(ye.anisotropyMapUv),H.push(ye.clearcoatMapUv),H.push(ye.clearcoatNormalMapUv),H.push(ye.clearcoatRoughnessMapUv),H.push(ye.iridescenceMapUv),H.push(ye.iridescenceThicknessMapUv),H.push(ye.sheenColorMapUv),H.push(ye.sheenRoughnessMapUv),H.push(ye.specularMapUv),H.push(ye.specularColorMapUv),H.push(ye.specularIntensityMapUv),H.push(ye.transmissionMapUv),H.push(ye.thicknessMapUv),H.push(ye.combine),H.push(ye.fogExp2),H.push(ye.sizeAttenuation),H.push(ye.morphTargetsCount),H.push(ye.morphAttributeCount),H.push(ye.numDirLights),H.push(ye.numPointLights),H.push(ye.numSpotLights),H.push(ye.numSpotLightMaps),H.push(ye.numHemiLights),H.push(ye.numRectAreaLights),H.push(ye.numDirLightShadows),H.push(ye.numPointLightShadows),H.push(ye.numSpotLightShadows),H.push(ye.numSpotLightShadowsWithMaps),H.push(ye.shadowMapType),H.push(ye.toneMapping),H.push(ye.numClippingPlanes),H.push(ye.numClipIntersection),H.push(ye.depthPacking)}function K(H,ye){m.disableAll(),ye.isWebGL2&&m.enable(0),ye.supportsVertexTextures&&m.enable(1),ye.instancing&&m.enable(2),ye.instancingColor&&m.enable(3),ye.matcap&&m.enable(4),ye.envMap&&m.enable(5),ye.normalMapObjectSpace&&m.enable(6),ye.normalMapTangentSpace&&m.enable(7),ye.clearcoat&&m.enable(8),ye.iridescence&&m.enable(9),ye.alphaTest&&m.enable(10),ye.vertexColors&&m.enable(11),ye.vertexAlphas&&m.enable(12),ye.vertexUv1s&&m.enable(13),ye.vertexUv2s&&m.enable(14),ye.vertexUv3s&&m.enable(15),ye.vertexTangents&&m.enable(16),ye.anisotropy&&m.enable(17),H.push(m.mask),m.disableAll(),ye.fog&&m.enable(0),ye.useFog&&m.enable(1),ye.flatShading&&m.enable(2),ye.logarithmicDepthBuffer&&m.enable(3),ye.skinning&&m.enable(4),ye.morphTargets&&m.enable(5),ye.morphNormals&&m.enable(6),ye.morphColors&&m.enable(7),ye.premultipliedAlpha&&m.enable(8),ye.shadowMapEnabled&&m.enable(9),ye.useLegacyLights&&m.enable(10),ye.doubleSided&&m.enable(11),ye.flipSided&&m.enable(12),ye.useDepthPacking&&m.enable(13),ye.dithering&&m.enable(14),ye.transmission&&m.enable(15),ye.sheen&&m.enable(16),ye.opaque&&m.enable(17),ye.pointsUvs&&m.enable(18),H.push(m.mask)}function te(H){const ye=Z[H.type];let St;if(ye){const kt=Nc[ye];St=Oze.clone(kt.uniforms)}else St=H.uniforms;return St}function pe(H,ye){let St;for(let kt=0,it=x.length;kt<it;kt++){const me=x[kt];if(me.cacheKey===ye){St=me,++St.usedTimes;break}}return St===void 0&&(St=new G9e(t,ye,H,u),x.push(St)),St}function Q(H){if(--H.usedTimes===0){const ye=x.indexOf(H);x[ye]=x[x.length-1],x.pop(),H.destroy()}}function Se(H){_.remove(H)}function Pe(){_.dispose()}return{getParameters:z,getProgramCacheKey:U,getUniforms:te,acquireProgram:pe,releaseProgram:Q,releaseShaderCache:Se,programs:x,dispose:Pe}}function X9e(){let t=new WeakMap;function e(u){let p=t.get(u);return p===void 0&&(p={},t.set(u,p)),p}function n(u){t.delete(u)}function r(u,p,m){t.get(u)[p]=m}function o(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:o}}function Y9e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function jge(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zge(){const t=[];let e=0;const n=[],r=[],o=[];function u(){e=0,n.length=0,r.length=0,o.length=0}function p(R,N,G,Z,j,z){let U=t[e];return U===void 0?(U={id:R.id,object:R,geometry:N,material:G,groupOrder:Z,renderOrder:R.renderOrder,z:j,group:z},t[e]=U):(U.id=R.id,U.object=R,U.geometry=N,U.material=G,U.groupOrder=Z,U.renderOrder=R.renderOrder,U.z=j,U.group=z),e++,U}function m(R,N,G,Z,j,z){const U=p(R,N,G,Z,j,z);G.transmission>0?r.push(U):G.transparent===!0?o.push(U):n.push(U)}function _(R,N,G,Z,j,z){const U=p(R,N,G,Z,j,z);G.transmission>0?r.unshift(U):G.transparent===!0?o.unshift(U):n.unshift(U)}function x(R,N){n.length>1&&n.sort(R||Y9e),r.length>1&&r.sort(N||jge),o.length>1&&o.sort(N||jge)}function M(){for(let R=e,N=t.length;R<N;R++){const G=t[R];if(G.id===null)break;G.id=null,G.object=null,G.geometry=null,G.material=null,G.group=null}}return{opaque:n,transmissive:r,transparent:o,init:u,push:m,unshift:_,finish:M,sort:x}}function Z9e(){let t=new WeakMap;function e(r,o){const u=t.get(r);let p;return u===void 0?(p=new zge,t.set(r,[p])):o>=u.length?(p=new zge,u.push(p)):p=u[o],p}function n(){t=new WeakMap}return{get:e,dispose:n}}function Q9e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ht,color:new fi};break;case"SpotLight":n={position:new ht,direction:new ht,color:new fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ht,color:new fi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ht,skyColor:new fi,groundColor:new fi};break;case"RectAreaLight":n={color:new fi,position:new ht,halfWidth:new ht,halfHeight:new ht};break}return t[e.id]=n,n}}}function J9e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let eGe=0;function tGe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function nGe(t,e){const n=new Q9e,r=J9e(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let M=0;M<9;M++)o.probe.push(new ht);const u=new ht,p=new Ro,m=new Ro;function _(M,R){let N=0,G=0,Z=0;for(let St=0;St<9;St++)o.probe[St].set(0,0,0);let j=0,z=0,U=0,C=0,K=0,te=0,pe=0,Q=0,Se=0,Pe=0;M.sort(tGe);const H=R===!0?Math.PI:1;for(let St=0,kt=M.length;St<kt;St++){const it=M[St],me=it.color,lt=it.intensity,Fe=it.distance,vt=it.shadow&&it.shadow.map?it.shadow.map.texture:null;if(it.isAmbientLight)N+=me.r*lt*H,G+=me.g*lt*H,Z+=me.b*lt*H;else if(it.isLightProbe)for(let Ge=0;Ge<9;Ge++)o.probe[Ge].addScaledVector(it.sh.coefficients[Ge],lt);else if(it.isDirectionalLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*H),it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.directionalShadow[j]=Je,o.directionalShadowMap[j]=vt,o.directionalShadowMatrix[j]=it.shadow.matrix,te++}o.directional[j]=Ge,j++}else if(it.isSpotLight){const Ge=n.get(it);Ge.position.setFromMatrixPosition(it.matrixWorld),Ge.color.copy(me).multiplyScalar(lt*H),Ge.distance=Fe,Ge.coneCos=Math.cos(it.angle),Ge.penumbraCos=Math.cos(it.angle*(1-it.penumbra)),Ge.decay=it.decay,o.spot[U]=Ge;const mt=it.shadow;if(it.map&&(o.spotLightMap[Se]=it.map,Se++,mt.updateMatrices(it),it.castShadow&&Pe++),o.spotLightMatrix[U]=mt.matrix,it.castShadow){const Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.spotShadow[U]=Je,o.spotShadowMap[U]=vt,Q++}U++}else if(it.isRectAreaLight){const Ge=n.get(it);Ge.color.copy(me).multiplyScalar(lt),Ge.halfWidth.set(it.width*.5,0,0),Ge.halfHeight.set(0,it.height*.5,0),o.rectArea[C]=Ge,C++}else if(it.isPointLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*H),Ge.distance=it.distance,Ge.decay=it.decay,it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,Je.shadowCameraNear=mt.camera.near,Je.shadowCameraFar=mt.camera.far,o.pointShadow[z]=Je,o.pointShadowMap[z]=vt,o.pointShadowMatrix[z]=it.shadow.matrix,pe++}o.point[z]=Ge,z++}else if(it.isHemisphereLight){const Ge=n.get(it);Ge.skyColor.copy(it.color).multiplyScalar(lt*H),Ge.groundColor.copy(it.groundColor).multiplyScalar(lt*H),o.hemi[K]=Ge,K++}}C>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Xt.LTC_FLOAT_1,o.rectAreaLTC2=Xt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Xt.LTC_HALF_1,o.rectAreaLTC2=Xt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=N,o.ambient[1]=G,o.ambient[2]=Z;const ye=o.hash;(ye.directionalLength!==j||ye.pointLength!==z||ye.spotLength!==U||ye.rectAreaLength!==C||ye.hemiLength!==K||ye.numDirectionalShadows!==te||ye.numPointShadows!==pe||ye.numSpotShadows!==Q||ye.numSpotMaps!==Se)&&(o.directional.length=j,o.spot.length=U,o.rectArea.length=C,o.point.length=z,o.hemi.length=K,o.directionalShadow.length=te,o.directionalShadowMap.length=te,o.pointShadow.length=pe,o.pointShadowMap.length=pe,o.spotShadow.length=Q,o.spotShadowMap.length=Q,o.directionalShadowMatrix.length=te,o.pointShadowMatrix.length=pe,o.spotLightMatrix.length=Q+Se-Pe,o.spotLightMap.length=Se,o.numSpotLightShadowsWithMaps=Pe,ye.directionalLength=j,ye.pointLength=z,ye.spotLength=U,ye.rectAreaLength=C,ye.hemiLength=K,ye.numDirectionalShadows=te,ye.numPointShadows=pe,ye.numSpotShadows=Q,ye.numSpotMaps=Se,o.version=eGe++)}function x(M,R){let N=0,G=0,Z=0,j=0,z=0;const U=R.matrixWorldInverse;for(let C=0,K=M.length;C<K;C++){const te=M[C];if(te.isDirectionalLight){const pe=o.directional[N];pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),N++}else if(te.isSpotLight){const pe=o.spot[Z];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),Z++}else if(te.isRectAreaLight){const pe=o.rectArea[j];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),m.identity(),p.copy(te.matrixWorld),p.premultiply(U),m.extractRotation(p),pe.halfWidth.set(te.width*.5,0,0),pe.halfHeight.set(0,te.height*.5,0),pe.halfWidth.applyMatrix4(m),pe.halfHeight.applyMatrix4(m),j++}else if(te.isPointLight){const pe=o.point[G];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),G++}else if(te.isHemisphereLight){const pe=o.hemi[z];pe.direction.setFromMatrixPosition(te.matrixWorld),pe.direction.transformDirection(U),z++}}}return{setup:_,setupView:x,state:o}}function Hge(t,e){const n=new nGe(t,e),r=[],o=[];function u(){r.length=0,o.length=0}function p(R){r.push(R)}function m(R){o.push(R)}function _(R){n.setup(r,R)}function x(R){n.setupView(r,R)}return{init:u,state:{lightsArray:r,shadowsArray:o,lights:n},setupLights:_,setupLightsView:x,pushLight:p,pushShadow:m}}function rGe(t,e){let n=new WeakMap;function r(u,p=0){const m=n.get(u);let _;return m===void 0?(_=new Hge(t,e),n.set(u,[_])):p>=m.length?(_=new Hge(t,e),m.push(_)):_=m[p],_}function o(){n=new WeakMap}return{get:r,dispose:o}}class iGe extends BP{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Qje,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class oGe extends BP{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sGe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,aGe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lGe(t,e,n){let r=new exe;const o=new Wr,u=new Wr,p=new Xo,m=new iGe({depthPacking:Jje}),_=new oGe,x={},M=n.maxTextureSize,R={[tm]:ga,[ga]:tm,[ph]:ph},N=new Vg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wr},radius:{value:4}},vertexShader:sGe,fragmentShader:aGe}),G=N.clone();G.defines.HORIZONTAL_PASS=1;const Z=new um;Z.setAttribute("position",new jc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new bh(Z,N),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T1e;let U=this.type;this.render=function(pe,Q,Se){if(z.enabled===!1||z.autoUpdate===!1&&z.needsUpdate===!1||pe.length===0)return;const Pe=t.getRenderTarget(),H=t.getActiveCubeFace(),ye=t.getActiveMipmapLevel(),St=t.state;St.setBlending(Wf),St.buffers.color.setClear(1,1,1,1),St.buffers.depth.setTest(!0),St.setScissorTest(!1);const kt=U!==ch&&this.type===ch,it=U===ch&&this.type!==ch;for(let me=0,lt=pe.length;me<lt;me++){const Fe=pe[me],vt=Fe.shadow;if(vt===void 0){console.warn("THREE.WebGLShadowMap:",Fe,"has no shadow.");continue}if(vt.autoUpdate===!1&&vt.needsUpdate===!1)continue;o.copy(vt.mapSize);const Ge=vt.getFrameExtents();if(o.multiply(Ge),u.copy(vt.mapSize),(o.x>M||o.y>M)&&(o.x>M&&(u.x=Math.floor(M/Ge.x),o.x=u.x*Ge.x,vt.mapSize.x=u.x),o.y>M&&(u.y=Math.floor(M/Ge.y),o.y=u.y*Ge.y,vt.mapSize.y=u.y)),vt.map===null||kt===!0||it===!0){const Je=this.type!==ch?{minFilter:Vs,magFilter:Vs}:{};vt.map!==null&&vt.map.dispose(),vt.map=new Ug(o.x,o.y,Je),vt.map.texture.name=Fe.name+".shadowMap",vt.camera.updateProjectionMatrix()}t.setRenderTarget(vt.map),t.clear();const mt=vt.getViewportCount();for(let Je=0;Je<mt;Je++){const Be=vt.getViewport(Je);p.set(u.x*Be.x,u.y*Be.y,u.x*Be.z,u.y*Be.w),St.viewport(p),vt.updateMatrices(Fe,Je),r=vt.getFrustum(),te(Q,Se,vt.camera,Fe,this.type)}vt.isPointLightShadow!==!0&&this.type===ch&&C(vt,Se),vt.needsUpdate=!1}U=this.type,z.needsUpdate=!1,t.setRenderTarget(Pe,H,ye)};function C(pe,Q){const Se=e.update(j);N.defines.VSM_SAMPLES!==pe.blurSamples&&(N.defines.VSM_SAMPLES=pe.blurSamples,G.defines.VSM_SAMPLES=pe.blurSamples,N.needsUpdate=!0,G.needsUpdate=!0),pe.mapPass===null&&(pe.mapPass=new Ug(o.x,o.y)),N.uniforms.shadow_pass.value=pe.map.texture,N.uniforms.resolution.value=pe.mapSize,N.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.mapPass),t.clear(),t.renderBufferDirect(Q,null,Se,N,j,null),G.uniforms.shadow_pass.value=pe.mapPass.texture,G.uniforms.resolution.value=pe.mapSize,G.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.map),t.clear(),t.renderBufferDirect(Q,null,Se,G,j,null)}function K(pe,Q,Se,Pe){let H=null;const ye=Se.isPointLight===!0?pe.customDistanceMaterial:pe.customDepthMaterial;if(ye!==void 0)H=ye;else if(H=Se.isPointLight===!0?_:m,t.localClippingEnabled&&Q.clipShadows===!0&&Array.isArray(Q.clippingPlanes)&&Q.clippingPlanes.length!==0||Q.displacementMap&&Q.displacementScale!==0||Q.alphaMap&&Q.alphaTest>0||Q.map&&Q.alphaTest>0){const St=H.uuid,kt=Q.uuid;let it=x[St];it===void 0&&(it={},x[St]=it);let me=it[kt];me===void 0&&(me=H.clone(),it[kt]=me),H=me}if(H.visible=Q.visible,H.wireframe=Q.wireframe,Pe===ch?H.side=Q.shadowSide!==null?Q.shadowSide:Q.side:H.side=Q.shadowSide!==null?Q.shadowSide:R[Q.side],H.alphaMap=Q.alphaMap,H.alphaTest=Q.alphaTest,H.map=Q.map,H.clipShadows=Q.clipShadows,H.clippingPlanes=Q.clippingPlanes,H.clipIntersection=Q.clipIntersection,H.displacementMap=Q.displacementMap,H.displacementScale=Q.displacementScale,H.displacementBias=Q.displacementBias,H.wireframeLinewidth=Q.wireframeLinewidth,H.linewidth=Q.linewidth,Se.isPointLight===!0&&H.isMeshDistanceMaterial===!0){const St=t.properties.get(H);St.light=Se}return H}function te(pe,Q,Se,Pe,H){if(pe.visible===!1)return;if(pe.layers.test(Q.layers)&&(pe.isMesh||pe.isLine||pe.isPoints)&&(pe.castShadow||pe.receiveShadow&&H===ch)&&(!pe.frustumCulled||r.intersectsObject(pe))){pe.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,pe.matrixWorld);const kt=e.update(pe),it=pe.material;if(Array.isArray(it)){const me=kt.groups;for(let lt=0,Fe=me.length;lt<Fe;lt++){const vt=me[lt],Ge=it[vt.materialIndex];if(Ge&&Ge.visible){const mt=K(pe,Ge,Pe,H);t.renderBufferDirect(Se,null,kt,mt,pe,vt)}}}else if(it.visible){const me=K(pe,it,Pe,H);t.renderBufferDirect(Se,null,kt,me,pe,null)}}const St=pe.children;for(let kt=0,it=St.length;kt<it;kt++)te(St[kt],Q,Se,Pe,H)}}function uGe(t,e,n){const r=n.isWebGL2;function o(){let Le=!1;const Ht=new Xo;let dt=null;const Vt=new Xo(0,0,0,0);return{setMask:function(Kt){dt!==Kt&&!Le&&(t.colorMask(Kt,Kt,Kt,Kt),dt=Kt)},setLocked:function(Kt){Le=Kt},setClear:function(Kt,Qn,Or,kr,Jo){Jo===!0&&(Kt*=kr,Qn*=kr,Or*=kr),Ht.set(Kt,Qn,Or,kr),Vt.equals(Ht)===!1&&(t.clearColor(Kt,Qn,Or,kr),Vt.copy(Ht))},reset:function(){Le=!1,dt=null,Vt.set(-1,0,0,0)}}}function u(){let Le=!1,Ht=null,dt=null,Vt=null;return{setTest:function(Kt){Kt?on(t.DEPTH_TEST):wn(t.DEPTH_TEST)},setMask:function(Kt){Ht!==Kt&&!Le&&(t.depthMask(Kt),Ht=Kt)},setFunc:function(Kt){if(dt!==Kt){switch(Kt){case Tje:t.depthFunc(t.NEVER);break;case Mje:t.depthFunc(t.ALWAYS);break;case Aje:t.depthFunc(t.LESS);break;case qH:t.depthFunc(t.LEQUAL);break;case Ije:t.depthFunc(t.EQUAL);break;case Rje:t.depthFunc(t.GEQUAL);break;case Oje:t.depthFunc(t.GREATER);break;case Dje:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}dt=Kt}},setLocked:function(Kt){Le=Kt},setClear:function(Kt){Vt!==Kt&&(t.clearDepth(Kt),Vt=Kt)},reset:function(){Le=!1,Ht=null,dt=null,Vt=null}}}function p(){let Le=!1,Ht=null,dt=null,Vt=null,Kt=null,Qn=null,Or=null,kr=null,Jo=null;return{setTest:function(rr){Le||(rr?on(t.STENCIL_TEST):wn(t.STENCIL_TEST))},setMask:function(rr){Ht!==rr&&!Le&&(t.stencilMask(rr),Ht=rr)},setFunc:function(rr,Vr,Tr){(dt!==rr||Vt!==Vr||Kt!==Tr)&&(t.stencilFunc(rr,Vr,Tr),dt=rr,Vt=Vr,Kt=Tr)},setOp:function(rr,Vr,Tr){(Qn!==rr||Or!==Vr||kr!==Tr)&&(t.stencilOp(rr,Vr,Tr),Qn=rr,Or=Vr,kr=Tr)},setLocked:function(rr){Le=rr},setClear:function(rr){Jo!==rr&&(t.clearStencil(rr),Jo=rr)},reset:function(){Le=!1,Ht=null,dt=null,Vt=null,Kt=null,Qn=null,Or=null,kr=null,Jo=null}}}const m=new o,_=new u,x=new p,M=new WeakMap,R=new WeakMap;let N={},G={},Z=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Q=null,Se=null,Pe=null,H=!1,ye=null,St=null,kt=null,it=null,me=null;const lt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Fe=!1,vt=0;const Ge=t.getParameter(t.VERSION);Ge.indexOf("WebGL")!==-1?(vt=parseFloat(/^WebGL (\d)/.exec(Ge)[1]),Fe=vt>=1):Ge.indexOf("OpenGL ES")!==-1&&(vt=parseFloat(/^OpenGL ES (\d)/.exec(Ge)[1]),Fe=vt>=2);let mt=null,Je={};const Be=t.getParameter(t.SCISSOR_BOX),nt=t.getParameter(t.VIEWPORT),Gt=new Xo().fromArray(Be),Bt=new Xo().fromArray(nt);function Dt(Le,Ht,dt,Vt){const Kt=new Uint8Array(4),Qn=t.createTexture();t.bindTexture(Le,Qn),t.texParameteri(Le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Or=0;Or<dt;Or++)r&&(Le===t.TEXTURE_3D||Le===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ht,0,t.RGBA,1,1,Vt,0,t.RGBA,t.UNSIGNED_BYTE,Kt):t.texImage2D(Ht+Or,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Kt);return Qn}const Jt={};Jt[t.TEXTURE_2D]=Dt(t.TEXTURE_2D,t.TEXTURE_2D,1),Jt[t.TEXTURE_CUBE_MAP]=Dt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Jt[t.TEXTURE_2D_ARRAY]=Dt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Jt[t.TEXTURE_3D]=Dt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),m.setClear(0,0,0,1),_.setClear(1),x.setClear(0),on(t.DEPTH_TEST),_.setFunc(qH),gn(!1),Mr(Tve),on(t.CULL_FACE),Pn(Wf);function on(Le){N[Le]!==!0&&(t.enable(Le),N[Le]=!0)}function wn(Le){N[Le]!==!1&&(t.disable(Le),N[Le]=!1)}function Wn(Le,Ht){return G[Le]!==Ht?(t.bindFramebuffer(Le,Ht),G[Le]=Ht,r&&(Le===t.DRAW_FRAMEBUFFER&&(G[t.FRAMEBUFFER]=Ht),Le===t.FRAMEBUFFER&&(G[t.DRAW_FRAMEBUFFER]=Ht)),!0):!1}function Kr(Le,Ht){let dt=j,Vt=!1;if(Le)if(dt=Z.get(Ht),dt===void 0&&(dt=[],Z.set(Ht,dt)),Le.isWebGLMultipleRenderTargets){const Kt=Le.texture;if(dt.length!==Kt.length||dt[0]!==t.COLOR_ATTACHMENT0){for(let Qn=0,Or=Kt.length;Qn<Or;Qn++)dt[Qn]=t.COLOR_ATTACHMENT0+Qn;dt.length=Kt.length,Vt=!0}}else dt[0]!==t.COLOR_ATTACHMENT0&&(dt[0]=t.COLOR_ATTACHMENT0,Vt=!0);else dt[0]!==t.BACK&&(dt[0]=t.BACK,Vt=!0);Vt&&(n.isWebGL2?t.drawBuffers(dt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(dt))}function xn(Le){return z!==Le?(t.useProgram(Le),z=Le,!0):!1}const et={[o_]:t.FUNC_ADD,[gje]:t.FUNC_SUBTRACT,[yje]:t.FUNC_REVERSE_SUBTRACT};if(r)et[Rve]=t.MIN,et[Ove]=t.MAX;else{const Le=e.get("EXT_blend_minmax");Le!==null&&(et[Rve]=Le.MIN_EXT,et[Ove]=Le.MAX_EXT)}const Zr={[bje]:t.ZERO,[_je]:t.ONE,[wje]:t.SRC_COLOR,[M1e]:t.SRC_ALPHA,[kje]:t.SRC_ALPHA_SATURATE,[Cje]:t.DST_COLOR,[Sje]:t.DST_ALPHA,[xje]:t.ONE_MINUS_SRC_COLOR,[A1e]:t.ONE_MINUS_SRC_ALPHA,[Pje]:t.ONE_MINUS_DST_COLOR,[Eje]:t.ONE_MINUS_DST_ALPHA};function Pn(Le,Ht,dt,Vt,Kt,Qn,Or,kr){if(Le===Wf){U===!0&&(wn(t.BLEND),U=!1);return}if(U===!1&&(on(t.BLEND),U=!0),Le!==vje){if(Le!==C||kr!==H){if((K!==o_||Q!==o_)&&(t.blendEquation(t.FUNC_ADD),K=o_,Q=o_),kr)switch(Le){case O_:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Mve:t.blendFunc(t.ONE,t.ONE);break;case Ave:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Ive:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}else switch(Le){case O_:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Mve:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Ave:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Ive:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}te=null,pe=null,Se=null,Pe=null,C=Le,H=kr}return}Kt=Kt||Ht,Qn=Qn||dt,Or=Or||Vt,(Ht!==K||Kt!==Q)&&(t.blendEquationSeparate(et[Ht],et[Kt]),K=Ht,Q=Kt),(dt!==te||Vt!==pe||Qn!==Se||Or!==Pe)&&(t.blendFuncSeparate(Zr[dt],Zr[Vt],Zr[Qn],Zr[Or]),te=dt,pe=Vt,Se=Qn,Pe=Or),C=Le,H=!1}function Sn(Le,Ht){Le.side===ph?wn(t.CULL_FACE):on(t.CULL_FACE);let dt=Le.side===ga;Ht&&(dt=!dt),gn(dt),Le.blending===O_&&Le.transparent===!1?Pn(Wf):Pn(Le.blending,Le.blendEquation,Le.blendSrc,Le.blendDst,Le.blendEquationAlpha,Le.blendSrcAlpha,Le.blendDstAlpha,Le.premultipliedAlpha),_.setFunc(Le.depthFunc),_.setTest(Le.depthTest),_.setMask(Le.depthWrite),m.setMask(Le.colorWrite);const Vt=Le.stencilWrite;x.setTest(Vt),Vt&&(x.setMask(Le.stencilWriteMask),x.setFunc(Le.stencilFunc,Le.stencilRef,Le.stencilFuncMask),x.setOp(Le.stencilFail,Le.stencilZFail,Le.stencilZPass)),Nn(Le.polygonOffset,Le.polygonOffsetFactor,Le.polygonOffsetUnits),Le.alphaToCoverage===!0?on(t.SAMPLE_ALPHA_TO_COVERAGE):wn(t.SAMPLE_ALPHA_TO_COVERAGE)}function gn(Le){ye!==Le&&(Le?t.frontFace(t.CW):t.frontFace(t.CCW),ye=Le)}function Mr(Le){Le!==pje?(on(t.CULL_FACE),Le!==St&&(Le===Tve?t.cullFace(t.BACK):Le===fje?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):wn(t.CULL_FACE),St=Le}function kn(Le){Le!==kt&&(Fe&&t.lineWidth(Le),kt=Le)}function Nn(Le,Ht,dt){Le?(on(t.POLYGON_OFFSET_FILL),(it!==Ht||me!==dt)&&(t.polygonOffset(Ht,dt),it=Ht,me=dt)):wn(t.POLYGON_OFFSET_FILL)}function cr(Le){Le?on(t.SCISSOR_TEST):wn(t.SCISSOR_TEST)}function oi(Le){Le===void 0&&(Le=t.TEXTURE0+lt-1),mt!==Le&&(t.activeTexture(Le),mt=Le)}function Rr(Le,Ht,dt){dt===void 0&&(mt===null?dt=t.TEXTURE0+lt-1:dt=mt);let Vt=Je[dt];Vt===void 0&&(Vt={type:void 0,texture:void 0},Je[dt]=Vt),(Vt.type!==Le||Vt.texture!==Ht)&&(mt!==dt&&(t.activeTexture(dt),mt=dt),t.bindTexture(Le,Ht||Jt[Le]),Vt.type=Le,Vt.texture=Ht)}function Ee(){const Le=Je[mt];Le!==void 0&&Le.type!==void 0&&(t.bindTexture(Le.type,null),Le.type=void 0,Le.texture=void 0)}function ce(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function ut(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ut(){try{t.texSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ot(){try{t.texSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ft(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function mn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function zt(){try{t.texStorage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function pt(){try{t.texStorage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function En(){try{t.texImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function en(){try{t.texImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function yn(Le){Gt.equals(Le)===!1&&(t.scissor(Le.x,Le.y,Le.z,Le.w),Gt.copy(Le))}function rn(Le){Bt.equals(Le)===!1&&(t.viewport(Le.x,Le.y,Le.z,Le.w),Bt.copy(Le))}function Qt(Le,Ht){let dt=R.get(Ht);dt===void 0&&(dt=new WeakMap,R.set(Ht,dt));let Vt=dt.get(Le);Vt===void 0&&(Vt=t.getUniformBlockIndex(Ht,Le.name),dt.set(Le,Vt))}function Bn(Le,Ht){const Vt=R.get(Ht).get(Le);M.get(Ht)!==Vt&&(t.uniformBlockBinding(Ht,Vt,Le.__bindingPointIndex),M.set(Ht,Vt))}function pr(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),N={},mt=null,Je={},G={},Z=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Q=null,Se=null,Pe=null,H=!1,ye=null,St=null,kt=null,it=null,me=null,Gt.set(0,0,t.canvas.width,t.canvas.height),Bt.set(0,0,t.canvas.width,t.canvas.height),m.reset(),_.reset(),x.reset()}return{buffers:{color:m,depth:_,stencil:x},enable:on,disable:wn,bindFramebuffer:Wn,drawBuffers:Kr,useProgram:xn,setBlending:Pn,setMaterial:Sn,setFlipSided:gn,setCullFace:Mr,setLineWidth:kn,setPolygonOffset:Nn,setScissorTest:cr,activeTexture:oi,bindTexture:Rr,unbindTexture:Ee,compressedTexImage2D:ce,compressedTexImage3D:ut,texImage2D:En,texImage3D:en,updateUBOMapping:Qt,uniformBlockBinding:Bn,texStorage2D:zt,texStorage3D:pt,texSubImage2D:Ut,texSubImage3D:Ot,compressedTexSubImage2D:Ft,compressedTexSubImage3D:mn,scissor:yn,viewport:rn,reset:pr}}function cGe(t,e,n,r,o,u,p){const m=o.isWebGL2,_=o.maxTextures,x=o.maxCubemapSize,M=o.maxTextureSize,R=o.maxSamples,N=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,G=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Z=new WeakMap;let j;const z=new WeakMap;let U=!1;try{U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(Ee,ce){return U?new OffscreenCanvas(Ee,ce):U3("canvas")}function K(Ee,ce,ut,Ut){let Ot=1;if((Ee.width>Ut||Ee.height>Ut)&&(Ot=Ut/Math.max(Ee.width,Ee.height)),Ot<1||ce===!0)if(typeof HTMLImageElement<"u"&&Ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ee instanceof ImageBitmap){const Ft=ce?t9:Math.floor,mn=Ft(Ot*Ee.width),zt=Ft(Ot*Ee.height);j===void 0&&(j=C(mn,zt));const pt=ut?C(mn,zt):j;return pt.width=mn,pt.height=zt,pt.getContext("2d").drawImage(Ee,0,0,mn,zt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+mn+"x"+zt+")."),pt}else return"data"in Ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),Ee;return Ee}function te(Ee){return sge(Ee.width)&&sge(Ee.height)}function pe(Ee){return m?!1:Ee.wrapS!==Lu||Ee.wrapT!==Lu||Ee.minFilter!==Vs&&Ee.minFilter!==Il}function Q(Ee,ce){return Ee.generateMipmaps&&ce&&Ee.minFilter!==Vs&&Ee.minFilter!==Il}function Se(Ee){t.generateMipmap(Ee)}function Pe(Ee,ce,ut,Ut,Ot=!1){if(m===!1)return ce;if(Ee!==null){if(t[Ee]!==void 0)return t[Ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ee+"'")}let Ft=ce;return ce===t.RED&&(ut===t.FLOAT&&(Ft=t.R32F),ut===t.HALF_FLOAT&&(Ft=t.R16F),ut===t.UNSIGNED_BYTE&&(Ft=t.R8)),ce===t.RED_INTEGER&&(ut===t.UNSIGNED_BYTE&&(Ft=t.R8UI),ut===t.UNSIGNED_SHORT&&(Ft=t.R16UI),ut===t.UNSIGNED_INT&&(Ft=t.R32UI),ut===t.BYTE&&(Ft=t.R8I),ut===t.SHORT&&(Ft=t.R16I),ut===t.INT&&(Ft=t.R32I)),ce===t.RG&&(ut===t.FLOAT&&(Ft=t.RG32F),ut===t.HALF_FLOAT&&(Ft=t.RG16F),ut===t.UNSIGNED_BYTE&&(Ft=t.RG8)),ce===t.RGBA&&(ut===t.FLOAT&&(Ft=t.RGBA32F),ut===t.HALF_FLOAT&&(Ft=t.RGBA16F),ut===t.UNSIGNED_BYTE&&(Ft=Ut===tr&&Ot===!1?t.SRGB8_ALPHA8:t.RGBA8),ut===t.UNSIGNED_SHORT_4_4_4_4&&(Ft=t.RGBA4),ut===t.UNSIGNED_SHORT_5_5_5_1&&(Ft=t.RGB5_A1)),(Ft===t.R16F||Ft===t.R32F||Ft===t.RG16F||Ft===t.RG32F||Ft===t.RGBA16F||Ft===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ft}function H(Ee,ce,ut){return Q(Ee,ut)===!0||Ee.isFramebufferTexture&&Ee.minFilter!==Vs&&Ee.minFilter!==Il?Math.log2(Math.max(ce.width,ce.height))+1:Ee.mipmaps!==void 0&&Ee.mipmaps.length>0?Ee.mipmaps.length:Ee.isCompressedTexture&&Array.isArray(Ee.image)?ce.mipmaps.length:1}function ye(Ee){return Ee===Vs||Ee===Dve||Ee===X6?t.NEAREST:t.LINEAR}function St(Ee){const ce=Ee.target;ce.removeEventListener("dispose",St),it(ce),ce.isVideoTexture&&Z.delete(ce)}function kt(Ee){const ce=Ee.target;ce.removeEventListener("dispose",kt),lt(ce)}function it(Ee){const ce=r.get(Ee);if(ce.__webglInit===void 0)return;const ut=Ee.source,Ut=z.get(ut);if(Ut){const Ot=Ut[ce.__cacheKey];Ot.usedTimes--,Ot.usedTimes===0&&me(Ee),Object.keys(Ut).length===0&&z.delete(ut)}r.remove(Ee)}function me(Ee){const ce=r.get(Ee);t.deleteTexture(ce.__webglTexture);const ut=Ee.source,Ut=z.get(ut);delete Ut[ce.__cacheKey],p.memory.textures--}function lt(Ee){const ce=Ee.texture,ut=r.get(Ee),Ut=r.get(ce);if(Ut.__webglTexture!==void 0&&(t.deleteTexture(Ut.__webglTexture),p.memory.textures--),Ee.depthTexture&&Ee.depthTexture.dispose(),Ee.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++){if(Array.isArray(ut.__webglFramebuffer[Ot]))for(let Ft=0;Ft<ut.__webglFramebuffer[Ot].length;Ft++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot][Ft]);else t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer[Ot])}else{if(Array.isArray(ut.__webglFramebuffer))for(let Ot=0;Ot<ut.__webglFramebuffer.length;Ot++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);else t.deleteFramebuffer(ut.__webglFramebuffer);if(ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer),ut.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ut.__webglMultisampledFramebuffer),ut.__webglColorRenderbuffer)for(let Ot=0;Ot<ut.__webglColorRenderbuffer.length;Ot++)ut.__webglColorRenderbuffer[Ot]&&t.deleteRenderbuffer(ut.__webglColorRenderbuffer[Ot]);ut.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ut.__webglDepthRenderbuffer)}if(Ee.isWebGLMultipleRenderTargets)for(let Ot=0,Ft=ce.length;Ot<Ft;Ot++){const mn=r.get(ce[Ot]);mn.__webglTexture&&(t.deleteTexture(mn.__webglTexture),p.memory.textures--),r.remove(ce[Ot])}r.remove(ce),r.remove(Ee)}let Fe=0;function vt(){Fe=0}function Ge(){const Ee=Fe;return Ee>=_&&console.warn("THREE.WebGLTextures: Trying to use "+Ee+" texture units while this GPU supports only "+_),Fe+=1,Ee}function mt(Ee){const ce=[];return ce.push(Ee.wrapS),ce.push(Ee.wrapT),ce.push(Ee.wrapR||0),ce.push(Ee.magFilter),ce.push(Ee.minFilter),ce.push(Ee.anisotropy),ce.push(Ee.internalFormat),ce.push(Ee.format),ce.push(Ee.type),ce.push(Ee.generateMipmaps),ce.push(Ee.premultiplyAlpha),ce.push(Ee.flipY),ce.push(Ee.unpackAlignment),ce.push(Ee.colorSpace),ce.join()}function Je(Ee,ce){const ut=r.get(Ee);if(Ee.isVideoTexture&&oi(Ee),Ee.isRenderTargetTexture===!1&&Ee.version>0&&ut.__version!==Ee.version){const Ut=Ee.image;if(Ut===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ut.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Wn(ut,Ee,ce);return}}n.bindTexture(t.TEXTURE_2D,ut.__webglTexture,t.TEXTURE0+ce)}function Be(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Wn(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ut.__webglTexture,t.TEXTURE0+ce)}function nt(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Wn(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_3D,ut.__webglTexture,t.TEXTURE0+ce)}function Gt(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Kr(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ut.__webglTexture,t.TEXTURE0+ce)}const Bt={[ZH]:t.REPEAT,[Lu]:t.CLAMP_TO_EDGE,[QH]:t.MIRRORED_REPEAT},Dt={[Vs]:t.NEAREST,[Dve]:t.NEAREST_MIPMAP_NEAREST,[X6]:t.NEAREST_MIPMAP_LINEAR,[Il]:t.LINEAR,[zje]:t.LINEAR_MIPMAP_NEAREST,[cP]:t.LINEAR_MIPMAP_LINEAR},Jt={[nze]:t.NEVER,[uze]:t.ALWAYS,[rze]:t.LESS,[oze]:t.LEQUAL,[ize]:t.EQUAL,[lze]:t.GEQUAL,[sze]:t.GREATER,[aze]:t.NOTEQUAL};function on(Ee,ce,ut){if(ut?(t.texParameteri(Ee,t.TEXTURE_WRAP_S,Bt[ce.wrapS]),t.texParameteri(Ee,t.TEXTURE_WRAP_T,Bt[ce.wrapT]),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,Bt[ce.wrapR]),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,Dt[ce.magFilter]),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,Dt[ce.minFilter])):(t.texParameteri(Ee,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Ee,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(ce.wrapS!==Lu||ce.wrapT!==Lu)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,ye(ce.magFilter)),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,ye(ce.minFilter)),ce.minFilter!==Vs&&ce.minFilter!==Il&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ce.compareFunction&&(t.texParameteri(Ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ee,t.TEXTURE_COMPARE_FUNC,Jt[ce.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ut=e.get("EXT_texture_filter_anisotropic");if(ce.magFilter===Vs||ce.minFilter!==X6&&ce.minFilter!==cP||ce.type===Lf&&e.has("OES_texture_float_linear")===!1||m===!1&&ce.type===dP&&e.has("OES_texture_half_float_linear")===!1)return;(ce.anisotropy>1||r.get(ce).__currentAnisotropy)&&(t.texParameterf(Ee,Ut.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ce.anisotropy,o.getMaxAnisotropy())),r.get(ce).__currentAnisotropy=ce.anisotropy)}}function wn(Ee,ce){let ut=!1;Ee.__webglInit===void 0&&(Ee.__webglInit=!0,ce.addEventListener("dispose",St));const Ut=ce.source;let Ot=z.get(Ut);Ot===void 0&&(Ot={},z.set(Ut,Ot));const Ft=mt(ce);if(Ft!==Ee.__cacheKey){Ot[Ft]===void 0&&(Ot[Ft]={texture:t.createTexture(),usedTimes:0},p.memory.textures++,ut=!0),Ot[Ft].usedTimes++;const mn=Ot[Ee.__cacheKey];mn!==void 0&&(Ot[Ee.__cacheKey].usedTimes--,mn.usedTimes===0&&me(ce)),Ee.__cacheKey=Ft,Ee.__webglTexture=Ot[Ft].texture}return ut}function Wn(Ee,ce,ut){let Ut=t.TEXTURE_2D;(ce.isDataArrayTexture||ce.isCompressedArrayTexture)&&(Ut=t.TEXTURE_2D_ARRAY),ce.isData3DTexture&&(Ut=t.TEXTURE_3D);const Ot=wn(Ee,ce),Ft=ce.source;n.bindTexture(Ut,Ee.__webglTexture,t.TEXTURE0+ut);const mn=r.get(Ft);if(Ft.version!==mn.__version||Ot===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const zt=pe(ce)&&te(ce.image)===!1;let pt=K(ce.image,zt,!1,M);pt=Rr(ce,pt);const En=te(pt)||m,en=u.convert(ce.format,ce.colorSpace);let yn=u.convert(ce.type),rn=Pe(ce.internalFormat,en,yn,ce.colorSpace);on(Ut,ce,En);let Qt;const Bn=ce.mipmaps,pr=m&&ce.isVideoTexture!==!0,Le=mn.__version===void 0||Ot===!0,Ht=H(ce,pt,En);if(ce.isDepthTexture)rn=t.DEPTH_COMPONENT,m?ce.type===Lf?rn=t.DEPTH_COMPONENT32F:ce.type===Df?rn=t.DEPTH_COMPONENT24:ce.type===Eg?rn=t.DEPTH24_STENCIL8:rn=t.DEPTH_COMPONENT16:ce.type===Lf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ce.format===Cg&&rn===t.DEPTH_COMPONENT&&ce.type!==w$&&ce.type!==Df&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ce.type=Df,yn=u.convert(ce.type)),ce.format===K_&&rn===t.DEPTH_COMPONENT&&(rn=t.DEPTH_STENCIL,ce.type!==Eg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ce.type=Eg,yn=u.convert(ce.type))),Le&&(pr?n.texStorage2D(t.TEXTURE_2D,1,rn,pt.width,pt.height):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,en,yn,null));else if(ce.isDataTexture)if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Ht,rn,Bn[0].width,Bn[0].height);for(let dt=0,Vt=Bn.length;dt<Vt;dt++)Qt=Bn[dt],pr?n.texSubImage2D(t.TEXTURE_2D,dt,0,0,Qt.width,Qt.height,en,yn,Qt.data):n.texImage2D(t.TEXTURE_2D,dt,rn,Qt.width,Qt.height,0,en,yn,Qt.data);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Ht,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,pt.width,pt.height,en,yn,pt.data)):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,en,yn,pt.data);else if(ce.isCompressedTexture)if(ce.isCompressedArrayTexture){pr&&Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ht,rn,Bn[0].width,Bn[0].height,pt.depth);for(let dt=0,Vt=Bn.length;dt<Vt;dt++)Qt=Bn[dt],ce.format!==Nu?en!==null?pr?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,dt,0,0,0,Qt.width,Qt.height,pt.depth,en,Qt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,dt,rn,Qt.width,Qt.height,pt.depth,0,Qt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage3D(t.TEXTURE_2D_ARRAY,dt,0,0,0,Qt.width,Qt.height,pt.depth,en,yn,Qt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,dt,rn,Qt.width,Qt.height,pt.depth,0,en,yn,Qt.data)}else{pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Ht,rn,Bn[0].width,Bn[0].height);for(let dt=0,Vt=Bn.length;dt<Vt;dt++)Qt=Bn[dt],ce.format!==Nu?en!==null?pr?n.compressedTexSubImage2D(t.TEXTURE_2D,dt,0,0,Qt.width,Qt.height,en,Qt.data):n.compressedTexImage2D(t.TEXTURE_2D,dt,rn,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage2D(t.TEXTURE_2D,dt,0,0,Qt.width,Qt.height,en,yn,Qt.data):n.texImage2D(t.TEXTURE_2D,dt,rn,Qt.width,Qt.height,0,en,yn,Qt.data)}else if(ce.isDataArrayTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ht,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,pt.width,pt.height,pt.depth,en,yn,pt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,rn,pt.width,pt.height,pt.depth,0,en,yn,pt.data);else if(ce.isData3DTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_3D,Ht,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,pt.width,pt.height,pt.depth,en,yn,pt.data)):n.texImage3D(t.TEXTURE_3D,0,rn,pt.width,pt.height,pt.depth,0,en,yn,pt.data);else if(ce.isFramebufferTexture){if(Le)if(pr)n.texStorage2D(t.TEXTURE_2D,Ht,rn,pt.width,pt.height);else{let dt=pt.width,Vt=pt.height;for(let Kt=0;Kt<Ht;Kt++)n.texImage2D(t.TEXTURE_2D,Kt,rn,dt,Vt,0,en,yn,null),dt>>=1,Vt>>=1}}else if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Ht,rn,Bn[0].width,Bn[0].height);for(let dt=0,Vt=Bn.length;dt<Vt;dt++)Qt=Bn[dt],pr?n.texSubImage2D(t.TEXTURE_2D,dt,0,0,en,yn,Qt):n.texImage2D(t.TEXTURE_2D,dt,rn,en,yn,Qt);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Ht,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,en,yn,pt)):n.texImage2D(t.TEXTURE_2D,0,rn,en,yn,pt);Q(ce,En)&&Se(Ut),mn.__version=Ft.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function Kr(Ee,ce,ut){if(ce.image.length!==6)return;const Ut=wn(Ee,ce),Ot=ce.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ee.__webglTexture,t.TEXTURE0+ut);const Ft=r.get(Ot);if(Ot.version!==Ft.__version||Ut===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const mn=ce.isCompressedTexture||ce.image[0].isCompressedTexture,zt=ce.image[0]&&ce.image[0].isDataTexture,pt=[];for(let dt=0;dt<6;dt++)!mn&&!zt?pt[dt]=K(ce.image[dt],!1,!0,x):pt[dt]=zt?ce.image[dt].image:ce.image[dt],pt[dt]=Rr(ce,pt[dt]);const En=pt[0],en=te(En)||m,yn=u.convert(ce.format,ce.colorSpace),rn=u.convert(ce.type),Qt=Pe(ce.internalFormat,yn,rn,ce.colorSpace),Bn=m&&ce.isVideoTexture!==!0,pr=Ft.__version===void 0||Ut===!0;let Le=H(ce,En,en);on(t.TEXTURE_CUBE_MAP,ce,en);let Ht;if(mn){Bn&&pr&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Qt,En.width,En.height);for(let dt=0;dt<6;dt++){Ht=pt[dt].mipmaps;for(let Vt=0;Vt<Ht.length;Vt++){const Kt=Ht[Vt];ce.format!==Nu?yn!==null?Bn?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt,0,0,Kt.width,Kt.height,yn,Kt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt,Qt,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt,0,0,Kt.width,Kt.height,yn,rn,Kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt,Qt,Kt.width,Kt.height,0,yn,rn,Kt.data)}}}else{Ht=ce.mipmaps,Bn&&pr&&(Ht.length>0&&Le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Qt,pt[0].width,pt[0].height));for(let dt=0;dt<6;dt++)if(zt){Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,pt[dt].width,pt[dt].height,yn,rn,pt[dt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,Qt,pt[dt].width,pt[dt].height,0,yn,rn,pt[dt].data);for(let Vt=0;Vt<Ht.length;Vt++){const Qn=Ht[Vt].image[dt].image;Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt+1,0,0,Qn.width,Qn.height,yn,rn,Qn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt+1,Qt,Qn.width,Qn.height,0,yn,rn,Qn.data)}}else{Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,yn,rn,pt[dt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,Qt,yn,rn,pt[dt]);for(let Vt=0;Vt<Ht.length;Vt++){const Kt=Ht[Vt];Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt+1,0,0,yn,rn,Kt.image[dt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Vt+1,Qt,yn,rn,Kt.image[dt])}}}Q(ce,en)&&Se(t.TEXTURE_CUBE_MAP),Ft.__version=Ot.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function xn(Ee,ce,ut,Ut,Ot,Ft){const mn=u.convert(ut.format,ut.colorSpace),zt=u.convert(ut.type),pt=Pe(ut.internalFormat,mn,zt,ut.colorSpace);if(!r.get(ce).__hasExternalTextures){const en=Math.max(1,ce.width>>Ft),yn=Math.max(1,ce.height>>Ft);Ot===t.TEXTURE_3D||Ot===t.TEXTURE_2D_ARRAY?n.texImage3D(Ot,Ft,pt,en,yn,ce.depth,0,mn,zt,null):n.texImage2D(Ot,Ft,pt,en,yn,0,mn,zt,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ee),cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Ut,Ot,r.get(ut).__webglTexture,0,Nn(ce)):(Ot===t.TEXTURE_2D||Ot>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ot<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Ut,Ot,r.get(ut).__webglTexture,Ft),n.bindFramebuffer(t.FRAMEBUFFER,null)}function et(Ee,ce,ut){if(t.bindRenderbuffer(t.RENDERBUFFER,Ee),ce.depthBuffer&&!ce.stencilBuffer){let Ut=t.DEPTH_COMPONENT16;if(ut||cr(ce)){const Ot=ce.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===Lf?Ut=t.DEPTH_COMPONENT32F:Ot.type===Df&&(Ut=t.DEPTH_COMPONENT24));const Ft=Nn(ce);cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ft,Ut,ce.width,ce.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Ft,Ut,ce.width,ce.height)}else t.renderbufferStorage(t.RENDERBUFFER,Ut,ce.width,ce.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Ee)}else if(ce.depthBuffer&&ce.stencilBuffer){const Ut=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ut,t.DEPTH24_STENCIL8,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ut,t.DEPTH24_STENCIL8,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,ce.width,ce.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Ee)}else{const Ut=ce.isWebGLMultipleRenderTargets===!0?ce.texture:[ce.texture];for(let Ot=0;Ot<Ut.length;Ot++){const Ft=Ut[Ot],mn=u.convert(Ft.format,Ft.colorSpace),zt=u.convert(Ft.type),pt=Pe(Ft.internalFormat,mn,zt,Ft.colorSpace),En=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,En,pt,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,En,pt,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,pt,ce.width,ce.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Zr(Ee,ce){if(ce&&ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ee),!(ce.depthTexture&&ce.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ce.depthTexture).__webglTexture||ce.depthTexture.image.width!==ce.width||ce.depthTexture.image.height!==ce.height)&&(ce.depthTexture.image.width=ce.width,ce.depthTexture.image.height=ce.height,ce.depthTexture.needsUpdate=!0),Je(ce.depthTexture,0);const Ut=r.get(ce.depthTexture).__webglTexture,Ot=Nn(ce);if(ce.depthTexture.format===Cg)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ut,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ut,0);else if(ce.depthTexture.format===K_)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ut,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ut,0);else throw new Error("Unknown depthTexture format")}function Pn(Ee){const ce=r.get(Ee),ut=Ee.isWebGLCubeRenderTarget===!0;if(Ee.depthTexture&&!ce.__autoAllocateDepthBuffer){if(ut)throw new Error("target.depthTexture not supported in Cube render targets");Zr(ce.__webglFramebuffer,Ee)}else if(ut){ce.__webglDepthbuffer=[];for(let Ut=0;Ut<6;Ut++)n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer[Ut]),ce.__webglDepthbuffer[Ut]=t.createRenderbuffer(),et(ce.__webglDepthbuffer[Ut],Ee,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer),ce.__webglDepthbuffer=t.createRenderbuffer(),et(ce.__webglDepthbuffer,Ee,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Sn(Ee,ce,ut){const Ut=r.get(Ee);ce!==void 0&&xn(Ut.__webglFramebuffer,Ee,Ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ut!==void 0&&Pn(Ee)}function gn(Ee){const ce=Ee.texture,ut=r.get(Ee),Ut=r.get(ce);Ee.addEventListener("dispose",kt),Ee.isWebGLMultipleRenderTargets!==!0&&(Ut.__webglTexture===void 0&&(Ut.__webglTexture=t.createTexture()),Ut.__version=ce.version,p.memory.textures++);const Ot=Ee.isWebGLCubeRenderTarget===!0,Ft=Ee.isWebGLMultipleRenderTargets===!0,mn=te(Ee)||m;if(Ot){ut.__webglFramebuffer=[];for(let zt=0;zt<6;zt++)if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer[zt]=[];for(let pt=0;pt<ce.mipmaps.length;pt++)ut.__webglFramebuffer[zt][pt]=t.createFramebuffer()}else ut.__webglFramebuffer[zt]=t.createFramebuffer()}else{if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer=[];for(let zt=0;zt<ce.mipmaps.length;zt++)ut.__webglFramebuffer[zt]=t.createFramebuffer()}else ut.__webglFramebuffer=t.createFramebuffer();if(Ft)if(o.drawBuffers){const zt=Ee.texture;for(let pt=0,En=zt.length;pt<En;pt++){const en=r.get(zt[pt]);en.__webglTexture===void 0&&(en.__webglTexture=t.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(m&&Ee.samples>0&&cr(Ee)===!1){const zt=Ft?ce:[ce];ut.__webglMultisampledFramebuffer=t.createFramebuffer(),ut.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer);for(let pt=0;pt<zt.length;pt++){const En=zt[pt];ut.__webglColorRenderbuffer[pt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt]);const en=u.convert(En.format,En.colorSpace),yn=u.convert(En.type),rn=Pe(En.internalFormat,en,yn,En.colorSpace,Ee.isXRRenderTarget===!0),Qt=Nn(Ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,Qt,rn,Ee.width,Ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+pt,t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ee.depthBuffer&&(ut.__webglDepthRenderbuffer=t.createRenderbuffer(),et(ut.__webglDepthRenderbuffer,Ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ot){n.bindTexture(t.TEXTURE_CUBE_MAP,Ut.__webglTexture),on(t.TEXTURE_CUBE_MAP,ce,mn);for(let zt=0;zt<6;zt++)if(m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[zt][pt],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+zt,pt);else xn(ut.__webglFramebuffer[zt],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+zt,0);Q(ce,mn)&&Se(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ft){const zt=Ee.texture;for(let pt=0,En=zt.length;pt<En;pt++){const en=zt[pt],yn=r.get(en);n.bindTexture(t.TEXTURE_2D,yn.__webglTexture),on(t.TEXTURE_2D,en,mn),xn(ut.__webglFramebuffer,Ee,en,t.COLOR_ATTACHMENT0+pt,t.TEXTURE_2D,0),Q(en,mn)&&Se(t.TEXTURE_2D)}n.unbindTexture()}else{let zt=t.TEXTURE_2D;if((Ee.isWebGL3DRenderTarget||Ee.isWebGLArrayRenderTarget)&&(m?zt=Ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(zt,Ut.__webglTexture),on(zt,ce,mn),m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[pt],Ee,ce,t.COLOR_ATTACHMENT0,zt,pt);else xn(ut.__webglFramebuffer,Ee,ce,t.COLOR_ATTACHMENT0,zt,0);Q(ce,mn)&&Se(zt),n.unbindTexture()}Ee.depthBuffer&&Pn(Ee)}function Mr(Ee){const ce=te(Ee)||m,ut=Ee.isWebGLMultipleRenderTargets===!0?Ee.texture:[Ee.texture];for(let Ut=0,Ot=ut.length;Ut<Ot;Ut++){const Ft=ut[Ut];if(Q(Ft,ce)){const mn=Ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,zt=r.get(Ft).__webglTexture;n.bindTexture(mn,zt),Se(mn),n.unbindTexture()}}}function kn(Ee){if(m&&Ee.samples>0&&cr(Ee)===!1){const ce=Ee.isWebGLMultipleRenderTargets?Ee.texture:[Ee.texture],ut=Ee.width,Ut=Ee.height;let Ot=t.COLOR_BUFFER_BIT;const Ft=[],mn=Ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,zt=r.get(Ee),pt=Ee.isWebGLMultipleRenderTargets===!0;if(pt)for(let En=0;En<ce.length;En++)n.bindFramebuffer(t.FRAMEBUFFER,zt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,zt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,zt.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,zt.__webglFramebuffer);for(let En=0;En<ce.length;En++){Ft.push(t.COLOR_ATTACHMENT0+En),Ee.depthBuffer&&Ft.push(mn);const en=zt.__ignoreDepthValues!==void 0?zt.__ignoreDepthValues:!1;if(en===!1&&(Ee.depthBuffer&&(Ot|=t.DEPTH_BUFFER_BIT),Ee.stencilBuffer&&(Ot|=t.STENCIL_BUFFER_BIT)),pt&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,zt.__webglColorRenderbuffer[En]),en===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[mn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[mn])),pt){const yn=r.get(ce[En]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,yn,0)}t.blitFramebuffer(0,0,ut,Ut,0,0,ut,Ut,Ot,t.NEAREST),G&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ft)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),pt)for(let En=0;En<ce.length;En++){n.bindFramebuffer(t.FRAMEBUFFER,zt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,zt.__webglColorRenderbuffer[En]);const en=r.get(ce[En]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,zt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,en,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,zt.__webglMultisampledFramebuffer)}}function Nn(Ee){return Math.min(R,Ee.samples)}function cr(Ee){const ce=r.get(Ee);return m&&Ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ce.__useRenderToTexture!==!1}function oi(Ee){const ce=p.render.frame;Z.get(Ee)!==ce&&(Z.set(Ee,ce),Ee.update())}function Rr(Ee,ce){const ut=Ee.colorSpace,Ut=Ee.format,Ot=Ee.type;return Ee.isCompressedTexture===!0||Ee.format===JH||ut!==Kc&&ut!==kg&&(ut===tr?m===!1?e.has("EXT_sRGB")===!0&&Ut===Nu?(Ee.format=JH,Ee.minFilter=Il,Ee.generateMipmaps=!1):ce=H1e.sRGBToLinear(ce):(Ut!==Nu||Ot!==qf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ut)),ce}this.allocateTextureUnit=Ge,this.resetTextureUnits=vt,this.setTexture2D=Je,this.setTexture2DArray=Be,this.setTexture3D=nt,this.setTextureCube=Gt,this.rebindTextures=Sn,this.setupRenderTarget=gn,this.updateRenderTargetMipmap=Mr,this.updateMultisampleRenderTarget=kn,this.setupDepthRenderbuffer=Pn,this.setupFrameBufferTexture=xn,this.useMultisampledRTT=cr}function dGe(t,e,n){const r=n.isWebGL2;function o(u,p=kg){let m;if(u===qf)return t.UNSIGNED_BYTE;if(u===D1e)return t.UNSIGNED_SHORT_4_4_4_4;if(u===L1e)return t.UNSIGNED_SHORT_5_5_5_1;if(u===Hje)return t.BYTE;if(u===Gje)return t.SHORT;if(u===w$)return t.UNSIGNED_SHORT;if(u===O1e)return t.INT;if(u===Df)return t.UNSIGNED_INT;if(u===Lf)return t.FLOAT;if(u===dP)return r?t.HALF_FLOAT:(m=e.get("OES_texture_half_float"),m!==null?m.HALF_FLOAT_OES:null);if(u===$je)return t.ALPHA;if(u===Nu)return t.RGBA;if(u===Wje)return t.LUMINANCE;if(u===Kje)return t.LUMINANCE_ALPHA;if(u===Cg)return t.DEPTH_COMPONENT;if(u===K_)return t.DEPTH_STENCIL;if(u===JH)return m=e.get("EXT_sRGB"),m!==null?m.SRGB_ALPHA_EXT:null;if(u===qje)return t.RED;if(u===N1e)return t.RED_INTEGER;if(u===Xje)return t.RG;if(u===F1e)return t.RG_INTEGER;if(u===B1e)return t.RGBA_INTEGER;if(u===Y6||u===Z6||u===Q6||u===J6)if(p===tr)if(m=e.get("WEBGL_compressed_texture_s3tc_srgb"),m!==null){if(u===Y6)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===Z6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===Q6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===J6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(m=e.get("WEBGL_compressed_texture_s3tc"),m!==null){if(u===Y6)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===Z6)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===Q6)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===J6)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(u===Lve||u===Nve||u===Fve||u===Bve)if(m=e.get("WEBGL_compressed_texture_pvrtc"),m!==null){if(u===Lve)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===Nve)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===Fve)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===Bve)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(u===Yje)return m=e.get("WEBGL_compressed_texture_etc1"),m!==null?m.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===Uve||u===Vve)if(m=e.get("WEBGL_compressed_texture_etc"),m!==null){if(u===Uve)return p===tr?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(u===Vve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(u===jve||u===zve||u===Hve||u===Gve||u===$ve||u===Wve||u===Kve||u===qve||u===Xve||u===Yve||u===Zve||u===Qve||u===Jve||u===ege)if(m=e.get("WEBGL_compressed_texture_astc"),m!==null){if(u===jve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===zve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===Hve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===Gve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===$ve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===Wve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===Kve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===qve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===Xve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===Yve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===Zve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===Qve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===Jve)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===ege)return p===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(u===e8)if(m=e.get("EXT_texture_compression_bptc"),m!==null){if(u===e8)return p===tr?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(u===Zje||u===tge||u===nge||u===rge)if(m=e.get("EXT_texture_compression_rgtc"),m!==null){if(u===e8)return m.COMPRESSED_RED_RGTC1_EXT;if(u===tge)return m.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(u===nge)return m.COMPRESSED_RED_GREEN_RGTC2_EXT;if(u===rge)return m.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return u===Eg?r?t.UNSIGNED_INT_24_8:(m=e.get("WEBGL_depth_texture"),m!==null?m.UNSIGNED_INT_24_8_WEBGL:null):t[u]!==void 0?t[u]:null}return{convert:o}}class hGe extends Rl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let AD=class extends bs{constructor(){super(),this.isGroup=!0,this.type="Group"}};const pGe={type:"move"};class E8{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new AD,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new AD,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ht,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ht),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new AD,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ht,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ht),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let o=null,u=null,p=null;const m=this._targetRay,_=this._grip,x=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(x&&e.hand){p=!0;for(const j of e.hand.values()){const z=n.getJointPose(j,r),U=this._getHandJoint(x,j);z!==null&&(U.matrix.fromArray(z.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=z.radius),U.visible=z!==null}const M=x.joints["index-finger-tip"],R=x.joints["thumb-tip"],N=M.position.distanceTo(R.position),G=.02,Z=.005;x.inputState.pinching&&N>G+Z?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&N<=G-Z&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else _!==null&&e.gripSpace&&(u=n.getPose(e.gripSpace,r),u!==null&&(_.matrix.fromArray(u.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,u.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(u.linearVelocity)):_.hasLinearVelocity=!1,u.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(u.angularVelocity)):_.hasAngularVelocity=!1));m!==null&&(o=n.getPose(e.targetRaySpace,r),o===null&&u!==null&&(o=u),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(pGe)))}return m!==null&&(m.visible=o!==null),_!==null&&(_.visible=u!==null),x!==null&&(x.visible=p!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new AD;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class fGe extends Ua{constructor(e,n,r,o,u,p,m,_,x,M){if(M=M!==void 0?M:Cg,M!==Cg&&M!==K_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&M===Cg&&(r=Df),r===void 0&&M===K_&&(r=Eg),super(null,o,u,p,m,_,M,r,x),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=m!==void 0?m:Vs,this.minFilter=_!==void 0?_:Vs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class mGe extends Xg{constructor(e,n){super();const r=this;let o=null,u=1,p=null,m="local-floor",_=1,x=null,M=null,R=null,N=null,G=null,Z=null;const j=n.getContextAttributes();let z=null,U=null;const C=[],K=[],te=new Rl;te.layers.enable(1),te.viewport=new Xo;const pe=new Rl;pe.layers.enable(2),pe.viewport=new Xo;const Q=[te,pe],Se=new hGe;Se.layers.enable(1),Se.layers.enable(2);let Pe=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let nt=C[Be];return nt===void 0&&(nt=new E8,C[Be]=nt),nt.getTargetRaySpace()},this.getControllerGrip=function(Be){let nt=C[Be];return nt===void 0&&(nt=new E8,C[Be]=nt),nt.getGripSpace()},this.getHand=function(Be){let nt=C[Be];return nt===void 0&&(nt=new E8,C[Be]=nt),nt.getHandSpace()};function ye(Be){const nt=K.indexOf(Be.inputSource);if(nt===-1)return;const Gt=C[nt];Gt!==void 0&&(Gt.update(Be.inputSource,Be.frame,x||p),Gt.dispatchEvent({type:Be.type,data:Be.inputSource}))}function St(){o.removeEventListener("select",ye),o.removeEventListener("selectstart",ye),o.removeEventListener("selectend",ye),o.removeEventListener("squeeze",ye),o.removeEventListener("squeezestart",ye),o.removeEventListener("squeezeend",ye),o.removeEventListener("end",St),o.removeEventListener("inputsourceschange",kt);for(let Be=0;Be<C.length;Be++){const nt=K[Be];nt!==null&&(K[Be]=null,C[Be].disconnect(nt))}Pe=null,H=null,e.setRenderTarget(z),G=null,N=null,R=null,o=null,U=null,Je.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){u=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){m=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return x||p},this.setReferenceSpace=function(Be){x=Be},this.getBaseLayer=function(){return N!==null?N:G},this.getBinding=function(){return R},this.getFrame=function(){return Z},this.getSession=function(){return o},this.setSession=async function(Be){if(o=Be,o!==null){if(z=e.getRenderTarget(),o.addEventListener("select",ye),o.addEventListener("selectstart",ye),o.addEventListener("selectend",ye),o.addEventListener("squeeze",ye),o.addEventListener("squeezestart",ye),o.addEventListener("squeezeend",ye),o.addEventListener("end",St),o.addEventListener("inputsourceschange",kt),j.xrCompatible!==!0&&await n.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const nt={antialias:o.renderState.layers===void 0?j.antialias:!0,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:u};G=new XRWebGLLayer(o,n,nt),o.updateRenderState({baseLayer:G}),U=new Ug(G.framebufferWidth,G.framebufferHeight,{format:Nu,type:qf,colorSpace:e.outputColorSpace,stencilBuffer:j.stencil})}else{let nt=null,Gt=null,Bt=null;j.depth&&(Bt=j.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,nt=j.stencil?K_:Cg,Gt=j.stencil?Eg:Df);const Dt={colorFormat:n.RGBA8,depthFormat:Bt,scaleFactor:u};R=new XRWebGLBinding(o,n),N=R.createProjectionLayer(Dt),o.updateRenderState({layers:[N]}),U=new Ug(N.textureWidth,N.textureHeight,{format:Nu,type:qf,depthTexture:new fGe(N.textureWidth,N.textureHeight,Gt,void 0,void 0,void 0,void 0,void 0,void 0,nt),stencilBuffer:j.stencil,colorSpace:e.outputColorSpace,samples:j.antialias?4:0});const Jt=e.properties.get(U);Jt.__ignoreDepthValues=N.ignoreDepthValues}U.isXRRenderTarget=!0,this.setFoveation(_),x=null,p=await o.requestReferenceSpace(m),Je.setContext(o),Je.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function kt(Be){for(let nt=0;nt<Be.removed.length;nt++){const Gt=Be.removed[nt],Bt=K.indexOf(Gt);Bt>=0&&(K[Bt]=null,C[Bt].disconnect(Gt))}for(let nt=0;nt<Be.added.length;nt++){const Gt=Be.added[nt];let Bt=K.indexOf(Gt);if(Bt===-1){for(let Jt=0;Jt<C.length;Jt++)if(Jt>=K.length){K.push(Gt),Bt=Jt;break}else if(K[Jt]===null){K[Jt]=Gt,Bt=Jt;break}if(Bt===-1)break}const Dt=C[Bt];Dt&&Dt.connect(Gt)}}const it=new ht,me=new ht;function lt(Be,nt,Gt){it.setFromMatrixPosition(nt.matrixWorld),me.setFromMatrixPosition(Gt.matrixWorld);const Bt=it.distanceTo(me),Dt=nt.projectionMatrix.elements,Jt=Gt.projectionMatrix.elements,on=Dt[14]/(Dt[10]-1),wn=Dt[14]/(Dt[10]+1),Wn=(Dt[9]+1)/Dt[5],Kr=(Dt[9]-1)/Dt[5],xn=(Dt[8]-1)/Dt[0],et=(Jt[8]+1)/Jt[0],Zr=on*xn,Pn=on*et,Sn=Bt/(-xn+et),gn=Sn*-xn;nt.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX(gn),Be.translateZ(Sn),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const Mr=on+Sn,kn=wn+Sn,Nn=Zr-gn,cr=Pn+(Bt-gn),oi=Wn*wn/kn*Mr,Rr=Kr*wn/kn*Mr;Be.projectionMatrix.makePerspective(Nn,cr,oi,Rr,Mr,kn),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function Fe(Be,nt){nt===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(nt.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(o===null)return;Se.near=pe.near=te.near=Be.near,Se.far=pe.far=te.far=Be.far,(Pe!==Se.near||H!==Se.far)&&(o.updateRenderState({depthNear:Se.near,depthFar:Se.far}),Pe=Se.near,H=Se.far);const nt=Be.parent,Gt=Se.cameras;Fe(Se,nt);for(let Bt=0;Bt<Gt.length;Bt++)Fe(Gt[Bt],nt);Gt.length===2?lt(Se,te,pe):Se.projectionMatrix.copy(te.projectionMatrix),vt(Be,Se,nt)};function vt(Be,nt,Gt){Gt===null?Be.matrix.copy(nt.matrixWorld):(Be.matrix.copy(Gt.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(nt.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0);const Bt=Be.children;for(let Dt=0,Jt=Bt.length;Dt<Jt;Dt++)Bt[Dt].updateMatrixWorld(!0);Be.projectionMatrix.copy(nt.projectionMatrix),Be.projectionMatrixInverse.copy(nt.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=e9*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return Se},this.getFoveation=function(){if(!(N===null&&G===null))return _},this.setFoveation=function(Be){_=Be,N!==null&&(N.fixedFoveation=Be),G!==null&&G.fixedFoveation!==void 0&&(G.fixedFoveation=Be)};let Ge=null;function mt(Be,nt){if(M=nt.getViewerPose(x||p),Z=nt,M!==null){const Gt=M.views;G!==null&&(e.setRenderTargetFramebuffer(U,G.framebuffer),e.setRenderTarget(U));let Bt=!1;Gt.length!==Se.cameras.length&&(Se.cameras.length=0,Bt=!0);for(let Dt=0;Dt<Gt.length;Dt++){const Jt=Gt[Dt];let on=null;if(G!==null)on=G.getViewport(Jt);else{const Wn=R.getViewSubImage(N,Jt);on=Wn.viewport,Dt===0&&(e.setRenderTargetTextures(U,Wn.colorTexture,N.ignoreDepthValues?void 0:Wn.depthStencilTexture),e.setRenderTarget(U))}let wn=Q[Dt];wn===void 0&&(wn=new Rl,wn.layers.enable(Dt),wn.viewport=new Xo,Q[Dt]=wn),wn.matrix.fromArray(Jt.transform.matrix),wn.matrix.decompose(wn.position,wn.quaternion,wn.scale),wn.projectionMatrix.fromArray(Jt.projectionMatrix),wn.projectionMatrixInverse.copy(wn.projectionMatrix).invert(),wn.viewport.set(on.x,on.y,on.width,on.height),Dt===0&&(Se.matrix.copy(wn.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale)),Bt===!0&&Se.cameras.push(wn)}}for(let Gt=0;Gt<C.length;Gt++){const Bt=K[Gt],Dt=C[Gt];Bt!==null&&Dt!==void 0&&Dt.update(Bt,nt,x||p)}Ge&&Ge(Be,nt),nt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:nt}),Z=null}const Je=new txe;Je.setAnimationLoop(mt),this.setAnimationLoop=function(Be){Ge=Be},this.dispose=function(){}}}function vGe(t,e){function n(z,U){z.matrixAutoUpdate===!0&&z.updateMatrix(),U.value.copy(z.matrix)}function r(z,U){U.color.getRGB(z.fogColor.value,Z1e(t)),U.isFog?(z.fogNear.value=U.near,z.fogFar.value=U.far):U.isFogExp2&&(z.fogDensity.value=U.density)}function o(z,U,C,K,te){U.isMeshBasicMaterial||U.isMeshLambertMaterial?u(z,U):U.isMeshToonMaterial?(u(z,U),R(z,U)):U.isMeshPhongMaterial?(u(z,U),M(z,U)):U.isMeshStandardMaterial?(u(z,U),N(z,U),U.isMeshPhysicalMaterial&&G(z,U,te)):U.isMeshMatcapMaterial?(u(z,U),Z(z,U)):U.isMeshDepthMaterial?u(z,U):U.isMeshDistanceMaterial?(u(z,U),j(z,U)):U.isMeshNormalMaterial?u(z,U):U.isLineBasicMaterial?(p(z,U),U.isLineDashedMaterial&&m(z,U)):U.isPointsMaterial?_(z,U,C,K):U.isSpriteMaterial?x(z,U):U.isShadowMaterial?(z.color.value.copy(U.color),z.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function u(z,U){z.opacity.value=U.opacity,U.color&&z.diffuse.value.copy(U.color),U.emissive&&z.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.bumpMap&&(z.bumpMap.value=U.bumpMap,n(U.bumpMap,z.bumpMapTransform),z.bumpScale.value=U.bumpScale,U.side===ga&&(z.bumpScale.value*=-1)),U.normalMap&&(z.normalMap.value=U.normalMap,n(U.normalMap,z.normalMapTransform),z.normalScale.value.copy(U.normalScale),U.side===ga&&z.normalScale.value.negate()),U.displacementMap&&(z.displacementMap.value=U.displacementMap,n(U.displacementMap,z.displacementMapTransform),z.displacementScale.value=U.displacementScale,z.displacementBias.value=U.displacementBias),U.emissiveMap&&(z.emissiveMap.value=U.emissiveMap,n(U.emissiveMap,z.emissiveMapTransform)),U.specularMap&&(z.specularMap.value=U.specularMap,n(U.specularMap,z.specularMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest);const C=e.get(U).envMap;if(C&&(z.envMap.value=C,z.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=U.reflectivity,z.ior.value=U.ior,z.refractionRatio.value=U.refractionRatio),U.lightMap){z.lightMap.value=U.lightMap;const K=t._useLegacyLights===!0?Math.PI:1;z.lightMapIntensity.value=U.lightMapIntensity*K,n(U.lightMap,z.lightMapTransform)}U.aoMap&&(z.aoMap.value=U.aoMap,z.aoMapIntensity.value=U.aoMapIntensity,n(U.aoMap,z.aoMapTransform))}function p(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform))}function m(z,U){z.dashSize.value=U.dashSize,z.totalSize.value=U.dashSize+U.gapSize,z.scale.value=U.scale}function _(z,U,C,K){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.size.value=U.size*C,z.scale.value=K*.5,U.map&&(z.map.value=U.map,n(U.map,z.uvTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function x(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.rotation.value=U.rotation,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function M(z,U){z.specular.value.copy(U.specular),z.shininess.value=Math.max(U.shininess,1e-4)}function R(z,U){U.gradientMap&&(z.gradientMap.value=U.gradientMap)}function N(z,U){z.metalness.value=U.metalness,U.metalnessMap&&(z.metalnessMap.value=U.metalnessMap,n(U.metalnessMap,z.metalnessMapTransform)),z.roughness.value=U.roughness,U.roughnessMap&&(z.roughnessMap.value=U.roughnessMap,n(U.roughnessMap,z.roughnessMapTransform)),e.get(U).envMap&&(z.envMapIntensity.value=U.envMapIntensity)}function G(z,U,C){z.ior.value=U.ior,U.sheen>0&&(z.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),z.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(z.sheenColorMap.value=U.sheenColorMap,n(U.sheenColorMap,z.sheenColorMapTransform)),U.sheenRoughnessMap&&(z.sheenRoughnessMap.value=U.sheenRoughnessMap,n(U.sheenRoughnessMap,z.sheenRoughnessMapTransform))),U.clearcoat>0&&(z.clearcoat.value=U.clearcoat,z.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(z.clearcoatMap.value=U.clearcoatMap,n(U.clearcoatMap,z.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(z.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,n(U.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(z.clearcoatNormalMap.value=U.clearcoatNormalMap,n(U.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===ga&&z.clearcoatNormalScale.value.negate())),U.iridescence>0&&(z.iridescence.value=U.iridescence,z.iridescenceIOR.value=U.iridescenceIOR,z.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(z.iridescenceMap.value=U.iridescenceMap,n(U.iridescenceMap,z.iridescenceMapTransform)),U.iridescenceThicknessMap&&(z.iridescenceThicknessMap.value=U.iridescenceThicknessMap,n(U.iridescenceThicknessMap,z.iridescenceThicknessMapTransform))),U.transmission>0&&(z.transmission.value=U.transmission,z.transmissionSamplerMap.value=C.texture,z.transmissionSamplerSize.value.set(C.width,C.height),U.transmissionMap&&(z.transmissionMap.value=U.transmissionMap,n(U.transmissionMap,z.transmissionMapTransform)),z.thickness.value=U.thickness,U.thicknessMap&&(z.thicknessMap.value=U.thicknessMap,n(U.thicknessMap,z.thicknessMapTransform)),z.attenuationDistance.value=U.attenuationDistance,z.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(z.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(z.anisotropyMap.value=U.anisotropyMap,n(U.anisotropyMap,z.anisotropyMapTransform))),z.specularIntensity.value=U.specularIntensity,z.specularColor.value.copy(U.specularColor),U.specularColorMap&&(z.specularColorMap.value=U.specularColorMap,n(U.specularColorMap,z.specularColorMapTransform)),U.specularIntensityMap&&(z.specularIntensityMap.value=U.specularIntensityMap,n(U.specularIntensityMap,z.specularIntensityMapTransform))}function Z(z,U){U.matcap&&(z.matcap.value=U.matcap)}function j(z,U){const C=e.get(U).light;z.referencePosition.value.setFromMatrixPosition(C.matrixWorld),z.nearDistance.value=C.shadow.camera.near,z.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:o}}function gGe(t,e,n,r){let o={},u={},p=[];const m=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function _(C,K){const te=K.program;r.uniformBlockBinding(C,te)}function x(C,K){let te=o[C.id];te===void 0&&(Z(C),te=M(C),o[C.id]=te,C.addEventListener("dispose",z));const pe=K.program;r.updateUBOMapping(C,pe);const Q=e.render.frame;u[C.id]!==Q&&(N(C),u[C.id]=Q)}function M(C){const K=R();C.__bindingPointIndex=K;const te=t.createBuffer(),pe=C.__size,Q=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,te),t.bufferData(t.UNIFORM_BUFFER,pe,Q),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,K,te),te}function R(){for(let C=0;C<m;C++)if(p.indexOf(C)===-1)return p.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function N(C){const K=o[C.id],te=C.uniforms,pe=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,K);for(let Q=0,Se=te.length;Q<Se;Q++){const Pe=te[Q];if(G(Pe,Q,pe)===!0){const H=Pe.__offset,ye=Array.isArray(Pe.value)?Pe.value:[Pe.value];let St=0;for(let kt=0;kt<ye.length;kt++){const it=ye[kt],me=j(it);typeof it=="number"?(Pe.__data[0]=it,t.bufferSubData(t.UNIFORM_BUFFER,H+St,Pe.__data)):it.isMatrix3?(Pe.__data[0]=it.elements[0],Pe.__data[1]=it.elements[1],Pe.__data[2]=it.elements[2],Pe.__data[3]=it.elements[0],Pe.__data[4]=it.elements[3],Pe.__data[5]=it.elements[4],Pe.__data[6]=it.elements[5],Pe.__data[7]=it.elements[0],Pe.__data[8]=it.elements[6],Pe.__data[9]=it.elements[7],Pe.__data[10]=it.elements[8],Pe.__data[11]=it.elements[0]):(it.toArray(Pe.__data,St),St+=me.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,H,Pe.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function G(C,K,te){const pe=C.value;if(te[K]===void 0){if(typeof pe=="number")te[K]=pe;else{const Q=Array.isArray(pe)?pe:[pe],Se=[];for(let Pe=0;Pe<Q.length;Pe++)Se.push(Q[Pe].clone());te[K]=Se}return!0}else if(typeof pe=="number"){if(te[K]!==pe)return te[K]=pe,!0}else{const Q=Array.isArray(te[K])?te[K]:[te[K]],Se=Array.isArray(pe)?pe:[pe];for(let Pe=0;Pe<Q.length;Pe++){const H=Q[Pe];if(H.equals(Se[Pe])===!1)return H.copy(Se[Pe]),!0}}return!1}function Z(C){const K=C.uniforms;let te=0;const pe=16;let Q=0;for(let Se=0,Pe=K.length;Se<Pe;Se++){const H=K[Se],ye={boundary:0,storage:0},St=Array.isArray(H.value)?H.value:[H.value];for(let kt=0,it=St.length;kt<it;kt++){const me=St[kt],lt=j(me);ye.boundary+=lt.boundary,ye.storage+=lt.storage}if(H.__data=new Float32Array(ye.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=te,Se>0){Q=te%pe;const kt=pe-Q;Q!==0&&kt-ye.boundary<0&&(te+=pe-Q,H.__offset=te)}te+=ye.storage}return Q=te%pe,Q>0&&(te+=pe-Q),C.__size=te,C.__cache={},this}function j(C){const K={boundary:0,storage:0};return typeof C=="number"?(K.boundary=4,K.storage=4):C.isVector2?(K.boundary=8,K.storage=8):C.isVector3||C.isColor?(K.boundary=16,K.storage=12):C.isVector4?(K.boundary=16,K.storage=16):C.isMatrix3?(K.boundary=48,K.storage=48):C.isMatrix4?(K.boundary=64,K.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),K}function z(C){const K=C.target;K.removeEventListener("dispose",z);const te=p.indexOf(K.__bindingPointIndex);p.splice(te,1),t.deleteBuffer(o[K.id]),delete o[K.id],delete u[K.id]}function U(){for(const C in o)t.deleteBuffer(o[C]);p=[],o={},u={}}return{bind:_,update:x,dispose:U}}function yGe(){const t=U3("canvas");return t.style.display="block",t}class sxe{constructor(e={}){const{canvas:n=yGe(),context:r=null,depth:o=!0,stencil:u=!0,alpha:p=!1,antialias:m=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:x=!1,powerPreference:M="default",failIfMajorPerformanceCaveat:R=!1}=e;this.isWebGLRenderer=!0;let N;r!==null?N=r.getContextAttributes().alpha:N=p;const G=new Uint32Array(4),Z=new Int32Array(4);let j=null,z=null;const U=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=tr,this._useLegacyLights=!1,this.toneMapping=Kf,this.toneMappingExposure=1;const K=this;let te=!1,pe=0,Q=0,Se=null,Pe=-1,H=null;const ye=new Xo,St=new Xo;let kt=null;const it=new fi(0);let me=0,lt=n.width,Fe=n.height,vt=1,Ge=null,mt=null;const Je=new Xo(0,0,lt,Fe),Be=new Xo(0,0,lt,Fe);let nt=!1;const Gt=new exe;let Bt=!1,Dt=!1,Jt=null;const on=new Ro,wn=new Wr,Wn=new ht,Kr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xn(){return Se===null?vt:1}let et=r;function Zr(_e,tt){for(let yt=0;yt<_e.length;yt++){const We=_e[yt],_t=n.getContext(We,tt);if(_t!==null)return _t}return null}try{const _e={alpha:!0,depth:o,stencil:u,antialias:m,premultipliedAlpha:_,preserveDrawingBuffer:x,powerPreference:M,failIfMajorPerformanceCaveat:R};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${_$}`),n.addEventListener("webglcontextlost",Ht,!1),n.addEventListener("webglcontextrestored",dt,!1),n.addEventListener("webglcontextcreationerror",Vt,!1),et===null){const tt=["webgl2","webgl","experimental-webgl"];if(K.isWebGL1Renderer===!0&&tt.shift(),et=Zr(tt,_e),et===null)throw Zr(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&et instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),et.getShaderPrecisionFormat===void 0&&(et.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}let Pn,Sn,gn,Mr,kn,Nn,cr,oi,Rr,Ee,ce,ut,Ut,Ot,Ft,mn,zt,pt,En,en,yn,rn,Qt,Bn;function pr(){Pn=new THe(et),Sn=new wHe(et,Pn,e),Pn.init(Sn),rn=new dGe(et,Pn,Sn),gn=new uGe(et,Pn,Sn),Mr=new IHe(et),kn=new X9e,Nn=new cGe(et,Pn,gn,kn,Sn,rn,Mr),cr=new SHe(K),oi=new kHe(K),Rr=new Vze(et,Sn),Qt=new bHe(et,Pn,Rr,Sn),Ee=new MHe(et,Rr,Mr,Qt),ce=new LHe(et,Ee,Rr,Mr),En=new DHe(et,Sn,Nn),mn=new xHe(kn),ut=new q9e(K,cr,oi,Pn,Sn,Qt,mn),Ut=new vGe(K,kn),Ot=new Z9e,Ft=new rGe(Pn,Sn),pt=new yHe(K,cr,oi,gn,ce,N,_),zt=new lGe(K,ce,Sn),Bn=new gGe(et,Mr,Sn,gn),en=new _He(et,Pn,Mr,Sn),yn=new AHe(et,Pn,Mr,Sn),Mr.programs=ut.programs,K.capabilities=Sn,K.extensions=Pn,K.properties=kn,K.renderLists=Ot,K.shadowMap=zt,K.state=gn,K.info=Mr}pr();const Le=new mGe(K,et);this.xr=Le,this.getContext=function(){return et},this.getContextAttributes=function(){return et.getContextAttributes()},this.forceContextLoss=function(){const _e=Pn.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=Pn.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return vt},this.setPixelRatio=function(_e){_e!==void 0&&(vt=_e,this.setSize(lt,Fe,!1))},this.getSize=function(_e){return _e.set(lt,Fe)},this.setSize=function(_e,tt,yt=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}lt=_e,Fe=tt,n.width=Math.floor(_e*vt),n.height=Math.floor(tt*vt),yt===!0&&(n.style.width=_e+"px",n.style.height=tt+"px"),this.setViewport(0,0,_e,tt)},this.getDrawingBufferSize=function(_e){return _e.set(lt*vt,Fe*vt).floor()},this.setDrawingBufferSize=function(_e,tt,yt){lt=_e,Fe=tt,vt=yt,n.width=Math.floor(_e*yt),n.height=Math.floor(tt*yt),this.setViewport(0,0,_e,tt)},this.getCurrentViewport=function(_e){return _e.copy(ye)},this.getViewport=function(_e){return _e.copy(Je)},this.setViewport=function(_e,tt,yt,We){_e.isVector4?Je.set(_e.x,_e.y,_e.z,_e.w):Je.set(_e,tt,yt,We),gn.viewport(ye.copy(Je).multiplyScalar(vt).floor())},this.getScissor=function(_e){return _e.copy(Be)},this.setScissor=function(_e,tt,yt,We){_e.isVector4?Be.set(_e.x,_e.y,_e.z,_e.w):Be.set(_e,tt,yt,We),gn.scissor(St.copy(Be).multiplyScalar(vt).floor())},this.getScissorTest=function(){return nt},this.setScissorTest=function(_e){gn.setScissorTest(nt=_e)},this.setOpaqueSort=function(_e){Ge=_e},this.setTransparentSort=function(_e){mt=_e},this.getClearColor=function(_e){return _e.copy(pt.getClearColor())},this.setClearColor=function(){pt.setClearColor.apply(pt,arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha.apply(pt,arguments)},this.clear=function(_e=!0,tt=!0,yt=!0){let We=0;if(_e){let _t=!1;if(Se!==null){const qt=Se.texture.format;_t=qt===B1e||qt===F1e||qt===N1e}if(_t){const qt=Se.texture.type,pn=qt===qf||qt===Df||qt===w$||qt===Eg||qt===D1e||qt===L1e,Ln=pt.getClearColor(),Tn=pt.getClearAlpha(),Kn=Ln.r,Mn=Ln.g,jn=Ln.b;pn?(G[0]=Kn,G[1]=Mn,G[2]=jn,G[3]=Tn,et.clearBufferuiv(et.COLOR,0,G)):(Z[0]=Kn,Z[1]=Mn,Z[2]=jn,Z[3]=Tn,et.clearBufferiv(et.COLOR,0,Z))}else We|=et.COLOR_BUFFER_BIT}tt&&(We|=et.DEPTH_BUFFER_BIT),yt&&(We|=et.STENCIL_BUFFER_BIT),et.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ht,!1),n.removeEventListener("webglcontextrestored",dt,!1),n.removeEventListener("webglcontextcreationerror",Vt,!1),Ot.dispose(),Ft.dispose(),kn.dispose(),cr.dispose(),oi.dispose(),ce.dispose(),Qt.dispose(),Bn.dispose(),ut.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",rr),Le.removeEventListener("sessionend",Vr),Jt&&(Jt.dispose(),Jt=null),Tr.stop()};function Ht(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),te=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),te=!1;const _e=Mr.autoReset,tt=zt.enabled,yt=zt.autoUpdate,We=zt.needsUpdate,_t=zt.type;pr(),Mr.autoReset=_e,zt.enabled=tt,zt.autoUpdate=yt,zt.needsUpdate=We,zt.type=_t}function Vt(_e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",_e.statusMessage)}function Kt(_e){const tt=_e.target;tt.removeEventListener("dispose",Kt),Qn(tt)}function Qn(_e){Or(_e),kn.remove(_e)}function Or(_e){const tt=kn.get(_e).programs;tt!==void 0&&(tt.forEach(function(yt){ut.releaseProgram(yt)}),_e.isShaderMaterial&&ut.releaseShaderCache(_e))}this.renderBufferDirect=function(_e,tt,yt,We,_t,qt){tt===null&&(tt=Kr);const pn=_t.isMesh&&_t.matrixWorld.determinant()<0,Ln=Jc(_e,tt,yt,We,_t);gn.setMaterial(We,pn);let Tn=yt.index,Kn=1;if(We.wireframe===!0){if(Tn=Ee.getWireframeAttribute(yt),Tn===void 0)return;Kn=2}const Mn=yt.drawRange,jn=yt.attributes.position;let Dr=Mn.start*Kn,lr=(Mn.start+Mn.count)*Kn;qt!==null&&(Dr=Math.max(Dr,qt.start*Kn),lr=Math.min(lr,(qt.start+qt.count)*Kn)),Tn!==null?(Dr=Math.max(Dr,0),lr=Math.min(lr,Tn.count)):jn!=null&&(Dr=Math.max(Dr,0),lr=Math.min(lr,jn.count));const qr=lr-Dr;if(qr<0||qr===1/0)return;Qt.setup(_t,We,Ln,yt,Tn);let xs,jr=en;if(Tn!==null&&(xs=Rr.get(Tn),jr=yn,jr.setIndex(xs)),_t.isMesh)We.wireframe===!0?(gn.setLineWidth(We.wireframeLinewidth*xn()),jr.setMode(et.LINES)):jr.setMode(et.TRIANGLES);else if(_t.isLine){let Yn=We.linewidth;Yn===void 0&&(Yn=1),gn.setLineWidth(Yn*xn()),_t.isLineSegments?jr.setMode(et.LINES):_t.isLineLoop?jr.setMode(et.LINE_LOOP):jr.setMode(et.LINE_STRIP)}else _t.isPoints?jr.setMode(et.POINTS):_t.isSprite&&jr.setMode(et.TRIANGLES);if(_t.isInstancedMesh)jr.renderInstances(Dr,qr,_t.count);else if(yt.isInstancedBufferGeometry){const Yn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Ka=Math.min(yt.instanceCount,Yn);jr.renderInstances(Dr,qr,Ka)}else jr.render(Dr,qr)},this.compile=function(_e,tt){function yt(We,_t,qt){We.transparent===!0&&We.side===ph&&We.forceSinglePass===!1?(We.side=ga,We.needsUpdate=!0,Gu(We,_t,qt),We.side=tm,We.needsUpdate=!0,Gu(We,_t,qt),We.side=ph):Gu(We,_t,qt)}z=Ft.get(_e),z.init(),C.push(z),_e.traverseVisible(function(We){We.isLight&&We.layers.test(tt.layers)&&(z.pushLight(We),We.castShadow&&z.pushShadow(We))}),z.setupLights(K._useLegacyLights),_e.traverse(function(We){const _t=We.material;if(_t)if(Array.isArray(_t))for(let qt=0;qt<_t.length;qt++){const pn=_t[qt];yt(pn,_e,We)}else yt(_t,_e,We)}),C.pop(),z=null};let kr=null;function Jo(_e){kr&&kr(_e)}function rr(){Tr.stop()}function Vr(){Tr.start()}const Tr=new txe;Tr.setAnimationLoop(Jo),typeof self<"u"&&Tr.setContext(self),this.setAnimationLoop=function(_e){kr=_e,Le.setAnimationLoop(_e),_e===null?Tr.stop():Tr.start()},Le.addEventListener("sessionstart",rr),Le.addEventListener("sessionend",Vr),this.render=function(_e,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(te===!0)return;_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(tt),tt=Le.getCamera()),_e.isScene===!0&&_e.onBeforeRender(K,_e,tt,Se),z=Ft.get(_e,C.length),z.init(),C.push(z),on.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),Gt.setFromProjectionMatrix(on),Dt=this.localClippingEnabled,Bt=mn.init(this.clippingPlanes,Dt),j=Ot.get(_e,U.length),j.init(),U.push(j),Xc(_e,tt,0,K.sortObjects),j.finish(),K.sortObjects===!0&&j.sort(Ge,mt),this.info.render.frame++,Bt===!0&&mn.beginShadows();const yt=z.state.shadowsArray;if(zt.render(yt,_e,tt),Bt===!0&&mn.endShadows(),this.info.autoReset===!0&&this.info.reset(),pt.render(j,_e),z.setupLights(K._useLegacyLights),tt.isArrayCamera){const We=tt.cameras;for(let _t=0,qt=We.length;_t<qt;_t++){const pn=We[_t];Yc(j,_e,pn,pn.viewport)}}else Yc(j,_e,tt);Se!==null&&(Nn.updateMultisampleRenderTarget(Se),Nn.updateRenderTargetMipmap(Se)),_e.isScene===!0&&_e.onAfterRender(K,_e,tt),Qt.resetDefaultState(),Pe=-1,H=null,C.pop(),C.length>0?z=C[C.length-1]:z=null,U.pop(),U.length>0?j=U[U.length-1]:j=null};function Xc(_e,tt,yt,We){if(_e.visible===!1)return;if(_e.layers.test(tt.layers)){if(_e.isGroup)yt=_e.renderOrder;else if(_e.isLOD)_e.autoUpdate===!0&&_e.update(tt);else if(_e.isLight)z.pushLight(_e),_e.castShadow&&z.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||Gt.intersectsSprite(_e)){We&&Wn.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(on);const pn=ce.update(_e),Ln=_e.material;Ln.visible&&j.push(_e,pn,Ln,yt,Wn.z,null)}}else if((_e.isMesh||_e.isLine||_e.isPoints)&&(!_e.frustumCulled||Gt.intersectsObject(_e))){const pn=ce.update(_e),Ln=_e.material;if(We&&(_e.boundingSphere!==void 0?(_e.boundingSphere===null&&_e.computeBoundingSphere(),Wn.copy(_e.boundingSphere.center)):(pn.boundingSphere===null&&pn.computeBoundingSphere(),Wn.copy(pn.boundingSphere.center)),Wn.applyMatrix4(_e.matrixWorld).applyMatrix4(on)),Array.isArray(Ln)){const Tn=pn.groups;for(let Kn=0,Mn=Tn.length;Kn<Mn;Kn++){const jn=Tn[Kn],Dr=Ln[jn.materialIndex];Dr&&Dr.visible&&j.push(_e,pn,Dr,yt,Wn.z,jn)}}else Ln.visible&&j.push(_e,pn,Ln,yt,Wn.z,null)}}const qt=_e.children;for(let pn=0,Ln=qt.length;pn<Ln;pn++)Xc(qt[pn],tt,yt,We)}function Yc(_e,tt,yt,We){const _t=_e.opaque,qt=_e.transmissive,pn=_e.transparent;z.setupLightsView(yt),Bt===!0&&mn.setGlobalState(K.clippingPlanes,yt),qt.length>0&&Zc(_t,qt,tt,yt),We&&gn.viewport(ye.copy(We)),_t.length>0&&Wa(_t,tt,yt),qt.length>0&&Wa(qt,tt,yt),pn.length>0&&Wa(pn,tt,yt),gn.buffers.depth.setTest(!0),gn.buffers.depth.setMask(!0),gn.buffers.color.setMask(!0),gn.setPolygonOffset(!1)}function Zc(_e,tt,yt,We){const _t=Sn.isWebGL2;Jt===null&&(Jt=new Ug(1,1,{generateMipmaps:!0,type:Pn.has("EXT_color_buffer_half_float")?dP:qf,minFilter:cP,samples:_t?4:0})),K.getDrawingBufferSize(wn),_t?Jt.setSize(wn.x,wn.y):Jt.setSize(t9(wn.x),t9(wn.y));const qt=K.getRenderTarget();K.setRenderTarget(Jt),K.getClearColor(it),me=K.getClearAlpha(),me<1&&K.setClearColor(16777215,.5),K.clear();const pn=K.toneMapping;K.toneMapping=Kf,Wa(_e,yt,We),Nn.updateMultisampleRenderTarget(Jt),Nn.updateRenderTargetMipmap(Jt);let Ln=!1;for(let Tn=0,Kn=tt.length;Tn<Kn;Tn++){const Mn=tt[Tn],jn=Mn.object,Dr=Mn.geometry,lr=Mn.material,qr=Mn.group;if(lr.side===ph&&jn.layers.test(We.layers)){const xs=lr.side;lr.side=ga,lr.needsUpdate=!0,Qc(jn,yt,We,Dr,lr,qr),lr.side=xs,lr.needsUpdate=!0,Ln=!0}}Ln===!0&&(Nn.updateMultisampleRenderTarget(Jt),Nn.updateRenderTargetMipmap(Jt)),K.setRenderTarget(qt),K.setClearColor(it,me),K.toneMapping=pn}function Wa(_e,tt,yt){const We=tt.isScene===!0?tt.overrideMaterial:null;for(let _t=0,qt=_e.length;_t<qt;_t++){const pn=_e[_t],Ln=pn.object,Tn=pn.geometry,Kn=We===null?pn.material:We,Mn=pn.group;Ln.layers.test(yt.layers)&&Qc(Ln,tt,yt,Tn,Kn,Mn)}}function Qc(_e,tt,yt,We,_t,qt){_e.onBeforeRender(K,tt,yt,We,_t,qt),_e.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),_t.onBeforeRender(K,tt,yt,We,_e,qt),_t.transparent===!0&&_t.side===ph&&_t.forceSinglePass===!1?(_t.side=ga,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,We,_t,_e,qt),_t.side=tm,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,We,_t,_e,qt),_t.side=ph):K.renderBufferDirect(yt,tt,We,_t,_e,qt),_e.onAfterRender(K,tt,yt,We,_t,qt)}function Gu(_e,tt,yt){tt.isScene!==!0&&(tt=Kr);const We=kn.get(_e),_t=z.state.lights,qt=z.state.shadowsArray,pn=_t.state.version,Ln=ut.getParameters(_e,_t.state,qt,tt,yt),Tn=ut.getProgramCacheKey(Ln);let Kn=We.programs;We.environment=_e.isMeshStandardMaterial?tt.environment:null,We.fog=tt.fog,We.envMap=(_e.isMeshStandardMaterial?oi:cr).get(_e.envMap||We.environment),Kn===void 0&&(_e.addEventListener("dispose",Kt),Kn=new Map,We.programs=Kn);let Mn=Kn.get(Tn);if(Mn!==void 0){if(We.currentProgram===Mn&&We.lightsStateVersion===pn)return ba(_e,Ln),Mn}else Ln.uniforms=ut.getUniforms(_e),_e.onBuild(yt,Ln,K),_e.onBeforeCompile(Ln,K),Mn=ut.acquireProgram(Ln,Tn),Kn.set(Tn,Mn),We.uniforms=Ln.uniforms;const jn=We.uniforms;(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||_e.clipping===!0)&&(jn.clippingPlanes=mn.uniform),ba(_e,Ln),We.needsLights=dm(_e),We.lightsStateVersion=pn,We.needsLights&&(jn.ambientLightColor.value=_t.state.ambient,jn.lightProbe.value=_t.state.probe,jn.directionalLights.value=_t.state.directional,jn.directionalLightShadows.value=_t.state.directionalShadow,jn.spotLights.value=_t.state.spot,jn.spotLightShadows.value=_t.state.spotShadow,jn.rectAreaLights.value=_t.state.rectArea,jn.ltc_1.value=_t.state.rectAreaLTC1,jn.ltc_2.value=_t.state.rectAreaLTC2,jn.pointLights.value=_t.state.point,jn.pointLightShadows.value=_t.state.pointShadow,jn.hemisphereLights.value=_t.state.hemi,jn.directionalShadowMap.value=_t.state.directionalShadowMap,jn.directionalShadowMatrix.value=_t.state.directionalShadowMatrix,jn.spotShadowMap.value=_t.state.spotShadowMap,jn.spotLightMatrix.value=_t.state.spotLightMatrix,jn.spotLightMap.value=_t.state.spotLightMap,jn.pointShadowMap.value=_t.state.pointShadowMap,jn.pointShadowMatrix.value=_t.state.pointShadowMatrix);const Dr=Mn.getUniforms(),lr=JD.seqWithValue(Dr.seq,jn);return We.currentProgram=Mn,We.uniformsList=lr,Mn}function ba(_e,tt){const yt=kn.get(_e);yt.outputColorSpace=tt.outputColorSpace,yt.instancing=tt.instancing,yt.instancingColor=tt.instancingColor,yt.skinning=tt.skinning,yt.morphTargets=tt.morphTargets,yt.morphNormals=tt.morphNormals,yt.morphColors=tt.morphColors,yt.morphTargetsCount=tt.morphTargetsCount,yt.numClippingPlanes=tt.numClippingPlanes,yt.numIntersection=tt.numClipIntersection,yt.vertexAlphas=tt.vertexAlphas,yt.vertexTangents=tt.vertexTangents,yt.toneMapping=tt.toneMapping}function Jc(_e,tt,yt,We,_t){tt.isScene!==!0&&(tt=Kr),Nn.resetTextureUnits();const qt=tt.fog,pn=We.isMeshStandardMaterial?tt.environment:null,Ln=Se===null?K.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:Kc,Tn=(We.isMeshStandardMaterial?oi:cr).get(We.envMap||pn),Kn=We.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Mn=!!yt.attributes.tangent&&(!!We.normalMap||We.anisotropy>0),jn=!!yt.morphAttributes.position,Dr=!!yt.morphAttributes.normal,lr=!!yt.morphAttributes.color;let qr=Kf;We.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(qr=K.toneMapping);const xs=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,jr=xs!==void 0?xs.length:0,Yn=kn.get(We),Ka=z.state.lights;if(Bt===!0&&(Dt===!0||_e!==H)){const eo=_e===H&&We.id===Pe;mn.setState(We,_e,eo)}let wr=!1;We.version===Yn.__version?(Yn.needsLights&&Yn.lightsStateVersion!==Ka.state.version||Yn.outputColorSpace!==Ln||_t.isInstancedMesh&&Yn.instancing===!1||!_t.isInstancedMesh&&Yn.instancing===!0||_t.isSkinnedMesh&&Yn.skinning===!1||!_t.isSkinnedMesh&&Yn.skinning===!0||_t.isInstancedMesh&&Yn.instancingColor===!0&&_t.instanceColor===null||_t.isInstancedMesh&&Yn.instancingColor===!1&&_t.instanceColor!==null||Yn.envMap!==Tn||We.fog===!0&&Yn.fog!==qt||Yn.numClippingPlanes!==void 0&&(Yn.numClippingPlanes!==mn.numPlanes||Yn.numIntersection!==mn.numIntersection)||Yn.vertexAlphas!==Kn||Yn.vertexTangents!==Mn||Yn.morphTargets!==jn||Yn.morphNormals!==Dr||Yn.morphColors!==lr||Yn.toneMapping!==qr||Sn.isWebGL2===!0&&Yn.morphTargetsCount!==jr)&&(wr=!0):(wr=!0,Yn.__version=We.version);let Xs=Yn.currentProgram;wr===!0&&(Xs=Gu(We,tt,_t));let qa=!1,Ys=!1,Xa=!1;const Xr=Xs.getUniforms(),es=Yn.uniforms;if(gn.useProgram(Xs.program)&&(qa=!0,Ys=!0,Xa=!0),We.id!==Pe&&(Pe=We.id,Ys=!0),qa||H!==_e){if(Xr.setValue(et,"projectionMatrix",_e.projectionMatrix),Sn.logarithmicDepthBuffer&&Xr.setValue(et,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),H!==_e&&(H=_e,Ys=!0,Xa=!0),We.isShaderMaterial||We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshStandardMaterial||We.envMap){const eo=Xr.map.cameraPosition;eo!==void 0&&eo.setValue(et,Wn.setFromMatrixPosition(_e.matrixWorld))}(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&Xr.setValue(et,"isOrthographic",_e.isOrthographicCamera===!0),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial||We.isShadowMaterial||_t.isSkinnedMesh)&&Xr.setValue(et,"viewMatrix",_e.matrixWorldInverse)}if(_t.isSkinnedMesh){Xr.setOptional(et,_t,"bindMatrix"),Xr.setOptional(et,_t,"bindMatrixInverse");const eo=_t.skeleton;eo&&(Sn.floatVertexTextures?(eo.boneTexture===null&&eo.computeBoneTexture(),Xr.setValue(et,"boneTexture",eo.boneTexture,Nn),Xr.setValue(et,"boneTextureSize",eo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ya=yt.morphAttributes;if((Ya.position!==void 0||Ya.normal!==void 0||Ya.color!==void 0&&Sn.isWebGL2===!0)&&En.update(_t,yt,Xs),(Ys||Yn.receiveShadow!==_t.receiveShadow)&&(Yn.receiveShadow=_t.receiveShadow,Xr.setValue(et,"receiveShadow",_t.receiveShadow)),We.isMeshGouraudMaterial&&We.envMap!==null&&(es.envMap.value=Tn,es.flipEnvMap.value=Tn.isCubeTexture&&Tn.isRenderTargetTexture===!1?-1:1),Ys&&(Xr.setValue(et,"toneMappingExposure",K.toneMappingExposure),Yn.needsLights&&Dh(es,Xa),qt&&We.fog===!0&&Ut.refreshFogUniforms(es,qt),Ut.refreshMaterialUniforms(es,We,vt,Fe,Jt),JD.upload(et,Yn.uniformsList,es,Nn)),We.isShaderMaterial&&We.uniformsNeedUpdate===!0&&(JD.upload(et,Yn.uniformsList,es,Nn),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&Xr.setValue(et,"center",_t.center),Xr.setValue(et,"modelViewMatrix",_t.modelViewMatrix),Xr.setValue(et,"normalMatrix",_t.normalMatrix),Xr.setValue(et,"modelMatrix",_t.matrixWorld),We.isShaderMaterial||We.isRawShaderMaterial){const eo=We.uniformsGroups;for(let $u=0,Lh=eo.length;$u<Lh;$u++)if(Sn.isWebGL2){const ed=eo[$u];Bn.update(ed,Xs),Bn.bind(ed,Xs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Xs}function Dh(_e,tt){_e.ambientLightColor.needsUpdate=tt,_e.lightProbe.needsUpdate=tt,_e.directionalLights.needsUpdate=tt,_e.directionalLightShadows.needsUpdate=tt,_e.pointLights.needsUpdate=tt,_e.pointLightShadows.needsUpdate=tt,_e.spotLights.needsUpdate=tt,_e.spotLightShadows.needsUpdate=tt,_e.rectAreaLights.needsUpdate=tt,_e.hemisphereLights.needsUpdate=tt}function dm(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&_e.lights===!0}this.getActiveCubeFace=function(){return pe},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return Se},this.setRenderTargetTextures=function(_e,tt,yt){kn.get(_e.texture).__webglTexture=tt,kn.get(_e.depthTexture).__webglTexture=yt;const We=kn.get(_e);We.__hasExternalTextures=!0,We.__hasExternalTextures&&(We.__autoAllocateDepthBuffer=yt===void 0,We.__autoAllocateDepthBuffer||Pn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),We.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(_e,tt){const yt=kn.get(_e);yt.__webglFramebuffer=tt,yt.__useDefaultFramebuffer=tt===void 0},this.setRenderTarget=function(_e,tt=0,yt=0){Se=_e,pe=tt,Q=yt;let We=!0,_t=null,qt=!1,pn=!1;if(_e){const Tn=kn.get(_e);Tn.__useDefaultFramebuffer!==void 0?(gn.bindFramebuffer(et.FRAMEBUFFER,null),We=!1):Tn.__webglFramebuffer===void 0?Nn.setupRenderTarget(_e):Tn.__hasExternalTextures&&Nn.rebindTextures(_e,kn.get(_e.texture).__webglTexture,kn.get(_e.depthTexture).__webglTexture);const Kn=_e.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture||Kn.isCompressedArrayTexture)&&(pn=!0);const Mn=kn.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(Array.isArray(Mn[tt])?_t=Mn[tt][yt]:_t=Mn[tt],qt=!0):Sn.isWebGL2&&_e.samples>0&&Nn.useMultisampledRTT(_e)===!1?_t=kn.get(_e).__webglMultisampledFramebuffer:Array.isArray(Mn)?_t=Mn[yt]:_t=Mn,ye.copy(_e.viewport),St.copy(_e.scissor),kt=_e.scissorTest}else ye.copy(Je).multiplyScalar(vt).floor(),St.copy(Be).multiplyScalar(vt).floor(),kt=nt;if(gn.bindFramebuffer(et.FRAMEBUFFER,_t)&&Sn.drawBuffers&&We&&gn.drawBuffers(_e,_t),gn.viewport(ye),gn.scissor(St),gn.setScissorTest(kt),qt){const Tn=kn.get(_e.texture);et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Tn.__webglTexture,yt)}else if(pn){const Tn=kn.get(_e.texture),Kn=tt||0;et.framebufferTextureLayer(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,Tn.__webglTexture,yt||0,Kn)}Pe=-1},this.readRenderTargetPixels=function(_e,tt,yt,We,_t,qt,pn){if(!(_e&&_e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ln=kn.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&pn!==void 0&&(Ln=Ln[pn]),Ln){gn.bindFramebuffer(et.FRAMEBUFFER,Ln);try{const Tn=_e.texture,Kn=Tn.format,Mn=Tn.type;if(Kn!==Nu&&rn.convert(Kn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jn=Mn===dP&&(Pn.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&Pn.has("EXT_color_buffer_float"));if(Mn!==qf&&rn.convert(Mn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Mn===Lf&&(Sn.isWebGL2||Pn.has("OES_texture_float")||Pn.has("WEBGL_color_buffer_float")))&&!jn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=_e.width-We&&yt>=0&&yt<=_e.height-_t&&et.readPixels(tt,yt,We,_t,rn.convert(Kn),rn.convert(Mn),qt)}finally{const Tn=Se!==null?kn.get(Se).__webglFramebuffer:null;gn.bindFramebuffer(et.FRAMEBUFFER,Tn)}}},this.copyFramebufferToTexture=function(_e,tt,yt=0){const We=Math.pow(2,-yt),_t=Math.floor(tt.image.width*We),qt=Math.floor(tt.image.height*We);Nn.setTexture2D(tt,0),et.copyTexSubImage2D(et.TEXTURE_2D,yt,0,0,_e.x,_e.y,_t,qt),gn.unbindTexture()},this.copyTextureToTexture=function(_e,tt,yt,We=0){const _t=tt.image.width,qt=tt.image.height,pn=rn.convert(yt.format),Ln=rn.convert(yt.type);Nn.setTexture2D(yt,0),et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,yt.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,yt.unpackAlignment),tt.isDataTexture?et.texSubImage2D(et.TEXTURE_2D,We,_e.x,_e.y,_t,qt,pn,Ln,tt.image.data):tt.isCompressedTexture?et.compressedTexSubImage2D(et.TEXTURE_2D,We,_e.x,_e.y,tt.mipmaps[0].width,tt.mipmaps[0].height,pn,tt.mipmaps[0].data):et.texSubImage2D(et.TEXTURE_2D,We,_e.x,_e.y,pn,Ln,tt.image),We===0&&yt.generateMipmaps&&et.generateMipmap(et.TEXTURE_2D),gn.unbindTexture()},this.copyTextureToTexture3D=function(_e,tt,yt,We,_t=0){if(K.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const qt=_e.max.x-_e.min.x+1,pn=_e.max.y-_e.min.y+1,Ln=_e.max.z-_e.min.z+1,Tn=rn.convert(We.format),Kn=rn.convert(We.type);let Mn;if(We.isData3DTexture)Nn.setTexture3D(We,0),Mn=et.TEXTURE_3D;else if(We.isDataArrayTexture)Nn.setTexture2DArray(We,0),Mn=et.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,We.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,We.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,We.unpackAlignment);const jn=et.getParameter(et.UNPACK_ROW_LENGTH),Dr=et.getParameter(et.UNPACK_IMAGE_HEIGHT),lr=et.getParameter(et.UNPACK_SKIP_PIXELS),qr=et.getParameter(et.UNPACK_SKIP_ROWS),xs=et.getParameter(et.UNPACK_SKIP_IMAGES),jr=yt.isCompressedTexture?yt.mipmaps[0]:yt.image;et.pixelStorei(et.UNPACK_ROW_LENGTH,jr.width),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,jr.height),et.pixelStorei(et.UNPACK_SKIP_PIXELS,_e.min.x),et.pixelStorei(et.UNPACK_SKIP_ROWS,_e.min.y),et.pixelStorei(et.UNPACK_SKIP_IMAGES,_e.min.z),yt.isDataTexture||yt.isData3DTexture?et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,qt,pn,Ln,Tn,Kn,jr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),et.compressedTexSubImage3D(Mn,_t,tt.x,tt.y,tt.z,qt,pn,Ln,Tn,jr.data)):et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,qt,pn,Ln,Tn,Kn,jr),et.pixelStorei(et.UNPACK_ROW_LENGTH,jn),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,Dr),et.pixelStorei(et.UNPACK_SKIP_PIXELS,lr),et.pixelStorei(et.UNPACK_SKIP_ROWS,qr),et.pixelStorei(et.UNPACK_SKIP_IMAGES,xs),_t===0&&We.generateMipmaps&&et.generateMipmap(Mn),gn.unbindTexture()},this.initTexture=function(_e){_e.isCubeTexture?Nn.setTextureCube(_e,0):_e.isData3DTexture?Nn.setTexture3D(_e,0):_e.isDataArrayTexture||_e.isCompressedArrayTexture?Nn.setTexture2DArray(_e,0):Nn.setTexture2D(_e,0),gn.unbindTexture()},this.resetState=function(){pe=0,Q=0,Se=null,gn.reset(),Qt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yh}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===tr?Pg:U1e}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Pg?tr:Kc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class bGe extends sxe{}bGe.prototype.isWebGL1Renderer=!0;class _Ge extends bs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class C$ extends um{constructor(e=1,n=32,r=16,o=0,u=Math.PI*2,p=0,m=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:o,phiLength:u,thetaStart:p,thetaLength:m},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const _=Math.min(p+m,Math.PI);let x=0;const M=[],R=new ht,N=new ht,G=[],Z=[],j=[],z=[];for(let U=0;U<=r;U++){const C=[],K=U/r;let te=0;U===0&&p===0?te=.5/n:U===r&&_===Math.PI&&(te=-.5/n);for(let pe=0;pe<=n;pe++){const Q=pe/n;R.x=-e*Math.cos(o+Q*u)*Math.sin(p+K*m),R.y=e*Math.cos(p+K*m),R.z=e*Math.sin(o+Q*u)*Math.sin(p+K*m),Z.push(R.x,R.y,R.z),N.copy(R).normalize(),j.push(N.x,N.y,N.z),z.push(Q+te,1-K),C.push(x++)}M.push(C)}for(let U=0;U<r;U++)for(let C=0;C<n;C++){const K=M[U][C+1],te=M[U][C],pe=M[U+1][C],Q=M[U+1][C+1];(U!==0||p>0)&&G.push(K,te,Q),(U!==r-1||_<Math.PI)&&G.push(te,pe,Q)}this.setIndex(G),this.setAttribute("position",new zc(Z,3)),this.setAttribute("normal",new zc(j,3)),this.setAttribute("uv",new zc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C$(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wGe extends BP{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=V1e,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_$}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_$);const Mi=new Xg,Ai={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",GET_SCENE:"ToolEvents::getScene",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject"};function xGe(){var e;const t=nn.useRef(null);return(e=Zi.theatre)==null||e.sheet("App"),nn.useEffect(()=>{var o;const n=t.current;n.style.visibility=Zi.editor?"hidden":"inherit";const r=(o=Zi.theatre)==null?void 0:o.sheetObject("App","Box",{x:RH.types.number(100,{range:[0,window.innerWidth]}),y:RH.types.number(100,{range:[0,window.innerHeight]})},u=>{n.style.left=`${u.x}px`,n.style.top=`${u.y}px`});return()=>{var u;r!==void 0&&((u=Zi.theatre)==null||u.unsubscribe(r)),Zi.dispose()}},[]),nn.useEffect(()=>{if(Zi.editor)return;const n=new sxe({antialias:!0});n.setPixelRatio(devicePixelRatio),t.current.parentElement.appendChild(n.domElement);const r=new _Ge;r.name="Example";const o=new bs;o.name="cameras",r.add(o);const u=new Rl(60,1,1,2e3);u.name="mainCamera",u.position.z=300,o.add(u);const p=new bs;p.name="world",r.add(p);const m=new bh(new C$(100),new wGe);m.name="sphere",p.add(m);const _=new bs;_.name="test",m.add(_);let x=-1;const M=()=>{const j=window.innerWidth,z=window.innerHeight;u.aspect=j/z,u.updateProjectionMatrix(),n.setSize(j,z)},R=()=>{n.render(r,u),x=requestAnimationFrame(R)};M(),R(),window.addEventListener("resize",M);const N=j=>{const z=r.getObjectByProperty("uuid",j.value);z!==void 0&&Zi.three.setObject(z)},G=j=>{console.log("onUpdateObject:",j)},Z=()=>{Zi.three.setScene(r)};return Mi.addEventListener(Ai.GET_OBJECT,N),Mi.addEventListener(Ai.GET_SCENE,Z),Mi.addEventListener(Ai.UPDATE_OBJECT,G),Zi.three.setScene(r),()=>{Mi.removeEventListener(Ai.GET_OBJECT,N),Mi.removeEventListener(Ai.GET_SCENE,Z),Mi.removeEventListener(Ai.UPDATE_OBJECT,G),window.removeEventListener("resize",M),n.dispose(),cancelAnimationFrame(x),x=-1}},[]),nn.useEffect(()=>{const n=t.current;n.style.visibility=Zi.editor?"hidden":"inherit";const r=Zi.debug.addFolder("Test");Zi.debug.button("Test Button",()=>{console.log("Test button works!")},r);const o={opacity:1,rotation:0};Zi.debug.bind(o,"opacity",{min:0,max:1,onChange:m=>{n.style.opacity=m.toFixed(2)}},r),Zi.debug.bind(o,"rotation",{min:0,max:360,onChange:m=>{n.style.transform=`rotate(${m}deg)`}},r);const u=m=>{console.log("Custom:",m.value)},p=m=>{console.log(`Dropdown: ${m.value.dropdown}, value: ${m.value.value}`)};return Mi.addEventListener(Ai.CUSTOM,u),Mi.addEventListener(Ai.SELECT_DROPDOWN,p),()=>{Mi.removeEventListener(Ai.CUSTOM,u),Mi.removeEventListener(Ai.SELECT_DROPDOWN,p)}},[]),Zt.jsx("div",{id:"box",ref:t,children:Zt.jsx("button",{onClick:()=>{Zi.send({target:"editor",event:"custom",data:"hello editor!"})},children:"Click"})})}function SGe(t){return Zt.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[Zt.jsx("header",{children:t.header}),t.children,Zt.jsx("footer",{children:t.footer})]})}function axe(t){return t.title.search("<")>-1?Zt.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):Zt.jsx("button",{children:t.title})}const P$=nn.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),kL=nn.createContext({}),k$=nn.createContext(null),TL=typeof document<"u",r9=TL?nn.useLayoutEffect:nn.useEffect,lxe=nn.createContext({strict:!1});function EGe(t,e,n,r){const{visualElement:o}=nn.useContext(kL),u=nn.useContext(lxe),p=nn.useContext(k$),m=nn.useContext(P$).reducedMotion,_=nn.useRef();r=r||u.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:o,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:m}));const x=_.current;return nn.useInsertionEffect(()=>{x&&x.update(n,p)}),r9(()=>{x&&x.render()}),nn.useEffect(()=>{x&&x.updateFeatures()}),(window.HandoffAppearAnimations?r9:nn.useEffect)(()=>{x&&x.animationState&&x.animationState.animateChanges()}),x}function b_(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CGe(t,e,n){return nn.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):b_(n)&&(n.current=r))},[e])}function hP(t){return typeof t=="string"||Array.isArray(t)}function ML(t){return typeof t=="object"&&typeof t.start=="function"}const T$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M$=["initial",...T$];function AL(t){return ML(t.animate)||M$.some(e=>hP(t[e]))}function uxe(t){return!!(AL(t)||t.variants)}function PGe(t,e){if(AL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||hP(n)?n:void 0,animate:hP(r)?r:void 0}}return t.inherit!==!1?e:{}}function kGe(t){const{initial:e,animate:n}=PGe(t,nn.useContext(kL));return nn.useMemo(()=>({initial:e,animate:n}),[Gge(e),Gge(n)])}function Gge(t){return Array.isArray(t)?t.join(" "):t}const $ge={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pP={};for(const t in $ge)pP[t]={isEnabled:e=>$ge[t].some(n=>!!e[n])};function TGe(t){for(const e in t)pP[e]={...pP[e],...t[e]}}const cxe=nn.createContext({}),dxe=nn.createContext({}),MGe=Symbol.for("motionComponentSymbol");function AGe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&TGe(t);function u(m,_){let x;const M={...nn.useContext(P$),...m,layoutId:IGe(m)},{isStatic:R}=M,N=kGe(m),G=r(m,R);if(!R&&TL){N.visualElement=EGe(o,G,M,e);const Z=nn.useContext(dxe),j=nn.useContext(lxe).strict;N.visualElement&&(x=N.visualElement.loadFeatures(M,j,t,Z))}return nn.createElement(kL.Provider,{value:N},x&&N.visualElement?nn.createElement(x,{visualElement:N.visualElement,...M}):null,n(o,m,CGe(G,N.visualElement,_),G,R,N.visualElement))}const p=nn.forwardRef(u);return p[MGe]=o,p}function IGe({layoutId:t}){const e=nn.useContext(cxe).id;return e&&t!==void 0?e+"-"+t:t}function RGe(t){function e(r,o={}){return AGe(t(r,o))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,o)=>(n.has(o)||n.set(o,e(o)),n.get(o))})}const OGe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function A$(t){return typeof t!="string"||t.includes("-")?!1:!!(OGe.indexOf(t)>-1||/[A-Z]/.test(t))}const V3={};function DGe(t){Object.assign(V3,t)}const VP=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yg=new Set(VP);function hxe(t,{layout:e,layoutId:n}){return Yg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!V3[t]||t==="opacity")}const $s=t=>!!(t&&t.getVelocity),LGe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NGe=VP.length;function FGe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,o){let u="";for(let p=0;p<NGe;p++){const m=VP[p];if(t[m]!==void 0){const _=LGe[m]||m;u+=`${_}(${t[m]}) `}}return e&&!t.z&&(u+="translateZ(0)"),u=u.trim(),o?u=o(t,r?"":u):n&&r&&(u="none"),u}const pxe=t=>e=>typeof e=="string"&&e.startsWith(t),fxe=pxe("--"),i9=pxe("var(--"),BGe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,UGe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,nm=(t,e,n)=>Math.min(Math.max(n,t),e),Zg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},RC={...Zg,transform:t=>nm(0,1,t)},ID={...Zg,default:1},OC=t=>Math.round(t*1e5)/1e5,IL=/(-)?([\d]*\.?[\d])+/g,mxe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,VGe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function jP(t){return typeof t=="string"}const zP=t=>({test:e=>jP(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ef=zP("deg"),Hc=zP("%"),Fn=zP("px"),jGe=zP("vh"),zGe=zP("vw"),Wge={...Hc,parse:t=>Hc.parse(t)/100,transform:t=>Hc.transform(t*100)},Kge={...Zg,transform:Math.round},vxe={borderWidth:Fn,borderTopWidth:Fn,borderRightWidth:Fn,borderBottomWidth:Fn,borderLeftWidth:Fn,borderRadius:Fn,radius:Fn,borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomRightRadius:Fn,borderBottomLeftRadius:Fn,width:Fn,maxWidth:Fn,height:Fn,maxHeight:Fn,size:Fn,top:Fn,right:Fn,bottom:Fn,left:Fn,padding:Fn,paddingTop:Fn,paddingRight:Fn,paddingBottom:Fn,paddingLeft:Fn,margin:Fn,marginTop:Fn,marginRight:Fn,marginBottom:Fn,marginLeft:Fn,rotate:Ef,rotateX:Ef,rotateY:Ef,rotateZ:Ef,scale:ID,scaleX:ID,scaleY:ID,scaleZ:ID,skew:Ef,skewX:Ef,skewY:Ef,distance:Fn,translateX:Fn,translateY:Fn,translateZ:Fn,x:Fn,y:Fn,z:Fn,perspective:Fn,transformPerspective:Fn,opacity:RC,originX:Wge,originY:Wge,originZ:Fn,zIndex:Kge,fillOpacity:RC,strokeOpacity:RC,numOctaves:Kge};function I$(t,e,n,r){const{style:o,vars:u,transform:p,transformOrigin:m}=t;let _=!1,x=!1,M=!0;for(const R in e){const N=e[R];if(fxe(R)){u[R]=N;continue}const G=vxe[R],Z=UGe(N,G);if(Yg.has(R)){if(_=!0,p[R]=Z,!M)continue;N!==(G.default||0)&&(M=!1)}else R.startsWith("origin")?(x=!0,m[R]=Z):o[R]=Z}if(e.transform||(_||r?o.transform=FGe(t.transform,n,M,r):o.transform&&(o.transform="none")),x){const{originX:R="50%",originY:N="50%",originZ:G=0}=m;o.transformOrigin=`${R} ${N} ${G}`}}const R$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gxe(t,e,n){for(const r in e)!$s(e[r])&&!hxe(r,n)&&(t[r]=e[r])}function HGe({transformTemplate:t},e,n){return nn.useMemo(()=>{const r=R$();return I$(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function GGe(t,e,n){const r=t.style||{},o={};return gxe(o,r,t),Object.assign(o,HGe(t,e,n)),t.transformValues?t.transformValues(o):o}function $Ge(t,e,n){const r={},o=GGe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const WGe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function j3(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||WGe.has(t)}let yxe=t=>!j3(t);function KGe(t){t&&(yxe=e=>e.startsWith("on")?!j3(e):t(e))}try{KGe(require("@emotion/is-prop-valid").default)}catch{}function qGe(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(yxe(o)||n===!0&&j3(o)||!e&&!j3(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function qge(t,e,n){return typeof t=="string"?t:Fn.transform(e+n*t)}function XGe(t,e,n){const r=qge(e,t.x,t.width),o=qge(n,t.y,t.height);return`${r} ${o}`}const YGe={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZGe={offset:"strokeDashoffset",array:"strokeDasharray"};function QGe(t,e,n=1,r=0,o=!0){t.pathLength=1;const u=o?YGe:ZGe;t[u.offset]=Fn.transform(-r);const p=Fn.transform(e),m=Fn.transform(n);t[u.array]=`${p} ${m}`}function O$(t,{attrX:e,attrY:n,attrScale:r,originX:o,originY:u,pathLength:p,pathSpacing:m=1,pathOffset:_=0,...x},M,R,N){if(I$(t,x,M,N),R){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:G,style:Z,dimensions:j}=t;G.transform&&(j&&(Z.transform=G.transform),delete G.transform),j&&(o!==void 0||u!==void 0||Z.transform)&&(Z.transformOrigin=XGe(j,o!==void 0?o:.5,u!==void 0?u:.5)),e!==void 0&&(G.x=e),n!==void 0&&(G.y=n),r!==void 0&&(G.scale=r),p!==void 0&&QGe(G,p,m,_,!1)}const bxe=()=>({...R$(),attrs:{}}),D$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function JGe(t,e,n,r){const o=nn.useMemo(()=>{const u=bxe();return O$(u,e,{enableHardwareAcceleration:!1},D$(r),t.transformTemplate),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};gxe(u,t.style,t),o.style={...u,...o.style}}return o}function e$e(t=!1){return(n,r,o,{latestValues:u},p)=>{const _=(A$(n)?JGe:$Ge)(r,u,p,n),M={...qGe(r,typeof n=="string",t),..._,ref:o},{children:R}=r,N=nn.useMemo(()=>$s(R)?R.get():R,[R]);return nn.createElement(n,{...M,children:N})}}const L$=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function _xe(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const u in n)t.style.setProperty(u,n[u])}const wxe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xxe(t,e,n,r){_xe(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(wxe.has(o)?o:L$(o),e.attrs[o])}function N$(t,e){const{style:n}=t,r={};for(const o in n)($s(n[o])||e.style&&$s(e.style[o])||hxe(o,t))&&(r[o]=n[o]);return r}function Sxe(t,e){const n=N$(t,e);for(const r in t)if($s(t[r])||$s(e[r])){const o=VP.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=t[r]}return n}function F$(t,e,n,r={},o={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),e}function HP(t){const e=nn.useRef(null);return e.current===null&&(e.current=t()),e.current}const z3=t=>Array.isArray(t),t$e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),n$e=t=>z3(t)?t[t.length-1]||0:t;function e3(t){const e=$s(t)?t.get():t;return t$e(e)?e.toValue():e}function r$e({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,u){const p={latestValues:i$e(r,o,u,t),renderState:e()};return n&&(p.mount=m=>n(r,m,p)),p}const Exe=t=>(e,n)=>{const r=nn.useContext(kL),o=nn.useContext(k$),u=()=>r$e(t,e,r,o);return n?u():HP(u)};function i$e(t,e,n,r){const o={},u=r(t,{});for(const N in u)o[N]=e3(u[N]);let{initial:p,animate:m}=t;const _=AL(t),x=uxe(t);e&&x&&!_&&t.inherit!==!1&&(p===void 0&&(p=e.initial),m===void 0&&(m=e.animate));let M=n?n.initial===!1:!1;M=M||p===!1;const R=M?m:p;return R&&typeof R!="boolean"&&!ML(R)&&(Array.isArray(R)?R:[R]).forEach(G=>{const Z=F$(t,G);if(!Z)return;const{transitionEnd:j,transition:z,...U}=Z;for(const C in U){let K=U[C];if(Array.isArray(K)){const te=M?K.length-1:0;K=K[te]}K!==null&&(o[C]=K)}for(const C in j)o[C]=j[C]}),o}const o$e={useVisualState:Exe({scrapeMotionValuesFromProps:Sxe,createRenderState:bxe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}O$(n,r,{enableHardwareAcceleration:!1},D$(e.tagName),t.transformTemplate),xxe(e,n)}})},s$e={useVisualState:Exe({scrapeMotionValuesFromProps:N$,createRenderState:R$})};function a$e(t,{forwardMotionProps:e=!1},n,r){return{...A$(t)?o$e:s$e,preloadedFeatures:n,useRender:e$e(e),createVisualElement:r,Component:t}}function _h(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Cxe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function RL(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const l$e=t=>e=>Cxe(e)&&t(e,RL(e));function Sh(t,e,n,r){return _h(t,e,l$e(n),r)}const u$e=(t,e)=>n=>e(t(n)),Xf=(...t)=>t.reduce(u$e);function Pxe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Xge=Pxe("dragHorizontal"),Yge=Pxe("dragVertical");function kxe(t){let e=!1;if(t==="y")e=Yge();else if(t==="x")e=Xge();else{const n=Xge(),r=Yge();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Txe(){const t=kxe(!0);return t?(t(),!1):!0}class cm{constructor(e){this.isMounted=!1,this.node=e}update(){}}const Ui=t=>t;function c$e(t){let e=[],n=[],r=0,o=!1,u=!1;const p=new WeakSet,m={schedule:(_,x=!1,M=!1)=>{const R=M&&o,N=R?e:n;return x&&p.add(_),N.indexOf(_)===-1&&(N.push(_),R&&o&&(r=e.length)),_},cancel:_=>{const x=n.indexOf(_);x!==-1&&n.splice(x,1),p.delete(_)},process:_=>{if(o){u=!0;return}if(o=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let x=0;x<r;x++){const M=e[x];M(_),p.has(M)&&(m.schedule(M),t())}o=!1,u&&(u=!1,m.process(_))}};return m}const RD=["prepare","read","update","preRender","render","postRender"],d$e=40;function h$e(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=RD.reduce((R,N)=>(R[N]=c$e(()=>n=!0),R),{}),p=R=>u[R].process(o),m=()=>{const R=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(R-o.timestamp,d$e),1),o.timestamp=R,o.isProcessing=!0,RD.forEach(p),o.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,o.isProcessing||t(m)};return{schedule:RD.reduce((R,N)=>{const G=u[N];return R[N]=(Z,j=!1,z=!1)=>(n||_(),G.schedule(Z,j,z)),R},{}),cancel:R=>RD.forEach(N=>u[N].cancel(R)),state:o,steps:u}}const{schedule:_i,cancel:qc,state:vs,steps:C8}=h$e(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ui,!0);function Zge(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(u,p)=>{if(u.type==="touch"||Txe())return;const m=t.getProps();t.animationState&&m.whileHover&&t.animationState.setActive("whileHover",e),m[r]&&_i.update(()=>m[r](u,p))};return Sh(t.current,n,o,{passive:!t.getProps()[r]})}class p$e extends cm{mount(){this.unmount=Xf(Zge(this.node,!0),Zge(this.node,!1))}unmount(){}}class f$e extends cm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xf(_h(this.node.current,"focus",()=>this.onFocus()),_h(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Mxe=(t,e)=>e?t===e?!0:Mxe(t,e.parentElement):!1;function P8(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,RL(n))}class m$e extends cm{constructor(){super(...arguments),this.removeStartListeners=Ui,this.removeEndListeners=Ui,this.removeAccessibleListeners=Ui,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),u=Sh(window,"pointerup",(m,_)=>{if(!this.checkPressEnd())return;const{onTap:x,onTapCancel:M}=this.node.getProps();_i.update(()=>{Mxe(this.node.current,m.target)?x&&x(m,_):M&&M(m,_)})},{passive:!(r.onTap||r.onPointerUp)}),p=Sh(window,"pointercancel",(m,_)=>this.cancelPress(m,_),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Xf(u,p),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=u=>{if(u.key!=="Enter"||this.isPressing)return;const p=m=>{m.key!=="Enter"||!this.checkPressEnd()||P8("up",(_,x)=>{const{onTap:M}=this.node.getProps();M&&_i.update(()=>M(_,x))})};this.removeEndListeners(),this.removeEndListeners=_h(this.node.current,"keyup",p),P8("down",(m,_)=>{this.startPress(m,_)})},n=_h(this.node.current,"keydown",e),r=()=>{this.isPressing&&P8("cancel",(u,p)=>this.cancelPress(u,p))},o=_h(this.node.current,"blur",r);this.removeAccessibleListeners=Xf(n,o)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_i.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Txe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_i.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Sh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=_h(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const o9=new WeakMap,k8=new WeakMap,v$e=t=>{const e=o9.get(t.target);e&&e(t)},g$e=t=>{t.forEach(v$e)};function y$e({root:t,...e}){const n=t||document;k8.has(n)||k8.set(n,{});const r=k8.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(g$e,{root:t,...e})),r[o]}function b$e(t,e,n){const r=y$e(e);return o9.set(t,n),r.observe(t),()=>{o9.delete(t),r.unobserve(t)}}const _$e={some:0,all:1};class w$e extends cm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:u}=e,p={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:_$e[o]},m=_=>{const{isIntersecting:x}=_;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:M,onViewportLeave:R}=this.node.getProps(),N=x?M:R;N&&N(_)};return b$e(this.node.current,p,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(x$e(e,n))&&this.startObserver()}unmount(){}}function x$e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const S$e={inView:{Feature:w$e},tap:{Feature:m$e},focus:{Feature:f$e},hover:{Feature:p$e}};function Axe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function E$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function C$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function OL(t,e,n){const r=t.getProps();return F$(r,e,n!==void 0?n:r.custom,E$e(t),C$e(t))}const P$e="framerAppearId",k$e="data-"+L$(P$e);let T$e=Ui,B$=Ui;const Yf=t=>t*1e3,Eh=t=>t/1e3,M$e={current:!1},Ixe=t=>Array.isArray(t)&&typeof t[0]=="number";function Rxe(t){return!!(!t||typeof t=="string"&&Oxe[t]||Ixe(t)||Array.isArray(t)&&t.every(Rxe))}const wC=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Oxe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wC([0,.65,.55,1]),circOut:wC([.55,0,1,.45]),backIn:wC([.31,.01,.66,-.59]),backOut:wC([.33,1.53,.69,.99])};function Dxe(t){if(t)return Ixe(t)?wC(t):Array.isArray(t)?t.map(Dxe):Oxe[t]}function A$e(t,e,n,{delay:r=0,duration:o,repeat:u=0,repeatType:p="loop",ease:m,times:_}={}){const x={[e]:n};_&&(x.offset=_);const M=Dxe(m);return Array.isArray(M)&&(x.easing=M),t.animate(x,{delay:r,duration:o,easing:Array.isArray(M)?"linear":M,fill:"both",iterations:u+1,direction:p==="reverse"?"alternate":"normal"})}function I$e(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Lxe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,R$e=1e-7,O$e=12;function D$e(t,e,n,r,o){let u,p,m=0;do p=e+(n-e)/2,u=Lxe(p,r,o)-t,u>0?n=p:e=p;while(Math.abs(u)>R$e&&++m<O$e);return p}function GP(t,e,n,r){if(t===e&&n===r)return Ui;const o=u=>D$e(u,0,1,t,n);return u=>u===0||u===1?u:Lxe(o(u),e,r)}const L$e=GP(.42,0,1,1),N$e=GP(0,0,.58,1),Nxe=GP(.42,0,.58,1),F$e=t=>Array.isArray(t)&&typeof t[0]!="number",Fxe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bxe=t=>e=>1-t(1-e),Uxe=t=>1-Math.sin(Math.acos(t)),U$=Bxe(Uxe),B$e=Fxe(U$),Vxe=GP(.33,1.53,.69,.99),V$=Bxe(Vxe),U$e=Fxe(V$),V$e=t=>(t*=2)<1?.5*V$(t):.5*(2-Math.pow(2,-10*(t-1))),j$e={linear:Ui,easeIn:L$e,easeInOut:Nxe,easeOut:N$e,circIn:Uxe,circInOut:B$e,circOut:U$,backIn:V$,backInOut:U$e,backOut:Vxe,anticipate:V$e},Qge=t=>{if(Array.isArray(t)){B$(t.length===4);const[e,n,r,o]=t;return GP(e,n,r,o)}else if(typeof t=="string")return j$e[t];return t},j$=(t,e)=>n=>!!(jP(n)&&VGe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),jxe=(t,e,n)=>r=>{if(!jP(r))return r;const[o,u,p,m]=r.match(IL);return{[t]:parseFloat(o),[e]:parseFloat(u),[n]:parseFloat(p),alpha:m!==void 0?parseFloat(m):1}},z$e=t=>nm(0,255,t),T8={...Zg,transform:t=>Math.round(z$e(t))},_g={test:j$("rgb","red"),parse:jxe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+T8.transform(t)+", "+T8.transform(e)+", "+T8.transform(n)+", "+OC(RC.transform(r))+")"};function H$e(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const s9={test:j$("#"),parse:H$e,transform:_g.transform},__={test:j$("hsl","hue"),parse:jxe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hc.transform(OC(e))+", "+Hc.transform(OC(n))+", "+OC(RC.transform(r))+")"},Bs={test:t=>_g.test(t)||s9.test(t)||__.test(t),parse:t=>_g.test(t)?_g.parse(t):__.test(t)?__.parse(t):s9.parse(t),transform:t=>jP(t)?t:t.hasOwnProperty("red")?_g.transform(t):__.transform(t)},yi=(t,e,n)=>-n*t+n*e+t;function M8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function G$e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,u=0,p=0;if(!e)o=u=p=n;else{const m=n<.5?n*(1+e):n+e-n*e,_=2*n-m;o=M8(_,m,t+1/3),u=M8(_,m,t),p=M8(_,m,t-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(p*255),alpha:r}}const A8=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},$$e=[s9,_g,__],W$e=t=>$$e.find(e=>e.test(t));function Jge(t){const e=W$e(t);let n=e.parse(t);return e===__&&(n=G$e(n)),n}const zxe=(t,e)=>{const n=Jge(t),r=Jge(e),o={...n};return u=>(o.red=A8(n.red,r.red,u),o.green=A8(n.green,r.green,u),o.blue=A8(n.blue,r.blue,u),o.alpha=yi(n.alpha,r.alpha,u),_g.transform(o))};function K$e(t){var e,n;return isNaN(t)&&jP(t)&&(((e=t.match(IL))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mxe))===null||n===void 0?void 0:n.length)||0)>0}const Hxe={regex:BGe,countKey:"Vars",token:"${v}",parse:Ui},Gxe={regex:mxe,countKey:"Colors",token:"${c}",parse:Bs.parse},$xe={regex:IL,countKey:"Numbers",token:"${n}",parse:Zg.parse};function I8(t,{regex:e,countKey:n,token:r,parse:o}){const u=t.tokenised.match(e);u&&(t["num"+n]=u.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...u.map(o)))}function H3(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&I8(n,Hxe),I8(n,Gxe),I8(n,$xe),n}function Wxe(t){return H3(t).values}function Kxe(t){const{values:e,numColors:n,numVars:r,tokenised:o}=H3(t),u=e.length;return p=>{let m=o;for(let _=0;_<u;_++)_<r?m=m.replace(Hxe.token,p[_]):_<r+n?m=m.replace(Gxe.token,Bs.transform(p[_])):m=m.replace($xe.token,OC(p[_]));return m}}const q$e=t=>typeof t=="number"?0:t;function X$e(t){const e=Wxe(t);return Kxe(t)(e.map(q$e))}const rm={test:K$e,parse:Wxe,createTransformer:Kxe,getAnimatableNone:X$e},qxe=(t,e)=>n=>`${n>0?e:t}`;function Xxe(t,e){return typeof t=="number"?n=>yi(t,e,n):Bs.test(t)?zxe(t,e):t.startsWith("var(")?qxe(t,e):Zxe(t,e)}const Yxe=(t,e)=>{const n=[...t],r=n.length,o=t.map((u,p)=>Xxe(u,e[p]));return u=>{for(let p=0;p<r;p++)n[p]=o[p](u);return n}},Y$e=(t,e)=>{const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=Xxe(t[o],e[o]));return o=>{for(const u in r)n[u]=r[u](o);return n}},Zxe=(t,e)=>{const n=rm.createTransformer(e),r=H3(t),o=H3(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Xf(Yxe(r.values,o.values),n):qxe(t,e)},fP=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},e0e=(t,e)=>n=>yi(t,e,n);function Z$e(t){return typeof t=="number"?e0e:typeof t=="string"?Bs.test(t)?zxe:Zxe:Array.isArray(t)?Yxe:typeof t=="object"?Y$e:e0e}function Q$e(t,e,n){const r=[],o=n||Z$e(t[0]),u=t.length-1;for(let p=0;p<u;p++){let m=o(t[p],t[p+1]);if(e){const _=Array.isArray(e)?e[p]||Ui:e;m=Xf(_,m)}r.push(m)}return r}function z$(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const u=t.length;if(B$(u===e.length),u===1)return()=>e[0];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const p=Q$e(e,r,o),m=p.length,_=x=>{let M=0;if(m>1)for(;M<t.length-2&&!(x<t[M+1]);M++);const R=fP(t[M],t[M+1],x);return p[M](R)};return n?x=>_(nm(t[0],t[u-1],x)):_}function J$e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=fP(0,e,r);t.push(yi(n,1,o))}}function eWe(t){const e=[0];return J$e(e,t.length-1),e}function tWe(t,e){return t.map(n=>n*e)}function nWe(t,e){return t.map(()=>e||Nxe).splice(0,t.length-1)}function G3({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=F$e(r)?r.map(Qge):Qge(r),u={done:!1,value:e[0]},p=tWe(n&&n.length===e.length?n:eWe(e),t),m=z$(p,e,{ease:Array.isArray(o)?o:nWe(e,o)});return{calculatedDuration:t,next:_=>(u.value=m(_),u.done=_>=t,u)}}function Qxe(t,e){return e?t*(1e3/e):0}const rWe=5;function Jxe(t,e,n){const r=Math.max(e-rWe,0);return Qxe(n-t(r),e-r)}const R8=.001,iWe=.01,t0e=10,oWe=.05,sWe=1;function aWe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let o,u;T$e(t<=Yf(t0e));let p=1-e;p=nm(oWe,sWe,p),t=nm(iWe,t0e,Eh(t)),p<1?(o=x=>{const M=x*p,R=M*t,N=M-n,G=a9(x,p),Z=Math.exp(-R);return R8-N/G*Z},u=x=>{const R=x*p*t,N=R*n+n,G=Math.pow(p,2)*Math.pow(x,2)*t,Z=Math.exp(-R),j=a9(Math.pow(x,2),p);return(-o(x)+R8>0?-1:1)*((N-G)*Z)/j}):(o=x=>{const M=Math.exp(-x*t),R=(x-n)*t+1;return-R8+M*R},u=x=>{const M=Math.exp(-x*t),R=(n-x)*(t*t);return M*R});const m=5/t,_=uWe(o,u,m);if(t=Yf(t),isNaN(_))return{stiffness:100,damping:10,duration:t};{const x=Math.pow(_,2)*r;return{stiffness:x,damping:p*2*Math.sqrt(r*x),duration:t}}}const lWe=12;function uWe(t,e,n){let r=n;for(let o=1;o<lWe;o++)r=r-t(r)/e(r);return r}function a9(t,e){return t*Math.sqrt(1-e*e)}const cWe=["duration","bounce"],dWe=["stiffness","damping","mass"];function n0e(t,e){return e.some(n=>t[n]!==void 0)}function hWe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!n0e(t,dWe)&&n0e(t,cWe)){const n=aWe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function eSe({keyframes:t,restDelta:e,restSpeed:n,...r}){const o=t[0],u=t[t.length-1],p={done:!1,value:o},{stiffness:m,damping:_,mass:x,velocity:M,duration:R,isResolvedFromDuration:N}=hWe(r),G=M?-Eh(M):0,Z=_/(2*Math.sqrt(m*x)),j=u-o,z=Eh(Math.sqrt(m/x)),U=Math.abs(j)<5;n||(n=U?.01:2),e||(e=U?.005:.5);let C;if(Z<1){const K=a9(z,Z);C=te=>{const pe=Math.exp(-Z*z*te);return u-pe*((G+Z*z*j)/K*Math.sin(K*te)+j*Math.cos(K*te))}}else if(Z===1)C=K=>u-Math.exp(-z*K)*(j+(G+z*j)*K);else{const K=z*Math.sqrt(Z*Z-1);C=te=>{const pe=Math.exp(-Z*z*te),Q=Math.min(K*te,300);return u-pe*((G+Z*z*j)*Math.sinh(Q)+K*j*Math.cosh(Q))/K}}return{calculatedDuration:N&&R||null,next:K=>{const te=C(K);if(N)p.done=K>=R;else{let pe=G;K!==0&&(Z<1?pe=Jxe(C,K,te):pe=0);const Q=Math.abs(pe)<=n,Se=Math.abs(u-te)<=e;p.done=Q&&Se}return p.value=p.done?u:te,p}}}function r0e({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:p,min:m,max:_,restDelta:x=.5,restSpeed:M}){const R=t[0],N={done:!1,value:R},G=Pe=>m!==void 0&&Pe<m||_!==void 0&&Pe>_,Z=Pe=>m===void 0?_:_===void 0||Math.abs(m-Pe)<Math.abs(_-Pe)?m:_;let j=n*e;const z=R+j,U=p===void 0?z:p(z);U!==z&&(j=U-R);const C=Pe=>-j*Math.exp(-Pe/r),K=Pe=>U+C(Pe),te=Pe=>{const H=C(Pe),ye=K(Pe);N.done=Math.abs(H)<=x,N.value=N.done?U:ye};let pe,Q;const Se=Pe=>{G(N.value)&&(pe=Pe,Q=eSe({keyframes:[N.value,Z(N.value)],velocity:Jxe(K,Pe,N.value),damping:o,stiffness:u,restDelta:x,restSpeed:M}))};return Se(0),{calculatedDuration:null,next:Pe=>{let H=!1;return!Q&&pe===void 0&&(H=!0,te(Pe),Se(Pe)),pe!==void 0&&Pe>pe?Q.next(Pe-pe):(!H&&te(Pe),N)}}}const pWe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>_i.update(e,!0),stop:()=>qc(e),now:()=>vs.isProcessing?vs.timestamp:performance.now()}},i0e=2e4;function o0e(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<i0e;)e+=n,r=t.next(e);return e>=i0e?1/0:e}const fWe={decay:r0e,inertia:r0e,tween:G3,keyframes:G3,spring:eSe};function $3({autoplay:t=!0,delay:e=0,driver:n=pWe,keyframes:r,type:o="keyframes",repeat:u=0,repeatDelay:p=0,repeatType:m="loop",onPlay:_,onStop:x,onComplete:M,onUpdate:R,...N}){let G=1,Z=!1,j,z;const U=()=>{z=new Promise(Be=>{j=Be})};U();let C;const K=fWe[o]||G3;let te;K!==G3&&typeof r[0]!="number"&&(te=z$([0,100],r,{clamp:!1}),r=[0,100]);const pe=K({...N,keyframes:r});let Q;m==="mirror"&&(Q=K({...N,keyframes:[...r].reverse(),velocity:-(N.velocity||0)}));let Se="idle",Pe=null,H=null,ye=null;pe.calculatedDuration===null&&u&&(pe.calculatedDuration=o0e(pe));const{calculatedDuration:St}=pe;let kt=1/0,it=1/0;St!==null&&(kt=St+p,it=kt*(u+1)-p);let me=0;const lt=Be=>{if(H===null)return;G>0&&(H=Math.min(H,Be)),G<0&&(H=Math.min(Be-it/G,H)),Pe!==null?me=Pe:me=Math.round(Be-H)*G;const nt=me-e*(G>=0?1:-1),Gt=G>=0?nt<0:nt>it;me=Math.max(nt,0),Se==="finished"&&Pe===null&&(me=it);let Bt=me,Dt=pe;if(u){const Wn=me/kt;let Kr=Math.floor(Wn),xn=Wn%1;!xn&&Wn>=1&&(xn=1),xn===1&&Kr--,Kr=Math.min(Kr,u+1);const et=!!(Kr%2);et&&(m==="reverse"?(xn=1-xn,p&&(xn-=p/kt)):m==="mirror"&&(Dt=Q));let Zr=nm(0,1,xn);me>it&&(Zr=m==="reverse"&&et?1:0),Bt=Zr*kt}const Jt=Gt?{done:!1,value:r[0]}:Dt.next(Bt);te&&(Jt.value=te(Jt.value));let{done:on}=Jt;!Gt&&St!==null&&(on=G>=0?me>=it:me<=0);const wn=Pe===null&&(Se==="finished"||Se==="running"&&on);return R&&R(Jt.value),wn&&Ge(),Jt},Fe=()=>{C&&C.stop(),C=void 0},vt=()=>{Se="idle",Fe(),j(),U(),H=ye=null},Ge=()=>{Se="finished",M&&M(),Fe(),j()},mt=()=>{if(Z)return;C||(C=n(lt));const Be=C.now();_&&_(),Pe!==null?H=Be-Pe:(!H||Se==="finished")&&(H=Be),Se==="finished"&&U(),ye=H,Pe=null,Se="running",C.start()};t&&mt();const Je={then(Be,nt){return z.then(Be,nt)},get time(){return Eh(me)},set time(Be){Be=Yf(Be),me=Be,Pe!==null||!C||G===0?Pe=Be:H=C.now()-Be/G},get duration(){const Be=pe.calculatedDuration===null?o0e(pe):pe.calculatedDuration;return Eh(Be)},get speed(){return G},set speed(Be){Be===G||!C||(G=Be,Je.time=Eh(me))},get state(){return Se},play:mt,pause:()=>{Se="paused",Pe=me},stop:()=>{Z=!0,Se!=="idle"&&(Se="idle",x&&x(),vt())},cancel:()=>{ye!==null&&lt(ye),vt()},complete:()=>{Se="finished"},sample:Be=>(H=0,lt(Be))};return Je}function mWe(t){let e;return()=>(e===void 0&&(e=t()),e)}const vWe=mWe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gWe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),OD=10,yWe=2e4,bWe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Rxe(e.ease);function _We(t,e,{onUpdate:n,onComplete:r,...o}){if(!(vWe()&&gWe.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let p=!1,m,_;const x=()=>{_=new Promise(C=>{m=C})};x();let{keyframes:M,duration:R=300,ease:N,times:G}=o;if(bWe(e,o)){const C=$3({...o,repeat:0,delay:0});let K={done:!1,value:M[0]};const te=[];let pe=0;for(;!K.done&&pe<yWe;)K=C.sample(pe),te.push(K.value),pe+=OD;G=void 0,M=te,R=pe-OD,N="linear"}const Z=A$e(t.owner.current,e,M,{...o,duration:R,ease:N,times:G}),j=()=>Z.cancel(),z=()=>{_i.update(j),m(),x()};return Z.onfinish=()=>{t.set(I$e(M,o)),r&&r(),z()},{then(C,K){return _.then(C,K)},attachTimeline(C){return Z.timeline=C,Z.onfinish=null,Ui},get time(){return Eh(Z.currentTime||0)},set time(C){Z.currentTime=Yf(C)},get speed(){return Z.playbackRate},set speed(C){Z.playbackRate=C},get duration(){return Eh(R)},play:()=>{p||(Z.play(),qc(j))},pause:()=>Z.pause(),stop:()=>{if(p=!0,Z.playState==="idle")return;const{currentTime:C}=Z;if(C){const K=$3({...o,autoplay:!1});t.setWithVelocity(K.sample(C-OD).value,K.sample(C).value,OD)}z()},complete:()=>Z.finish(),cancel:z}}function wWe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const o=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ui,pause:Ui,stop:Ui,then:u=>(u(),Promise.resolve()),cancel:Ui,complete:Ui});return e?$3({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const xWe={type:"spring",stiffness:500,damping:25,restSpeed:10},SWe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),EWe={type:"keyframes",duration:.8},CWe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PWe=(t,{keyframes:e})=>e.length>2?EWe:Yg.has(t)?t.startsWith("scale")?SWe(e[1]):xWe:CWe,l9=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rm.test(e)||e==="0")&&!e.startsWith("url(")),kWe=new Set(["brightness","contrast","saturate","opacity"]);function TWe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(IL)||[];if(!r)return t;const o=n.replace(r,"");let u=kWe.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+o+")"}const MWe=/([a-z-]*)\(.*?\)/g,u9={...rm,getAnimatableNone:t=>{const e=t.match(MWe);return e?e.map(TWe).join(" "):t}},AWe={...vxe,color:Bs,backgroundColor:Bs,outlineColor:Bs,fill:Bs,stroke:Bs,borderColor:Bs,borderTopColor:Bs,borderRightColor:Bs,borderBottomColor:Bs,borderLeftColor:Bs,filter:u9,WebkitFilter:u9},H$=t=>AWe[t];function tSe(t,e){let n=H$(t);return n!==u9&&(n=rm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const nSe=t=>/^0[^.\s]+$/.test(t);function IWe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||nSe(t)}function RWe(t,e,n,r){const o=l9(e,n);let u;Array.isArray(n)?u=[...n]:u=[null,n];const p=r.from!==void 0?r.from:t.get();let m;const _=[];for(let x=0;x<u.length;x++)u[x]===null&&(u[x]=x===0?p:u[x-1]),IWe(u[x])&&_.push(x),typeof u[x]=="string"&&u[x]!=="none"&&u[x]!=="0"&&(m=u[x]);if(o&&_.length&&m)for(let x=0;x<_.length;x++){const M=_[x];u[M]=tSe(e,m)}return u}function OWe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:u,repeatType:p,repeatDelay:m,from:_,elapsed:x,...M}){return!!Object.keys(M).length}function rSe(t,e){return t[e]||t.default||t}const G$=(t,e,n,r={})=>o=>{const u=rSe(r,t)||{},p=u.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Yf(p);const _=RWe(e,t,n,u),x=_[0],M=_[_.length-1],R=l9(t,x),N=l9(t,M);let G={keyframes:_,velocity:e.getVelocity(),ease:"easeOut",...u,delay:-m,onUpdate:Z=>{e.set(Z),u.onUpdate&&u.onUpdate(Z)},onComplete:()=>{o(),u.onComplete&&u.onComplete()}};if(OWe(u)||(G={...G,...PWe(t,G)}),G.duration&&(G.duration=Yf(G.duration)),G.repeatDelay&&(G.repeatDelay=Yf(G.repeatDelay)),!R||!N||M$e.current||u.type===!1)return wWe(G);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const Z=_We(e,t,G);if(Z)return Z}return $3(G)};function W3(t){return!!($s(t)&&t.add)}const iSe=t=>/^\-?\d*\.?\d+$/.test(t);function $$(t,e){t.indexOf(e)===-1&&t.push(e)}function W$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function DWe([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const o=n<0?t.length+n:n,[u]=t.splice(e,1);t.splice(o,0,u)}return t}class K${constructor(){this.subscriptions=[]}add(e){return $$(this.subscriptions,e),()=>W$(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let u=0;u<o;u++){const p=this.subscriptions[u];p&&p(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const LWe=t=>!isNaN(parseFloat(t)),DC={current:void 0};class NWe{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:u,timestamp:p}=vs;this.lastUpdated!==p&&(this.timeDelta=u,this.lastUpdated=p,_i.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_i.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=LWe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new K$);const r=this.events[e].add(n);return e==="change"?()=>{r(),_i.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return DC.current&&DC.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Qxe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jg(t,e){return new NWe(t,e)}const oSe=t=>e=>e.test(t),FWe={test:t=>t==="auto",parse:t=>t},sSe=[Zg,Fn,Hc,Ef,zGe,jGe,FWe],fC=t=>sSe.find(oSe(t)),BWe=[...sSe,Bs,rm],UWe=t=>BWe.find(oSe(t));function VWe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,jg(n))}function jWe(t,e){const n=OL(t,e);let{transitionEnd:r={},transition:o={},...u}=n?t.makeTargetAnimatable(n,!1):{};u={...u,...r};for(const p in u){const m=n$e(u[p]);VWe(t,p,m)}}function zWe(t,e,n){var r,o;const u=Object.keys(e).filter(m=>!t.hasValue(m)),p=u.length;if(p)for(let m=0;m<p;m++){const _=u[m],x=e[_];let M=null;Array.isArray(x)&&(M=x[0]),M===null&&(M=(o=(r=n[_])!==null&&r!==void 0?r:t.readValue(_))!==null&&o!==void 0?o:e[_]),M!=null&&(typeof M=="string"&&(iSe(M)||nSe(M))?M=parseFloat(M):!UWe(M)&&rm.test(x)&&(M=tSe(_,x)),t.addValue(_,jg(M,{owner:t})),n[_]===void 0&&(n[_]=M),M!==null&&t.setBaseTarget(_,M))}}function HWe(t,e){return e?(e[t]||e.default||e).from:void 0}function GWe(t,e,n){const r={};for(const o in t){const u=HWe(o,e);if(u!==void 0)r[o]=u;else{const p=n.getValue(o);p&&(r[o]=p.get())}}return r}function $We({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function aSe(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:p,...m}=t.makeTargetAnimatable(e);const _=t.getValue("willChange");r&&(u=r);const x=[],M=o&&t.animationState&&t.animationState.getState()[o];for(const R in m){const N=t.getValue(R),G=m[R];if(!N||G===void 0||M&&$We(M,R))continue;const Z={delay:n,elapsed:0,...u};if(window.HandoffAppearAnimations&&!N.hasAnimated){const z=t.getProps()[k$e];z&&(Z.elapsed=window.HandoffAppearAnimations(z,R,N,_i))}N.start(G$(R,N,G,t.shouldReduceMotion&&Yg.has(R)?{type:!1}:Z));const j=N.animation;W3(_)&&(_.add(R),j.then(()=>_.remove(R))),x.push(j)}return p&&Promise.all(x).then(()=>{p&&jWe(t,p)}),x}function c9(t,e,n={}){const r=OL(t,e,n.custom);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const u=r?()=>Promise.all(aSe(t,r,n)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(_=0)=>{const{delayChildren:x=0,staggerChildren:M,staggerDirection:R}=o;return WWe(t,e,x+_,M,R,n)}:()=>Promise.resolve(),{when:m}=o;if(m){const[_,x]=m==="beforeChildren"?[u,p]:[p,u];return _().then(()=>x())}else return Promise.all([u(),p(n.delay)])}function WWe(t,e,n=0,r=0,o=1,u){const p=[],m=(t.variantChildren.size-1)*r,_=o===1?(x=0)=>x*r:(x=0)=>m-x*r;return Array.from(t.variantChildren).sort(KWe).forEach((x,M)=>{x.notify("AnimationStart",e),p.push(c9(x,e,{...u,delay:n+_(M)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(p)}function KWe(t,e){return t.sortNodePosition(e)}function qWe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(u=>c9(t,u,n));r=Promise.all(o)}else if(typeof e=="string")r=c9(t,e,n);else{const o=typeof e=="function"?OL(t,e,n.custom):e;r=Promise.all(aSe(t,o,n))}return r.then(()=>t.notify("AnimationComplete",e))}const XWe=[...T$].reverse(),YWe=T$.length;function ZWe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>qWe(t,n,r)))}function QWe(t){let e=ZWe(t);const n=e7e();let r=!0;const o=(_,x)=>{const M=OL(t,x);if(M){const{transition:R,transitionEnd:N,...G}=M;_={..._,...G,...N}}return _};function u(_){e=_(t)}function p(_,x){const M=t.getProps(),R=t.getVariantContext(!0)||{},N=[],G=new Set;let Z={},j=1/0;for(let U=0;U<YWe;U++){const C=XWe[U],K=n[C],te=M[C]!==void 0?M[C]:R[C],pe=hP(te),Q=C===x?K.isActive:null;Q===!1&&(j=U);let Se=te===R[C]&&te!==M[C]&&pe;if(Se&&r&&t.manuallyAnimateOnMount&&(Se=!1),K.protectedKeys={...Z},!K.isActive&&Q===null||!te&&!K.prevProp||ML(te)||typeof te=="boolean")continue;const Pe=JWe(K.prevProp,te);let H=Pe||C===x&&K.isActive&&!Se&&pe||U>j&&pe;const ye=Array.isArray(te)?te:[te];let St=ye.reduce(o,{});Q===!1&&(St={});const{prevResolvedValues:kt={}}=K,it={...kt,...St},me=lt=>{H=!0,G.delete(lt),K.needsAnimating[lt]=!0};for(const lt in it){const Fe=St[lt],vt=kt[lt];Z.hasOwnProperty(lt)||(Fe!==vt?z3(Fe)&&z3(vt)?!Axe(Fe,vt)||Pe?me(lt):K.protectedKeys[lt]=!0:Fe!==void 0?me(lt):G.add(lt):Fe!==void 0&&G.has(lt)?me(lt):K.protectedKeys[lt]=!0)}K.prevProp=te,K.prevResolvedValues=St,K.isActive&&(Z={...Z,...St}),r&&t.blockInitialAnimation&&(H=!1),H&&!Se&&N.push(...ye.map(lt=>({animation:lt,options:{type:C,..._}})))}if(G.size){const U={};G.forEach(C=>{const K=t.getBaseTarget(C);K!==void 0&&(U[C]=K)}),N.push({animation:U})}let z=!!N.length;return r&&M.initial===!1&&!t.manuallyAnimateOnMount&&(z=!1),r=!1,z?e(N):Promise.resolve()}function m(_,x,M){var R;if(n[_].isActive===x)return Promise.resolve();(R=t.variantChildren)===null||R===void 0||R.forEach(G=>{var Z;return(Z=G.animationState)===null||Z===void 0?void 0:Z.setActive(_,x)}),n[_].isActive=x;const N=p(M,_);for(const G in n)n[G].protectedKeys={};return N}return{animateChanges:p,setActive:m,setAnimateFunction:u,getState:()=>n}}function JWe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Axe(e,t):!1}function ug(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function e7e(){return{animate:ug(!0),whileInView:ug(),whileHover:ug(),whileTap:ug(),whileDrag:ug(),whileFocus:ug(),exit:ug()}}class t7e extends cm{constructor(e){super(e),e.animationState||(e.animationState=QWe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ML(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let n7e=0;class r7e extends cm{constructor(){super(...arguments),this.id=n7e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const u=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&u.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const i7e={animation:{Feature:t7e},exit:{Feature:r7e}},s0e=(t,e)=>Math.abs(t-e);function o7e(t,e){const n=s0e(t.x,e.x),r=s0e(t.y,e.y);return Math.sqrt(n**2+r**2)}class lSe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=D8(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,R=o7e(x.offset,{x:0,y:0})>=3;if(!M&&!R)return;const{point:N}=x,{timestamp:G}=vs;this.history.push({...N,timestamp:G});const{onStart:Z,onMove:j}=this.handlers;M||(Z&&Z(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,x)},this.handlePointerMove=(x,M)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=O8(M,this.transformPagePoint),_i.update(this.updatePoint,!0)},this.handlePointerUp=(x,M)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:R,onSessionEnd:N}=this.handlers,G=D8(x.type==="pointercancel"?this.lastMoveEventInfo:O8(M,this.transformPagePoint),this.history);this.startEvent&&R&&R(x,G),N&&N(x,G)},!Cxe(e))return;this.handlers=n,this.transformPagePoint=r;const o=RL(e),u=O8(o,this.transformPagePoint),{point:p}=u,{timestamp:m}=vs;this.history=[{...p,timestamp:m}];const{onSessionStart:_}=n;_&&_(e,D8(u,this.history)),this.removeListeners=Xf(Sh(window,"pointermove",this.handlePointerMove),Sh(window,"pointerup",this.handlePointerUp),Sh(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qc(this.updatePoint)}}function O8(t,e){return e?{point:e(t.point)}:t}function a0e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function D8({point:t},e){return{point:t,delta:a0e(t,uSe(e)),offset:a0e(t,s7e(e)),velocity:a7e(e,.1)}}function s7e(t){return t[0]}function uSe(t){return t[t.length-1]}function a7e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=uSe(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Yf(e)));)n--;if(!r)return{x:0,y:0};const u=Eh(o.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const p={x:(o.x-r.x)/u,y:(o.y-r.y)/u};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function ja(t){return t.max-t.min}function d9(t,e=0,n=.01){return Math.abs(t-e)<=n}function l0e(t,e,n,r=.5){t.origin=r,t.originPoint=yi(e.min,e.max,t.origin),t.scale=ja(n)/ja(e),(d9(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=yi(n.min,n.max,t.origin)-t.originPoint,(d9(t.translate)||isNaN(t.translate))&&(t.translate=0)}function LC(t,e,n,r){l0e(t.x,e.x,n.x,r?r.originX:void 0),l0e(t.y,e.y,n.y,r?r.originY:void 0)}function u0e(t,e,n){t.min=n.min+e.min,t.max=t.min+ja(e)}function l7e(t,e,n){u0e(t.x,e.x,n.x),u0e(t.y,e.y,n.y)}function c0e(t,e,n){t.min=e.min-n.min,t.max=t.min+ja(e)}function NC(t,e,n){c0e(t.x,e.x,n.x),c0e(t.y,e.y,n.y)}function u7e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yi(n,t,r.max):Math.min(t,n)),t}function d0e(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function c7e(t,{top:e,left:n,bottom:r,right:o}){return{x:d0e(t.x,n,o),y:d0e(t.y,e,r)}}function h0e(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function d7e(t,e){return{x:h0e(t.x,e.x),y:h0e(t.y,e.y)}}function h7e(t,e){let n=.5;const r=ja(t),o=ja(e);return o>r?n=fP(e.min,e.max-r,t.min):r>o&&(n=fP(t.min,t.max-o,e.min)),nm(0,1,n)}function p7e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const h9=.35;function f7e(t=h9){return t===!1?t=0:t===!0&&(t=h9),{x:p0e(t,"left","right"),y:p0e(t,"top","bottom")}}function p0e(t,e,n){return{min:f0e(t,e),max:f0e(t,n)}}function f0e(t,e){return typeof t=="number"?t:t[e]||0}const m0e=()=>({translate:0,scale:1,origin:0,originPoint:0}),w_=()=>({x:m0e(),y:m0e()}),v0e=()=>({min:0,max:0}),ao=()=>({x:v0e(),y:v0e()});function Lc(t){return[t("x"),t("y")]}function cSe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function m7e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function v7e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function L8(t){return t===void 0||t===1}function p9({scale:t,scaleX:e,scaleY:n}){return!L8(t)||!L8(e)||!L8(n)}function fg(t){return p9(t)||dSe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function dSe(t){return g0e(t.x)||g0e(t.y)}function g0e(t){return t&&t!=="0%"}function K3(t,e,n){const r=t-n,o=e*r;return n+o}function y0e(t,e,n,r,o){return o!==void 0&&(t=K3(t,o,r)),K3(t,n,r)+e}function f9(t,e=0,n=1,r,o){t.min=y0e(t.min,e,n,r,o),t.max=y0e(t.max,e,n,r,o)}function hSe(t,{x:e,y:n}){f9(t.x,e.translate,e.scale,e.originPoint),f9(t.y,n.translate,n.scale,n.originPoint)}function g7e(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let u,p;for(let m=0;m<o;m++){u=n[m],p=u.projectionDelta;const _=u.instance;_&&_.style&&_.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&x_(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),p&&(e.x*=p.x.scale,e.y*=p.y.scale,hSe(t,p)),r&&fg(u.latestValues)&&x_(t,u.latestValues))}e.x=b0e(e.x),e.y=b0e(e.y)}function b0e(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function kf(t,e){t.min=t.min+e,t.max=t.max+e}function _0e(t,e,[n,r,o]){const u=e[o]!==void 0?e[o]:.5,p=yi(t.min,t.max,u);f9(t,e[n],e[r],p,e.scale)}const y7e=["x","scaleX","originX"],b7e=["y","scaleY","originY"];function x_(t,e){_0e(t.x,e,y7e),_0e(t.y,e,b7e)}function pSe(t,e){return cSe(v7e(t.getBoundingClientRect(),e))}function _7e(t,e,n){const r=pSe(t,n),{scroll:o}=e;return o&&(kf(r.x,o.offset.x),kf(r.y,o.offset.y)),r}const w7e=new WeakMap;class x7e{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ao(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=_=>{this.stopAnimation(),n&&this.snapToCursor(RL(_,"page").point)},u=(_,x)=>{const{drag:M,dragPropagation:R,onDragStart:N}=this.getProps();if(M&&!R&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=kxe(M),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lc(Z=>{let j=this.getAxisMotionValue(Z).get()||0;if(Hc.test(j)){const{projection:z}=this.visualElement;if(z&&z.layout){const U=z.layout.layoutBox[Z];U&&(j=ja(U)*(parseFloat(j)/100))}}this.originPoint[Z]=j}),N&&_i.update(()=>N(_,x),!1,!0);const{animationState:G}=this.visualElement;G&&G.setActive("whileDrag",!0)},p=(_,x)=>{const{dragPropagation:M,dragDirectionLock:R,onDirectionLock:N,onDrag:G}=this.getProps();if(!M&&!this.openGlobalLock)return;const{offset:Z}=x;if(R&&this.currentDirection===null){this.currentDirection=S7e(Z),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",x.point,Z),this.updateAxis("y",x.point,Z),this.visualElement.render(),G&&G(_,x)},m=(_,x)=>this.stop(_,x);this.panSession=new lSe(e,{onSessionStart:o,onStart:u,onMove:p,onSessionEnd:m},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&_i.update(()=>u(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!DD(e,o,this.currentDirection))return;const u=this.getAxisMotionValue(e);let p=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(p=u7e(p,this.constraints[e],this.elastic[e])),u.set(p)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},o=this.constraints;e&&b_(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=c7e(r.layoutBox,e):this.constraints=!1,this.elastic=f7e(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Lc(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=p7e(r.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!b_(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=_7e(r,o.root,this.visualElement.getTransformPagePoint());let p=d7e(o.layout.layoutBox,u);if(n){const m=n(m7e(p));this.hasMutatedConstraints=!!m,m&&(p=cSe(m))}return p}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:u,dragSnapToOrigin:p,onDragTransitionEnd:m}=this.getProps(),_=this.constraints||{},x=Lc(M=>{if(!DD(M,n,this.currentDirection))return;let R=_&&_[M]||{};p&&(R={min:0,max:0});const N=o?200:1e6,G=o?40:1e7,Z={type:"inertia",velocity:r?e[M]:0,bounceStiffness:N,bounceDamping:G,timeConstant:750,restDelta:1,restSpeed:10,...u,...R};return this.startAxisValueAnimation(M,Z)});return Promise.all(x).then(m)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(G$(e,r,0,n))}stopAnimation(){Lc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Lc(n=>{const{drag:r}=this.getProps();if(!DD(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:p,max:m}=o.layout.layoutBox[n];u.set(e[n]-yi(p,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!b_(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Lc(p=>{const m=this.getAxisMotionValue(p);if(m){const _=m.get();o[p]=h7e({min:_,max:_},this.constraints[p])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Lc(p=>{if(!DD(p,e,null))return;const m=this.getAxisMotionValue(p),{min:_,max:x}=this.constraints[p];m.set(yi(_,x,o[p]))})}addListeners(){if(!this.visualElement.current)return;w7e.set(this.visualElement,this);const e=this.visualElement.current,n=Sh(e,"pointerdown",_=>{const{drag:x,dragListener:M=!0}=this.getProps();x&&M&&this.start(_)}),r=()=>{const{dragConstraints:_}=this.getProps();b_(_)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const p=_h(window,"resize",()=>this.scalePositionWithinConstraints()),m=o.addEventListener("didUpdate",({delta:_,hasLayoutChanged:x})=>{this.isDragging&&x&&(Lc(M=>{const R=this.getAxisMotionValue(M);R&&(this.originPoint[M]+=_[M].translate,R.set(R.get()+_[M].translate))}),this.visualElement.render())});return()=>{p(),n(),u(),m&&m()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:p=h9,dragMomentum:m=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:u,dragElastic:p,dragMomentum:m}}}function DD(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function S7e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class E7e extends cm{constructor(e){super(e),this.removeGroupControls=Ui,this.removeListeners=Ui,this.controls=new x7e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ui}unmount(){this.removeGroupControls(),this.removeListeners()}}const w0e=t=>(e,n)=>{t&&_i.update(()=>t(e,n))};class C7e extends cm{constructor(){super(...arguments),this.removePointerDownListener=Ui}onPointerDown(e){this.session=new lSe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:w0e(e),onStart:w0e(n),onMove:r,onEnd:(u,p)=>{delete this.session,o&&_i.update(()=>o(u,p))}}}mount(){this.removePointerDownListener=Sh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P7e(){const t=nn.useContext(k$);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=nn.useId();return nn.useEffect(()=>r(o),[]),!e&&n?[!1,()=>n&&n(o)]:[!0]}const t3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function x0e(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const mC={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Fn.test(t))t=parseFloat(t);else return t;const n=x0e(t,e.target.x),r=x0e(t,e.target.y);return`${n}% ${r}%`}},k7e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=rm.parse(t);if(o.length>5)return r;const u=rm.createTransformer(t),p=typeof o[0]!="number"?1:0,m=n.x.scale*e.x,_=n.y.scale*e.y;o[0+p]/=m,o[1+p]/=_;const x=yi(m,_,.5);return typeof o[2+p]=="number"&&(o[2+p]/=x),typeof o[3+p]=="number"&&(o[3+p]/=x),u(o)}};class T7e extends oye.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:u}=e;DGe(M7e),u&&(n.group&&n.group.add(u),r&&r.register&&o&&r.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),t3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:u}=this.props,p=r.projection;return p&&(p.isPresent=u,o||e.layoutDependency!==n||n===void 0?p.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?p.promote():p.relegate()||_i.postRender(()=>{const m=p.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fSe(t){const[e,n]=P7e(),r=nn.useContext(cxe);return oye.createElement(T7e,{...t,layoutGroup:r,switchLayoutGroup:nn.useContext(dxe),isPresent:e,safeToRemove:n})}const M7e={borderRadius:{...mC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mC,borderTopRightRadius:mC,borderBottomLeftRadius:mC,borderBottomRightRadius:mC,boxShadow:k7e},mSe=["TopLeft","TopRight","BottomLeft","BottomRight"],A7e=mSe.length,S0e=t=>typeof t=="string"?parseFloat(t):t,E0e=t=>typeof t=="number"||Fn.test(t);function I7e(t,e,n,r,o,u){o?(t.opacity=yi(0,n.opacity!==void 0?n.opacity:1,R7e(r)),t.opacityExit=yi(e.opacity!==void 0?e.opacity:1,0,O7e(r))):u&&(t.opacity=yi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let p=0;p<A7e;p++){const m=`border${mSe[p]}Radius`;let _=C0e(e,m),x=C0e(n,m);if(_===void 0&&x===void 0)continue;_||(_=0),x||(x=0),_===0||x===0||E0e(_)===E0e(x)?(t[m]=Math.max(yi(S0e(_),S0e(x),r),0),(Hc.test(x)||Hc.test(_))&&(t[m]+="%")):t[m]=x}(e.rotate||n.rotate)&&(t.rotate=yi(e.rotate||0,n.rotate||0,r))}function C0e(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const R7e=vSe(0,.5,U$),O7e=vSe(.5,.95,Ui);function vSe(t,e,n){return r=>r<t?0:r>e?1:n(fP(t,e,r))}function P0e(t,e){t.min=e.min,t.max=e.max}function Tl(t,e){P0e(t.x,e.x),P0e(t.y,e.y)}function k0e(t,e,n,r,o){return t-=e,t=K3(t,1/n,r),o!==void 0&&(t=K3(t,1/o,r)),t}function D7e(t,e=0,n=1,r=.5,o,u=t,p=t){if(Hc.test(e)&&(e=parseFloat(e),e=yi(p.min,p.max,e/100)-p.min),typeof e!="number")return;let m=yi(u.min,u.max,r);t===u&&(m-=e),t.min=k0e(t.min,e,n,m,o),t.max=k0e(t.max,e,n,m,o)}function T0e(t,e,[n,r,o],u,p){D7e(t,e[n],e[r],e[o],e.scale,u,p)}const L7e=["x","scaleX","originX"],N7e=["y","scaleY","originY"];function M0e(t,e,n,r){T0e(t.x,e,L7e,n?n.x:void 0,r?r.x:void 0),T0e(t.y,e,N7e,n?n.y:void 0,r?r.y:void 0)}function A0e(t){return t.translate===0&&t.scale===1}function gSe(t){return A0e(t.x)&&A0e(t.y)}function F7e(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function ySe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function I0e(t){return ja(t.x)/ja(t.y)}class B7e{constructor(){this.members=[]}add(e){$$(this.members,e),e.scheduleRender()}remove(e){if(W$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function R0e(t,e,n){let r="";const o=t.x.translate/e.x,u=t.y.translate/e.y;if((o||u)&&(r=`translate3d(${o}px, ${u}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:_,rotateX:x,rotateY:M}=n;_&&(r+=`rotate(${_}deg) `),x&&(r+=`rotateX(${x}deg) `),M&&(r+=`rotateY(${M}deg) `)}const p=t.x.scale*e.x,m=t.y.scale*e.y;return(p!==1||m!==1)&&(r+=`scale(${p}, ${m})`),r||"none"}const U7e=(t,e)=>t.depth-e.depth;class V7e{constructor(){this.children=[],this.isDirty=!1}add(e){$$(this.children,e),this.isDirty=!0}remove(e){W$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U7e),this.isDirty=!1,this.children.forEach(e)}}function j7e(t,e){const n=performance.now(),r=({timestamp:o})=>{const u=o-n;u>=e&&(qc(r),t(u-e))};return _i.read(r,!0),()=>qc(r)}function z7e(t){window.MotionDebug&&window.MotionDebug.record(t)}function H7e(t){return t instanceof SVGElement&&t.tagName!=="svg"}function G7e(t,e,n){const r=$s(t)?t:jg(t);return r.start(G$("",r,e,n)),r.animation}const O0e=["","X","Y","Z"],D0e=1e3;let $7e=0;const mg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bSe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(p={},m=e==null?void 0:e()){this.id=$7e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{mg.totalNodes=mg.resolvedTargetDeltas=mg.recalculatedProjection=0,this.nodes.forEach(q7e),this.nodes.forEach(J7e),this.nodes.forEach(eKe),this.nodes.forEach(X7e),z7e(mg)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new V7e)}addEventListener(p,m){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new K$),this.eventHandlers.get(p).add(m)}notifyListeners(p,...m){const _=this.eventHandlers.get(p);_&&_.notify(...m)}hasListeners(p){return this.eventHandlers.has(p)}mount(p,m=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=H7e(p),this.instance=p;const{layoutId:_,layout:x,visualElement:M}=this.options;if(M&&!M.current&&M.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),m&&(x||_)&&(this.isLayoutDirty=!0),t){let R;const N=()=>this.root.updateBlockedByResize=!1;t(p,()=>{this.root.updateBlockedByResize=!0,R&&R(),R=j7e(N,250),t3.hasAnimatedSinceResize&&(t3.hasAnimatedSinceResize=!1,this.nodes.forEach(N0e))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&M&&(_||x)&&this.addEventListener("didUpdate",({delta:R,hasLayoutChanged:N,hasRelativeTargetChanged:G,layout:Z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||M.getDefaultTransition()||oKe,{onLayoutAnimationStart:z,onLayoutAnimationComplete:U}=M.getProps(),C=!this.targetLayout||!ySe(this.targetLayout,Z)||G,K=!N&&G;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||K||N&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(R,K);const te={...rSe(j,"layout"),onPlay:z,onComplete:U};(M.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te)}else N||N0e(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tKe),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let M=0;M<this.path.length;M++){const R=this.path[M];R.shouldResetTransform=!0,R.updateScroll("snapshot"),R.options.layoutRoot&&R.willUpdate(!1)}const{layoutId:m,layout:_}=this.options;if(m===void 0&&!_)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(L0e);return}this.isUpdating||this.nodes.forEach(Z7e),this.isUpdating=!1,this.nodes.forEach(Q7e),this.nodes.forEach(W7e),this.nodes.forEach(K7e),this.clearAllSnapshots();const m=performance.now();vs.delta=nm(0,1e3/60,m-vs.timestamp),vs.timestamp=m,vs.isProcessing=!0,C8.update.process(vs),C8.preRender.process(vs),C8.render.process(vs),vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Y7e),this.sharedNodes.forEach(nKe)}scheduleUpdateProjection(){_i.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){_i.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ao(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let m=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(m=!1),m&&(this.scroll={animationId:this.root.animationId,phase:p,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!o)return;const p=this.isLayoutDirty||this.shouldResetTransform,m=this.projectionDelta&&!gSe(this.projectionDelta),_=this.getTransformTemplate(),x=_?_(this.latestValues,""):void 0,M=x!==this.prevTransformTemplateValue;p&&(m||fg(this.latestValues)||M)&&(o(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const m=this.measurePageBox();let _=this.removeElementScroll(m);return p&&(_=this.removeTransform(_)),sKe(_),{animationId:this.root.animationId,measuredBox:m,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return ao();const m=p.measureViewportBox(),{scroll:_}=this.root;return _&&(kf(m.x,_.offset.x),kf(m.y,_.offset.y)),m}removeElementScroll(p){const m=ao();Tl(m,p);for(let _=0;_<this.path.length;_++){const x=this.path[_],{scroll:M,options:R}=x;if(x!==this.root&&M&&R.layoutScroll){if(M.isRoot){Tl(m,p);const{scroll:N}=this.root;N&&(kf(m.x,-N.offset.x),kf(m.y,-N.offset.y))}kf(m.x,M.offset.x),kf(m.y,M.offset.y)}}return m}applyTransform(p,m=!1){const _=ao();Tl(_,p);for(let x=0;x<this.path.length;x++){const M=this.path[x];!m&&M.options.layoutScroll&&M.scroll&&M!==M.root&&x_(_,{x:-M.scroll.offset.x,y:-M.scroll.offset.y}),fg(M.latestValues)&&x_(_,M.latestValues)}return fg(this.latestValues)&&x_(_,this.latestValues),_}removeTransform(p){const m=ao();Tl(m,p);for(let _=0;_<this.path.length;_++){const x=this.path[_];if(!x.instance||!fg(x.latestValues))continue;p9(x.latestValues)&&x.updateSnapshot();const M=ao(),R=x.measurePageBox();Tl(M,R),M0e(m,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,M)}return fg(this.latestValues)&&M0e(m,this.latestValues),m}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var m;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==_;if(!(p||x&&this.isSharedProjectionDirty||this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:R,layoutId:N}=this.options;if(!(!this.layout||!(R||N))){if(this.resolvedRelativeTargetAt=vs.timestamp,!this.targetDelta&&!this.relativeTarget){const G=this.getClosestProjectingParent();G&&G.layout&&this.animationProgress!==1?(this.relativeParent=G,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),NC(this.relativeTargetOrigin,this.layout.layoutBox,G.layout.layoutBox),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ao(),this.targetWithTransforms=ao()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l7e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tl(this.target,this.layout.layoutBox),hSe(this.target,this.targetDelta)):Tl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const G=this.getClosestProjectingParent();G&&!!G.resumingFrom==!!this.resumingFrom&&!G.options.layoutScroll&&G.target&&this.animationProgress!==1?(this.relativeParent=G,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),NC(this.relativeTargetOrigin,this.target,G.target),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||p9(this.parent.latestValues)||dSe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const m=this.getLead(),_=!!this.resumingFrom||this!==m;let x=!0;if((this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty)&&(x=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===vs.timestamp&&(x=!1),x)return;const{layout:M,layoutId:R}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(M||R))return;Tl(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,G=this.treeScale.y;g7e(this.layoutCorrected,this.treeScale,this.path,_),m.layout&&!m.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(m.target=m.layout.layoutBox);const{target:Z}=m;if(!Z){this.projectionTransform&&(this.projectionDelta=w_(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=w_(),this.projectionDeltaWithTransform=w_());const j=this.projectionTransform;LC(this.projectionDelta,this.layoutCorrected,Z,this.latestValues),this.projectionTransform=R0e(this.projectionDelta,this.treeScale),(this.projectionTransform!==j||this.treeScale.x!==N||this.treeScale.y!==G)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Z)),mg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),p){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(p,m=!1){const _=this.snapshot,x=_?_.latestValues:{},M={...this.latestValues},R=w_();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const N=ao(),G=_?_.source:void 0,Z=this.layout?this.layout.source:void 0,j=G!==Z,z=this.getStack(),U=!z||z.members.length<=1,C=!!(j&&!U&&this.options.crossfade===!0&&!this.path.some(iKe));this.animationProgress=0;let K;this.mixTargetDelta=te=>{const pe=te/1e3;F0e(R.x,p.x,pe),F0e(R.y,p.y,pe),this.setTargetDelta(R),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(NC(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rKe(this.relativeTarget,this.relativeTargetOrigin,N,pe),K&&F7e(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=ao()),Tl(K,this.relativeTarget)),j&&(this.animationValues=M,I7e(M,x,this.latestValues,pe,C,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=pe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_i.update(()=>{t3.hasAnimatedSinceResize=!0,this.currentAnimation=G7e(0,D0e,{...p,onUpdate:m=>{this.mixTargetDelta(m),p.onUpdate&&p.onUpdate(m)},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(D0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:m,target:_,layout:x,latestValues:M}=p;if(!(!m||!_||!x)){if(this!==p&&this.layout&&x&&_Se(this.options.animationType,this.layout.layoutBox,x.layoutBox)){_=this.target||ao();const R=ja(this.layout.layoutBox.x);_.x.min=p.target.x.min,_.x.max=_.x.min+R;const N=ja(this.layout.layoutBox.y);_.y.min=p.target.y.min,_.y.max=_.y.min+N}Tl(m,_),x_(m,M),LC(this.projectionDeltaWithTransform,this.layoutCorrected,m,M)}}registerSharedNode(p,m){this.sharedNodes.has(p)||this.sharedNodes.set(p,new B7e),this.sharedNodes.get(p).add(m);const x=m.options.initialPromotionConfig;m.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(m):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var p;const{layoutId:m}=this.options;return m?((p=this.getStack())===null||p===void 0?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:m}=this.options;return m?(p=this.getStack())===null||p===void 0?void 0:p.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:m,preserveFollowOpacity:_}={}){const x=this.getStack();x&&x.promote(this,_),p&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetRotation(){const{visualElement:p}=this.options;if(!p)return;let m=!1;const{latestValues:_}=p;if((_.rotate||_.rotateX||_.rotateY||_.rotateZ)&&(m=!0),!m)return;const x={};for(let M=0;M<O0e.length;M++){const R="rotate"+O0e[M];_[R]&&(x[R]=_[R],p.setStaticValue(R,0))}p.render();for(const M in x)p.setStaticValue(M,x[M]);p.scheduleRender()}getProjectionStyles(p={}){var m,_;const x={};if(!this.instance||this.isSVG)return x;if(this.isVisible)x.visibility="";else return{visibility:"hidden"};const M=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,x.opacity="",x.pointerEvents=e3(p.pointerEvents)||"",x.transform=M?M(this.latestValues,""):"none",x;const R=this.getLead();if(!this.projectionDelta||!this.layout||!R.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=e3(p.pointerEvents)||""),this.hasProjected&&!fg(this.latestValues)&&(j.transform=M?M({},""):"none",this.hasProjected=!1),j}const N=R.animationValues||R.latestValues;this.applyTransformsToTarget(),x.transform=R0e(this.projectionDeltaWithTransform,this.treeScale,N),M&&(x.transform=M(N,x.transform));const{x:G,y:Z}=this.projectionDelta;x.transformOrigin=`${G.origin*100}% ${Z.origin*100}% 0`,R.animationValues?x.opacity=R===this?(_=(m=N.opacity)!==null&&m!==void 0?m:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:N.opacityExit:x.opacity=R===this?N.opacity!==void 0?N.opacity:"":N.opacityExit!==void 0?N.opacityExit:0;for(const j in V3){if(N[j]===void 0)continue;const{correct:z,applyTo:U}=V3[j],C=x.transform==="none"?N[j]:z(N[j],R);if(U){const K=U.length;for(let te=0;te<K;te++)x[U[te]]=C}else x[j]=C}return this.options.layoutId&&(x.pointerEvents=R===this?e3(p.pointerEvents)||"":"none"),x}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var m;return(m=p.currentAnimation)===null||m===void 0?void 0:m.stop()}),this.root.nodes.forEach(L0e),this.root.sharedNodes.clear()}}}function W7e(t){t.updateLayout()}function K7e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:u}=t.options,p=n.source!==t.layout.source;u==="size"?Lc(R=>{const N=p?n.measuredBox[R]:n.layoutBox[R],G=ja(N);N.min=r[R].min,N.max=N.min+G}):_Se(u,n.layoutBox,r)&&Lc(R=>{const N=p?n.measuredBox[R]:n.layoutBox[R],G=ja(r[R]);N.max=N.min+G,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[R].max=t.relativeTarget[R].min+G)});const m=w_();LC(m,r,n.layoutBox);const _=w_();p?LC(_,t.applyTransform(o,!0),n.measuredBox):LC(_,r,n.layoutBox);const x=!gSe(m);let M=!1;if(!t.resumeFrom){const R=t.getClosestProjectingParent();if(R&&!R.resumeFrom){const{snapshot:N,layout:G}=R;if(N&&G){const Z=ao();NC(Z,n.layoutBox,N.layoutBox);const j=ao();NC(j,r,G.layoutBox),ySe(Z,j)||(M=!0),R.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=Z,t.relativeParent=R)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:_,layoutDelta:m,hasLayoutChanged:x,hasRelativeTargetChanged:M})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function q7e(t){mg.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function X7e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y7e(t){t.clearSnapshot()}function L0e(t){t.clearMeasurements()}function Z7e(t){t.isLayoutDirty=!1}function Q7e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function N0e(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function J7e(t){t.resolveTargetDelta()}function eKe(t){t.calcProjection()}function tKe(t){t.resetRotation()}function nKe(t){t.removeLeadSnapshot()}function F0e(t,e,n){t.translate=yi(e.translate,0,n),t.scale=yi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function B0e(t,e,n,r){t.min=yi(e.min,n.min,r),t.max=yi(e.max,n.max,r)}function rKe(t,e,n,r){B0e(t.x,e.x,n.x,r),B0e(t.y,e.y,n.y,r)}function iKe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oKe={duration:.45,ease:[.4,0,.1,1]},U0e=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),V0e=U0e("applewebkit/")&&!U0e("chrome/")?Math.round:Ui;function j0e(t){t.min=V0e(t.min),t.max=V0e(t.max)}function sKe(t){j0e(t.x),j0e(t.y)}function _Se(t,e,n){return t==="position"||t==="preserve-aspect"&&!d9(I0e(e),I0e(n),.2)}const aKe=bSe({attachResizeListener:(t,e)=>_h(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),N8={current:void 0},wSe=bSe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!N8.current){const t=new aKe({});t.mount(window),t.setOptions({layoutScroll:!0}),N8.current=t}return N8.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lKe={pan:{Feature:C7e},drag:{Feature:E7e,ProjectionNode:wSe,MeasureLayout:fSe}},uKe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cKe(t){const e=uKe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function m9(t,e,n=1){const[r,o]=cKe(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const p=u.trim();return iSe(p)?parseFloat(p):p}else return i9(o)?m9(o,e,n+1):o}function dKe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(o=>{const u=o.get();if(!i9(u))return;const p=m9(u,r);p&&o.set(p)});for(const o in e){const u=e[o];if(!i9(u))continue;const p=m9(u,r);p&&(e[o]=p,n||(n={}),n[o]===void 0&&(n[o]=u))}return{target:e,transitionEnd:n}}const hKe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xSe=t=>hKe.has(t),pKe=t=>Object.keys(t).some(xSe),z0e=t=>t===Zg||t===Fn,H0e=(t,e)=>parseFloat(t.split(", ")[e]),G0e=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return H0e(o[1],e);{const u=r.match(/^matrix\((.+)\)$/);return u?H0e(u[1],t):0}},fKe=new Set(["x","y","z"]),mKe=VP.filter(t=>!fKe.has(t));function vKe(t){const e=[];return mKe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const X_={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:G0e(4,13),y:G0e(5,14)};X_.translateX=X_.x;X_.translateY=X_.y;const gKe=(t,e,n)=>{const r=e.measureViewportBox(),o=e.current,u=getComputedStyle(o),{display:p}=u,m={};p==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(x=>{m[x]=X_[x](r,u)}),e.render();const _=e.measureViewportBox();return n.forEach(x=>{const M=e.getValue(x);M&&M.jump(m[x]),t[x]=X_[x](_,u)}),t},yKe=(t,e,n={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(xSe);let u=[],p=!1;const m=[];if(o.forEach(_=>{const x=t.getValue(_);if(!t.hasValue(_))return;let M=n[_],R=fC(M);const N=e[_];let G;if(z3(N)){const Z=N.length,j=N[0]===null?1:0;M=N[j],R=fC(M);for(let z=j;z<Z&&N[z]!==null;z++)G?B$(fC(N[z])===G):G=fC(N[z])}else G=fC(N);if(R!==G)if(z0e(R)&&z0e(G)){const Z=x.get();typeof Z=="string"&&x.set(parseFloat(Z)),typeof N=="string"?e[_]=parseFloat(N):Array.isArray(N)&&G===Fn&&(e[_]=N.map(parseFloat))}else R!=null&&R.transform&&(G!=null&&G.transform)&&(M===0||N===0)?M===0?x.set(G.transform(M)):e[_]=R.transform(N):(p||(u=vKe(t),p=!0),m.push(_),r[_]=r[_]!==void 0?r[_]:e[_],x.jump(N))}),m.length){const _=m.indexOf("height")>=0?window.pageYOffset:null,x=gKe(e,t,m);return u.length&&u.forEach(([M,R])=>{t.getValue(M).set(R)}),t.render(),TL&&_!==null&&window.scrollTo({top:_}),{target:x,transitionEnd:r}}else return{target:e,transitionEnd:r}};function bKe(t,e,n,r){return pKe(e)?yKe(t,e,n,r):{target:e,transitionEnd:r}}const _Ke=(t,e,n,r)=>{const o=dKe(t,e,r);return e=o.target,r=o.transitionEnd,bKe(t,e,n,r)},v9={current:null},SSe={current:!1};function wKe(){if(SSe.current=!0,!!TL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>v9.current=t.matches;t.addListener(e),e()}else v9.current=!1}function xKe(t,e,n){const{willChange:r}=e;for(const o in e){const u=e[o],p=n[o];if($s(u))t.addValue(o,u),W3(r)&&r.add(o);else if($s(p))t.addValue(o,jg(u,{owner:t})),W3(r)&&r.remove(o);else if(p!==u)if(t.hasValue(o)){const m=t.getValue(o);!m.hasAnimated&&m.set(u)}else{const m=t.getStaticValue(o);t.addValue(o,jg(m!==void 0?m:u,{owner:t}))}}for(const o in n)e[o]===void 0&&t.removeValue(o);return e}const $0e=new WeakMap,ESe=Object.keys(pP),SKe=ESe.length,W0e=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],EKe=M$.length;class CKe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_i.render(this.render,!1,!0);const{latestValues:m,renderState:_}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=_,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=p,this.isControllingVariants=AL(n),this.isVariantNode=uxe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...M}=this.scrapeMotionValuesFromProps(n,{});for(const R in M){const N=M[R];m[R]!==void 0&&$s(N)&&(N.set(m[R],!1),W3(x)&&x.add(R))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,$0e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),SSe.current||wKe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:v9.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$0e.delete(this.current),this.projection&&this.projection.unmount(),qc(this.notifyUpdate),qc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Yg.has(e),o=n.on("change",p=>{this.latestValues[e]=p,this.props.onUpdate&&_i.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),u()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,o,u){let p,m;for(let _=0;_<SKe;_++){const x=ESe[_],{isEnabled:M,Feature:R,ProjectionNode:N,MeasureLayout:G}=pP[x];N&&(p=N),M(n)&&(!this.features[x]&&R&&(this.features[x]=new R(this)),G&&(m=G))}if(!this.projection&&p){this.projection=new p(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_,layout:x,drag:M,dragConstraints:R,layoutScroll:N,layoutRoot:G}=n;this.projection.setOptions({layoutId:_,layout:x,alwaysMeasureLayout:!!M||R&&b_(R),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,layoutScroll:N,layoutRoot:G})}return m}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ao()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<W0e.length;r++){const o=W0e[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u=e["on"+o];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=xKe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<EKe;r++){const o=M$[r],u=this.props[o];(hP(u)||u===!1)&&(n[o]=u)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=jg(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(n=F$(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,e);return u!==void 0&&!$s(u)?u:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new K$),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class CSe extends CKe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:o},u){let p=GWe(r,e||{},this);if(o&&(n&&(n=o(n)),r&&(r=o(r)),p&&(p=o(p))),u){zWe(this,r,p);const m=_Ke(this,r,p,n);n=m.transitionEnd,r=m.target}return{transition:e,transitionEnd:n,...r}}}function PKe(t){return window.getComputedStyle(t)}class kKe extends CSe{readValueFromInstance(e,n){if(Yg.has(n)){const r=H$(n);return r&&r.default||0}else{const r=PKe(e),o=(fxe(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pSe(e,n)}build(e,n,r,o){I$(e,n,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,n){return N$(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$s(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,o){_xe(e,n,r,o)}}class TKe extends CSe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yg.has(n)){const r=H$(n);return r&&r.default||0}return n=wxe.has(n)?n:L$(n),e.getAttribute(n)}measureInstanceViewportBox(){return ao()}scrapeMotionValuesFromProps(e,n){return Sxe(e,n)}build(e,n,r,o){O$(e,n,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,n,r,o){xxe(e,n,r,o)}mount(e){this.isSVGTag=D$(e.tagName),super.mount(e)}}const MKe=(t,e)=>A$(t)?new TKe(e,{enableHardwareAcceleration:!1}):new kKe(e,{enableHardwareAcceleration:!0}),AKe={layout:{ProjectionNode:wSe,MeasureLayout:fSe}},IKe={...i7e,...S$e,...lKe,...AKe},PSe=RGe((t,e)=>a$e(t,e,IKe,MKe)),kSe=nn.createContext(null);function RKe(t,e,n,r){if(!r)return t;const o=t.findIndex(M=>M.value===e);if(o===-1)return t;const u=r>0?1:-1,p=t[o+u];if(!p)return t;const m=t[o],_=p.layout,x=yi(_.min,_.max,.5);return u===1&&m.layout.max+n>x||u===-1&&m.layout.min+n<x?DWe(t,o,o+u):t}function OKe({children:t,as:e="ul",axis:n="y",onReorder:r,values:o,...u},p){const m=HP(()=>PSe(e)),_=[],x=nn.useRef(!1),M={axis:n,registerItem:(R,N)=>{N&&_.findIndex(G=>R===G.value)===-1&&(_.push({value:R,layout:N[n]}),_.sort(NKe))},updateOrder:(R,N,G)=>{if(x.current)return;const Z=RKe(_,R,N,G);_!==Z&&(x.current=!0,r(Z.map(LKe).filter(j=>o.indexOf(j)!==-1)))}};return nn.useEffect(()=>{x.current=!1}),nn.createElement(m,{...u,ref:p,ignoreStrict:!0},nn.createElement(kSe.Provider,{value:M},t))}const DKe=nn.forwardRef(OKe);function LKe(t){return t.value}function NKe(t,e){return t.layout.min-e.layout.min}function TSe(t){const e=HP(()=>jg(t)),{isStatic:n}=nn.useContext(P$);if(n){const[,r]=nn.useState(t);nn.useEffect(()=>e.on("change",r),[])}return e}const FKe=t=>typeof t=="object"&&t.mix,BKe=t=>FKe(t)?t.mix:void 0;function UKe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],o=t[1+n],u=t[2+n],p=t[3+n],m=z$(o,u,{mixer:BKe(u[0]),...p});return e?m(r):m}function MSe(t,e){const n=TSe(e()),r=()=>n.set(e());return r(),r9(()=>{const o=()=>_i.update(r,!1,!0),u=t.map(p=>p.on("change",o));return()=>{u.forEach(p=>p()),qc(r)}}),n}function VKe(t){DC.current=[],t();const e=MSe(DC.current,t);return DC.current=void 0,e}function jKe(t,e,n,r){if(typeof t=="function")return VKe(t);const o=typeof e=="function"?e:UKe(e,n,r);return Array.isArray(t)?K0e(t,o):K0e([t],([u])=>o(u))}function K0e(t,e){const n=HP(()=>[]);return MSe(t,()=>{n.length=0;const r=t.length;for(let o=0;o<r;o++)n[o]=t[o].get();return e(n)})}function q0e(t,e=0){return $s(t)?t:TSe(e)}function zKe({children:t,style:e={},value:n,as:r="li",onDrag:o,layout:u=!0,...p},m){const _=HP(()=>PSe(r)),x=nn.useContext(kSe),M={x:q0e(e.x),y:q0e(e.y)},R=jKe([M.x,M.y],([z,U])=>z||U?1:"unset"),N=nn.useRef(null),{axis:G,registerItem:Z,updateOrder:j}=x;return nn.useEffect(()=>{Z(n,N.current)},[x]),nn.createElement(_,{drag:G,...p,dragSnapToOrigin:!0,style:{...e,x:M.x,y:M.y,zIndex:R},layout:u,onDrag:(z,U)=>{const{velocity:C}=U;C[G]&&j(n,M[G].get(),C[G]),o&&o(z,U)},onLayoutMeasure:z=>{N.current=z},ref:m,ignoreStrict:!0},t)}const HKe=nn.forwardRef(zKe),ASe={Group:DKe,Item:HKe},GKe=Zt.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[Zt.jsx("circle",{cx:"7",cy:"7",r:"6"}),Zt.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),Zt.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),$Ke=Zt.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:Zt.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function WKe(t){return Zt.jsx(ASe.Item,{value:t.title,children:Zt.jsxs("div",{children:[$Ke,Zt.jsx("span",{children:t.title}),Zt.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:GKe})]})},t.title)}function KKe(t){const[e,n]=nn.useState(!1),[r,o]=nn.useState(t.options),u=x=>{t.onDragComplete(x),o(x)},p=x=>{const M=[...r];M.splice(x,1),u(M)},m=[];r.forEach((x,M)=>{m.push(Zt.jsx(WKe,{index:M,title:x,onDelete:p},x))});let _="dropdown draggable";return t.subdropdown&&(_+=" subdropdown"),Zt.jsxs("div",{className:_,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Zt.jsx(axe,{title:t.title}),Zt.jsx(ASe.Group,{axis:"y",values:r,onReorder:u,style:{visibility:e?"visible":"hidden"},children:m})]})}function qKe(t){const{option:e}=t,[n,r]=nn.useState("");let o=null;switch(e.type){case"draggable":o=Zt.jsx(KKe,{title:e.title,options:e.value,onDragComplete:u=>{e.onDragComplete!==void 0&&e.onDragComplete(u)},subdropdown:!0});break;case"dropdown":o=Zt.jsx(ISe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":o=Zt.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return Zt.jsx("li",{className:n===e.title?"selected":"",children:o},U3e())}function ISe(t){const[e,n]=nn.useState(!1),r=[];t.options.map((u,p)=>{t.onSelect!==void 0&&(u.onSelect=t.onSelect),r.push(Zt.jsx(qKe,{option:u},p))});let o="dropdown";return t.subdropdown&&(o+=" subdropdown"),Zt.jsxs("div",{className:o,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Zt.jsx(axe,{title:t.title}),Zt.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function RSe(t){const[e,n]=nn.useState(!1);let r=null,o=!1;if(t.child.children.length>0){o=!0;const u=[];t.child.children.map(p=>{u.push(Zt.jsx(RSe,{child:p},Math.random()))}),r=Zt.jsx("div",{className:`container ${e?"":"closed"}`,children:u})}return Zt.jsxs("div",{className:"childObject",children:[Zt.jsxs("div",{className:"child",children:[o?Zt.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,Zt.jsx("button",{className:"name",style:{left:o?"20px":"5px"},onClick:()=>{Zi.three.getObject(t.child.uuid)},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),Zt.jsx("div",{className:`icon ${z3e(t.child)}`})]}),r]},Math.random())}function XKe(t){const e=[];return t.child.children.map(n=>{e.push(Zt.jsx(RSe,{child:n},Math.random()))}),Zt.jsx("div",{className:`scene ${t.class}`,children:e})}function LD(t){const[e,n]=nn.useState(t.value),r=o=>{const u=o.target.value;n(u),t.onChange!==void 0&&t.onChange(t.label,u)};return Zt.jsxs("div",{className:"field",children:[Zt.jsx("label",{children:t.label},"fieldLabel"),t.type==="string"&&Zt.jsx("input",{type:"text",disabled:t.disabled,onChange:r,value:e}),t.type==="boolean"&&Zt.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:r,checked:e}),t.type==="number"&&Zt.jsx("input",{type:"number",value:e,min:t.min,max:t.max,step:t.step,onChange:r}),t.type==="range"&&Zt.jsxs(Zt.Fragment,{children:[Zt.jsx("input",{type:"text",value:e.toString(),onChange:r,className:"min"}),Zt.jsx("input",{disabled:t.disabled,type:"range",value:e,min:t.min,max:t.max,step:t.step,onChange:r})]})]})}function YKe(t){const[e,n]=nn.useState(-1),[r,o]=nn.useState({name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]});nn.useEffect(()=>{function x(M){const R=M.value;o({name:R.name,type:R.type,uuid:R.uuid,visible:R.visible,matrix:R.matrix}),n(Date.now())}return Mi.addEventListener(Ai.SET_OBJECT,x),()=>{Mi.removeEventListener(Ai.SET_OBJECT,x)}},[]);const u=new Ro;u.elements=r.matrix;const p=new ht,m=new FP,_=new ht;return r.uuid.length>0&&(p.setFromMatrixPosition(u),m.setFromRotationMatrix(u),_.setFromMatrixScale(u)),r.type,Zt.jsx("div",{id:"Inspector",className:t.class,children:r.uuid.length>0&&Zt.jsxs(Zt.Fragment,{children:[Zt.jsx(LD,{type:"string",label:"Name",value:r.name,disabled:!0}),Zt.jsx(LD,{type:"string",label:"Type",value:r.type,disabled:!0}),Zt.jsx(LD,{type:"string",label:"UUID",value:r.uuid,disabled:!0}),Zt.jsx(LD,{type:"boolean",label:"Visible",value:r.visible,onChange:(x,M)=>{console.log("Send GUI change:",x,M),Zi.three.updateObject(r.uuid,"visible",M)}})]})},e)}class ZKe extends nn.Component{constructor(n){super(n);ki(this,"onRefresh",()=>{Zi.three.getScene()});ki(this,"toggleOpen",()=>{this.setState(()=>({open:!this.componentState.open}))});ki(this,"setScene",n=>{this.setState(()=>({scene:n.value}))});this.state={mode:"Hierarchy",open:!1,scene:null},Mi.addEventListener(Ai.SET_SCENE,this.setScene)}componentWillUnmount(){Mi.removeEventListener(Ai.SET_SCENE,this.setScene)}render(){const n=this.componentState.scene!==null,r=this.componentState.open&&this.mode==="Hierarchy";return Zt.jsxs("div",{id:"SceneHierarchy",children:[Zt.jsxs("ul",{id:"options",children:[n&&Zt.jsx("li",{className:"icon",children:Zt.jsx("button",{className:"status",onClick:this.toggleOpen,style:{backgroundPositionX:this.componentState.open?"-14px":"2px"},children:"Toggle"})}),Zt.jsx("li",{className:"icon",children:Zt.jsx("button",{className:"refresh",onClick:this.onRefresh,children:"Refresh"})}),Zt.jsx("li",{className:this.mode==="Hierarchy"?"selected":"",children:Zt.jsx("button",{onClick:()=>{this.mode="Hierarchy"},children:"Hierarchy"})}),Zt.jsx("li",{className:this.mode==="Inspector"?"selected":"",children:Zt.jsx("button",{onClick:()=>{this.mode="Inspector"},children:"Inspector"})})]}),Zt.jsxs("div",{children:[n&&Zt.jsx(XKe,{class:r?"":"hidden",child:this.componentState.scene}),Zt.jsx(YKe,{class:this.mode==="Inspector"?"":"hidden"},"Inspector")]})]},"SceneHierarchy")}get componentState(){return this.state}get mode(){return this.componentState.mode}set mode(n){this.setState(()=>({mode:n}))}}function QKe(){return Zt.jsx(SGe,{header:[Zt.jsx(ISe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:t=>{Zi.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:t}})}},"Scenes")],footer:[Zt.jsx(ZKe,{},"SceneHierarchy")]})}function JKe(t){let e;const n=t.editor?"editor":"app";function r(m){var x,M,R,N,G,Z,j,z,U;let _;switch(m.event){case"custom":Mi.dispatchEvent({type:Ai.CUSTOM,value:m.data});break;case"selectComponent":Mi.dispatchEvent({type:Ai.SELECT_DROPDOWN,value:m.data});break;case"draggableListUpdate":Mi.dispatchEvent({type:Ai.DRAG_UPDATE,value:m.data});break;case"addFolder":(x=t.components.get("debug"))==null||x.addFolder(m.data.name,m.data.params,m.data.parent);break;case"bindObject":(M=t.components.get("debug"))==null||M.bind(m.data.name,m.data.params,m.data.parent);break;case"updateBind":(R=t.components.get("debug"))==null||R.triggerBind(m.data.id,m.data.value);break;case"addButton":(N=t.components.get("debug"))==null||N.button(m.data.name,m.data.callback,m.data.parent);break;case"clickButton":(G=t.components.get("debug"))==null||G.triggerButton(m.data.id);break;case"setSheet":_=(Z=t.components.get("theatre"))==null?void 0:Z.sheets.get(m.data.sheet),_!==void 0&&(e=_,r_.setSelection([_]));break;case"setSheetObject":_=(j=t.components.get("theatre"))==null?void 0:j.sheetObjects.get(`${m.data.sheet}_${m.data.key}`),_!==void 0&&r_.setSelection([_]);break;case"updateSheetObject":_=(z=t.components.get("theatre"))==null?void 0:z.sheetObjectCBs.get(m.data.sheetObject),_!==void 0&&_(m.data.values);break;case"updateTimeline":e=(U=t.components.get("theatre"))==null?void 0:U.sheets.get(m.data.sheet),e!==void 0&&(e.sequence.position=m.data.position);break;case"getScene":Mi.dispatchEvent({type:Ai.GET_SCENE});break;case"getObject":Mi.dispatchEvent({type:Ai.GET_OBJECT,value:m.data});break;case"updateObject":Mi.dispatchEvent({type:Ai.UPDATE_OBJECT,value:m.data});break}}function o(m){switch(m.event){case"custom":Mi.dispatchEvent({type:Ai.CUSTOM,value:m.data});break;case"setObject":Mi.dispatchEvent({type:Ai.SET_OBJECT,value:m.data});break;case"setScene":Mi.dispatchEvent({type:Ai.SET_SCENE,value:m.data});break}}function u(){r_.ui.hide()}function p(){r_.ui.restore(),r_.onSelectionChange(M=>{M.length<1||M.forEach(R=>{var j;let N=R.address.sheetId,G="setSheet",Z={};switch(R.type){case"Theatre_Sheet_PublicAPI":G="setSheet",Z={sheet:R.address.sheetId},e=(j=t.components.get("theatre"))==null?void 0:j.sheets.get(R.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":G="setSheetObject",N+=`_${R.address.objectKey}`,Z={id:N,sheet:R.address.sheetId,key:R.address.objectKey};break}t.send({event:G,target:"app",data:Z})})});let m=0;const _=()=>{if(e!==void 0&&m!==e.sequence.position){m=e.sequence.position;const M=e;t.send({event:"updateTimeline",target:"app",data:{position:m,sheet:M.address.sheetId}})}},x=()=>{_(),requestAnimationFrame(x)};_(),x()}t.listen(m=>{n==="app"?r(m):o(m)}),t.editor?p():u()}r_.initialize(),JKe(Zi);F8.createRoot(document.getElementById("root")).render(Zt.jsx(Zt.Fragment,{children:Zt.jsxs(Zt.Fragment,{children:[Zt.jsx(xGe,{}),Zi.editor?Zt.jsx(QKe,{}):null]})}));
